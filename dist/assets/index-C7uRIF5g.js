var qM=Object.defineProperty;var V1=n=>{throw TypeError(n)};var XM=(n,e,t)=>e in n?qM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var G=(n,e,t)=>XM(n,typeof e!="symbol"?e+"":e,t),mx=(n,e,t)=>e.has(n)||V1("Cannot "+t);var u=(n,e,t)=>(mx(n,e,"read from private field"),t?t.call(n):e.get(n)),E=(n,e,t)=>e.has(n)?V1("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),_=(n,e,t,s)=>(mx(n,e,"write to private field"),s?s.call(n,t):e.set(n,t),t),T=(n,e,t)=>(mx(n,e,"access private method"),t);var $t=(n,e,t,s)=>({set _(r){_(n,e,r,t)},get _(){return u(n,e,s)}});function HP(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in n)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();function JM(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function QM(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var r=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(t,s,r.get?r:{enumerable:!0,get:function(){return n[s]}})}),t}var zP={exports:{}},Tw={},GP={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jg=Symbol.for("react.element"),ZM=Symbol.for("react.portal"),eF=Symbol.for("react.fragment"),tF=Symbol.for("react.strict_mode"),nF=Symbol.for("react.profiler"),sF=Symbol.for("react.provider"),rF=Symbol.for("react.context"),iF=Symbol.for("react.forward_ref"),oF=Symbol.for("react.suspense"),aF=Symbol.for("react.memo"),lF=Symbol.for("react.lazy"),H1=Symbol.iterator;function cF(n){return n===null||typeof n!="object"?null:(n=H1&&n[H1]||n["@@iterator"],typeof n=="function"?n:null)}var WP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},YP=Object.assign,KP={};function uf(n,e,t){this.props=n,this.context=e,this.refs=KP,this.updater=t||WP}uf.prototype.isReactComponent={};uf.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};uf.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function qP(){}qP.prototype=uf.prototype;function CE(n,e,t){this.props=n,this.context=e,this.refs=KP,this.updater=t||WP}var kE=CE.prototype=new qP;kE.constructor=CE;YP(kE,uf.prototype);kE.isPureReactComponent=!0;var z1=Array.isArray,XP=Object.prototype.hasOwnProperty,NE={current:null},JP={key:!0,ref:!0,__self:!0,__source:!0};function QP(n,e,t){var s,r={},i=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)XP.call(e,s)&&!JP.hasOwnProperty(s)&&(r[s]=e[s]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(n&&n.defaultProps)for(s in a=n.defaultProps,a)r[s]===void 0&&(r[s]=a[s]);return{$$typeof:Jg,type:n,key:i,ref:o,props:r,_owner:NE.current}}function uF(n,e){return{$$typeof:Jg,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function PE(n){return typeof n=="object"&&n!==null&&n.$$typeof===Jg}function hF(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var G1=/\/+/g;function gx(n,e){return typeof n=="object"&&n!==null&&n.key!=null?hF(""+n.key):e.toString(36)}function c0(n,e,t,s,r){var i=typeof n;(i==="undefined"||i==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Jg:case ZM:o=!0}}if(o)return o=n,r=r(o),n=s===""?"."+gx(o,0):s,z1(r)?(t="",n!=null&&(t=n.replace(G1,"$&/")+"/"),c0(r,e,t,"",function(c){return c})):r!=null&&(PE(r)&&(r=uF(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(G1,"$&/")+"/")+n)),e.push(r)),1;if(o=0,s=s===""?".":s+":",z1(n))for(var a=0;a<n.length;a++){i=n[a];var l=s+gx(i,a);o+=c0(i,e,t,l,r)}else if(l=cF(n),typeof l=="function")for(n=l.call(n),a=0;!(i=n.next()).done;)i=i.value,l=s+gx(i,a++),o+=c0(i,e,t,l,r);else if(i==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function vy(n,e,t){if(n==null)return n;var s=[],r=0;return c0(n,s,"","",function(i){return e.call(t,i,r++)}),s}function dF(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Zn={current:null},u0={transition:null},fF={ReactCurrentDispatcher:Zn,ReactCurrentBatchConfig:u0,ReactCurrentOwner:NE};function ZP(){throw Error("act(...) is not supported in production builds of React.")}xe.Children={map:vy,forEach:function(n,e,t){vy(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return vy(n,function(){e++}),e},toArray:function(n){return vy(n,function(e){return e})||[]},only:function(n){if(!PE(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};xe.Component=uf;xe.Fragment=eF;xe.Profiler=nF;xe.PureComponent=CE;xe.StrictMode=tF;xe.Suspense=oF;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fF;xe.act=ZP;xe.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var s=YP({},n.props),r=n.key,i=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=NE.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)XP.call(e,l)&&!JP.hasOwnProperty(l)&&(s[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)s.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];s.children=a}return{$$typeof:Jg,type:n.type,key:r,ref:i,props:s,_owner:o}};xe.createContext=function(n){return n={$$typeof:rF,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:sF,_context:n},n.Consumer=n};xe.createElement=QP;xe.createFactory=function(n){var e=QP.bind(null,n);return e.type=n,e};xe.createRef=function(){return{current:null}};xe.forwardRef=function(n){return{$$typeof:iF,render:n}};xe.isValidElement=PE;xe.lazy=function(n){return{$$typeof:lF,_payload:{_status:-1,_result:n},_init:dF}};xe.memo=function(n,e){return{$$typeof:aF,type:n,compare:e===void 0?null:e}};xe.startTransition=function(n){var e=u0.transition;u0.transition={};try{n()}finally{u0.transition=e}};xe.unstable_act=ZP;xe.useCallback=function(n,e){return Zn.current.useCallback(n,e)};xe.useContext=function(n){return Zn.current.useContext(n)};xe.useDebugValue=function(){};xe.useDeferredValue=function(n){return Zn.current.useDeferredValue(n)};xe.useEffect=function(n,e){return Zn.current.useEffect(n,e)};xe.useId=function(){return Zn.current.useId()};xe.useImperativeHandle=function(n,e,t){return Zn.current.useImperativeHandle(n,e,t)};xe.useInsertionEffect=function(n,e){return Zn.current.useInsertionEffect(n,e)};xe.useLayoutEffect=function(n,e){return Zn.current.useLayoutEffect(n,e)};xe.useMemo=function(n,e){return Zn.current.useMemo(n,e)};xe.useReducer=function(n,e,t){return Zn.current.useReducer(n,e,t)};xe.useRef=function(n){return Zn.current.useRef(n)};xe.useState=function(n){return Zn.current.useState(n)};xe.useSyncExternalStore=function(n,e,t){return Zn.current.useSyncExternalStore(n,e,t)};xe.useTransition=function(){return Zn.current.useTransition()};xe.version="18.3.1";GP.exports=xe;var k=GP.exports;const Jt=JM(k),pF=HP({__proto__:null,default:Jt},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mF=k,gF=Symbol.for("react.element"),yF=Symbol.for("react.fragment"),vF=Object.prototype.hasOwnProperty,wF=mF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xF={key:!0,ref:!0,__self:!0,__source:!0};function e2(n,e,t){var s,r={},i=null,o=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)vF.call(e,s)&&!xF.hasOwnProperty(s)&&(r[s]=e[s]);if(n&&n.defaultProps)for(s in e=n.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:gF,type:n,key:i,ref:o,props:r,_owner:wF.current}}Tw.Fragment=yF;Tw.jsx=e2;Tw.jsxs=e2;zP.exports=Tw;var d=zP.exports,Tb={},t2={exports:{}},Js={},n2={exports:{}},s2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(I,j){var L=I.length;I.push(j);e:for(;0<L;){var D=L-1>>>1,V=I[D];if(0<r(V,j))I[D]=j,I[L]=V,L=D;else break e}}function t(I){return I.length===0?null:I[0]}function s(I){if(I.length===0)return null;var j=I[0],L=I.pop();if(L!==j){I[0]=L;e:for(var D=0,V=I.length,F=V>>>1;D<F;){var H=2*(D+1)-1,se=I[H],ae=H+1,re=I[ae];if(0>r(se,L))ae<V&&0>r(re,se)?(I[D]=re,I[ae]=L,D=ae):(I[D]=se,I[H]=L,D=H);else if(ae<V&&0>r(re,L))I[D]=re,I[ae]=L,D=ae;else break e}}return j}function r(I,j){var L=I.sortIndex-j.sortIndex;return L!==0?L:I.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,f=null,p=3,m=!1,y=!1,w=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(I){for(var j=t(c);j!==null;){if(j.callback===null)s(c);else if(j.startTime<=I)s(c),j.sortIndex=j.expirationTime,e(l,j);else break;j=t(c)}}function S(I){if(w=!1,x(I),!y)if(t(l)!==null)y=!0,$(A);else{var j=t(c);j!==null&&B(S,j.startTime-I)}}function A(I,j){y=!1,w&&(w=!1,g(P),P=-1),m=!0;var L=p;try{for(x(j),f=t(l);f!==null&&(!(f.expirationTime>j)||I&&!M());){var D=f.callback;if(typeof D=="function"){f.callback=null,p=f.priorityLevel;var V=D(f.expirationTime<=j);j=n.unstable_now(),typeof V=="function"?f.callback=V:f===t(l)&&s(l),x(j)}else s(l);f=t(l)}if(f!==null)var F=!0;else{var H=t(c);H!==null&&B(S,H.startTime-j),F=!1}return F}finally{f=null,p=L,m=!1}}var C=!1,N=null,P=-1,R=5,O=-1;function M(){return!(n.unstable_now()-O<R)}function Y(){if(N!==null){var I=n.unstable_now();O=I;var j=!0;try{j=N(!0,I)}finally{j?J():(C=!1,N=null)}}else C=!1}var J;if(typeof v=="function")J=function(){v(Y)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,z=U.port2;U.port1.onmessage=Y,J=function(){z.postMessage(null)}}else J=function(){b(Y,0)};function $(I){N=I,C||(C=!0,J())}function B(I,j){P=b(function(){I(n.unstable_now())},j)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(I){I.callback=null},n.unstable_continueExecution=function(){y||m||(y=!0,$(A))},n.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<I?Math.floor(1e3/I):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(I){switch(p){case 1:case 2:case 3:var j=3;break;default:j=p}var L=p;p=j;try{return I()}finally{p=L}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(I,j){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var L=p;p=I;try{return j()}finally{p=L}},n.unstable_scheduleCallback=function(I,j,L){var D=n.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?D+L:D):L=D,I){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=L+V,I={id:h++,callback:j,priorityLevel:I,startTime:L,expirationTime:V,sortIndex:-1},L>D?(I.sortIndex=L,e(c,I),t(l)===null&&I===t(c)&&(w?(g(P),P=-1):w=!0,B(S,L-D))):(I.sortIndex=V,e(l,I),y||m||(y=!0,$(A))),I},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(I){var j=p;return function(){var L=p;p=j;try{return I.apply(this,arguments)}finally{p=L}}}})(s2);n2.exports=s2;var bF=n2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _F=k,qs=bF;function W(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r2=new Set,Ip={};function Au(n,e){Qd(n,e),Qd(n+"Capture",e)}function Qd(n,e){for(Ip[n]=e,n=0;n<e.length;n++)r2.add(e[n])}var Ho=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cb=Object.prototype.hasOwnProperty,SF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,W1={},Y1={};function EF(n){return Cb.call(Y1,n)?!0:Cb.call(W1,n)?!1:SF.test(n)?Y1[n]=!0:(W1[n]=!0,!1)}function AF(n,e,t,s){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function TF(n,e,t,s){if(e===null||typeof e>"u"||AF(n,e,t,s))return!0;if(s)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function es(n,e,t,s,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var An={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){An[n]=new es(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];An[e]=new es(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){An[n]=new es(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){An[n]=new es(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){An[n]=new es(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){An[n]=new es(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){An[n]=new es(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){An[n]=new es(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){An[n]=new es(n,5,!1,n.toLowerCase(),null,!1,!1)});var RE=/[\-:]([a-z])/g;function IE(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(RE,IE);An[e]=new es(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(RE,IE);An[e]=new es(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(RE,IE);An[e]=new es(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){An[n]=new es(n,1,!1,n.toLowerCase(),null,!1,!1)});An.xlinkHref=new es("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){An[n]=new es(n,1,!1,n.toLowerCase(),null,!0,!0)});function jE(n,e,t,s){var r=An.hasOwnProperty(e)?An[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(TF(e,t,r,s)&&(t=null),s||r===null?EF(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,s=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,s?n.setAttributeNS(s,e,t):n.setAttribute(e,t))))}var Xo=_F.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wy=Symbol.for("react.element"),Ku=Symbol.for("react.portal"),qu=Symbol.for("react.fragment"),OE=Symbol.for("react.strict_mode"),kb=Symbol.for("react.profiler"),i2=Symbol.for("react.provider"),o2=Symbol.for("react.context"),LE=Symbol.for("react.forward_ref"),Nb=Symbol.for("react.suspense"),Pb=Symbol.for("react.suspense_list"),DE=Symbol.for("react.memo"),ra=Symbol.for("react.lazy"),a2=Symbol.for("react.offscreen"),K1=Symbol.iterator;function _f(n){return n===null||typeof n!="object"?null:(n=K1&&n[K1]||n["@@iterator"],typeof n=="function"?n:null)}var wt=Object.assign,yx;function Bf(n){if(yx===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);yx=e&&e[1]||""}return`
`+yx+n}var vx=!1;function wx(n,e){if(!n||vx)return"";vx=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var s=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){s=c}n.call(e.prototype)}else{try{throw Error()}catch(c){s=c}n()}}catch(c){if(c&&s&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),i=s.stack.split(`
`),o=r.length-1,a=i.length-1;1<=o&&0<=a&&r[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==i[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{vx=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Bf(n):""}function CF(n){switch(n.tag){case 5:return Bf(n.type);case 16:return Bf("Lazy");case 13:return Bf("Suspense");case 19:return Bf("SuspenseList");case 0:case 2:case 15:return n=wx(n.type,!1),n;case 11:return n=wx(n.type.render,!1),n;case 1:return n=wx(n.type,!0),n;default:return""}}function Rb(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case qu:return"Fragment";case Ku:return"Portal";case kb:return"Profiler";case OE:return"StrictMode";case Nb:return"Suspense";case Pb:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case o2:return(n.displayName||"Context")+".Consumer";case i2:return(n._context.displayName||"Context")+".Provider";case LE:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case DE:return e=n.displayName||null,e!==null?e:Rb(n.type)||"Memo";case ra:e=n._payload,n=n._init;try{return Rb(n(e))}catch{}}return null}function kF(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rb(e);case 8:return e===OE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function hl(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function l2(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function NF(n){var e=l2(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),s=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,i=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function xy(n){n._valueTracker||(n._valueTracker=NF(n))}function c2(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),s="";return n&&(s=l2(n)?n.checked?"true":"false":n.value),n=s,n!==t?(e.setValue(n),!0):!1}function cv(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Ib(n,e){var t=e.checked;return wt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function q1(n,e){var t=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;t=hl(e.value!=null?e.value:t),n._wrapperState={initialChecked:s,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function u2(n,e){e=e.checked,e!=null&&jE(n,"checked",e,!1)}function jb(n,e){u2(n,e);var t=hl(e.value),s=e.type;if(t!=null)s==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(s==="submit"||s==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Ob(n,e.type,t):e.hasOwnProperty("defaultValue")&&Ob(n,e.type,hl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function X1(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Ob(n,e,t){(e!=="number"||cv(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Uf=Array.isArray;function yh(n,e,t,s){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&s&&(n[t].defaultSelected=!0)}else{for(t=""+hl(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,s&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function Lb(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return wt({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function J1(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(W(92));if(Uf(t)){if(1<t.length)throw Error(W(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:hl(t)}}function h2(n,e){var t=hl(e.value),s=hl(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),s!=null&&(n.defaultValue=""+s)}function Q1(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function d2(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Db(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?d2(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var by,f2=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,s,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,s,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(by=by||document.createElement("div"),by.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=by.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function jp(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var mp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},PF=["Webkit","ms","Moz","O"];Object.keys(mp).forEach(function(n){PF.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),mp[e]=mp[n]})});function p2(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||mp.hasOwnProperty(n)&&mp[n]?(""+e).trim():e+"px"}function m2(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var s=t.indexOf("--")===0,r=p2(t,e[t],s);t==="float"&&(t="cssFloat"),s?n.setProperty(t,r):n[t]=r}}var RF=wt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mb(n,e){if(e){if(RF[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function Fb(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bb=null;function ME(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ub=null,vh=null,wh=null;function Z1(n){if(n=ey(n)){if(typeof Ub!="function")throw Error(W(280));var e=n.stateNode;e&&(e=Rw(e),Ub(n.stateNode,n.type,e))}}function g2(n){vh?wh?wh.push(n):wh=[n]:vh=n}function y2(){if(vh){var n=vh,e=wh;if(wh=vh=null,Z1(n),e)for(n=0;n<e.length;n++)Z1(e[n])}}function v2(n,e){return n(e)}function w2(){}var xx=!1;function x2(n,e,t){if(xx)return n(e,t);xx=!0;try{return v2(n,e,t)}finally{xx=!1,(vh!==null||wh!==null)&&(w2(),y2())}}function Op(n,e){var t=n.stateNode;if(t===null)return null;var s=Rw(t);if(s===null)return null;t=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(n=n.type,s=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!s;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(W(231,e,typeof t));return t}var $b=!1;if(Ho)try{var Sf={};Object.defineProperty(Sf,"passive",{get:function(){$b=!0}}),window.addEventListener("test",Sf,Sf),window.removeEventListener("test",Sf,Sf)}catch{$b=!1}function IF(n,e,t,s,r,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(h){this.onError(h)}}var gp=!1,uv=null,hv=!1,Vb=null,jF={onError:function(n){gp=!0,uv=n}};function OF(n,e,t,s,r,i,o,a,l){gp=!1,uv=null,IF.apply(jF,arguments)}function LF(n,e,t,s,r,i,o,a,l){if(OF.apply(this,arguments),gp){if(gp){var c=uv;gp=!1,uv=null}else throw Error(W(198));hv||(hv=!0,Vb=c)}}function Tu(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function b2(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function eT(n){if(Tu(n)!==n)throw Error(W(188))}function DF(n){var e=n.alternate;if(!e){if(e=Tu(n),e===null)throw Error(W(188));return e!==n?null:n}for(var t=n,s=e;;){var r=t.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){t=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===t)return eT(r),n;if(i===s)return eT(r),e;i=i.sibling}throw Error(W(188))}if(t.return!==s.return)t=r,s=i;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,s=i;break}if(a===s){o=!0,s=r,t=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===t){o=!0,t=i,s=r;break}if(a===s){o=!0,s=i,t=r;break}a=a.sibling}if(!o)throw Error(W(189))}}if(t.alternate!==s)throw Error(W(190))}if(t.tag!==3)throw Error(W(188));return t.stateNode.current===t?n:e}function _2(n){return n=DF(n),n!==null?S2(n):null}function S2(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=S2(n);if(e!==null)return e;n=n.sibling}return null}var E2=qs.unstable_scheduleCallback,tT=qs.unstable_cancelCallback,MF=qs.unstable_shouldYield,FF=qs.unstable_requestPaint,jt=qs.unstable_now,BF=qs.unstable_getCurrentPriorityLevel,FE=qs.unstable_ImmediatePriority,A2=qs.unstable_UserBlockingPriority,dv=qs.unstable_NormalPriority,UF=qs.unstable_LowPriority,T2=qs.unstable_IdlePriority,Cw=null,ji=null;function $F(n){if(ji&&typeof ji.onCommitFiberRoot=="function")try{ji.onCommitFiberRoot(Cw,n,void 0,(n.current.flags&128)===128)}catch{}}var Jr=Math.clz32?Math.clz32:zF,VF=Math.log,HF=Math.LN2;function zF(n){return n>>>=0,n===0?32:31-(VF(n)/HF|0)|0}var _y=64,Sy=4194304;function $f(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function fv(n,e){var t=n.pendingLanes;if(t===0)return 0;var s=0,r=n.suspendedLanes,i=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?s=$f(a):(i&=o,i!==0&&(s=$f(i)))}else o=t&~r,o!==0?s=$f(o):i!==0&&(s=$f(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(s&4&&(s|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=s;0<e;)t=31-Jr(e),r=1<<t,s|=n[t],e&=~r;return s}function GF(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function WF(n,e){for(var t=n.suspendedLanes,s=n.pingedLanes,r=n.expirationTimes,i=n.pendingLanes;0<i;){var o=31-Jr(i),a=1<<o,l=r[o];l===-1?(!(a&t)||a&s)&&(r[o]=GF(a,e)):l<=e&&(n.expiredLanes|=a),i&=~a}}function Hb(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function C2(){var n=_y;return _y<<=1,!(_y&4194240)&&(_y=64),n}function bx(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Qg(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Jr(e),n[e]=t}function YF(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var s=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-Jr(t),i=1<<r;e[r]=0,s[r]=-1,n[r]=-1,t&=~i}}function BE(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var s=31-Jr(t),r=1<<s;r&e|n[s]&e&&(n[s]|=e),t&=~r}}var Le=0;function k2(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var N2,UE,P2,R2,I2,zb=!1,Ey=[],sl=null,rl=null,il=null,Lp=new Map,Dp=new Map,oa=[],KF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nT(n,e){switch(n){case"focusin":case"focusout":sl=null;break;case"dragenter":case"dragleave":rl=null;break;case"mouseover":case"mouseout":il=null;break;case"pointerover":case"pointerout":Lp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dp.delete(e.pointerId)}}function Ef(n,e,t,s,r,i){return n===null||n.nativeEvent!==i?(n={blockedOn:e,domEventName:t,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=ey(e),e!==null&&UE(e)),n):(n.eventSystemFlags|=s,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function qF(n,e,t,s,r){switch(e){case"focusin":return sl=Ef(sl,n,e,t,s,r),!0;case"dragenter":return rl=Ef(rl,n,e,t,s,r),!0;case"mouseover":return il=Ef(il,n,e,t,s,r),!0;case"pointerover":var i=r.pointerId;return Lp.set(i,Ef(Lp.get(i)||null,n,e,t,s,r)),!0;case"gotpointercapture":return i=r.pointerId,Dp.set(i,Ef(Dp.get(i)||null,n,e,t,s,r)),!0}return!1}function j2(n){var e=Yl(n.target);if(e!==null){var t=Tu(e);if(t!==null){if(e=t.tag,e===13){if(e=b2(t),e!==null){n.blockedOn=e,I2(n.priority,function(){P2(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function h0(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Gb(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var s=new t.constructor(t.type,t);Bb=s,t.target.dispatchEvent(s),Bb=null}else return e=ey(t),e!==null&&UE(e),n.blockedOn=t,!1;e.shift()}return!0}function sT(n,e,t){h0(n)&&t.delete(e)}function XF(){zb=!1,sl!==null&&h0(sl)&&(sl=null),rl!==null&&h0(rl)&&(rl=null),il!==null&&h0(il)&&(il=null),Lp.forEach(sT),Dp.forEach(sT)}function Af(n,e){n.blockedOn===e&&(n.blockedOn=null,zb||(zb=!0,qs.unstable_scheduleCallback(qs.unstable_NormalPriority,XF)))}function Mp(n){function e(r){return Af(r,n)}if(0<Ey.length){Af(Ey[0],n);for(var t=1;t<Ey.length;t++){var s=Ey[t];s.blockedOn===n&&(s.blockedOn=null)}}for(sl!==null&&Af(sl,n),rl!==null&&Af(rl,n),il!==null&&Af(il,n),Lp.forEach(e),Dp.forEach(e),t=0;t<oa.length;t++)s=oa[t],s.blockedOn===n&&(s.blockedOn=null);for(;0<oa.length&&(t=oa[0],t.blockedOn===null);)j2(t),t.blockedOn===null&&oa.shift()}var xh=Xo.ReactCurrentBatchConfig,pv=!0;function JF(n,e,t,s){var r=Le,i=xh.transition;xh.transition=null;try{Le=1,$E(n,e,t,s)}finally{Le=r,xh.transition=i}}function QF(n,e,t,s){var r=Le,i=xh.transition;xh.transition=null;try{Le=4,$E(n,e,t,s)}finally{Le=r,xh.transition=i}}function $E(n,e,t,s){if(pv){var r=Gb(n,e,t,s);if(r===null)Rx(n,e,s,mv,t),nT(n,s);else if(qF(r,n,e,t,s))s.stopPropagation();else if(nT(n,s),e&4&&-1<KF.indexOf(n)){for(;r!==null;){var i=ey(r);if(i!==null&&N2(i),i=Gb(n,e,t,s),i===null&&Rx(n,e,s,mv,t),i===r)break;r=i}r!==null&&s.stopPropagation()}else Rx(n,e,s,null,t)}}var mv=null;function Gb(n,e,t,s){if(mv=null,n=ME(s),n=Yl(n),n!==null)if(e=Tu(n),e===null)n=null;else if(t=e.tag,t===13){if(n=b2(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return mv=n,null}function O2(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(BF()){case FE:return 1;case A2:return 4;case dv:case UF:return 16;case T2:return 536870912;default:return 16}default:return 16}}var tl=null,VE=null,d0=null;function L2(){if(d0)return d0;var n,e=VE,t=e.length,s,r="value"in tl?tl.value:tl.textContent,i=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(s=1;s<=o&&e[t-s]===r[i-s];s++);return d0=r.slice(n,1<s?1-s:void 0)}function f0(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Ay(){return!0}function rT(){return!1}function Qs(n){function e(t,s,r,i,o){this._reactName=t,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ay:rT,this.isPropagationStopped=rT,this}return wt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Ay)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Ay)},persist:function(){},isPersistent:Ay}),e}var hf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},HE=Qs(hf),Zg=wt({},hf,{view:0,detail:0}),ZF=Qs(Zg),_x,Sx,Tf,kw=wt({},Zg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zE,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Tf&&(Tf&&n.type==="mousemove"?(_x=n.screenX-Tf.screenX,Sx=n.screenY-Tf.screenY):Sx=_x=0,Tf=n),_x)},movementY:function(n){return"movementY"in n?n.movementY:Sx}}),iT=Qs(kw),eB=wt({},kw,{dataTransfer:0}),tB=Qs(eB),nB=wt({},Zg,{relatedTarget:0}),Ex=Qs(nB),sB=wt({},hf,{animationName:0,elapsedTime:0,pseudoElement:0}),rB=Qs(sB),iB=wt({},hf,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),oB=Qs(iB),aB=wt({},hf,{data:0}),oT=Qs(aB),lB={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cB={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uB={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hB(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=uB[n])?!!e[n]:!1}function zE(){return hB}var dB=wt({},Zg,{key:function(n){if(n.key){var e=lB[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=f0(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?cB[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zE,charCode:function(n){return n.type==="keypress"?f0(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?f0(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),fB=Qs(dB),pB=wt({},kw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),aT=Qs(pB),mB=wt({},Zg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zE}),gB=Qs(mB),yB=wt({},hf,{propertyName:0,elapsedTime:0,pseudoElement:0}),vB=Qs(yB),wB=wt({},kw,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),xB=Qs(wB),bB=[9,13,27,32],GE=Ho&&"CompositionEvent"in window,yp=null;Ho&&"documentMode"in document&&(yp=document.documentMode);var _B=Ho&&"TextEvent"in window&&!yp,D2=Ho&&(!GE||yp&&8<yp&&11>=yp),lT=" ",cT=!1;function M2(n,e){switch(n){case"keyup":return bB.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function F2(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Xu=!1;function SB(n,e){switch(n){case"compositionend":return F2(e);case"keypress":return e.which!==32?null:(cT=!0,lT);case"textInput":return n=e.data,n===lT&&cT?null:n;default:return null}}function EB(n,e){if(Xu)return n==="compositionend"||!GE&&M2(n,e)?(n=L2(),d0=VE=tl=null,Xu=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return D2&&e.locale!=="ko"?null:e.data;default:return null}}var AB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uT(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!AB[n.type]:e==="textarea"}function B2(n,e,t,s){g2(s),e=gv(e,"onChange"),0<e.length&&(t=new HE("onChange","change",null,t,s),n.push({event:t,listeners:e}))}var vp=null,Fp=null;function TB(n){X2(n,0)}function Nw(n){var e=Zu(n);if(c2(e))return n}function CB(n,e){if(n==="change")return e}var U2=!1;if(Ho){var Ax;if(Ho){var Tx="oninput"in document;if(!Tx){var hT=document.createElement("div");hT.setAttribute("oninput","return;"),Tx=typeof hT.oninput=="function"}Ax=Tx}else Ax=!1;U2=Ax&&(!document.documentMode||9<document.documentMode)}function dT(){vp&&(vp.detachEvent("onpropertychange",$2),Fp=vp=null)}function $2(n){if(n.propertyName==="value"&&Nw(Fp)){var e=[];B2(e,Fp,n,ME(n)),x2(TB,e)}}function kB(n,e,t){n==="focusin"?(dT(),vp=e,Fp=t,vp.attachEvent("onpropertychange",$2)):n==="focusout"&&dT()}function NB(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Nw(Fp)}function PB(n,e){if(n==="click")return Nw(e)}function RB(n,e){if(n==="input"||n==="change")return Nw(e)}function IB(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Zr=typeof Object.is=="function"?Object.is:IB;function Bp(n,e){if(Zr(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),s=Object.keys(e);if(t.length!==s.length)return!1;for(s=0;s<t.length;s++){var r=t[s];if(!Cb.call(e,r)||!Zr(n[r],e[r]))return!1}return!0}function fT(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function pT(n,e){var t=fT(n);n=0;for(var s;t;){if(t.nodeType===3){if(s=n+t.textContent.length,n<=e&&s>=e)return{node:t,offset:e-n};n=s}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=fT(t)}}function V2(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?V2(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function H2(){for(var n=window,e=cv();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=cv(n.document)}return e}function WE(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function jB(n){var e=H2(),t=n.focusedElem,s=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&V2(t.ownerDocument.documentElement,t)){if(s!==null&&WE(t)){if(e=s.start,n=s.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!n.extend&&i>s&&(r=s,s=i,i=r),r=pT(t,i);var o=pT(t,s);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),i>s?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var OB=Ho&&"documentMode"in document&&11>=document.documentMode,Ju=null,Wb=null,wp=null,Yb=!1;function mT(n,e,t){var s=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Yb||Ju==null||Ju!==cv(s)||(s=Ju,"selectionStart"in s&&WE(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),wp&&Bp(wp,s)||(wp=s,s=gv(Wb,"onSelect"),0<s.length&&(e=new HE("onSelect","select",null,e,t),n.push({event:e,listeners:s}),e.target=Ju)))}function Ty(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Qu={animationend:Ty("Animation","AnimationEnd"),animationiteration:Ty("Animation","AnimationIteration"),animationstart:Ty("Animation","AnimationStart"),transitionend:Ty("Transition","TransitionEnd")},Cx={},z2={};Ho&&(z2=document.createElement("div").style,"AnimationEvent"in window||(delete Qu.animationend.animation,delete Qu.animationiteration.animation,delete Qu.animationstart.animation),"TransitionEvent"in window||delete Qu.transitionend.transition);function Pw(n){if(Cx[n])return Cx[n];if(!Qu[n])return n;var e=Qu[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in z2)return Cx[n]=e[t];return n}var G2=Pw("animationend"),W2=Pw("animationiteration"),Y2=Pw("animationstart"),K2=Pw("transitionend"),q2=new Map,gT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wl(n,e){q2.set(n,e),Au(e,[n])}for(var kx=0;kx<gT.length;kx++){var Nx=gT[kx],LB=Nx.toLowerCase(),DB=Nx[0].toUpperCase()+Nx.slice(1);wl(LB,"on"+DB)}wl(G2,"onAnimationEnd");wl(W2,"onAnimationIteration");wl(Y2,"onAnimationStart");wl("dblclick","onDoubleClick");wl("focusin","onFocus");wl("focusout","onBlur");wl(K2,"onTransitionEnd");Qd("onMouseEnter",["mouseout","mouseover"]);Qd("onMouseLeave",["mouseout","mouseover"]);Qd("onPointerEnter",["pointerout","pointerover"]);Qd("onPointerLeave",["pointerout","pointerover"]);Au("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Au("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Au("onBeforeInput",["compositionend","keypress","textInput","paste"]);Au("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Au("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Au("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MB=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vf));function yT(n,e,t){var s=n.type||"unknown-event";n.currentTarget=t,LF(s,e,void 0,n),n.currentTarget=null}function X2(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var s=n[t],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var o=s.length-1;0<=o;o--){var a=s[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&r.isPropagationStopped())break e;yT(r,a,c),i=l}else for(o=0;o<s.length;o++){if(a=s[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&r.isPropagationStopped())break e;yT(r,a,c),i=l}}}if(hv)throw n=Vb,hv=!1,Vb=null,n}function rt(n,e){var t=e[Qb];t===void 0&&(t=e[Qb]=new Set);var s=n+"__bubble";t.has(s)||(J2(e,n,2,!1),t.add(s))}function Px(n,e,t){var s=0;e&&(s|=4),J2(t,n,s,e)}var Cy="_reactListening"+Math.random().toString(36).slice(2);function Up(n){if(!n[Cy]){n[Cy]=!0,r2.forEach(function(t){t!=="selectionchange"&&(MB.has(t)||Px(t,!1,n),Px(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Cy]||(e[Cy]=!0,Px("selectionchange",!1,e))}}function J2(n,e,t,s){switch(O2(e)){case 1:var r=JF;break;case 4:r=QF;break;default:r=$E}t=r.bind(null,e,t,n),r=void 0,!$b||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function Rx(n,e,t,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var a=s.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=s.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Yl(a),o===null)return;if(l=o.tag,l===5||l===6){s=i=o;continue e}a=a.parentNode}}s=s.return}x2(function(){var c=i,h=ME(t),f=[];e:{var p=q2.get(n);if(p!==void 0){var m=HE,y=n;switch(n){case"keypress":if(f0(t)===0)break e;case"keydown":case"keyup":m=fB;break;case"focusin":y="focus",m=Ex;break;case"focusout":y="blur",m=Ex;break;case"beforeblur":case"afterblur":m=Ex;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=iT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=tB;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=gB;break;case G2:case W2:case Y2:m=rB;break;case K2:m=vB;break;case"scroll":m=ZF;break;case"wheel":m=xB;break;case"copy":case"cut":case"paste":m=oB;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=aT}var w=(e&4)!==0,b=!w&&n==="scroll",g=w?p!==null?p+"Capture":null:p;w=[];for(var v=c,x;v!==null;){x=v;var S=x.stateNode;if(x.tag===5&&S!==null&&(x=S,g!==null&&(S=Op(v,g),S!=null&&w.push($p(v,S,x)))),b)break;v=v.return}0<w.length&&(p=new m(p,y,null,t,h),f.push({event:p,listeners:w}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==Bb&&(y=t.relatedTarget||t.fromElement)&&(Yl(y)||y[zo]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(y=t.relatedTarget||t.toElement,m=c,y=y?Yl(y):null,y!==null&&(b=Tu(y),y!==b||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=c),m!==y)){if(w=iT,S="onMouseLeave",g="onMouseEnter",v="mouse",(n==="pointerout"||n==="pointerover")&&(w=aT,S="onPointerLeave",g="onPointerEnter",v="pointer"),b=m==null?p:Zu(m),x=y==null?p:Zu(y),p=new w(S,v+"leave",m,t,h),p.target=b,p.relatedTarget=x,S=null,Yl(h)===c&&(w=new w(g,v+"enter",y,t,h),w.target=x,w.relatedTarget=b,S=w),b=S,m&&y)t:{for(w=m,g=y,v=0,x=w;x;x=Ru(x))v++;for(x=0,S=g;S;S=Ru(S))x++;for(;0<v-x;)w=Ru(w),v--;for(;0<x-v;)g=Ru(g),x--;for(;v--;){if(w===g||g!==null&&w===g.alternate)break t;w=Ru(w),g=Ru(g)}w=null}else w=null;m!==null&&vT(f,p,m,w,!1),y!==null&&b!==null&&vT(f,b,y,w,!0)}}e:{if(p=c?Zu(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var A=CB;else if(uT(p))if(U2)A=RB;else{A=NB;var C=kB}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(A=PB);if(A&&(A=A(n,c))){B2(f,A,t,h);break e}C&&C(n,p,c),n==="focusout"&&(C=p._wrapperState)&&C.controlled&&p.type==="number"&&Ob(p,"number",p.value)}switch(C=c?Zu(c):window,n){case"focusin":(uT(C)||C.contentEditable==="true")&&(Ju=C,Wb=c,wp=null);break;case"focusout":wp=Wb=Ju=null;break;case"mousedown":Yb=!0;break;case"contextmenu":case"mouseup":case"dragend":Yb=!1,mT(f,t,h);break;case"selectionchange":if(OB)break;case"keydown":case"keyup":mT(f,t,h)}var N;if(GE)e:{switch(n){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Xu?M2(n,t)&&(P="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(P="onCompositionStart");P&&(D2&&t.locale!=="ko"&&(Xu||P!=="onCompositionStart"?P==="onCompositionEnd"&&Xu&&(N=L2()):(tl=h,VE="value"in tl?tl.value:tl.textContent,Xu=!0)),C=gv(c,P),0<C.length&&(P=new oT(P,n,null,t,h),f.push({event:P,listeners:C}),N?P.data=N:(N=F2(t),N!==null&&(P.data=N)))),(N=_B?SB(n,t):EB(n,t))&&(c=gv(c,"onBeforeInput"),0<c.length&&(h=new oT("onBeforeInput","beforeinput",null,t,h),f.push({event:h,listeners:c}),h.data=N))}X2(f,e)})}function $p(n,e,t){return{instance:n,listener:e,currentTarget:t}}function gv(n,e){for(var t=e+"Capture",s=[];n!==null;){var r=n,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=Op(n,t),i!=null&&s.unshift($p(n,i,r)),i=Op(n,e),i!=null&&s.push($p(n,i,r))),n=n.return}return s}function Ru(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function vT(n,e,t,s,r){for(var i=e._reactName,o=[];t!==null&&t!==s;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===s)break;a.tag===5&&c!==null&&(a=c,r?(l=Op(t,i),l!=null&&o.unshift($p(t,l,a))):r||(l=Op(t,i),l!=null&&o.push($p(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var FB=/\r\n?/g,BB=/\u0000|\uFFFD/g;function wT(n){return(typeof n=="string"?n:""+n).replace(FB,`
`).replace(BB,"")}function ky(n,e,t){if(e=wT(e),wT(n)!==e&&t)throw Error(W(425))}function yv(){}var Kb=null,qb=null;function Xb(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Jb=typeof setTimeout=="function"?setTimeout:void 0,UB=typeof clearTimeout=="function"?clearTimeout:void 0,xT=typeof Promise=="function"?Promise:void 0,$B=typeof queueMicrotask=="function"?queueMicrotask:typeof xT<"u"?function(n){return xT.resolve(null).then(n).catch(VB)}:Jb;function VB(n){setTimeout(function(){throw n})}function Ix(n,e){var t=e,s=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(s===0){n.removeChild(r),Mp(e);return}s--}else t!=="$"&&t!=="$?"&&t!=="$!"||s++;t=r}while(t);Mp(e)}function ol(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function bT(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var df=Math.random().toString(36).slice(2),Pi="__reactFiber$"+df,Vp="__reactProps$"+df,zo="__reactContainer$"+df,Qb="__reactEvents$"+df,HB="__reactListeners$"+df,zB="__reactHandles$"+df;function Yl(n){var e=n[Pi];if(e)return e;for(var t=n.parentNode;t;){if(e=t[zo]||t[Pi]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=bT(n);n!==null;){if(t=n[Pi])return t;n=bT(n)}return e}n=t,t=n.parentNode}return null}function ey(n){return n=n[Pi]||n[zo],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Zu(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(W(33))}function Rw(n){return n[Vp]||null}var Zb=[],eh=-1;function xl(n){return{current:n}}function ot(n){0>eh||(n.current=Zb[eh],Zb[eh]=null,eh--)}function et(n,e){eh++,Zb[eh]=n.current,n.current=e}var dl={},Fn=xl(dl),ps=xl(!1),yu=dl;function Zd(n,e){var t=n.type.contextTypes;if(!t)return dl;var s=n.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in t)r[i]=e[i];return s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function ms(n){return n=n.childContextTypes,n!=null}function vv(){ot(ps),ot(Fn)}function _T(n,e,t){if(Fn.current!==dl)throw Error(W(168));et(Fn,e),et(ps,t)}function Q2(n,e,t){var s=n.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return t;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(W(108,kF(n)||"Unknown",r));return wt({},t,s)}function wv(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||dl,yu=Fn.current,et(Fn,n),et(ps,ps.current),!0}function ST(n,e,t){var s=n.stateNode;if(!s)throw Error(W(169));t?(n=Q2(n,e,yu),s.__reactInternalMemoizedMergedChildContext=n,ot(ps),ot(Fn),et(Fn,n)):ot(ps),et(ps,t)}var Zi=null,Iw=!1,jx=!1;function Z2(n){Zi===null?Zi=[n]:Zi.push(n)}function GB(n){Iw=!0,Z2(n)}function bl(){if(!jx&&Zi!==null){jx=!0;var n=0,e=Le;try{var t=Zi;for(Le=1;n<t.length;n++){var s=t[n];do s=s(!0);while(s!==null)}Zi=null,Iw=!1}catch(r){throw Zi!==null&&(Zi=Zi.slice(n+1)),E2(FE,bl),r}finally{Le=e,jx=!1}}return null}var th=[],nh=0,xv=null,bv=0,gr=[],yr=0,vu=null,Do=1,Mo="";function jl(n,e){th[nh++]=bv,th[nh++]=xv,xv=n,bv=e}function eR(n,e,t){gr[yr++]=Do,gr[yr++]=Mo,gr[yr++]=vu,vu=n;var s=Do;n=Mo;var r=32-Jr(s)-1;s&=~(1<<r),t+=1;var i=32-Jr(e)+r;if(30<i){var o=r-r%5;i=(s&(1<<o)-1).toString(32),s>>=o,r-=o,Do=1<<32-Jr(e)+r|t<<r|s,Mo=i+n}else Do=1<<i|t<<r|s,Mo=n}function YE(n){n.return!==null&&(jl(n,1),eR(n,1,0))}function KE(n){for(;n===xv;)xv=th[--nh],th[nh]=null,bv=th[--nh],th[nh]=null;for(;n===vu;)vu=gr[--yr],gr[yr]=null,Mo=gr[--yr],gr[yr]=null,Do=gr[--yr],gr[yr]=null}var Ys=null,Ws=null,ut=!1,qr=null;function tR(n,e){var t=wr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function ET(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Ys=n,Ws=ol(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Ys=n,Ws=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=vu!==null?{id:Do,overflow:Mo}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=wr(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Ys=n,Ws=null,!0):!1;default:return!1}}function e_(n){return(n.mode&1)!==0&&(n.flags&128)===0}function t_(n){if(ut){var e=Ws;if(e){var t=e;if(!ET(n,e)){if(e_(n))throw Error(W(418));e=ol(t.nextSibling);var s=Ys;e&&ET(n,e)?tR(s,t):(n.flags=n.flags&-4097|2,ut=!1,Ys=n)}}else{if(e_(n))throw Error(W(418));n.flags=n.flags&-4097|2,ut=!1,Ys=n}}}function AT(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ys=n}function Ny(n){if(n!==Ys)return!1;if(!ut)return AT(n),ut=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Xb(n.type,n.memoizedProps)),e&&(e=Ws)){if(e_(n))throw nR(),Error(W(418));for(;e;)tR(n,e),e=ol(e.nextSibling)}if(AT(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(W(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Ws=ol(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Ws=null}}else Ws=Ys?ol(n.stateNode.nextSibling):null;return!0}function nR(){for(var n=Ws;n;)n=ol(n.nextSibling)}function ef(){Ws=Ys=null,ut=!1}function qE(n){qr===null?qr=[n]:qr.push(n)}var WB=Xo.ReactCurrentBatchConfig;function Cf(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(W(309));var s=t.stateNode}if(!s)throw Error(W(147,n));var r=s,i=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=r.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof n!="string")throw Error(W(284));if(!t._owner)throw Error(W(290,n))}return n}function Py(n,e){throw n=Object.prototype.toString.call(e),Error(W(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function TT(n){var e=n._init;return e(n._payload)}function sR(n){function e(g,v){if(n){var x=g.deletions;x===null?(g.deletions=[v],g.flags|=16):x.push(v)}}function t(g,v){if(!n)return null;for(;v!==null;)e(g,v),v=v.sibling;return null}function s(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function r(g,v){return g=ul(g,v),g.index=0,g.sibling=null,g}function i(g,v,x){return g.index=x,n?(x=g.alternate,x!==null?(x=x.index,x<v?(g.flags|=2,v):x):(g.flags|=2,v)):(g.flags|=1048576,v)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,v,x,S){return v===null||v.tag!==6?(v=Ux(x,g.mode,S),v.return=g,v):(v=r(v,x),v.return=g,v)}function l(g,v,x,S){var A=x.type;return A===qu?h(g,v,x.props.children,S,x.key):v!==null&&(v.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===ra&&TT(A)===v.type)?(S=r(v,x.props),S.ref=Cf(g,v,x),S.return=g,S):(S=x0(x.type,x.key,x.props,null,g.mode,S),S.ref=Cf(g,v,x),S.return=g,S)}function c(g,v,x,S){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=$x(x,g.mode,S),v.return=g,v):(v=r(v,x.children||[]),v.return=g,v)}function h(g,v,x,S,A){return v===null||v.tag!==7?(v=mu(x,g.mode,S,A),v.return=g,v):(v=r(v,x),v.return=g,v)}function f(g,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Ux(""+v,g.mode,x),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case wy:return x=x0(v.type,v.key,v.props,null,g.mode,x),x.ref=Cf(g,null,v),x.return=g,x;case Ku:return v=$x(v,g.mode,x),v.return=g,v;case ra:var S=v._init;return f(g,S(v._payload),x)}if(Uf(v)||_f(v))return v=mu(v,g.mode,x,null),v.return=g,v;Py(g,v)}return null}function p(g,v,x,S){var A=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return A!==null?null:a(g,v,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case wy:return x.key===A?l(g,v,x,S):null;case Ku:return x.key===A?c(g,v,x,S):null;case ra:return A=x._init,p(g,v,A(x._payload),S)}if(Uf(x)||_f(x))return A!==null?null:h(g,v,x,S,null);Py(g,x)}return null}function m(g,v,x,S,A){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(x)||null,a(v,g,""+S,A);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case wy:return g=g.get(S.key===null?x:S.key)||null,l(v,g,S,A);case Ku:return g=g.get(S.key===null?x:S.key)||null,c(v,g,S,A);case ra:var C=S._init;return m(g,v,x,C(S._payload),A)}if(Uf(S)||_f(S))return g=g.get(x)||null,h(v,g,S,A,null);Py(v,S)}return null}function y(g,v,x,S){for(var A=null,C=null,N=v,P=v=0,R=null;N!==null&&P<x.length;P++){N.index>P?(R=N,N=null):R=N.sibling;var O=p(g,N,x[P],S);if(O===null){N===null&&(N=R);break}n&&N&&O.alternate===null&&e(g,N),v=i(O,v,P),C===null?A=O:C.sibling=O,C=O,N=R}if(P===x.length)return t(g,N),ut&&jl(g,P),A;if(N===null){for(;P<x.length;P++)N=f(g,x[P],S),N!==null&&(v=i(N,v,P),C===null?A=N:C.sibling=N,C=N);return ut&&jl(g,P),A}for(N=s(g,N);P<x.length;P++)R=m(N,g,P,x[P],S),R!==null&&(n&&R.alternate!==null&&N.delete(R.key===null?P:R.key),v=i(R,v,P),C===null?A=R:C.sibling=R,C=R);return n&&N.forEach(function(M){return e(g,M)}),ut&&jl(g,P),A}function w(g,v,x,S){var A=_f(x);if(typeof A!="function")throw Error(W(150));if(x=A.call(x),x==null)throw Error(W(151));for(var C=A=null,N=v,P=v=0,R=null,O=x.next();N!==null&&!O.done;P++,O=x.next()){N.index>P?(R=N,N=null):R=N.sibling;var M=p(g,N,O.value,S);if(M===null){N===null&&(N=R);break}n&&N&&M.alternate===null&&e(g,N),v=i(M,v,P),C===null?A=M:C.sibling=M,C=M,N=R}if(O.done)return t(g,N),ut&&jl(g,P),A;if(N===null){for(;!O.done;P++,O=x.next())O=f(g,O.value,S),O!==null&&(v=i(O,v,P),C===null?A=O:C.sibling=O,C=O);return ut&&jl(g,P),A}for(N=s(g,N);!O.done;P++,O=x.next())O=m(N,g,P,O.value,S),O!==null&&(n&&O.alternate!==null&&N.delete(O.key===null?P:O.key),v=i(O,v,P),C===null?A=O:C.sibling=O,C=O);return n&&N.forEach(function(Y){return e(g,Y)}),ut&&jl(g,P),A}function b(g,v,x,S){if(typeof x=="object"&&x!==null&&x.type===qu&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case wy:e:{for(var A=x.key,C=v;C!==null;){if(C.key===A){if(A=x.type,A===qu){if(C.tag===7){t(g,C.sibling),v=r(C,x.props.children),v.return=g,g=v;break e}}else if(C.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===ra&&TT(A)===C.type){t(g,C.sibling),v=r(C,x.props),v.ref=Cf(g,C,x),v.return=g,g=v;break e}t(g,C);break}else e(g,C);C=C.sibling}x.type===qu?(v=mu(x.props.children,g.mode,S,x.key),v.return=g,g=v):(S=x0(x.type,x.key,x.props,null,g.mode,S),S.ref=Cf(g,v,x),S.return=g,g=S)}return o(g);case Ku:e:{for(C=x.key;v!==null;){if(v.key===C)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){t(g,v.sibling),v=r(v,x.children||[]),v.return=g,g=v;break e}else{t(g,v);break}else e(g,v);v=v.sibling}v=$x(x,g.mode,S),v.return=g,g=v}return o(g);case ra:return C=x._init,b(g,v,C(x._payload),S)}if(Uf(x))return y(g,v,x,S);if(_f(x))return w(g,v,x,S);Py(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(t(g,v.sibling),v=r(v,x),v.return=g,g=v):(t(g,v),v=Ux(x,g.mode,S),v.return=g,g=v),o(g)):t(g,v)}return b}var tf=sR(!0),rR=sR(!1),_v=xl(null),Sv=null,sh=null,XE=null;function JE(){XE=sh=Sv=null}function QE(n){var e=_v.current;ot(_v),n._currentValue=e}function n_(n,e,t){for(;n!==null;){var s=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),n===t)break;n=n.return}}function bh(n,e){Sv=n,XE=sh=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(ds=!0),n.firstContext=null)}function _r(n){var e=n._currentValue;if(XE!==n)if(n={context:n,memoizedValue:e,next:null},sh===null){if(Sv===null)throw Error(W(308));sh=n,Sv.dependencies={lanes:0,firstContext:n}}else sh=sh.next=n;return e}var Kl=null;function ZE(n){Kl===null?Kl=[n]:Kl.push(n)}function iR(n,e,t,s){var r=e.interleaved;return r===null?(t.next=t,ZE(e)):(t.next=r.next,r.next=t),e.interleaved=t,Go(n,s)}function Go(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var ia=!1;function eA(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oR(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Fo(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function al(n,e,t){var s=n.updateQueue;if(s===null)return null;if(s=s.shared,Te&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,Go(n,t)}return r=s.interleaved,r===null?(e.next=e,ZE(s)):(e.next=r.next,r.next=e),s.interleaved=e,Go(n,t)}function p0(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,BE(n,t)}}function CT(n,e){var t=n.updateQueue,s=n.alternate;if(s!==null&&(s=s.updateQueue,t===s)){var r=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?r=i=o:i=i.next=o,t=t.next}while(t!==null);i===null?r=i=e:i=i.next=e}else r=i=e;t={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Ev(n,e,t,s){var r=n.updateQueue;ia=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var h=n.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(i!==null){var f=r.baseState;o=0,h=c=l=null,a=i;do{var p=a.lane,m=a.eventTime;if((s&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=n,w=a;switch(p=e,m=t,w.tag){case 1:if(y=w.payload,typeof y=="function"){f=y.call(m,f,p);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=w.payload,p=typeof y=="function"?y.call(m,f,p):y,p==null)break e;f=wt({},f,p);break e;case 2:ia=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=m,l=f):h=h.next=m,o|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);if(h===null&&(l=f),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);xu|=o,n.lanes=o,n.memoizedState=f}}function kT(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var s=n[e],r=s.callback;if(r!==null){if(s.callback=null,s=t,typeof r!="function")throw Error(W(191,r));r.call(s)}}}var ty={},Oi=xl(ty),Hp=xl(ty),zp=xl(ty);function ql(n){if(n===ty)throw Error(W(174));return n}function tA(n,e){switch(et(zp,e),et(Hp,n),et(Oi,ty),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Db(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Db(e,n)}ot(Oi),et(Oi,e)}function nf(){ot(Oi),ot(Hp),ot(zp)}function aR(n){ql(zp.current);var e=ql(Oi.current),t=Db(e,n.type);e!==t&&(et(Hp,n),et(Oi,t))}function nA(n){Hp.current===n&&(ot(Oi),ot(Hp))}var mt=xl(0);function Av(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ox=[];function sA(){for(var n=0;n<Ox.length;n++)Ox[n]._workInProgressVersionPrimary=null;Ox.length=0}var m0=Xo.ReactCurrentDispatcher,Lx=Xo.ReactCurrentBatchConfig,wu=0,gt=null,Kt=null,an=null,Tv=!1,xp=!1,Gp=0,YB=0;function Cn(){throw Error(W(321))}function rA(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Zr(n[t],e[t]))return!1;return!0}function iA(n,e,t,s,r,i){if(wu=i,gt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,m0.current=n===null||n.memoizedState===null?JB:QB,n=t(s,r),xp){i=0;do{if(xp=!1,Gp=0,25<=i)throw Error(W(301));i+=1,an=Kt=null,e.updateQueue=null,m0.current=ZB,n=t(s,r)}while(xp)}if(m0.current=Cv,e=Kt!==null&&Kt.next!==null,wu=0,an=Kt=gt=null,Tv=!1,e)throw Error(W(300));return n}function oA(){var n=Gp!==0;return Gp=0,n}function ai(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?gt.memoizedState=an=n:an=an.next=n,an}function Sr(){if(Kt===null){var n=gt.alternate;n=n!==null?n.memoizedState:null}else n=Kt.next;var e=an===null?gt.memoizedState:an.next;if(e!==null)an=e,Kt=n;else{if(n===null)throw Error(W(310));Kt=n,n={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},an===null?gt.memoizedState=an=n:an=an.next=n}return an}function Wp(n,e){return typeof e=="function"?e(n):e}function Dx(n){var e=Sr(),t=e.queue;if(t===null)throw Error(W(311));t.lastRenderedReducer=n;var s=Kt,r=s.baseQueue,i=t.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}s.baseQueue=r=i,t.pending=null}if(r!==null){i=r.next,s=s.baseState;var a=o=null,l=null,c=i;do{var h=c.lane;if((wu&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),s=c.hasEagerState?c.eagerState:n(s,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=s):l=l.next=f,gt.lanes|=h,xu|=h}c=c.next}while(c!==null&&c!==i);l===null?o=s:l.next=a,Zr(s,e.memoizedState)||(ds=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=l,t.lastRenderedState=s}if(n=t.interleaved,n!==null){r=n;do i=r.lane,gt.lanes|=i,xu|=i,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Mx(n){var e=Sr(),t=e.queue;if(t===null)throw Error(W(311));t.lastRenderedReducer=n;var s=t.dispatch,r=t.pending,i=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do i=n(i,o.action),o=o.next;while(o!==r);Zr(i,e.memoizedState)||(ds=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,s]}function lR(){}function cR(n,e){var t=gt,s=Sr(),r=e(),i=!Zr(s.memoizedState,r);if(i&&(s.memoizedState=r,ds=!0),s=s.queue,aA(dR.bind(null,t,s,n),[n]),s.getSnapshot!==e||i||an!==null&&an.memoizedState.tag&1){if(t.flags|=2048,Yp(9,hR.bind(null,t,s,r,e),void 0,null),cn===null)throw Error(W(349));wu&30||uR(t,e,r)}return r}function uR(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=gt.updateQueue,e===null?(e={lastEffect:null,stores:null},gt.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function hR(n,e,t,s){e.value=t,e.getSnapshot=s,fR(e)&&pR(n)}function dR(n,e,t){return t(function(){fR(e)&&pR(n)})}function fR(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Zr(n,t)}catch{return!0}}function pR(n){var e=Go(n,1);e!==null&&Qr(e,n,1,-1)}function NT(n){var e=ai();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wp,lastRenderedState:n},e.queue=n,n=n.dispatch=XB.bind(null,gt,n),[e.memoizedState,n]}function Yp(n,e,t,s){return n={tag:n,create:e,destroy:t,deps:s,next:null},e=gt.updateQueue,e===null?(e={lastEffect:null,stores:null},gt.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(s=t.next,t.next=n,n.next=s,e.lastEffect=n)),n}function mR(){return Sr().memoizedState}function g0(n,e,t,s){var r=ai();gt.flags|=n,r.memoizedState=Yp(1|e,t,void 0,s===void 0?null:s)}function jw(n,e,t,s){var r=Sr();s=s===void 0?null:s;var i=void 0;if(Kt!==null){var o=Kt.memoizedState;if(i=o.destroy,s!==null&&rA(s,o.deps)){r.memoizedState=Yp(e,t,i,s);return}}gt.flags|=n,r.memoizedState=Yp(1|e,t,i,s)}function PT(n,e){return g0(8390656,8,n,e)}function aA(n,e){return jw(2048,8,n,e)}function gR(n,e){return jw(4,2,n,e)}function yR(n,e){return jw(4,4,n,e)}function vR(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function wR(n,e,t){return t=t!=null?t.concat([n]):null,jw(4,4,vR.bind(null,e,n),t)}function lA(){}function xR(n,e){var t=Sr();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&rA(e,s[1])?s[0]:(t.memoizedState=[n,e],n)}function bR(n,e){var t=Sr();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&rA(e,s[1])?s[0]:(n=n(),t.memoizedState=[n,e],n)}function _R(n,e,t){return wu&21?(Zr(t,e)||(t=C2(),gt.lanes|=t,xu|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,ds=!0),n.memoizedState=t)}function KB(n,e){var t=Le;Le=t!==0&&4>t?t:4,n(!0);var s=Lx.transition;Lx.transition={};try{n(!1),e()}finally{Le=t,Lx.transition=s}}function SR(){return Sr().memoizedState}function qB(n,e,t){var s=cl(n);if(t={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null},ER(n))AR(e,t);else if(t=iR(n,e,t,s),t!==null){var r=Xn();Qr(t,n,s,r),TR(t,e,s)}}function XB(n,e,t){var s=cl(n),r={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null};if(ER(n))AR(e,r);else{var i=n.alternate;if(n.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,t);if(r.hasEagerState=!0,r.eagerState=a,Zr(a,o)){var l=e.interleaved;l===null?(r.next=r,ZE(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=iR(n,e,r,s),t!==null&&(r=Xn(),Qr(t,n,s,r),TR(t,e,s))}}function ER(n){var e=n.alternate;return n===gt||e!==null&&e===gt}function AR(n,e){xp=Tv=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function TR(n,e,t){if(t&4194240){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,BE(n,t)}}var Cv={readContext:_r,useCallback:Cn,useContext:Cn,useEffect:Cn,useImperativeHandle:Cn,useInsertionEffect:Cn,useLayoutEffect:Cn,useMemo:Cn,useReducer:Cn,useRef:Cn,useState:Cn,useDebugValue:Cn,useDeferredValue:Cn,useTransition:Cn,useMutableSource:Cn,useSyncExternalStore:Cn,useId:Cn,unstable_isNewReconciler:!1},JB={readContext:_r,useCallback:function(n,e){return ai().memoizedState=[n,e===void 0?null:e],n},useContext:_r,useEffect:PT,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,g0(4194308,4,vR.bind(null,e,n),t)},useLayoutEffect:function(n,e){return g0(4194308,4,n,e)},useInsertionEffect:function(n,e){return g0(4,2,n,e)},useMemo:function(n,e){var t=ai();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var s=ai();return e=t!==void 0?t(e):e,s.memoizedState=s.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},s.queue=n,n=n.dispatch=qB.bind(null,gt,n),[s.memoizedState,n]},useRef:function(n){var e=ai();return n={current:n},e.memoizedState=n},useState:NT,useDebugValue:lA,useDeferredValue:function(n){return ai().memoizedState=n},useTransition:function(){var n=NT(!1),e=n[0];return n=KB.bind(null,n[1]),ai().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var s=gt,r=ai();if(ut){if(t===void 0)throw Error(W(407));t=t()}else{if(t=e(),cn===null)throw Error(W(349));wu&30||uR(s,e,t)}r.memoizedState=t;var i={value:t,getSnapshot:e};return r.queue=i,PT(dR.bind(null,s,i,n),[n]),s.flags|=2048,Yp(9,hR.bind(null,s,i,t,e),void 0,null),t},useId:function(){var n=ai(),e=cn.identifierPrefix;if(ut){var t=Mo,s=Do;t=(s&~(1<<32-Jr(s)-1)).toString(32)+t,e=":"+e+"R"+t,t=Gp++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=YB++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},QB={readContext:_r,useCallback:xR,useContext:_r,useEffect:aA,useImperativeHandle:wR,useInsertionEffect:gR,useLayoutEffect:yR,useMemo:bR,useReducer:Dx,useRef:mR,useState:function(){return Dx(Wp)},useDebugValue:lA,useDeferredValue:function(n){var e=Sr();return _R(e,Kt.memoizedState,n)},useTransition:function(){var n=Dx(Wp)[0],e=Sr().memoizedState;return[n,e]},useMutableSource:lR,useSyncExternalStore:cR,useId:SR,unstable_isNewReconciler:!1},ZB={readContext:_r,useCallback:xR,useContext:_r,useEffect:aA,useImperativeHandle:wR,useInsertionEffect:gR,useLayoutEffect:yR,useMemo:bR,useReducer:Mx,useRef:mR,useState:function(){return Mx(Wp)},useDebugValue:lA,useDeferredValue:function(n){var e=Sr();return Kt===null?e.memoizedState=n:_R(e,Kt.memoizedState,n)},useTransition:function(){var n=Mx(Wp)[0],e=Sr().memoizedState;return[n,e]},useMutableSource:lR,useSyncExternalStore:cR,useId:SR,unstable_isNewReconciler:!1};function jr(n,e){if(n&&n.defaultProps){e=wt({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function s_(n,e,t,s){e=n.memoizedState,t=t(s,e),t=t==null?e:wt({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Ow={isMounted:function(n){return(n=n._reactInternals)?Tu(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var s=Xn(),r=cl(n),i=Fo(s,r);i.payload=e,t!=null&&(i.callback=t),e=al(n,i,r),e!==null&&(Qr(e,n,r,s),p0(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var s=Xn(),r=cl(n),i=Fo(s,r);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=al(n,i,r),e!==null&&(Qr(e,n,r,s),p0(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Xn(),s=cl(n),r=Fo(t,s);r.tag=2,e!=null&&(r.callback=e),e=al(n,r,s),e!==null&&(Qr(e,n,s,t),p0(e,n,s))}};function RT(n,e,t,s,r,i,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(s,i,o):e.prototype&&e.prototype.isPureReactComponent?!Bp(t,s)||!Bp(r,i):!0}function CR(n,e,t){var s=!1,r=dl,i=e.contextType;return typeof i=="object"&&i!==null?i=_r(i):(r=ms(e)?yu:Fn.current,s=e.contextTypes,i=(s=s!=null)?Zd(n,r):dl),e=new e(t,i),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ow,n.stateNode=e,e._reactInternals=n,s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=i),e}function IT(n,e,t,s){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,s),e.state!==n&&Ow.enqueueReplaceState(e,e.state,null)}function r_(n,e,t,s){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},eA(n);var i=e.contextType;typeof i=="object"&&i!==null?r.context=_r(i):(i=ms(e)?yu:Fn.current,r.context=Zd(n,i)),r.state=n.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(s_(n,e,i,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Ow.enqueueReplaceState(r,r.state,null),Ev(n,t,r,s),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function sf(n,e){try{var t="",s=e;do t+=CF(s),s=s.return;while(s);var r=t}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:n,source:e,stack:r,digest:null}}function Fx(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function i_(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var e3=typeof WeakMap=="function"?WeakMap:Map;function kR(n,e,t){t=Fo(-1,t),t.tag=3,t.payload={element:null};var s=e.value;return t.callback=function(){Nv||(Nv=!0,m_=s),i_(n,e)},t}function NR(n,e,t){t=Fo(-1,t),t.tag=3;var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;t.payload=function(){return s(r)},t.callback=function(){i_(n,e)}}var i=n.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){i_(n,e),typeof s!="function"&&(ll===null?ll=new Set([this]):ll.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function jT(n,e,t){var s=n.pingCache;if(s===null){s=n.pingCache=new e3;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(t)||(r.add(t),n=p3.bind(null,n,e,t),e.then(n,n))}function OT(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function LT(n,e,t,s,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Fo(-1,1),e.tag=2,al(t,e,1))),t.lanes|=1),n)}var t3=Xo.ReactCurrentOwner,ds=!1;function Yn(n,e,t,s){e.child=n===null?rR(e,null,t,s):tf(e,n.child,t,s)}function DT(n,e,t,s,r){t=t.render;var i=e.ref;return bh(e,r),s=iA(n,e,t,s,i,r),t=oA(),n!==null&&!ds?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Wo(n,e,r)):(ut&&t&&YE(e),e.flags|=1,Yn(n,e,s,r),e.child)}function MT(n,e,t,s,r){if(n===null){var i=t.type;return typeof i=="function"&&!gA(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,PR(n,e,i,s,r)):(n=x0(t.type,null,s,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(i=n.child,!(n.lanes&r)){var o=i.memoizedProps;if(t=t.compare,t=t!==null?t:Bp,t(o,s)&&n.ref===e.ref)return Wo(n,e,r)}return e.flags|=1,n=ul(i,s),n.ref=e.ref,n.return=e,e.child=n}function PR(n,e,t,s,r){if(n!==null){var i=n.memoizedProps;if(Bp(i,s)&&n.ref===e.ref)if(ds=!1,e.pendingProps=s=i,(n.lanes&r)!==0)n.flags&131072&&(ds=!0);else return e.lanes=n.lanes,Wo(n,e,r)}return o_(n,e,t,s,r)}function RR(n,e,t){var s=e.pendingProps,r=s.children,i=n!==null?n.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},et(ih,$s),$s|=t;else{if(!(t&1073741824))return n=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,et(ih,$s),$s|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:t,et(ih,$s),$s|=s}else i!==null?(s=i.baseLanes|t,e.memoizedState=null):s=t,et(ih,$s),$s|=s;return Yn(n,e,r,t),e.child}function IR(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function o_(n,e,t,s,r){var i=ms(t)?yu:Fn.current;return i=Zd(e,i),bh(e,r),t=iA(n,e,t,s,i,r),s=oA(),n!==null&&!ds?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Wo(n,e,r)):(ut&&s&&YE(e),e.flags|=1,Yn(n,e,t,r),e.child)}function FT(n,e,t,s,r){if(ms(t)){var i=!0;wv(e)}else i=!1;if(bh(e,r),e.stateNode===null)y0(n,e),CR(e,t,s),r_(e,t,s,r),s=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=_r(c):(c=ms(t)?yu:Fn.current,c=Zd(e,c));var h=t.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==s||l!==c)&&IT(e,o,s,c),ia=!1;var p=e.memoizedState;o.state=p,Ev(e,s,o,r),l=e.memoizedState,a!==s||p!==l||ps.current||ia?(typeof h=="function"&&(s_(e,t,h,s),l=e.memoizedState),(a=ia||RT(e,t,a,s,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=l),o.props=s,o.state=l,o.context=c,s=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,oR(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:jr(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=_r(l):(l=ms(t)?yu:Fn.current,l=Zd(e,l));var m=t.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&IT(e,o,s,l),ia=!1,p=e.memoizedState,o.state=p,Ev(e,s,o,r);var y=e.memoizedState;a!==f||p!==y||ps.current||ia?(typeof m=="function"&&(s_(e,t,m,s),y=e.memoizedState),(c=ia||RT(e,t,c,s,p,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=y),o.props=s,o.state=y,o.context=l,s=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),s=!1)}return a_(n,e,t,s,i,r)}function a_(n,e,t,s,r,i){IR(n,e);var o=(e.flags&128)!==0;if(!s&&!o)return r&&ST(e,t,!1),Wo(n,e,i);s=e.stateNode,t3.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,n!==null&&o?(e.child=tf(e,n.child,null,i),e.child=tf(e,null,a,i)):Yn(n,e,a,i),e.memoizedState=s.state,r&&ST(e,t,!0),e.child}function jR(n){var e=n.stateNode;e.pendingContext?_T(n,e.pendingContext,e.pendingContext!==e.context):e.context&&_T(n,e.context,!1),tA(n,e.containerInfo)}function BT(n,e,t,s,r){return ef(),qE(r),e.flags|=256,Yn(n,e,t,s),e.child}var l_={dehydrated:null,treeContext:null,retryLane:0};function c_(n){return{baseLanes:n,cachePool:null,transitions:null}}function OR(n,e,t){var s=e.pendingProps,r=mt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(i=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),et(mt,r&1),n===null)return t_(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,n=s.fallback,i?(s=e.mode,i=e.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Mw(o,s,0,null),n=mu(n,s,t,null),i.return=e,n.return=e,i.sibling=n,e.child=i,e.child.memoizedState=c_(t),e.memoizedState=l_,n):cA(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return n3(n,e,o,s,a,r,t);if(i){i=s.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:s.children};return!(o&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=l,e.deletions=null):(s=ul(r,l),s.subtreeFlags=r.subtreeFlags&14680064),a!==null?i=ul(a,i):(i=mu(i,o,t,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,o=n.child.memoizedState,o=o===null?c_(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=n.childLanes&~t,e.memoizedState=l_,s}return i=n.child,n=i.sibling,s=ul(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=t),s.return=e,s.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=s,e.memoizedState=null,s}function cA(n,e){return e=Mw({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Ry(n,e,t,s){return s!==null&&qE(s),tf(e,n.child,null,t),n=cA(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function n3(n,e,t,s,r,i,o){if(t)return e.flags&256?(e.flags&=-257,s=Fx(Error(W(422))),Ry(n,e,o,s)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(i=s.fallback,r=e.mode,s=Mw({mode:"visible",children:s.children},r,0,null),i=mu(i,r,o,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&tf(e,n.child,null,o),e.child.memoizedState=c_(o),e.memoizedState=l_,i);if(!(e.mode&1))return Ry(n,e,o,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var a=s.dgst;return s=a,i=Error(W(419)),s=Fx(i,s,void 0),Ry(n,e,o,s)}if(a=(o&n.childLanes)!==0,ds||a){if(s=cn,s!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,Go(n,r),Qr(s,n,r,-1))}return mA(),s=Fx(Error(W(421))),Ry(n,e,o,s)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=m3.bind(null,n),r._reactRetry=e,null):(n=i.treeContext,Ws=ol(r.nextSibling),Ys=e,ut=!0,qr=null,n!==null&&(gr[yr++]=Do,gr[yr++]=Mo,gr[yr++]=vu,Do=n.id,Mo=n.overflow,vu=e),e=cA(e,s.children),e.flags|=4096,e)}function UT(n,e,t){n.lanes|=e;var s=n.alternate;s!==null&&(s.lanes|=e),n_(n.return,e,t)}function Bx(n,e,t,s,r){var i=n.memoizedState;i===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:t,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=t,i.tailMode=r)}function LR(n,e,t){var s=e.pendingProps,r=s.revealOrder,i=s.tail;if(Yn(n,e,s.children,t),s=mt.current,s&2)s=s&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&UT(n,t,e);else if(n.tag===19)UT(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}s&=1}if(et(mt,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&Av(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),Bx(e,!1,r,t,i);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&Av(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}Bx(e,!0,t,null,i);break;case"together":Bx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function y0(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Wo(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),xu|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(W(153));if(e.child!==null){for(n=e.child,t=ul(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=ul(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function s3(n,e,t){switch(e.tag){case 3:jR(e),ef();break;case 5:aR(e);break;case 1:ms(e.type)&&wv(e);break;case 4:tA(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;et(_v,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(et(mt,mt.current&1),e.flags|=128,null):t&e.child.childLanes?OR(n,e,t):(et(mt,mt.current&1),n=Wo(n,e,t),n!==null?n.sibling:null);et(mt,mt.current&1);break;case 19:if(s=(t&e.childLanes)!==0,n.flags&128){if(s)return LR(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),et(mt,mt.current),s)break;return null;case 22:case 23:return e.lanes=0,RR(n,e,t)}return Wo(n,e,t)}var DR,u_,MR,FR;DR=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};u_=function(){};MR=function(n,e,t,s){var r=n.memoizedProps;if(r!==s){n=e.stateNode,ql(Oi.current);var i=null;switch(t){case"input":r=Ib(n,r),s=Ib(n,s),i=[];break;case"select":r=wt({},r,{value:void 0}),s=wt({},s,{value:void 0}),i=[];break;case"textarea":r=Lb(n,r),s=Lb(n,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(n.onclick=yv)}Mb(t,s);var o;t=null;for(c in r)if(!s.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ip.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in s){var l=s[c];if(a=r!=null?r[c]:void 0,s.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(i||(i=[]),i.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ip.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&rt("scroll",n),i||a===l||(i=[])):(i=i||[]).push(c,l))}t&&(i=i||[]).push("style",t);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};FR=function(n,e,t,s){t!==s&&(e.flags|=4)};function kf(n,e){if(!ut)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:s.sibling=null}}function kn(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,s=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=s,n.childLanes=t,e}function r3(n,e,t){var s=e.pendingProps;switch(KE(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kn(e),null;case 1:return ms(e.type)&&vv(),kn(e),null;case 3:return s=e.stateNode,nf(),ot(ps),ot(Fn),sA(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(n===null||n.child===null)&&(Ny(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,qr!==null&&(v_(qr),qr=null))),u_(n,e),kn(e),null;case 5:nA(e);var r=ql(zp.current);if(t=e.type,n!==null&&e.stateNode!=null)MR(n,e,t,s,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(W(166));return kn(e),null}if(n=ql(Oi.current),Ny(e)){s=e.stateNode,t=e.type;var i=e.memoizedProps;switch(s[Pi]=e,s[Vp]=i,n=(e.mode&1)!==0,t){case"dialog":rt("cancel",s),rt("close",s);break;case"iframe":case"object":case"embed":rt("load",s);break;case"video":case"audio":for(r=0;r<Vf.length;r++)rt(Vf[r],s);break;case"source":rt("error",s);break;case"img":case"image":case"link":rt("error",s),rt("load",s);break;case"details":rt("toggle",s);break;case"input":q1(s,i),rt("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},rt("invalid",s);break;case"textarea":J1(s,i),rt("invalid",s)}Mb(t,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?s.textContent!==a&&(i.suppressHydrationWarning!==!0&&ky(s.textContent,a,n),r=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&ky(s.textContent,a,n),r=["children",""+a]):Ip.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&rt("scroll",s)}switch(t){case"input":xy(s),X1(s,i,!0);break;case"textarea":xy(s),Q1(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=yv)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=d2(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof s.is=="string"?n=o.createElement(t,{is:s.is}):(n=o.createElement(t),t==="select"&&(o=n,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):n=o.createElementNS(n,t),n[Pi]=e,n[Vp]=s,DR(n,e,!1,!1),e.stateNode=n;e:{switch(o=Fb(t,s),t){case"dialog":rt("cancel",n),rt("close",n),r=s;break;case"iframe":case"object":case"embed":rt("load",n),r=s;break;case"video":case"audio":for(r=0;r<Vf.length;r++)rt(Vf[r],n);r=s;break;case"source":rt("error",n),r=s;break;case"img":case"image":case"link":rt("error",n),rt("load",n),r=s;break;case"details":rt("toggle",n),r=s;break;case"input":q1(n,s),r=Ib(n,s),rt("invalid",n);break;case"option":r=s;break;case"select":n._wrapperState={wasMultiple:!!s.multiple},r=wt({},s,{value:void 0}),rt("invalid",n);break;case"textarea":J1(n,s),r=Lb(n,s),rt("invalid",n);break;default:r=s}Mb(t,r),a=r;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?m2(n,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&f2(n,l)):i==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&jp(n,l):typeof l=="number"&&jp(n,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ip.hasOwnProperty(i)?l!=null&&i==="onScroll"&&rt("scroll",n):l!=null&&jE(n,i,l,o))}switch(t){case"input":xy(n),X1(n,s,!1);break;case"textarea":xy(n),Q1(n);break;case"option":s.value!=null&&n.setAttribute("value",""+hl(s.value));break;case"select":n.multiple=!!s.multiple,i=s.value,i!=null?yh(n,!!s.multiple,i,!1):s.defaultValue!=null&&yh(n,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=yv)}switch(t){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return kn(e),null;case 6:if(n&&e.stateNode!=null)FR(n,e,n.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(W(166));if(t=ql(zp.current),ql(Oi.current),Ny(e)){if(s=e.stateNode,t=e.memoizedProps,s[Pi]=e,(i=s.nodeValue!==t)&&(n=Ys,n!==null))switch(n.tag){case 3:ky(s.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&ky(s.nodeValue,t,(n.mode&1)!==0)}i&&(e.flags|=4)}else s=(t.nodeType===9?t:t.ownerDocument).createTextNode(s),s[Pi]=e,e.stateNode=s}return kn(e),null;case 13:if(ot(mt),s=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(ut&&Ws!==null&&e.mode&1&&!(e.flags&128))nR(),ef(),e.flags|=98560,i=!1;else if(i=Ny(e),s!==null&&s.dehydrated!==null){if(n===null){if(!i)throw Error(W(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(W(317));i[Pi]=e}else ef(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;kn(e),i=!1}else qr!==null&&(v_(qr),qr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(s=s!==null,s!==(n!==null&&n.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(n===null||mt.current&1?qt===0&&(qt=3):mA())),e.updateQueue!==null&&(e.flags|=4),kn(e),null);case 4:return nf(),u_(n,e),n===null&&Up(e.stateNode.containerInfo),kn(e),null;case 10:return QE(e.type._context),kn(e),null;case 17:return ms(e.type)&&vv(),kn(e),null;case 19:if(ot(mt),i=e.memoizedState,i===null)return kn(e),null;if(s=(e.flags&128)!==0,o=i.rendering,o===null)if(s)kf(i,!1);else{if(qt!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Av(n),o!==null){for(e.flags|=128,kf(i,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=t,t=e.child;t!==null;)i=t,n=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=n,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,n=o.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return et(mt,mt.current&1|2),e.child}n=n.sibling}i.tail!==null&&jt()>rf&&(e.flags|=128,s=!0,kf(i,!1),e.lanes=4194304)}else{if(!s)if(n=Av(o),n!==null){if(e.flags|=128,s=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),kf(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ut)return kn(e),null}else 2*jt()-i.renderingStartTime>rf&&t!==1073741824&&(e.flags|=128,s=!0,kf(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(t=i.last,t!==null?t.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=jt(),e.sibling=null,t=mt.current,et(mt,s?t&1|2:t&1),e):(kn(e),null);case 22:case 23:return pA(),s=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?$s&1073741824&&(kn(e),e.subtreeFlags&6&&(e.flags|=8192)):kn(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function i3(n,e){switch(KE(e),e.tag){case 1:return ms(e.type)&&vv(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return nf(),ot(ps),ot(Fn),sA(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return nA(e),null;case 13:if(ot(mt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(W(340));ef()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return ot(mt),null;case 4:return nf(),null;case 10:return QE(e.type._context),null;case 22:case 23:return pA(),null;case 24:return null;default:return null}}var Iy=!1,Mn=!1,o3=typeof WeakSet=="function"?WeakSet:Set,te=null;function rh(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(s){Ct(n,e,s)}else t.current=null}function h_(n,e,t){try{t()}catch(s){Ct(n,e,s)}}var $T=!1;function a3(n,e){if(Kb=pv,n=H2(),WE(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var s=t.getSelection&&t.getSelection();if(s&&s.rangeCount!==0){t=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,h=0,f=n,p=null;t:for(;;){for(var m;f!==t||r!==0&&f.nodeType!==3||(a=o+r),f!==i||s!==0&&f.nodeType!==3||(l=o+s),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===n)break t;if(p===t&&++c===r&&(a=o),p===i&&++h===s&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(qb={focusedElem:n,selectionRange:t},pv=!1,te=e;te!==null;)if(e=te,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,te=n;else for(;te!==null;){e=te;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,b=y.memoizedState,g=e.stateNode,v=g.getSnapshotBeforeUpdate(e.elementType===e.type?w:jr(e.type,w),b);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(S){Ct(e,e.return,S)}if(n=e.sibling,n!==null){n.return=e.return,te=n;break}te=e.return}return y=$T,$T=!1,y}function bp(n,e,t){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&n)===n){var i=r.destroy;r.destroy=void 0,i!==void 0&&h_(e,t,i)}r=r.next}while(r!==s)}}function Lw(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var s=t.create;t.destroy=s()}t=t.next}while(t!==e)}}function d_(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function BR(n){var e=n.alternate;e!==null&&(n.alternate=null,BR(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Pi],delete e[Vp],delete e[Qb],delete e[HB],delete e[zB])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function UR(n){return n.tag===5||n.tag===3||n.tag===4}function VT(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||UR(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function f_(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=yv));else if(s!==4&&(n=n.child,n!==null))for(f_(n,e,t),n=n.sibling;n!==null;)f_(n,e,t),n=n.sibling}function p_(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(s!==4&&(n=n.child,n!==null))for(p_(n,e,t),n=n.sibling;n!==null;)p_(n,e,t),n=n.sibling}var vn=null,Yr=!1;function Qo(n,e,t){for(t=t.child;t!==null;)$R(n,e,t),t=t.sibling}function $R(n,e,t){if(ji&&typeof ji.onCommitFiberUnmount=="function")try{ji.onCommitFiberUnmount(Cw,t)}catch{}switch(t.tag){case 5:Mn||rh(t,e);case 6:var s=vn,r=Yr;vn=null,Qo(n,e,t),vn=s,Yr=r,vn!==null&&(Yr?(n=vn,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):vn.removeChild(t.stateNode));break;case 18:vn!==null&&(Yr?(n=vn,t=t.stateNode,n.nodeType===8?Ix(n.parentNode,t):n.nodeType===1&&Ix(n,t),Mp(n)):Ix(vn,t.stateNode));break;case 4:s=vn,r=Yr,vn=t.stateNode.containerInfo,Yr=!0,Qo(n,e,t),vn=s,Yr=r;break;case 0:case 11:case 14:case 15:if(!Mn&&(s=t.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&h_(t,e,o),r=r.next}while(r!==s)}Qo(n,e,t);break;case 1:if(!Mn&&(rh(t,e),s=t.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=t.memoizedProps,s.state=t.memoizedState,s.componentWillUnmount()}catch(a){Ct(t,e,a)}Qo(n,e,t);break;case 21:Qo(n,e,t);break;case 22:t.mode&1?(Mn=(s=Mn)||t.memoizedState!==null,Qo(n,e,t),Mn=s):Qo(n,e,t);break;default:Qo(n,e,t)}}function HT(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new o3),e.forEach(function(s){var r=g3.bind(null,n,s);t.has(s)||(t.add(s),s.then(r,r))})}}function Tr(n,e){var t=e.deletions;if(t!==null)for(var s=0;s<t.length;s++){var r=t[s];try{var i=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:vn=a.stateNode,Yr=!1;break e;case 3:vn=a.stateNode.containerInfo,Yr=!0;break e;case 4:vn=a.stateNode.containerInfo,Yr=!0;break e}a=a.return}if(vn===null)throw Error(W(160));$R(i,o,r),vn=null,Yr=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Ct(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)VR(e,n),e=e.sibling}function VR(n,e){var t=n.alternate,s=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Tr(e,n),si(n),s&4){try{bp(3,n,n.return),Lw(3,n)}catch(w){Ct(n,n.return,w)}try{bp(5,n,n.return)}catch(w){Ct(n,n.return,w)}}break;case 1:Tr(e,n),si(n),s&512&&t!==null&&rh(t,t.return);break;case 5:if(Tr(e,n),si(n),s&512&&t!==null&&rh(t,t.return),n.flags&32){var r=n.stateNode;try{jp(r,"")}catch(w){Ct(n,n.return,w)}}if(s&4&&(r=n.stateNode,r!=null)){var i=n.memoizedProps,o=t!==null?t.memoizedProps:i,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&u2(r,i),Fb(a,o);var c=Fb(a,i);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?m2(r,f):h==="dangerouslySetInnerHTML"?f2(r,f):h==="children"?jp(r,f):jE(r,h,f,c)}switch(a){case"input":jb(r,i);break;case"textarea":h2(r,i);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?yh(r,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?yh(r,!!i.multiple,i.defaultValue,!0):yh(r,!!i.multiple,i.multiple?[]:"",!1))}r[Vp]=i}catch(w){Ct(n,n.return,w)}}break;case 6:if(Tr(e,n),si(n),s&4){if(n.stateNode===null)throw Error(W(162));r=n.stateNode,i=n.memoizedProps;try{r.nodeValue=i}catch(w){Ct(n,n.return,w)}}break;case 3:if(Tr(e,n),si(n),s&4&&t!==null&&t.memoizedState.isDehydrated)try{Mp(e.containerInfo)}catch(w){Ct(n,n.return,w)}break;case 4:Tr(e,n),si(n);break;case 13:Tr(e,n),si(n),r=n.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(dA=jt())),s&4&&HT(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(Mn=(c=Mn)||h,Tr(e,n),Mn=c):Tr(e,n),si(n),s&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!h&&n.mode&1)for(te=n,h=n.child;h!==null;){for(f=te=h;te!==null;){switch(p=te,m=p.child,p.tag){case 0:case 11:case 14:case 15:bp(4,p,p.return);break;case 1:rh(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){s=p,t=p.return;try{e=s,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(w){Ct(s,t,w)}}break;case 5:rh(p,p.return);break;case 22:if(p.memoizedState!==null){GT(f);continue}}m!==null?(m.return=p,te=m):GT(f)}h=h.sibling}e:for(h=null,f=n;;){if(f.tag===5){if(h===null){h=f;try{r=f.stateNode,c?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=p2("display",o))}catch(w){Ct(n,n.return,w)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(w){Ct(n,n.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Tr(e,n),si(n),s&4&&HT(n);break;case 21:break;default:Tr(e,n),si(n)}}function si(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(UR(t)){var s=t;break e}t=t.return}throw Error(W(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(jp(r,""),s.flags&=-33);var i=VT(n);p_(n,i,r);break;case 3:case 4:var o=s.stateNode.containerInfo,a=VT(n);f_(n,a,o);break;default:throw Error(W(161))}}catch(l){Ct(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function l3(n,e,t){te=n,HR(n)}function HR(n,e,t){for(var s=(n.mode&1)!==0;te!==null;){var r=te,i=r.child;if(r.tag===22&&s){var o=r.memoizedState!==null||Iy;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Mn;a=Iy;var c=Mn;if(Iy=o,(Mn=l)&&!c)for(te=r;te!==null;)o=te,l=o.child,o.tag===22&&o.memoizedState!==null?WT(r):l!==null?(l.return=o,te=l):WT(r);for(;i!==null;)te=i,HR(i),i=i.sibling;te=r,Iy=a,Mn=c}zT(n)}else r.subtreeFlags&8772&&i!==null?(i.return=r,te=i):zT(n)}}function zT(n){for(;te!==null;){var e=te;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Mn||Lw(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Mn)if(t===null)s.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:jr(e.type,t.memoizedProps);s.componentDidUpdate(r,t.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&kT(e,i,s);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}kT(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Mp(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Mn||e.flags&512&&d_(e)}catch(p){Ct(e,e.return,p)}}if(e===n){te=null;break}if(t=e.sibling,t!==null){t.return=e.return,te=t;break}te=e.return}}function GT(n){for(;te!==null;){var e=te;if(e===n){te=null;break}var t=e.sibling;if(t!==null){t.return=e.return,te=t;break}te=e.return}}function WT(n){for(;te!==null;){var e=te;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Lw(4,e)}catch(l){Ct(e,t,l)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(l){Ct(e,r,l)}}var i=e.return;try{d_(e)}catch(l){Ct(e,i,l)}break;case 5:var o=e.return;try{d_(e)}catch(l){Ct(e,o,l)}}}catch(l){Ct(e,e.return,l)}if(e===n){te=null;break}var a=e.sibling;if(a!==null){a.return=e.return,te=a;break}te=e.return}}var c3=Math.ceil,kv=Xo.ReactCurrentDispatcher,uA=Xo.ReactCurrentOwner,xr=Xo.ReactCurrentBatchConfig,Te=0,cn=null,Bt=null,_n=0,$s=0,ih=xl(0),qt=0,Kp=null,xu=0,Dw=0,hA=0,_p=null,hs=null,dA=0,rf=1/0,qi=null,Nv=!1,m_=null,ll=null,jy=!1,nl=null,Pv=0,Sp=0,g_=null,v0=-1,w0=0;function Xn(){return Te&6?jt():v0!==-1?v0:v0=jt()}function cl(n){return n.mode&1?Te&2&&_n!==0?_n&-_n:WB.transition!==null?(w0===0&&(w0=C2()),w0):(n=Le,n!==0||(n=window.event,n=n===void 0?16:O2(n.type)),n):1}function Qr(n,e,t,s){if(50<Sp)throw Sp=0,g_=null,Error(W(185));Qg(n,t,s),(!(Te&2)||n!==cn)&&(n===cn&&(!(Te&2)&&(Dw|=t),qt===4&&aa(n,_n)),gs(n,s),t===1&&Te===0&&!(e.mode&1)&&(rf=jt()+500,Iw&&bl()))}function gs(n,e){var t=n.callbackNode;WF(n,e);var s=fv(n,n===cn?_n:0);if(s===0)t!==null&&tT(t),n.callbackNode=null,n.callbackPriority=0;else if(e=s&-s,n.callbackPriority!==e){if(t!=null&&tT(t),e===1)n.tag===0?GB(YT.bind(null,n)):Z2(YT.bind(null,n)),$B(function(){!(Te&6)&&bl()}),t=null;else{switch(k2(s)){case 1:t=FE;break;case 4:t=A2;break;case 16:t=dv;break;case 536870912:t=T2;break;default:t=dv}t=JR(t,zR.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function zR(n,e){if(v0=-1,w0=0,Te&6)throw Error(W(327));var t=n.callbackNode;if(_h()&&n.callbackNode!==t)return null;var s=fv(n,n===cn?_n:0);if(s===0)return null;if(s&30||s&n.expiredLanes||e)e=Rv(n,s);else{e=s;var r=Te;Te|=2;var i=WR();(cn!==n||_n!==e)&&(qi=null,rf=jt()+500,pu(n,e));do try{d3();break}catch(a){GR(n,a)}while(!0);JE(),kv.current=i,Te=r,Bt!==null?e=0:(cn=null,_n=0,e=qt)}if(e!==0){if(e===2&&(r=Hb(n),r!==0&&(s=r,e=y_(n,r))),e===1)throw t=Kp,pu(n,0),aa(n,s),gs(n,jt()),t;if(e===6)aa(n,s);else{if(r=n.current.alternate,!(s&30)&&!u3(r)&&(e=Rv(n,s),e===2&&(i=Hb(n),i!==0&&(s=i,e=y_(n,i))),e===1))throw t=Kp,pu(n,0),aa(n,s),gs(n,jt()),t;switch(n.finishedWork=r,n.finishedLanes=s,e){case 0:case 1:throw Error(W(345));case 2:Ol(n,hs,qi);break;case 3:if(aa(n,s),(s&130023424)===s&&(e=dA+500-jt(),10<e)){if(fv(n,0)!==0)break;if(r=n.suspendedLanes,(r&s)!==s){Xn(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=Jb(Ol.bind(null,n,hs,qi),e);break}Ol(n,hs,qi);break;case 4:if(aa(n,s),(s&4194240)===s)break;for(e=n.eventTimes,r=-1;0<s;){var o=31-Jr(s);i=1<<o,o=e[o],o>r&&(r=o),s&=~i}if(s=r,s=jt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*c3(s/1960))-s,10<s){n.timeoutHandle=Jb(Ol.bind(null,n,hs,qi),s);break}Ol(n,hs,qi);break;case 5:Ol(n,hs,qi);break;default:throw Error(W(329))}}}return gs(n,jt()),n.callbackNode===t?zR.bind(null,n):null}function y_(n,e){var t=_p;return n.current.memoizedState.isDehydrated&&(pu(n,e).flags|=256),n=Rv(n,e),n!==2&&(e=hs,hs=t,e!==null&&v_(e)),n}function v_(n){hs===null?hs=n:hs.push.apply(hs,n)}function u3(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var s=0;s<t.length;s++){var r=t[s],i=r.getSnapshot;r=r.value;try{if(!Zr(i(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function aa(n,e){for(e&=~hA,e&=~Dw,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Jr(e),s=1<<t;n[t]=-1,e&=~s}}function YT(n){if(Te&6)throw Error(W(327));_h();var e=fv(n,0);if(!(e&1))return gs(n,jt()),null;var t=Rv(n,e);if(n.tag!==0&&t===2){var s=Hb(n);s!==0&&(e=s,t=y_(n,s))}if(t===1)throw t=Kp,pu(n,0),aa(n,e),gs(n,jt()),t;if(t===6)throw Error(W(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Ol(n,hs,qi),gs(n,jt()),null}function fA(n,e){var t=Te;Te|=1;try{return n(e)}finally{Te=t,Te===0&&(rf=jt()+500,Iw&&bl())}}function bu(n){nl!==null&&nl.tag===0&&!(Te&6)&&_h();var e=Te;Te|=1;var t=xr.transition,s=Le;try{if(xr.transition=null,Le=1,n)return n()}finally{Le=s,xr.transition=t,Te=e,!(Te&6)&&bl()}}function pA(){$s=ih.current,ot(ih)}function pu(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,UB(t)),Bt!==null)for(t=Bt.return;t!==null;){var s=t;switch(KE(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&vv();break;case 3:nf(),ot(ps),ot(Fn),sA();break;case 5:nA(s);break;case 4:nf();break;case 13:ot(mt);break;case 19:ot(mt);break;case 10:QE(s.type._context);break;case 22:case 23:pA()}t=t.return}if(cn=n,Bt=n=ul(n.current,null),_n=$s=e,qt=0,Kp=null,hA=Dw=xu=0,hs=_p=null,Kl!==null){for(e=0;e<Kl.length;e++)if(t=Kl[e],s=t.interleaved,s!==null){t.interleaved=null;var r=s.next,i=t.pending;if(i!==null){var o=i.next;i.next=r,s.next=o}t.pending=s}Kl=null}return n}function GR(n,e){do{var t=Bt;try{if(JE(),m0.current=Cv,Tv){for(var s=gt.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Tv=!1}if(wu=0,an=Kt=gt=null,xp=!1,Gp=0,uA.current=null,t===null||t.return===null){qt=1,Kp=e,Bt=null;break}e:{var i=n,o=t.return,a=t,l=e;if(e=_n,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=OT(o);if(m!==null){m.flags&=-257,LT(m,o,a,i,e),m.mode&1&&jT(i,c,e),e=m,l=c;var y=e.updateQueue;if(y===null){var w=new Set;w.add(l),e.updateQueue=w}else y.add(l);break e}else{if(!(e&1)){jT(i,c,e),mA();break e}l=Error(W(426))}}else if(ut&&a.mode&1){var b=OT(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),LT(b,o,a,i,e),qE(sf(l,a));break e}}i=l=sf(l,a),qt!==4&&(qt=2),_p===null?_p=[i]:_p.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=kR(i,l,e);CT(i,g);break e;case 1:a=l;var v=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ll===null||!ll.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var S=NR(i,a,e);CT(i,S);break e}}i=i.return}while(i!==null)}KR(t)}catch(A){e=A,Bt===t&&t!==null&&(Bt=t=t.return);continue}break}while(!0)}function WR(){var n=kv.current;return kv.current=Cv,n===null?Cv:n}function mA(){(qt===0||qt===3||qt===2)&&(qt=4),cn===null||!(xu&268435455)&&!(Dw&268435455)||aa(cn,_n)}function Rv(n,e){var t=Te;Te|=2;var s=WR();(cn!==n||_n!==e)&&(qi=null,pu(n,e));do try{h3();break}catch(r){GR(n,r)}while(!0);if(JE(),Te=t,kv.current=s,Bt!==null)throw Error(W(261));return cn=null,_n=0,qt}function h3(){for(;Bt!==null;)YR(Bt)}function d3(){for(;Bt!==null&&!MF();)YR(Bt)}function YR(n){var e=XR(n.alternate,n,$s);n.memoizedProps=n.pendingProps,e===null?KR(n):Bt=e,uA.current=null}function KR(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=i3(t,e),t!==null){t.flags&=32767,Bt=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{qt=6,Bt=null;return}}else if(t=r3(t,e,$s),t!==null){Bt=t;return}if(e=e.sibling,e!==null){Bt=e;return}Bt=e=n}while(e!==null);qt===0&&(qt=5)}function Ol(n,e,t){var s=Le,r=xr.transition;try{xr.transition=null,Le=1,f3(n,e,t,s)}finally{xr.transition=r,Le=s}return null}function f3(n,e,t,s){do _h();while(nl!==null);if(Te&6)throw Error(W(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(W(177));n.callbackNode=null,n.callbackPriority=0;var i=t.lanes|t.childLanes;if(YF(n,i),n===cn&&(Bt=cn=null,_n=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||jy||(jy=!0,JR(dv,function(){return _h(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=xr.transition,xr.transition=null;var o=Le;Le=1;var a=Te;Te|=4,uA.current=null,a3(n,t),VR(t,n),jB(qb),pv=!!Kb,qb=Kb=null,n.current=t,l3(t),FF(),Te=a,Le=o,xr.transition=i}else n.current=t;if(jy&&(jy=!1,nl=n,Pv=r),i=n.pendingLanes,i===0&&(ll=null),$F(t.stateNode),gs(n,jt()),e!==null)for(s=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],s(r.value,{componentStack:r.stack,digest:r.digest});if(Nv)throw Nv=!1,n=m_,m_=null,n;return Pv&1&&n.tag!==0&&_h(),i=n.pendingLanes,i&1?n===g_?Sp++:(Sp=0,g_=n):Sp=0,bl(),null}function _h(){if(nl!==null){var n=k2(Pv),e=xr.transition,t=Le;try{if(xr.transition=null,Le=16>n?16:n,nl===null)var s=!1;else{if(n=nl,nl=null,Pv=0,Te&6)throw Error(W(331));var r=Te;for(Te|=4,te=n.current;te!==null;){var i=te,o=i.child;if(te.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(te=c;te!==null;){var h=te;switch(h.tag){case 0:case 11:case 15:bp(8,h,i)}var f=h.child;if(f!==null)f.return=h,te=f;else for(;te!==null;){h=te;var p=h.sibling,m=h.return;if(BR(h),h===c){te=null;break}if(p!==null){p.return=m,te=p;break}te=m}}}var y=i.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var b=w.sibling;w.sibling=null,w=b}while(w!==null)}}te=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,te=o;else e:for(;te!==null;){if(i=te,i.flags&2048)switch(i.tag){case 0:case 11:case 15:bp(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,te=g;break e}te=i.return}}var v=n.current;for(te=v;te!==null;){o=te;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,te=x;else e:for(o=v;te!==null;){if(a=te,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Lw(9,a)}}catch(A){Ct(a,a.return,A)}if(a===o){te=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,te=S;break e}te=a.return}}if(Te=r,bl(),ji&&typeof ji.onPostCommitFiberRoot=="function")try{ji.onPostCommitFiberRoot(Cw,n)}catch{}s=!0}return s}finally{Le=t,xr.transition=e}}return!1}function KT(n,e,t){e=sf(t,e),e=kR(n,e,1),n=al(n,e,1),e=Xn(),n!==null&&(Qg(n,1,e),gs(n,e))}function Ct(n,e,t){if(n.tag===3)KT(n,n,t);else for(;e!==null;){if(e.tag===3){KT(e,n,t);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ll===null||!ll.has(s))){n=sf(t,n),n=NR(e,n,1),e=al(e,n,1),n=Xn(),e!==null&&(Qg(e,1,n),gs(e,n));break}}e=e.return}}function p3(n,e,t){var s=n.pingCache;s!==null&&s.delete(e),e=Xn(),n.pingedLanes|=n.suspendedLanes&t,cn===n&&(_n&t)===t&&(qt===4||qt===3&&(_n&130023424)===_n&&500>jt()-dA?pu(n,0):hA|=t),gs(n,e)}function qR(n,e){e===0&&(n.mode&1?(e=Sy,Sy<<=1,!(Sy&130023424)&&(Sy=4194304)):e=1);var t=Xn();n=Go(n,e),n!==null&&(Qg(n,e,t),gs(n,t))}function m3(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),qR(n,t)}function g3(n,e){var t=0;switch(n.tag){case 13:var s=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:s=n.stateNode;break;default:throw Error(W(314))}s!==null&&s.delete(e),qR(n,t)}var XR;XR=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||ps.current)ds=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return ds=!1,s3(n,e,t);ds=!!(n.flags&131072)}else ds=!1,ut&&e.flags&1048576&&eR(e,bv,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;y0(n,e),n=e.pendingProps;var r=Zd(e,Fn.current);bh(e,t),r=iA(null,e,s,n,r,t);var i=oA();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ms(s)?(i=!0,wv(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,eA(e),r.updater=Ow,e.stateNode=r,r._reactInternals=e,r_(e,s,n,t),e=a_(null,e,s,!0,i,t)):(e.tag=0,ut&&i&&YE(e),Yn(null,e,r,t),e=e.child),e;case 16:s=e.elementType;e:{switch(y0(n,e),n=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=v3(s),n=jr(s,n),r){case 0:e=o_(null,e,s,n,t);break e;case 1:e=FT(null,e,s,n,t);break e;case 11:e=DT(null,e,s,n,t);break e;case 14:e=MT(null,e,s,jr(s.type,n),t);break e}throw Error(W(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:jr(s,r),o_(n,e,s,r,t);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:jr(s,r),FT(n,e,s,r,t);case 3:e:{if(jR(e),n===null)throw Error(W(387));s=e.pendingProps,i=e.memoizedState,r=i.element,oR(n,e),Ev(e,s,null,t);var o=e.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=sf(Error(W(423)),e),e=BT(n,e,s,t,r);break e}else if(s!==r){r=sf(Error(W(424)),e),e=BT(n,e,s,t,r);break e}else for(Ws=ol(e.stateNode.containerInfo.firstChild),Ys=e,ut=!0,qr=null,t=rR(e,null,s,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(ef(),s===r){e=Wo(n,e,t);break e}Yn(n,e,s,t)}e=e.child}return e;case 5:return aR(e),n===null&&t_(e),s=e.type,r=e.pendingProps,i=n!==null?n.memoizedProps:null,o=r.children,Xb(s,r)?o=null:i!==null&&Xb(s,i)&&(e.flags|=32),IR(n,e),Yn(n,e,o,t),e.child;case 6:return n===null&&t_(e),null;case 13:return OR(n,e,t);case 4:return tA(e,e.stateNode.containerInfo),s=e.pendingProps,n===null?e.child=tf(e,null,s,t):Yn(n,e,s,t),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:jr(s,r),DT(n,e,s,r,t);case 7:return Yn(n,e,e.pendingProps,t),e.child;case 8:return Yn(n,e,e.pendingProps.children,t),e.child;case 12:return Yn(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,et(_v,s._currentValue),s._currentValue=o,i!==null)if(Zr(i.value,o)){if(i.children===r.children&&!ps.current){e=Wo(n,e,t);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===s){if(i.tag===1){l=Fo(-1,t&-t),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}i.lanes|=t,l=i.alternate,l!==null&&(l.lanes|=t),n_(i.return,t,e),a.lanes|=t;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(W(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),n_(o,t,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Yn(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,bh(e,t),r=_r(r),s=s(r),e.flags|=1,Yn(n,e,s,t),e.child;case 14:return s=e.type,r=jr(s,e.pendingProps),r=jr(s.type,r),MT(n,e,s,r,t);case 15:return PR(n,e,e.type,e.pendingProps,t);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:jr(s,r),y0(n,e),e.tag=1,ms(s)?(n=!0,wv(e)):n=!1,bh(e,t),CR(e,s,r),r_(e,s,r,t),a_(null,e,s,!0,n,t);case 19:return LR(n,e,t);case 22:return RR(n,e,t)}throw Error(W(156,e.tag))};function JR(n,e){return E2(n,e)}function y3(n,e,t,s){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wr(n,e,t,s){return new y3(n,e,t,s)}function gA(n){return n=n.prototype,!(!n||!n.isReactComponent)}function v3(n){if(typeof n=="function")return gA(n)?1:0;if(n!=null){if(n=n.$$typeof,n===LE)return 11;if(n===DE)return 14}return 2}function ul(n,e){var t=n.alternate;return t===null?(t=wr(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function x0(n,e,t,s,r,i){var o=2;if(s=n,typeof n=="function")gA(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case qu:return mu(t.children,r,i,e);case OE:o=8,r|=8;break;case kb:return n=wr(12,t,e,r|2),n.elementType=kb,n.lanes=i,n;case Nb:return n=wr(13,t,e,r),n.elementType=Nb,n.lanes=i,n;case Pb:return n=wr(19,t,e,r),n.elementType=Pb,n.lanes=i,n;case a2:return Mw(t,r,i,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case i2:o=10;break e;case o2:o=9;break e;case LE:o=11;break e;case DE:o=14;break e;case ra:o=16,s=null;break e}throw Error(W(130,n==null?n:typeof n,""))}return e=wr(o,t,e,r),e.elementType=n,e.type=s,e.lanes=i,e}function mu(n,e,t,s){return n=wr(7,n,s,e),n.lanes=t,n}function Mw(n,e,t,s){return n=wr(22,n,s,e),n.elementType=a2,n.lanes=t,n.stateNode={isHidden:!1},n}function Ux(n,e,t){return n=wr(6,n,null,e),n.lanes=t,n}function $x(n,e,t){return e=wr(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function w3(n,e,t,s,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bx(0),this.expirationTimes=bx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bx(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function yA(n,e,t,s,r,i,o,a,l){return n=new w3(n,e,t,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=wr(3,null,null,e),n.current=i,i.stateNode=n,i.memoizedState={element:s,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},eA(i),n}function x3(n,e,t){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ku,key:s==null?null:""+s,children:n,containerInfo:e,implementation:t}}function QR(n){if(!n)return dl;n=n._reactInternals;e:{if(Tu(n)!==n||n.tag!==1)throw Error(W(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ms(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(n.tag===1){var t=n.type;if(ms(t))return Q2(n,t,e)}return e}function ZR(n,e,t,s,r,i,o,a,l){return n=yA(t,s,!0,n,r,i,o,a,l),n.context=QR(null),t=n.current,s=Xn(),r=cl(t),i=Fo(s,r),i.callback=e??null,al(t,i,r),n.current.lanes=r,Qg(n,r,s),gs(n,s),n}function Fw(n,e,t,s){var r=e.current,i=Xn(),o=cl(r);return t=QR(t),e.context===null?e.context=t:e.pendingContext=t,e=Fo(i,o),e.payload={element:n},s=s===void 0?null:s,s!==null&&(e.callback=s),n=al(r,e,o),n!==null&&(Qr(n,r,o,i),p0(n,r,o)),o}function Iv(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function qT(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function vA(n,e){qT(n,e),(n=n.alternate)&&qT(n,e)}function b3(){return null}var eI=typeof reportError=="function"?reportError:function(n){console.error(n)};function wA(n){this._internalRoot=n}Bw.prototype.render=wA.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(W(409));Fw(n,e,null,null)};Bw.prototype.unmount=wA.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;bu(function(){Fw(null,n,null,null)}),e[zo]=null}};function Bw(n){this._internalRoot=n}Bw.prototype.unstable_scheduleHydration=function(n){if(n){var e=R2();n={blockedOn:null,target:n,priority:e};for(var t=0;t<oa.length&&e!==0&&e<oa[t].priority;t++);oa.splice(t,0,n),t===0&&j2(n)}};function xA(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Uw(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function XT(){}function _3(n,e,t,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var c=Iv(o);i.call(c)}}var o=ZR(e,s,n,0,null,!1,!1,"",XT);return n._reactRootContainer=o,n[zo]=o.current,Up(n.nodeType===8?n.parentNode:n),bu(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof s=="function"){var a=s;s=function(){var c=Iv(l);a.call(c)}}var l=yA(n,0,!1,null,null,!1,!1,"",XT);return n._reactRootContainer=l,n[zo]=l.current,Up(n.nodeType===8?n.parentNode:n),bu(function(){Fw(e,l,t,s)}),l}function $w(n,e,t,s,r){var i=t._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var a=r;r=function(){var l=Iv(o);a.call(l)}}Fw(e,o,n,r)}else o=_3(t,e,n,r,s);return Iv(o)}N2=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=$f(e.pendingLanes);t!==0&&(BE(e,t|1),gs(e,jt()),!(Te&6)&&(rf=jt()+500,bl()))}break;case 13:bu(function(){var s=Go(n,1);if(s!==null){var r=Xn();Qr(s,n,1,r)}}),vA(n,1)}};UE=function(n){if(n.tag===13){var e=Go(n,134217728);if(e!==null){var t=Xn();Qr(e,n,134217728,t)}vA(n,134217728)}};P2=function(n){if(n.tag===13){var e=cl(n),t=Go(n,e);if(t!==null){var s=Xn();Qr(t,n,e,s)}vA(n,e)}};R2=function(){return Le};I2=function(n,e){var t=Le;try{return Le=n,e()}finally{Le=t}};Ub=function(n,e,t){switch(e){case"input":if(jb(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var s=t[e];if(s!==n&&s.form===n.form){var r=Rw(s);if(!r)throw Error(W(90));c2(s),jb(s,r)}}}break;case"textarea":h2(n,t);break;case"select":e=t.value,e!=null&&yh(n,!!t.multiple,e,!1)}};v2=fA;w2=bu;var S3={usingClientEntryPoint:!1,Events:[ey,Zu,Rw,g2,y2,fA]},Nf={findFiberByHostInstance:Yl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},E3={bundleType:Nf.bundleType,version:Nf.version,rendererPackageName:Nf.rendererPackageName,rendererConfig:Nf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xo.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=_2(n),n===null?null:n.stateNode},findFiberByHostInstance:Nf.findFiberByHostInstance||b3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oy.isDisabled&&Oy.supportsFiber)try{Cw=Oy.inject(E3),ji=Oy}catch{}}Js.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=S3;Js.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xA(e))throw Error(W(200));return x3(n,e,null,t)};Js.createRoot=function(n,e){if(!xA(n))throw Error(W(299));var t=!1,s="",r=eI;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=yA(n,1,!1,null,null,t,!1,s,r),n[zo]=e.current,Up(n.nodeType===8?n.parentNode:n),new wA(e)};Js.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(W(188)):(n=Object.keys(n).join(","),Error(W(268,n)));return n=_2(e),n=n===null?null:n.stateNode,n};Js.flushSync=function(n){return bu(n)};Js.hydrate=function(n,e,t){if(!Uw(e))throw Error(W(200));return $w(null,n,e,!0,t)};Js.hydrateRoot=function(n,e,t){if(!xA(n))throw Error(W(405));var s=t!=null&&t.hydratedSources||null,r=!1,i="",o=eI;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=ZR(e,null,n,1,t??null,r,!1,i,o),n[zo]=e.current,Up(n),s)for(n=0;n<s.length;n++)t=s[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new Bw(e)};Js.render=function(n,e,t){if(!Uw(e))throw Error(W(200));return $w(null,n,e,!1,t)};Js.unmountComponentAtNode=function(n){if(!Uw(n))throw Error(W(40));return n._reactRootContainer?(bu(function(){$w(null,null,n,!1,function(){n._reactRootContainer=null,n[zo]=null})}),!0):!1};Js.unstable_batchedUpdates=fA;Js.unstable_renderSubtreeIntoContainer=function(n,e,t,s){if(!Uw(t))throw Error(W(200));if(n==null||n._reactInternals===void 0)throw Error(W(38));return $w(n,e,t,!1,s)};Js.version="18.3.1-next-f1338f8080-20240426";function tI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tI)}catch(n){console.error(n)}}tI(),t2.exports=Js;var A3=t2.exports,JT=A3;Tb.createRoot=JT.createRoot,Tb.hydrateRoot=JT.hydrateRoot;/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var QT="popstate";function T3(n={}){function e(r,i){let{pathname:o="/",search:a="",hash:l=""}=Cu(r.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),w_("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){let o=r.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=r.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof i=="string"?i:qp(i))}function s(r,i){Er(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(i)})`)}return k3(e,t,s,n)}function yt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Er(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function C3(){return Math.random().toString(36).substring(2,10)}function ZT(n,e){return{usr:n.state,key:n.key,idx:e}}function w_(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Cu(e):e,state:t,key:e&&e.key||s||C3()}}function qp({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Cu(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function k3(n,e,t,s={}){let{window:r=document.defaultView,v5Compat:i=!1}=s,o=r.history,a="POP",l=null,c=h();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function h(){return(o.state||{idx:null}).idx}function f(){a="POP";let b=h(),g=b==null?null:b-c;c=b,l&&l({action:a,location:w.location,delta:g})}function p(b,g){a="PUSH";let v=w_(w.location,b,g);t&&t(v,b),c=h()+1;let x=ZT(v,c),S=w.createHref(v);try{o.pushState(x,"",S)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;r.location.assign(S)}i&&l&&l({action:a,location:w.location,delta:1})}function m(b,g){a="REPLACE";let v=w_(w.location,b,g);t&&t(v,b),c=h();let x=ZT(v,c),S=w.createHref(v);o.replaceState(x,"",S),i&&l&&l({action:a,location:w.location,delta:0})}function y(b){return N3(b)}let w={get action(){return a},get location(){return n(r,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(QT,f),l=b,()=>{r.removeEventListener(QT,f),l=null}},createHref(b){return e(r,b)},createURL:y,encodeLocation(b){let g=y(b);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:m,go(b){return o.go(b)}};return w}function N3(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),yt(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:qp(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function nI(n,e,t="/"){return P3(n,e,t,!1)}function P3(n,e,t,s){let r=typeof e=="string"?Cu(e):e,i=Yo(r.pathname||"/",t);if(i==null)return null;let o=sI(n);R3(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=V3(i);a=U3(o[l],c,s)}return a}function sI(n,e=[],t=[],s="",r=!1){let i=(o,a,l=r,c)=>{let h={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(s)&&l)return;yt(h.relativePath.startsWith(s),`Absolute route path "${h.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(s.length)}let f=Bo([s,h.relativePath]),p=t.concat(h);o.children&&o.children.length>0&&(yt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),sI(o.children,e,p,f,l)),!(o.path==null&&!o.index)&&e.push({path:f,score:F3(f,o.index),routesMeta:p})};return n.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))i(o,a);else for(let c of rI(o.path))i(o,a,!0,c)}),e}function rI(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,r=t.endsWith("?"),i=t.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let o=rI(s.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),r&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function R3(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:B3(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var I3=/^:[\w-]+$/,j3=3,O3=2,L3=1,D3=10,M3=-2,eC=n=>n==="*";function F3(n,e){let t=n.split("/"),s=t.length;return t.some(eC)&&(s+=M3),e&&(s+=O3),t.filter(r=>!eC(r)).reduce((r,i)=>r+(I3.test(i)?j3:i===""?L3:D3),s)}function B3(n,e){return n.length===e.length&&n.slice(0,-1).every((s,r)=>s===e[r])?n[n.length-1]-e[e.length-1]:0}function U3(n,e,t=!1){let{routesMeta:s}=n,r={},i="/",o=[];for(let a=0;a<s.length;++a){let l=s[a],c=a===s.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=jv({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),p=l.route;if(!f&&c&&t&&!s[s.length-1].route.index&&(f=jv({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!f)return null;Object.assign(r,f.params),o.push({params:r,pathname:Bo([i,f.pathname]),pathnameBase:Y3(Bo([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=Bo([i,f.pathnameBase]))}return o}function jv(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=$3(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let i=r[0],o=i.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:s.reduce((c,{paramName:h,isOptional:f},p)=>{if(h==="*"){let y=a[p]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const m=a[p];return f&&!m?c[h]=void 0:c[h]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:n}}function $3(n,e=!1,t=!0){Er(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(s.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(s.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),s]}function V3(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Er(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Yo(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}var H3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,z3=n=>H3.test(n);function G3(n,e="/"){let{pathname:t,search:s="",hash:r=""}=typeof n=="string"?Cu(n):n,i;if(t)if(z3(t))i=t;else{if(t.includes("//")){let o=t;t=t.replace(/\/\/+/g,"/"),Er(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${t}`)}t.startsWith("/")?i=tC(t.substring(1),"/"):i=tC(t,e)}else i=e;return{pathname:i,search:K3(s),hash:q3(r)}}function tC(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function Vx(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function W3(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function iI(n){let e=W3(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function oI(n,e,t,s=!1){let r;typeof n=="string"?r=Cu(n):(r={...n},yt(!r.pathname||!r.pathname.includes("?"),Vx("?","pathname","search",r)),yt(!r.pathname||!r.pathname.includes("#"),Vx("#","pathname","hash",r)),yt(!r.search||!r.search.includes("#"),Vx("#","search","hash",r)));let i=n===""||r.pathname==="",o=i?"/":r.pathname,a;if(o==null)a=t;else{let f=e.length-1;if(!s&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;r.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=G3(r,a),c=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}var Bo=n=>n.join("/").replace(/\/\/+/g,"/"),Y3=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),K3=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,q3=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function X3(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var aI=["POST","PUT","PATCH","DELETE"];new Set(aI);var J3=["GET",...aI];new Set(J3);var ff=k.createContext(null);ff.displayName="DataRouter";var Vw=k.createContext(null);Vw.displayName="DataRouterState";k.createContext(!1);var lI=k.createContext({isTransitioning:!1});lI.displayName="ViewTransition";var Q3=k.createContext(new Map);Q3.displayName="Fetchers";var Z3=k.createContext(null);Z3.displayName="Await";var Hi=k.createContext(null);Hi.displayName="Navigation";var ny=k.createContext(null);ny.displayName="Location";var Jo=k.createContext({outlet:null,matches:[],isDataRoute:!1});Jo.displayName="Route";var bA=k.createContext(null);bA.displayName="RouteError";function eU(n,{relative:e}={}){yt(sy(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=k.useContext(Hi),{hash:r,pathname:i,search:o}=ry(n,{relative:e}),a=i;return t!=="/"&&(a=i==="/"?t:Bo([t,i])),s.createHref({pathname:a,search:o,hash:r})}function sy(){return k.useContext(ny)!=null}function Bn(){return yt(sy(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(ny).location}var cI="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function uI(n){k.useContext(Hi).static||k.useLayoutEffect(n)}function Hw(){let{isDataRoute:n}=k.useContext(Jo);return n?fU():tU()}function tU(){yt(sy(),"useNavigate() may be used only in the context of a <Router> component.");let n=k.useContext(ff),{basename:e,navigator:t}=k.useContext(Hi),{matches:s}=k.useContext(Jo),{pathname:r}=Bn(),i=JSON.stringify(iI(s)),o=k.useRef(!1);return uI(()=>{o.current=!0}),k.useCallback((l,c={})=>{if(Er(o.current,cI),!o.current)return;if(typeof l=="number"){t.go(l);return}let h=oI(l,JSON.parse(i),r,c.relative==="path");n==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Bo([e,h.pathname])),(c.replace?t.replace:t.push)(h,c.state,c)},[e,t,i,r,n])}k.createContext(null);function ry(n,{relative:e}={}){let{matches:t}=k.useContext(Jo),{pathname:s}=Bn(),r=JSON.stringify(iI(t));return k.useMemo(()=>oI(n,JSON.parse(r),s,e==="path"),[n,r,s,e])}function nU(n,e){return hI(n,e)}function hI(n,e,t,s,r){var v;yt(sy(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=k.useContext(Hi),{matches:o}=k.useContext(Jo),a=o[o.length-1],l=a?a.params:{},c=a?a.pathname:"/",h=a?a.pathnameBase:"/",f=a&&a.route;{let x=f&&f.path||"";dI(c,!f||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let p=Bn(),m;if(e){let x=typeof e=="string"?Cu(e):e;yt(h==="/"||((v=x.pathname)==null?void 0:v.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${x.pathname}" was given in the \`location\` prop.`),m=x}else m=p;let y=m.pathname||"/",w=y;if(h!=="/"){let x=h.replace(/^\//,"").split("/");w="/"+y.replace(/^\//,"").split("/").slice(x.length).join("/")}let b=nI(n,{pathname:w});Er(f||b!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Er(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=aU(b&&b.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:Bo([h,i.encodeLocation?i.encodeLocation(x.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?h:Bo([h,i.encodeLocation?i.encodeLocation(x.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:x.pathnameBase])})),o,t,s,r);return e&&g?k.createElement(ny.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},g):g}function sU(){let n=dU(),e=X3(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:i},"ErrorBoundary")," or"," ",k.createElement("code",{style:i},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),t?k.createElement("pre",{style:r},t):null,o)}var rU=k.createElement(sU,null),iU=class extends k.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?k.createElement(Jo.Provider,{value:this.props.routeContext},k.createElement(bA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function oU({routeContext:n,match:e,children:t}){let s=k.useContext(ff);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(Jo.Provider,{value:n},t)}function aU(n,e=[],t=null,s=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,o=t==null?void 0:t.errors;if(o!=null){let h=i.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);yt(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,h+1))}let a=!1,l=-1;if(t)for(let h=0;h<i.length;h++){let f=i[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=h),f.route.id){let{loaderData:p,errors:m}=t,y=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!m||m[f.route.id]===void 0);if(f.route.lazy||y){a=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}let c=t&&s?(h,f)=>{var p,m;s(h,{location:t.location,params:((m=(p=t.matches)==null?void 0:p[0])==null?void 0:m.params)??{},errorInfo:f})}:void 0;return i.reduceRight((h,f,p)=>{let m,y=!1,w=null,b=null;t&&(m=o&&f.route.id?o[f.route.id]:void 0,w=f.route.errorElement||rU,a&&(l<0&&p===0?(dI("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,b=null):l===p&&(y=!0,b=f.route.hydrateFallbackElement||null)));let g=e.concat(i.slice(0,p+1)),v=()=>{let x;return m?x=w:y?x=b:f.route.Component?x=k.createElement(f.route.Component,null):f.route.element?x=f.route.element:x=h,k.createElement(oU,{match:f,routeContext:{outlet:h,matches:g,isDataRoute:t!=null},children:x})};return t&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?k.createElement(iU,{location:t.location,revalidation:t.revalidation,component:w,error:m,children:v(),routeContext:{outlet:null,matches:g,isDataRoute:!0},onError:c}):v()},null)}function _A(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lU(n){let e=k.useContext(ff);return yt(e,_A(n)),e}function cU(n){let e=k.useContext(Vw);return yt(e,_A(n)),e}function uU(n){let e=k.useContext(Jo);return yt(e,_A(n)),e}function SA(n){let e=uU(n),t=e.matches[e.matches.length-1];return yt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function hU(){return SA("useRouteId")}function dU(){var s;let n=k.useContext(bA),e=cU("useRouteError"),t=SA("useRouteError");return n!==void 0?n:(s=e.errors)==null?void 0:s[t]}function fU(){let{router:n}=lU("useNavigate"),e=SA("useNavigate"),t=k.useRef(!1);return uI(()=>{t.current=!0}),k.useCallback(async(r,i={})=>{Er(t.current,cI),t.current&&(typeof r=="number"?n.navigate(r):await n.navigate(r,{fromRouteId:e,...i}))},[n,e])}var nC={};function dI(n,e,t){!e&&!nC[n]&&(nC[n]=!0,Er(!1,t))}k.memo(pU);function pU({routes:n,future:e,state:t,unstable_onError:s}){return hI(n,void 0,t,s,e)}function Lt(n){yt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function mU({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:r,static:i=!1}){yt(!sy(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),a=k.useMemo(()=>({basename:o,navigator:r,static:i,future:{}}),[o,r,i]);typeof t=="string"&&(t=Cu(t));let{pathname:l="/",search:c="",hash:h="",state:f=null,key:p="default"}=t,m=k.useMemo(()=>{let y=Yo(l,o);return y==null?null:{location:{pathname:y,search:c,hash:h,state:f,key:p},navigationType:s}},[o,l,c,h,f,p,s]);return Er(m!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${h}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:k.createElement(Hi.Provider,{value:a},k.createElement(ny.Provider,{children:e,value:m}))}function gU({children:n,location:e}){return nU(x_(n),e)}function x_(n,e=[]){let t=[];return k.Children.forEach(n,(s,r)=>{if(!k.isValidElement(s))return;let i=[...e,r];if(s.type===k.Fragment){t.push.apply(t,x_(s.props.children,i));return}yt(s.type===Lt,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),yt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=x_(s.props.children,i)),t.push(o)}),t}var b0="get",_0="application/x-www-form-urlencoded";function zw(n){return n!=null&&typeof n.tagName=="string"}function yU(n){return zw(n)&&n.tagName.toLowerCase()==="button"}function vU(n){return zw(n)&&n.tagName.toLowerCase()==="form"}function wU(n){return zw(n)&&n.tagName.toLowerCase()==="input"}function xU(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function bU(n,e){return n.button===0&&(!e||e==="_self")&&!xU(n)}var Ly=null;function _U(){if(Ly===null)try{new FormData(document.createElement("form"),0),Ly=!1}catch{Ly=!0}return Ly}var SU=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Hx(n){return n!=null&&!SU.has(n)?(Er(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_0}"`),null):n}function EU(n,e){let t,s,r,i,o;if(vU(n)){let a=n.getAttribute("action");s=a?Yo(a,e):null,t=n.getAttribute("method")||b0,r=Hx(n.getAttribute("enctype"))||_0,i=new FormData(n)}else if(yU(n)||wU(n)&&(n.type==="submit"||n.type==="image")){let a=n.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=n.getAttribute("formaction")||a.getAttribute("action");if(s=l?Yo(l,e):null,t=n.getAttribute("formmethod")||a.getAttribute("method")||b0,r=Hx(n.getAttribute("formenctype"))||Hx(a.getAttribute("enctype"))||_0,i=new FormData(a,n),!_U()){let{name:c,type:h,value:f}=n;if(h==="image"){let p=c?`${c}.`:"";i.append(`${p}x`,"0"),i.append(`${p}y`,"0")}else c&&i.append(c,f)}}else{if(zw(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=b0,s=null,r=_0,o=n}return i&&r==="text/plain"&&(o=i,i=void 0),{action:s,method:t.toLowerCase(),encType:r,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function EA(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function AU(n,e,t){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return s.pathname==="/"?s.pathname=`_root.${t}`:e&&Yo(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${t}`,s}async function TU(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function CU(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function kU(n,e,t){let s=await Promise.all(n.map(async r=>{let i=e.routes[r.route.id];if(i){let o=await TU(i,t);return o.links?o.links():[]}return[]}));return IU(s.flat(1).filter(CU).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function sC(n,e,t,s,r,i){let o=(l,c)=>t[c]?l.route.id!==t[c].route.id:!0,a=(l,c)=>{var h;return t[c].pathname!==l.pathname||((h=t[c].route.path)==null?void 0:h.endsWith("*"))&&t[c].params["*"]!==l.params["*"]};return i==="assets"?e.filter((l,c)=>o(l,c)||a(l,c)):i==="data"?e.filter((l,c)=>{var f;let h=s.routes[l.route.id];if(!h||!h.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let p=l.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((f=t[0])==null?void 0:f.params)||{},nextUrl:new URL(n,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function NU(n,e,{includeHydrateFallback:t}={}){return PU(n.map(s=>{let r=e.routes[s.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function PU(n){return[...new Set(n)]}function RU(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function IU(n,e){let t=new Set;return new Set(e),n.reduce((s,r)=>{let i=JSON.stringify(RU(r));return t.has(i)||(t.add(i),s.push({key:i,link:r})),s},[])}function fI(){let n=k.useContext(ff);return EA(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function jU(){let n=k.useContext(Vw);return EA(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var AA=k.createContext(void 0);AA.displayName="FrameworkContext";function pI(){let n=k.useContext(AA);return EA(n,"You must render this element inside a <HydratedRouter> element"),n}function OU(n,e){let t=k.useContext(AA),[s,r]=k.useState(!1),[i,o]=k.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:h,onTouchStart:f}=e,p=k.useRef(null);k.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let w=g=>{g.forEach(v=>{o(v.isIntersecting)})},b=new IntersectionObserver(w,{threshold:.5});return p.current&&b.observe(p.current),()=>{b.disconnect()}}},[n]),k.useEffect(()=>{if(s){let w=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(w)}}},[s]);let m=()=>{r(!0)},y=()=>{r(!1),o(!1)};return t?n!=="intent"?[i,p,{}]:[i,p,{onFocus:Pf(a,m),onBlur:Pf(l,y),onMouseEnter:Pf(c,m),onMouseLeave:Pf(h,y),onTouchStart:Pf(f,m)}]:[!1,p,{}]}function Pf(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function LU({page:n,...e}){let{router:t}=fI(),s=k.useMemo(()=>nI(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?k.createElement(MU,{page:n,matches:s,...e}):null}function DU(n){let{manifest:e,routeModules:t}=pI(),[s,r]=k.useState([]);return k.useEffect(()=>{let i=!1;return kU(n,e,t).then(o=>{i||r(o)}),()=>{i=!0}},[n,e,t]),s}function MU({page:n,matches:e,...t}){let s=Bn(),{manifest:r,routeModules:i}=pI(),{basename:o}=fI(),{loaderData:a,matches:l}=jU(),c=k.useMemo(()=>sC(n,e,l,r,s,"data"),[n,e,l,r,s]),h=k.useMemo(()=>sC(n,e,l,r,s,"assets"),[n,e,l,r,s]),f=k.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let y=new Set,w=!1;if(e.forEach(g=>{var x;let v=r.routes[g.route.id];!v||!v.hasLoader||(!c.some(S=>S.route.id===g.route.id)&&g.route.id in a&&((x=i[g.route.id])!=null&&x.shouldRevalidate)||v.hasClientLoader?w=!0:y.add(g.route.id))}),y.size===0)return[];let b=AU(n,o,"data");return w&&y.size>0&&b.searchParams.set("_routes",e.filter(g=>y.has(g.route.id)).map(g=>g.route.id).join(",")),[b.pathname+b.search]},[o,a,s,r,c,e,n,i]),p=k.useMemo(()=>NU(h,r),[h,r]),m=DU(h);return k.createElement(k.Fragment,null,f.map(y=>k.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...t})),p.map(y=>k.createElement("link",{key:y,rel:"modulepreload",href:y,...t})),m.map(({key:y,link:w})=>k.createElement("link",{key:y,nonce:t.nonce,...w})))}function FU(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var mI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{mI&&(window.__reactRouterVersion="7.9.6")}catch{}function BU({basename:n,children:e,window:t}){let s=k.useRef();s.current==null&&(s.current=T3({window:t,v5Compat:!0}));let r=s.current,[i,o]=k.useState({action:r.action,location:r.location}),a=k.useCallback(l=>{k.startTransition(()=>o(l))},[o]);return k.useLayoutEffect(()=>r.listen(a),[r,a]),k.createElement(mU,{basename:n,children:e,location:i.location,navigationType:i.action,navigator:r})}var gI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tt=k.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:r,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:f,...p},m){let{basename:y}=k.useContext(Hi),w=typeof c=="string"&&gI.test(c),b,g=!1;if(typeof c=="string"&&w&&(b=c,mI))try{let R=new URL(window.location.href),O=c.startsWith("//")?new URL(R.protocol+c):new URL(c),M=Yo(O.pathname,y);O.origin===R.origin&&M!=null?c=M+O.search+O.hash:g=!0}catch{Er(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=eU(c,{relative:r}),[x,S,A]=OU(s,p),C=VU(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:r,viewTransition:f});function N(R){e&&e(R),R.defaultPrevented||C(R)}let P=k.createElement("a",{...p,...A,href:b||v,onClick:g||i?e:N,ref:FU(m,S),target:l,"data-discover":!w&&t==="render"?"true":void 0});return x&&!w?k.createElement(k.Fragment,null,P,k.createElement(LU,{page:v})):P});tt.displayName="Link";var yI=k.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:r=!1,style:i,to:o,viewTransition:a,children:l,...c},h){let f=ry(o,{relative:c.relative}),p=Bn(),m=k.useContext(Vw),{navigator:y,basename:w}=k.useContext(Hi),b=m!=null&&YU(f)&&a===!0,g=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,v=p.pathname,x=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;t||(v=v.toLowerCase(),x=x?x.toLowerCase():null,g=g.toLowerCase()),x&&w&&(x=Yo(x,w)||x);const S=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let A=v===g||!r&&v.startsWith(g)&&v.charAt(S)==="/",C=x!=null&&(x===g||!r&&x.startsWith(g)&&x.charAt(g.length)==="/"),N={isActive:A,isPending:C,isTransitioning:b},P=A?e:void 0,R;typeof s=="function"?R=s(N):R=[s,A?"active":null,C?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let O=typeof i=="function"?i(N):i;return k.createElement(tt,{...c,"aria-current":P,className:R,ref:h,style:O,to:o,viewTransition:a},typeof l=="function"?l(N):l)});yI.displayName="NavLink";var UU=k.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:r,state:i,method:o=b0,action:a,onSubmit:l,relative:c,preventScrollReset:h,viewTransition:f,...p},m)=>{let y=GU(),w=WU(a,{relative:c}),b=o.toLowerCase()==="get"?"get":"post",g=typeof a=="string"&&gI.test(a),v=x=>{if(l&&l(x),x.defaultPrevented)return;x.preventDefault();let S=x.nativeEvent.submitter,A=(S==null?void 0:S.getAttribute("formmethod"))||o;y(S||x.currentTarget,{fetcherKey:e,method:A,navigate:t,replace:r,state:i,relative:c,preventScrollReset:h,viewTransition:f})};return k.createElement("form",{ref:m,method:b,action:w,onSubmit:s?l:v,...p,"data-discover":!g&&n==="render"?"true":void 0})});UU.displayName="Form";function $U(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vI(n){let e=k.useContext(ff);return yt(e,$U(n)),e}function VU(n,{target:e,replace:t,state:s,preventScrollReset:r,relative:i,viewTransition:o}={}){let a=Hw(),l=Bn(),c=ry(n,{relative:i});return k.useCallback(h=>{if(bU(h,e)){h.preventDefault();let f=t!==void 0?t:qp(l)===qp(c);a(n,{replace:f,state:s,preventScrollReset:r,relative:i,viewTransition:o})}},[l,a,c,t,s,e,n,r,i,o])}var HU=0,zU=()=>`__${String(++HU)}__`;function GU(){let{router:n}=vI("useSubmit"),{basename:e}=k.useContext(Hi),t=hU();return k.useCallback(async(s,r={})=>{let{action:i,method:o,encType:a,formData:l,body:c}=EU(s,e);if(r.navigate===!1){let h=r.fetcherKey||zU();await n.fetch(h,t,r.action||i,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||o,formEncType:r.encType||a,flushSync:r.flushSync})}else await n.navigate(r.action||i,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||o,formEncType:r.encType||a,replace:r.replace,state:r.state,fromRouteId:t,flushSync:r.flushSync,viewTransition:r.viewTransition})},[n,e,t])}function WU(n,{relative:e}={}){let{basename:t}=k.useContext(Hi),s=k.useContext(Jo);yt(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),i={...ry(n||".",{relative:e})},o=Bn();if(n==null){i.search=o.search;let a=new URLSearchParams(i.search),l=a.getAll("index");if(l.some(h=>h==="")){a.delete("index"),l.filter(f=>f).forEach(f=>a.append("index",f));let h=a.toString();i.search=h?`?${h}`:""}}return(!n||n===".")&&r.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(i.pathname=i.pathname==="/"?t:Bo([t,i.pathname])),qp(i)}function YU(n,{relative:e}={}){let t=k.useContext(lI);yt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=vI("useViewTransitionState"),r=ry(n,{relative:e});if(!t.isTransitioning)return!1;let i=Yo(t.currentLocation.pathname,s)||t.currentLocation.pathname,o=Yo(t.nextLocation.pathname,s)||t.nextLocation.pathname;return jv(r.pathname,o)!=null||jv(r.pathname,i)!=null}const zi=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),fs=({className:n="h-5 w-5"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),TA=({collapsed:n})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-6 w-6 text-slate-500 transition-transform duration-300 ${n?"":"rotate-180"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}),KU=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-purple-600",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM5 9a1 1 0 011-1h1.757l.38-1.517a1 1 0 011.956-.011L11 8h2a1 1 0 110 2h-1.243l-.38 1.517a1 1 0 01-1.956.011L9 10H7a1 1 0 01-1-1V9z",clipRule:"evenodd"})}),qU=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline-block text-slate-400 align-middle",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),XU=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),JU=()=>d.jsx("div",{className:"h-6 w-6 rounded-full bg-green-500 flex items-center justify-center",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),S0=({className:n="flex-shrink-0 h-6 w-6 text-brand-blue"})=>d.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),fl=({className:n="h-5 w-5"})=>d.jsxs("svg",{className:`animate-spin ${n}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),wI=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),CA=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),QU=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-500",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2-2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})}),kA=({className:n="h-6 w-6 flex-shrink-0"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),xI=({className:n="h-5 w-5"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),ZU=({className:n="h-5 w-5"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L16.732 3.732z"})}),e4=({className:n="h-5 w-5"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),t4=({className:n="h-5 w-5"})=>d.jsxs("svg",{className:n,viewBox:"0 0 32 41",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[d.jsx("path",{d:"M21.3333 0H5.33333C2.38667 0 0 2.42187 0 5.41667V35.5833C0 38.5781 2.38667 41 5.33333 41H26.6667C29.6133 41 32 38.5781 32 35.5833V13.6667L21.3333 0Z",fill:"#4285F4"}),d.jsx("path",{d:"M21.3333 0V10.8333C21.3333 13.8281 23.72 16.25 26.6667 16.25H31.8L21.3333 0Z",fill:"#0053B5"}),d.jsx("path",{d:"M24 29.8958H8V27.0417H24V29.8958ZM24 24.1875H8V21.3333H24V24.1875ZM17.3333 18.4792H8V15.625H17.3333V18.4792Z",fill:"white"})]}),n4=({className:n="h-6 w-6",...e})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",...e,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),bI=()=>d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),d.jsx("path",{d:"M6 12v5c3.33 1.67 6.67 1.67 10 0v-5"})]}),s4=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 21h10M8 21V3M16 21V3M8 7h8M8 11h8M8 15h8M8 19h8"})}),_I=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r4=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),i4=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a2 2 0 01-2-2V7a2 2 0 012-2h4M5 8h1.586a1 1 0 01.707.293l2.414 2.414a1 1 0 00.707.293h3.172a1 1 0 00.707-.293l2.414-2.414a1 1 0 01.707-.293H21"})}),o4=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),a4=({className:n="h-6 w-6"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}),l4=({className:n="h-6 w-6"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),c4=({className:n="h-6 w-6"})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})}),u4=({collapsed:n})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:n?d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 4.5l7.5 7.5-7.5 7.5m6-15l7.5 7.5-7.5 7.5"}):d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5"})}),NA=k.createContext({});function pf(n){const e=k.useRef(null);return e.current===null&&(e.current=n()),e.current}const Gw=k.createContext(null),Ww=k.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class h4 extends k.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function d4({children:n,isPresent:e}){const t=k.useId(),s=k.useRef(null),r=k.useRef({width:0,height:0,top:0,left:0}),{nonce:i}=k.useContext(Ww);return k.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=r.current;if(e||!s.current||!o||!a)return;s.current.dataset.motionPopId=t;const h=document.createElement("style");return i&&(h.nonce=i),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),d.jsx(h4,{isPresent:e,childRef:s,sizeRef:r,children:k.cloneElement(n,{ref:s})})}const f4=({children:n,initial:e,isPresent:t,onExitComplete:s,custom:r,presenceAffectsLayout:i,mode:o})=>{const a=pf(p4),l=k.useId(),c=k.useCallback(f=>{a.set(f,!0);for(const p of a.values())if(!p)return;s&&s()},[a,s]),h=k.useMemo(()=>({id:l,initial:e,isPresent:t,custom:r,onExitComplete:c,register:f=>(a.set(f,!1),()=>a.delete(f))}),i?[Math.random(),c]:[t,c]);return k.useMemo(()=>{a.forEach((f,p)=>a.set(p,!1))},[t]),k.useEffect(()=>{!t&&!a.size&&s&&s()},[t]),o==="popLayout"&&(n=d.jsx(d4,{isPresent:t,children:n})),d.jsx(Gw.Provider,{value:h,children:n})};function p4(){return new Map}function SI(n=!0){const e=k.useContext(Gw);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:s,register:r}=e,i=k.useId();k.useEffect(()=>{n&&r(i)},[n]);const o=k.useCallback(()=>n&&s&&s(i),[i,s,n]);return!t&&s?[!1,o]:[!0]}const Dy=n=>n.key||"";function rC(n){const e=[];return k.Children.forEach(n,t=>{k.isValidElement(t)&&e.push(t)}),e}const PA=typeof window<"u",Yw=PA?k.useLayoutEffect:k.useEffect,Kw=({children:n,custom:e,initial:t=!0,onExitComplete:s,presenceAffectsLayout:r=!0,mode:i="sync",propagate:o=!1})=>{const[a,l]=SI(o),c=k.useMemo(()=>rC(n),[n]),h=o&&!a?[]:c.map(Dy),f=k.useRef(!0),p=k.useRef(c),m=pf(()=>new Map),[y,w]=k.useState(c),[b,g]=k.useState(c);Yw(()=>{f.current=!1,p.current=c;for(let S=0;S<b.length;S++){const A=Dy(b[S]);h.includes(A)?m.delete(A):m.get(A)!==!0&&m.set(A,!1)}},[b,h.length,h.join("-")]);const v=[];if(c!==y){let S=[...c];for(let A=0;A<b.length;A++){const C=b[A],N=Dy(C);h.includes(N)||(S.splice(A,0,C),v.push(C))}i==="wait"&&v.length&&(S=v),g(rC(S)),w(c);return}const{forceRender:x}=k.useContext(NA);return d.jsx(d.Fragment,{children:b.map(S=>{const A=Dy(S),C=o&&!a?!1:c===b||h.includes(A),N=()=>{if(m.has(A))m.set(A,!0);else return;let P=!0;m.forEach(R=>{R||(P=!1)}),P&&(x==null||x(),g(p.current),o&&(l==null||l()),s&&s())};return d.jsx(f4,{isPresent:C,initial:!f.current||t?void 0:!1,custom:C?void 0:e,presenceAffectsLayout:r,mode:i,onExitComplete:C?void 0:N,children:S},A)})})},Jn=n=>n;let m4=Jn,EI=Jn;function RA(n){let e;return()=>(e===void 0&&(e=n()),e)}const pl=(n,e,t)=>{const s=e-n;return s===0?1:(t-n)/s},Li=n=>n*1e3,Di=n=>n/1e3,g4={useManualTiming:!1};function y4(n){let e=new Set,t=new Set,s=!1,r=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){i.has(c)&&(l.schedule(c),n()),c(o)}const l={schedule:(c,h=!1,f=!1)=>{const m=f&&s?e:t;return h&&i.add(c),m.has(c)||m.add(c),c},cancel:c=>{t.delete(c),i.delete(c)},process:c=>{if(o=c,s){r=!0;return}s=!0,[e,t]=[t,e],e.forEach(a),e.clear(),s=!1,r&&(r=!1,l.process(c))}};return l}const My=["read","resolveKeyframes","update","preRender","render","postRender"],v4=40;function AI(n,e){let t=!1,s=!0;const r={delta:0,timestamp:0,isProcessing:!1},i=()=>t=!0,o=My.reduce((g,v)=>(g[v]=y4(i),g),{}),{read:a,resolveKeyframes:l,update:c,preRender:h,render:f,postRender:p}=o,m=()=>{const g=performance.now();t=!1,r.delta=s?1e3/60:Math.max(Math.min(g-r.timestamp,v4),1),r.timestamp=g,r.isProcessing=!0,a.process(r),l.process(r),c.process(r),h.process(r),f.process(r),p.process(r),r.isProcessing=!1,t&&e&&(s=!1,n(m))},y=()=>{t=!0,s=!0,r.isProcessing||n(m)};return{schedule:My.reduce((g,v)=>{const x=o[v];return g[v]=(S,A=!1,C=!1)=>(t||y(),x.schedule(S,A,C)),g},{}),cancel:g=>{for(let v=0;v<My.length;v++)o[My[v]].cancel(g)},state:r,steps:o}}const{schedule:Pe,cancel:ei,state:on,steps:zx}=AI(typeof requestAnimationFrame<"u"?requestAnimationFrame:Jn,!0),TI=k.createContext({strict:!1}),iC={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},of={};for(const n in iC)of[n]={isEnabled:e=>iC[n].some(t=>!!e[t])};function w4(n){for(const e in n)of[e]={...of[e],...n[e]}}const x4=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ov(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||x4.has(n)}let CI=n=>!Ov(n);function b4(n){n&&(CI=e=>e.startsWith("on")?!Ov(e):n(e))}try{b4(require("@emotion/is-prop-valid").default)}catch{}function _4(n,e,t){const s={};for(const r in n)r==="values"&&typeof n.values=="object"||(CI(r)||t===!0&&Ov(r)||!e&&!Ov(r)||n.draggable&&r.startsWith("onDrag"))&&(s[r]=n[r]);return s}function S4(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...s)=>n(...s);return new Proxy(t,{get:(s,r)=>r==="create"?n:(e.has(r)||e.set(r,n(r)),e.get(r))})}const qw=k.createContext({});function Xp(n){return typeof n=="string"||Array.isArray(n)}function Xw(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const IA=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],jA=["initial",...IA];function Jw(n){return Xw(n.animate)||jA.some(e=>Xp(n[e]))}function kI(n){return!!(Jw(n)||n.variants)}function E4(n,e){if(Jw(n)){const{initial:t,animate:s}=n;return{initial:t===!1||Xp(t)?t:void 0,animate:Xp(s)?s:void 0}}return n.inherit!==!1?e:{}}function A4(n){const{initial:e,animate:t}=E4(n,k.useContext(qw));return k.useMemo(()=>({initial:e,animate:t}),[oC(e),oC(t)])}function oC(n){return Array.isArray(n)?n.join(" "):n}const T4=Symbol.for("motionComponentSymbol");function oh(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function C4(n,e,t){return k.useCallback(s=>{s&&n.onMount&&n.onMount(s),e&&(s?e.mount(s):e.unmount()),t&&(typeof t=="function"?t(s):oh(t)&&(t.current=s))},[e])}const OA=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),k4="framerAppearId",NI="data-"+OA(k4),{schedule:LA}=AI(queueMicrotask,!1),PI=k.createContext({});function N4(n,e,t,s,r){var i,o;const{visualElement:a}=k.useContext(qw),l=k.useContext(TI),c=k.useContext(Gw),h=k.useContext(Ww).reducedMotion,f=k.useRef(null);s=s||l.renderer,!f.current&&s&&(f.current=s(n,{visualState:e,parent:a,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:h}));const p=f.current,m=k.useContext(PI);p&&!p.projection&&r&&(p.type==="html"||p.type==="svg")&&P4(f.current,t,r,m);const y=k.useRef(!1);k.useInsertionEffect(()=>{p&&y.current&&p.update(t,c)});const w=t[NI],b=k.useRef(!!w&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,w))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,w)));return Yw(()=>{p&&(y.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),LA.render(p.render),b.current&&p.animationState&&p.animationState.animateChanges())}),k.useEffect(()=>{p&&(!b.current&&p.animationState&&p.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var g;(g=window.MotionHandoffMarkAsComplete)===null||g===void 0||g.call(window,w)}),b.current=!1))}),p}function P4(n,e,t,s){const{layoutId:r,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:RI(n.parent)),n.projection.setOptions({layoutId:r,layout:i,alwaysMeasureLayout:!!o||a&&oh(a),visualElement:n,animationType:typeof i=="string"?i:"both",initialPromotionConfig:s,layoutScroll:l,layoutRoot:c})}function RI(n){if(n)return n.options.allowProjection!==!1?n.projection:RI(n.parent)}function R4({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:s,Component:r}){var i,o;n&&w4(n);function a(c,h){let f;const p={...k.useContext(Ww),...c,layoutId:I4(c)},{isStatic:m}=p,y=A4(c),w=s(c,m);if(!m&&PA){j4();const b=O4(p);f=b.MeasureLayout,y.visualElement=N4(r,w,p,e,b.ProjectionNode)}return d.jsxs(qw.Provider,{value:y,children:[f&&y.visualElement?d.jsx(f,{visualElement:y.visualElement,...p}):null,t(r,c,C4(w,y.visualElement,h),w,m,y.visualElement)]})}a.displayName=`motion.${typeof r=="string"?r:`create(${(o=(i=r.displayName)!==null&&i!==void 0?i:r.name)!==null&&o!==void 0?o:""})`}`;const l=k.forwardRef(a);return l[T4]=r,l}function I4({layoutId:n}){const e=k.useContext(NA).id;return e&&n!==void 0?e+"-"+n:n}function j4(n,e){k.useContext(TI).strict}function O4(n){const{drag:e,layout:t}=of;if(!e&&!t)return{};const s={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const L4=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function DA(n){return typeof n!="string"||n.includes("-")?!1:!!(L4.indexOf(n)>-1||/[A-Z]/u.test(n))}function aC(n){const e=[{},{}];return n==null||n.values.forEach((t,s)=>{e[0][s]=t.get(),e[1][s]=t.getVelocity()}),e}function MA(n,e,t,s){if(typeof e=="function"){const[r,i]=aC(s);e=e(t!==void 0?t:n.custom,r,i)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[r,i]=aC(s);e=e(t!==void 0?t:n.custom,r,i)}return e}const b_=n=>Array.isArray(n),D4=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),M4=n=>b_(n)?n[n.length-1]||0:n,ln=n=>!!(n&&n.getVelocity);function E0(n){const e=ln(n)?n.get():n;return D4(e)?e.toValue():e}function F4({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},s,r,i){const o={latestValues:B4(s,r,i,n),renderState:e()};return t&&(o.onMount=a=>t({props:s,current:a,...o}),o.onUpdate=a=>t(a)),o}const II=n=>(e,t)=>{const s=k.useContext(qw),r=k.useContext(Gw),i=()=>F4(n,e,s,r);return t?i():pf(i)};function B4(n,e,t,s){const r={},i=s(n,{});for(const p in i)r[p]=E0(i[p]);let{initial:o,animate:a}=n;const l=Jw(n),c=kI(n);e&&c&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=t?t.initial===!1:!1;h=h||o===!1;const f=h?a:o;if(f&&typeof f!="boolean"&&!Xw(f)){const p=Array.isArray(f)?f:[f];for(let m=0;m<p.length;m++){const y=MA(n,p[m]);if(y){const{transitionEnd:w,transition:b,...g}=y;for(const v in g){let x=g[v];if(Array.isArray(x)){const S=h?x.length-1:0;x=x[S]}x!==null&&(r[v]=x)}for(const v in w)r[v]=w[v]}}}return r}const mf=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ku=new Set(mf),jI=n=>e=>typeof e=="string"&&e.startsWith(n),OI=jI("--"),U4=jI("var(--"),FA=n=>U4(n)?$4.test(n.split("/*")[0].trim()):!1,$4=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,LI=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Ui=(n,e,t)=>t>e?e:t<n?n:t,gf={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Jp={...gf,transform:n=>Ui(0,1,n)},Fy={...gf,default:1},iy=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),ea=iy("deg"),Mi=iy("%"),he=iy("px"),V4=iy("vh"),H4=iy("vw"),lC={...Mi,parse:n=>Mi.parse(n)/100,transform:n=>Mi.transform(n*100)},z4={borderWidth:he,borderTopWidth:he,borderRightWidth:he,borderBottomWidth:he,borderLeftWidth:he,borderRadius:he,radius:he,borderTopLeftRadius:he,borderTopRightRadius:he,borderBottomRightRadius:he,borderBottomLeftRadius:he,width:he,maxWidth:he,height:he,maxHeight:he,top:he,right:he,bottom:he,left:he,padding:he,paddingTop:he,paddingRight:he,paddingBottom:he,paddingLeft:he,margin:he,marginTop:he,marginRight:he,marginBottom:he,marginLeft:he,backgroundPositionX:he,backgroundPositionY:he},G4={rotate:ea,rotateX:ea,rotateY:ea,rotateZ:ea,scale:Fy,scaleX:Fy,scaleY:Fy,scaleZ:Fy,skew:ea,skewX:ea,skewY:ea,distance:he,translateX:he,translateY:he,translateZ:he,x:he,y:he,z:he,perspective:he,transformPerspective:he,opacity:Jp,originX:lC,originY:lC,originZ:he},cC={...gf,transform:Math.round},BA={...z4,...G4,zIndex:cC,size:he,fillOpacity:Jp,strokeOpacity:Jp,numOctaves:cC},W4={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Y4=mf.length;function K4(n,e,t){let s="",r=!0;for(let i=0;i<Y4;i++){const o=mf[i],a=n[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||t){const c=LI(a,BA[o]);if(!l){r=!1;const h=W4[o]||o;s+=`${h}(${c}) `}t&&(e[o]=c)}}return s=s.trim(),t?s=t(e,r?"":s):r&&(s="none"),s}function UA(n,e,t){const{style:s,vars:r,transformOrigin:i}=n;let o=!1,a=!1;for(const l in e){const c=e[l];if(ku.has(l)){o=!0;continue}else if(OI(l)){r[l]=c;continue}else{const h=LI(c,BA[l]);l.startsWith("origin")?(a=!0,i[l]=h):s[l]=h}}if(e.transform||(o||t?s.transform=K4(e,n.transform,t):s.transform&&(s.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:h=0}=i;s.transformOrigin=`${l} ${c} ${h}`}}const q4={offset:"stroke-dashoffset",array:"stroke-dasharray"},X4={offset:"strokeDashoffset",array:"strokeDasharray"};function J4(n,e,t=1,s=0,r=!0){n.pathLength=1;const i=r?q4:X4;n[i.offset]=he.transform(-s);const o=he.transform(e),a=he.transform(t);n[i.array]=`${o} ${a}`}function uC(n,e,t){return typeof n=="string"?n:he.transform(e+t*n)}function Q4(n,e,t){const s=uC(e,n.x,n.width),r=uC(t,n.y,n.height);return`${s} ${r}`}function $A(n,{attrX:e,attrY:t,attrScale:s,originX:r,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},h,f){if(UA(n,c,f),h){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:p,style:m,dimensions:y}=n;p.transform&&(y&&(m.transform=p.transform),delete p.transform),y&&(r!==void 0||i!==void 0||m.transform)&&(m.transformOrigin=Q4(y,r!==void 0?r:.5,i!==void 0?i:.5)),e!==void 0&&(p.x=e),t!==void 0&&(p.y=t),s!==void 0&&(p.scale=s),o!==void 0&&J4(p,o,a,l,!1)}const VA=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),DI=()=>({...VA(),attrs:{}}),HA=n=>typeof n=="string"&&n.toLowerCase()==="svg";function MI(n,{style:e,vars:t},s,r){Object.assign(n.style,e,r&&r.getProjectionStyles(s));for(const i in t)n.style.setProperty(i,t[i])}const FI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function BI(n,e,t,s){MI(n,e,void 0,s);for(const r in e.attrs)n.setAttribute(FI.has(r)?r:OA(r),e.attrs[r])}const Lv={};function Z4(n){Object.assign(Lv,n)}function UI(n,{layout:e,layoutId:t}){return ku.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Lv[n]||n==="opacity")}function zA(n,e,t){var s;const{style:r}=n,i={};for(const o in r)(ln(r[o])||e.style&&ln(e.style[o])||UI(o,n)||((s=t==null?void 0:t.getValue(o))===null||s===void 0?void 0:s.liveStyle)!==void 0)&&(i[o]=r[o]);return i}function $I(n,e,t){const s=zA(n,e,t);for(const r in n)if(ln(n[r])||ln(e[r])){const i=mf.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;s[i]=n[r]}return s}function e$(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const hC=["x","y","width","height","cx","cy","r"],t$={useVisualState:II({scrapeMotionValuesFromProps:$I,createRenderState:DI,onUpdate:({props:n,prevProps:e,current:t,renderState:s,latestValues:r})=>{if(!t)return;let i=!!n.drag;if(!i){for(const a in r)if(ku.has(a)){i=!0;break}}if(!i)return;let o=!e;if(e)for(let a=0;a<hC.length;a++){const l=hC[a];n[l]!==e[l]&&(o=!0)}o&&Pe.read(()=>{e$(t,s),Pe.render(()=>{$A(s,r,HA(t.tagName),n.transformTemplate),BI(t,s)})})}})},n$={useVisualState:II({scrapeMotionValuesFromProps:zA,createRenderState:VA})};function VI(n,e,t){for(const s in e)!ln(e[s])&&!UI(s,t)&&(n[s]=e[s])}function s$({transformTemplate:n},e){return k.useMemo(()=>{const t=VA();return UA(t,e,n),Object.assign({},t.vars,t.style)},[e])}function r$(n,e){const t=n.style||{},s={};return VI(s,t,n),Object.assign(s,s$(n,e)),s}function i$(n,e){const t={},s=r$(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=s,t}function o$(n,e,t,s){const r=k.useMemo(()=>{const i=DI();return $A(i,e,HA(s),n.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(n.style){const i={};VI(i,n.style,n),r.style={...i,...r.style}}return r}function a$(n=!1){return(t,s,r,{latestValues:i},o)=>{const l=(DA(t)?o$:i$)(s,i,o,t),c=_4(s,typeof t=="string",n),h=t!==k.Fragment?{...c,...l,ref:r}:{},{children:f}=s,p=k.useMemo(()=>ln(f)?f.get():f,[f]);return k.createElement(t,{...h,children:p})}}function l$(n,e){return function(s,{forwardMotionProps:r}={forwardMotionProps:!1}){const o={...DA(s)?t$:n$,preloadedFeatures:n,useRender:a$(r),createVisualElement:e,Component:s};return R4(o)}}function HI(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let s=0;s<t;s++)if(e[s]!==n[s])return!1;return!0}function Qw(n,e,t){const s=n.getProps();return MA(s,e,t!==void 0?t:s.custom,n)}const zI=RA(()=>window.ScrollTimeline!==void 0);class c${constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let s=0;s<this.animations.length;s++)this.animations[s][e]=t}attachTimeline(e,t){const s=this.animations.map(r=>{if(zI()&&r.attachTimeline)return r.attachTimeline(e);if(typeof t=="function")return t(r)});return()=>{s.forEach((r,i)=>{r&&r(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class GI extends c${then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function GA(n,e){return n?n[e]||n.default||n:void 0}const Dv=2e4;function WA(n){let e=0;const t=50;let s=n.next(e);for(;!s.done&&e<Dv;)e+=t,s=n.next(e);return e>=Dv?1/0:e}function u$(n,e=100,t){const s=t({...n,keyframes:[0,e]}),r=Math.min(WA(s),Dv);return{type:"keyframes",ease:i=>s.next(r*i).value/e,duration:Di(r)}}function Zw(n){return typeof n=="function"}function dC(n,e){n.timeline=e,n.onfinish=null}const YA=n=>Array.isArray(n)&&typeof n[0]=="number",h$={linearEasing:void 0};function d$(n,e){const t=RA(n);return()=>{var s;return(s=h$[e])!==null&&s!==void 0?s:t()}}const Mv=d$(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),WI=(n,e,t=10)=>{let s="";const r=Math.max(Math.round(e/t),2);for(let i=0;i<r;i++)s+=n(pl(0,r-1,i))+", ";return`linear(${s.substring(0,s.length-2)})`};function YI(n){return!!(typeof n=="function"&&Mv()||!n||typeof n=="string"&&(n in __||Mv())||YA(n)||Array.isArray(n)&&n.every(YI))}const Hf=([n,e,t,s])=>`cubic-bezier(${n}, ${e}, ${t}, ${s})`,__={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Hf([0,.65,.55,1]),circOut:Hf([.55,0,1,.45]),backIn:Hf([.31,.01,.66,-.59]),backOut:Hf([.33,1.53,.69,.99])};function KI(n,e){if(n)return typeof n=="function"&&Mv()?WI(n,e):YA(n)?Hf(n):Array.isArray(n)?n.map(t=>KI(t,e)||__.easeOut):__[n]}const Rr={x:!1,y:!1};function qI(){return Rr.x||Rr.y}function KA(n,e,t){var s;if(n instanceof Element)return[n];if(typeof n=="string"){let r=document;const i=(s=t==null?void 0:t[n])!==null&&s!==void 0?s:r.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n)}function XI(n,e){const t=KA(n),s=new AbortController,r={passive:!0,...e,signal:s.signal};return[t,r,()=>s.abort()]}function fC(n){return e=>{e.pointerType==="touch"||qI()||n(e)}}function f$(n,e,t={}){const[s,r,i]=XI(n,t),o=fC(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const h=fC(f=>{c(f),l.removeEventListener("pointerleave",h)});l.addEventListener("pointerleave",h,r)});return s.forEach(a=>{a.addEventListener("pointerenter",o,r)}),i}const JI=(n,e)=>e?n===e?!0:JI(n,e.parentElement):!1,qA=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,p$=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function m$(n){return p$.has(n.tagName)||n.tabIndex!==-1}const zf=new WeakSet;function pC(n){return e=>{e.key==="Enter"&&n(e)}}function Gx(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const g$=(n,e)=>{const t=n.currentTarget;if(!t)return;const s=pC(()=>{if(zf.has(t))return;Gx(t,"down");const r=pC(()=>{Gx(t,"up")}),i=()=>Gx(t,"cancel");t.addEventListener("keyup",r,e),t.addEventListener("blur",i,e)});t.addEventListener("keydown",s,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",s),e)};function mC(n){return qA(n)&&!qI()}function y$(n,e,t={}){const[s,r,i]=XI(n,t),o=a=>{const l=a.currentTarget;if(!mC(a)||zf.has(l))return;zf.add(l);const c=e(a),h=(m,y)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",p),!(!mC(m)||!zf.has(l))&&(zf.delete(l),typeof c=="function"&&c(m,{success:y}))},f=m=>{h(m,t.useGlobalTarget||JI(l,m.target))},p=m=>{h(m,!1)};window.addEventListener("pointerup",f,r),window.addEventListener("pointercancel",p,r)};return s.forEach(a=>{!m$(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(t.useGlobalTarget?window:a).addEventListener("pointerdown",o,r),a.addEventListener("focus",c=>g$(c,r),r)}),i}function v$(n){return n==="x"||n==="y"?Rr[n]?null:(Rr[n]=!0,()=>{Rr[n]=!1}):Rr.x||Rr.y?null:(Rr.x=Rr.y=!0,()=>{Rr.x=Rr.y=!1})}const QI=new Set(["width","height","top","left","right","bottom",...mf]);let A0;function w$(){A0=void 0}const Fi={now:()=>(A0===void 0&&Fi.set(on.isProcessing||g4.useManualTiming?on.timestamp:performance.now()),A0),set:n=>{A0=n,queueMicrotask(w$)}};function XA(n,e){n.indexOf(e)===-1&&n.push(e)}function ex(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class JA{constructor(){this.subscriptions=[]}add(e){return XA(this.subscriptions,e),()=>ex(this.subscriptions,e)}notify(e,t,s){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,s);else for(let i=0;i<r;i++){const o=this.subscriptions[i];o&&o(e,t,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function QA(n,e){return e?n*(1e3/e):0}const gC=30,x$=n=>!isNaN(parseFloat(n)),Ep={current:void 0};class b${constructor(e,t={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,r=!0)=>{const i=Fi.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Fi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=x$(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new JA);const s=this.events[e].add(t);return e==="change"?()=>{s(),Pe.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,s){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return Ep.current&&Ep.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Fi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>gC)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,gC);return QA(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ii(n,e){return new b$(n,e)}function _$(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Ii(t))}function S$(n,e){const t=Qw(n,e);let{transitionEnd:s={},transition:r={},...i}=t||{};i={...i,...s};for(const o in i){const a=M4(i[o]);_$(n,o,a)}}function E$(n){return!!(ln(n)&&n.add)}function S_(n,e){const t=n.getValue("willChange");if(E$(t))return t.add(e)}function ZI(n){return n.props[NI]}const ej=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,A$=1e-7,T$=12;function C$(n,e,t,s,r){let i,o,a=0;do o=e+(t-e)/2,i=ej(o,s,r)-n,i>0?t=o:e=o;while(Math.abs(i)>A$&&++a<T$);return o}function oy(n,e,t,s){if(n===e&&t===s)return Jn;const r=i=>C$(i,0,1,n,t);return i=>i===0||i===1?i:ej(r(i),e,s)}const tj=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,nj=n=>e=>1-n(1-e),sj=oy(.33,1.53,.69,.99),ZA=nj(sj),rj=tj(ZA),ij=n=>(n*=2)<1?.5*ZA(n):.5*(2-Math.pow(2,-10*(n-1))),e1=n=>1-Math.sin(Math.acos(n)),oj=nj(e1),aj=tj(e1),lj=n=>/^0[^.\s]+$/u.test(n);function k$(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||lj(n):!0}const Ap=n=>Math.round(n*1e5)/1e5,t1=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function N$(n){return n==null}const P$=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,n1=(n,e)=>t=>!!(typeof t=="string"&&P$.test(t)&&t.startsWith(n)||e&&!N$(t)&&Object.prototype.hasOwnProperty.call(t,e)),cj=(n,e,t)=>s=>{if(typeof s!="string")return s;const[r,i,o,a]=s.match(t1);return{[n]:parseFloat(r),[e]:parseFloat(i),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},R$=n=>Ui(0,255,n),Wx={...gf,transform:n=>Math.round(R$(n))},Xl={test:n1("rgb","red"),parse:cj("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:s=1})=>"rgba("+Wx.transform(n)+", "+Wx.transform(e)+", "+Wx.transform(t)+", "+Ap(Jp.transform(s))+")"};function I$(n){let e="",t="",s="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),s=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),s=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,s+=s,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(s,16),alpha:r?parseInt(r,16)/255:1}}const E_={test:n1("#"),parse:I$,transform:Xl.transform},ah={test:n1("hsl","hue"),parse:cj("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:s=1})=>"hsla("+Math.round(n)+", "+Mi.transform(Ap(e))+", "+Mi.transform(Ap(t))+", "+Ap(Jp.transform(s))+")"},Dn={test:n=>Xl.test(n)||E_.test(n)||ah.test(n),parse:n=>Xl.test(n)?Xl.parse(n):ah.test(n)?ah.parse(n):E_.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Xl.transform(n):ah.transform(n)},j$=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function O$(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(t1))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(j$))===null||t===void 0?void 0:t.length)||0)>0}const uj="number",hj="color",L$="var",D$="var(",yC="${}",M$=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Qp(n){const e=n.toString(),t=[],s={color:[],number:[],var:[]},r=[];let i=0;const a=e.replace(M$,l=>(Dn.test(l)?(s.color.push(i),r.push(hj),t.push(Dn.parse(l))):l.startsWith(D$)?(s.var.push(i),r.push(L$),t.push(l)):(s.number.push(i),r.push(uj),t.push(parseFloat(l))),++i,yC)).split(yC);return{values:t,split:a,indexes:s,types:r}}function dj(n){return Qp(n).values}function fj(n){const{split:e,types:t}=Qp(n),s=e.length;return r=>{let i="";for(let o=0;o<s;o++)if(i+=e[o],r[o]!==void 0){const a=t[o];a===uj?i+=Ap(r[o]):a===hj?i+=Dn.transform(r[o]):i+=r[o]}return i}}const F$=n=>typeof n=="number"?0:n;function B$(n){const e=dj(n);return fj(n)(e.map(F$))}const ml={test:O$,parse:dj,createTransformer:fj,getAnimatableNone:B$},U$=new Set(["brightness","contrast","saturate","opacity"]);function $$(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[s]=t.match(t1)||[];if(!s)return n;const r=t.replace(s,"");let i=U$.has(e)?1:0;return s!==t&&(i*=100),e+"("+i+r+")"}const V$=/\b([a-z-]*)\(.*?\)/gu,A_={...ml,getAnimatableNone:n=>{const e=n.match(V$);return e?e.map($$).join(" "):n}},H$={...BA,color:Dn,backgroundColor:Dn,outlineColor:Dn,fill:Dn,stroke:Dn,borderColor:Dn,borderTopColor:Dn,borderRightColor:Dn,borderBottomColor:Dn,borderLeftColor:Dn,filter:A_,WebkitFilter:A_},s1=n=>H$[n];function pj(n,e){let t=s1(n);return t!==A_&&(t=ml),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const z$=new Set(["auto","none","0"]);function G$(n,e,t){let s=0,r;for(;s<n.length&&!r;){const i=n[s];typeof i=="string"&&!z$.has(i)&&Qp(i).values.length&&(r=n[s]),s++}if(r&&t)for(const i of e)n[i]=pj(t,r)}const vC=n=>n===gf||n===he,wC=(n,e)=>parseFloat(n.split(", ")[e]),xC=(n,e)=>(t,{transform:s})=>{if(s==="none"||!s)return 0;const r=s.match(/^matrix3d\((.+)\)$/u);if(r)return wC(r[1],e);{const i=s.match(/^matrix\((.+)\)$/u);return i?wC(i[1],n):0}},W$=new Set(["x","y","z"]),Y$=mf.filter(n=>!W$.has(n));function K$(n){const e=[];return Y$.forEach(t=>{const s=n.getValue(t);s!==void 0&&(e.push([t,s.get()]),s.set(t.startsWith("scale")?1:0))}),e}const af={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:xC(4,13),y:xC(5,14)};af.translateX=af.x;af.translateY=af.y;const gu=new Set;let T_=!1,C_=!1;function mj(){if(C_){const n=Array.from(gu).filter(s=>s.needsMeasurement),e=new Set(n.map(s=>s.element)),t=new Map;e.forEach(s=>{const r=K$(s);r.length&&(t.set(s,r),s.render())}),n.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const r=t.get(s);r&&r.forEach(([i,o])=>{var a;(a=s.getValue(i))===null||a===void 0||a.set(o)})}),n.forEach(s=>s.measureEndState()),n.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}C_=!1,T_=!1,gu.forEach(n=>n.complete()),gu.clear()}function gj(){gu.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(C_=!0)})}function q$(){gj(),mj()}class r1{constructor(e,t,s,r,i,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=s,this.motionValue=r,this.element=i,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(gu.add(this),T_||(T_=!0,Pe.read(gj),Pe.resolveKeyframes(mj))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:s,motionValue:r}=this;for(let i=0;i<e.length;i++)if(e[i]===null)if(i===0){const o=r==null?void 0:r.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(s&&t){const l=s.readValue(t,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),r&&o===void 0&&r.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),gu.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,gu.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const yj=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),X$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function J$(n){const e=X$.exec(n);if(!e)return[,];const[,t,s,r]=e;return[`--${t??s}`,r]}function vj(n,e,t=1){const[s,r]=J$(n);if(!s)return;const i=window.getComputedStyle(e).getPropertyValue(s);if(i){const o=i.trim();return yj(o)?parseFloat(o):o}return FA(r)?vj(r,e,t+1):r}const wj=n=>e=>e.test(n),Q$={test:n=>n==="auto",parse:n=>n},xj=[gf,he,Mi,ea,H4,V4,Q$],bC=n=>xj.find(wj(n));class bj extends r1{constructor(e,t,s,r,i){super(e,t,s,r,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:s}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),FA(c))){const h=vj(c,t.current);h!==void 0&&(e[l]=h),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!QI.has(s)||e.length!==2)return;const[r,i]=e,o=bC(r),a=bC(i);if(o!==a)if(vC(o)&&vC(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,s=[];for(let r=0;r<e.length;r++)k$(e[r])&&s.push(r);s.length&&G$(e,s,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=af[s](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(s,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:s,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(s);i&&i.jump(this.measuredOrigin,!1);const o=r.length-1,a=r[o];r[o]=af[s](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const _C=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(ml.test(n)||n==="0")&&!n.startsWith("url("));function Z$(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function e5(n,e,t,s){const r=n[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const i=n[n.length-1],o=_C(r,e),a=_C(i,e);return!o||!a?!1:Z$(n)||(t==="spring"||Zw(t))&&s}const t5=n=>n!==null;function tx(n,{repeat:e,repeatType:t="loop"},s){const r=n.filter(t5),i=e&&t!=="loop"&&e%2===1?0:r.length-1;return!i||s===void 0?r[i]:s}const n5=40;class _j{constructor({autoplay:e=!0,delay:t=0,type:s="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Fi.now(),this.options={autoplay:e,delay:t,type:s,repeat:r,repeatDelay:i,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>n5?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&q$(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=Fi.now(),this.hasAttemptedResolve=!0;const{name:s,type:r,velocity:i,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!e5(e,s,r,i))if(o)this.options.duration=0;else{l&&l(tx(e,this.options,t)),a&&a(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,t);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...h},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const ht=(n,e,t)=>n+(e-n)*t;function Yx(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function s5({hue:n,saturation:e,lightness:t,alpha:s}){n/=360,e/=100,t/=100;let r=0,i=0,o=0;if(!e)r=i=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=Yx(l,a,n+1/3),i=Yx(l,a,n),o=Yx(l,a,n-1/3)}return{red:Math.round(r*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:s}}function Fv(n,e){return t=>t>0?e:n}const Kx=(n,e,t)=>{const s=n*n,r=t*(e*e-s)+s;return r<0?0:Math.sqrt(r)},r5=[E_,Xl,ah],i5=n=>r5.find(e=>e.test(n));function SC(n){const e=i5(n);if(!e)return!1;let t=e.parse(n);return e===ah&&(t=s5(t)),t}const EC=(n,e)=>{const t=SC(n),s=SC(e);if(!t||!s)return Fv(n,e);const r={...t};return i=>(r.red=Kx(t.red,s.red,i),r.green=Kx(t.green,s.green,i),r.blue=Kx(t.blue,s.blue,i),r.alpha=ht(t.alpha,s.alpha,i),Xl.transform(r))},o5=(n,e)=>t=>e(n(t)),ay=(...n)=>n.reduce(o5),k_=new Set(["none","hidden"]);function a5(n,e){return k_.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function l5(n,e){return t=>ht(n,e,t)}function i1(n){return typeof n=="number"?l5:typeof n=="string"?FA(n)?Fv:Dn.test(n)?EC:h5:Array.isArray(n)?Sj:typeof n=="object"?Dn.test(n)?EC:c5:Fv}function Sj(n,e){const t=[...n],s=t.length,r=n.map((i,o)=>i1(i)(i,e[o]));return i=>{for(let o=0;o<s;o++)t[o]=r[o](i);return t}}function c5(n,e){const t={...n,...e},s={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(s[r]=i1(n[r])(n[r],e[r]));return r=>{for(const i in s)t[i]=s[i](r);return t}}function u5(n,e){var t;const s=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],a=n.indexes[o][r[o]],l=(t=n.values[a])!==null&&t!==void 0?t:0;s[i]=l,r[o]++}return s}const h5=(n,e)=>{const t=ml.createTransformer(e),s=Qp(n),r=Qp(e);return s.indexes.var.length===r.indexes.var.length&&s.indexes.color.length===r.indexes.color.length&&s.indexes.number.length>=r.indexes.number.length?k_.has(n)&&!r.values.length||k_.has(e)&&!s.values.length?a5(n,e):ay(Sj(u5(s,r),r.values),t):Fv(n,e)};function Ej(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?ht(n,e,t):i1(n)(n,e)}const d5=5;function Aj(n,e,t){const s=Math.max(e-d5,0);return QA(t-n(s),e-s)}const At={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},qx=.001;function f5({duration:n=At.duration,bounce:e=At.bounce,velocity:t=At.velocity,mass:s=At.mass}){let r,i,o=1-e;o=Ui(At.minDamping,At.maxDamping,o),n=Ui(At.minDuration,At.maxDuration,Di(n)),o<1?(r=c=>{const h=c*o,f=h*n,p=h-t,m=N_(c,o),y=Math.exp(-f);return qx-p/m*y},i=c=>{const f=c*o*n,p=f*t+t,m=Math.pow(o,2)*Math.pow(c,2)*n,y=Math.exp(-f),w=N_(Math.pow(c,2),o);return(-r(c)+qx>0?-1:1)*((p-m)*y)/w}):(r=c=>{const h=Math.exp(-c*n),f=(c-t)*n+1;return-qx+h*f},i=c=>{const h=Math.exp(-c*n),f=(t-c)*(n*n);return h*f});const a=5/n,l=m5(r,i,a);if(n=Li(n),isNaN(l))return{stiffness:At.stiffness,damping:At.damping,duration:n};{const c=Math.pow(l,2)*s;return{stiffness:c,damping:o*2*Math.sqrt(s*c),duration:n}}}const p5=12;function m5(n,e,t){let s=t;for(let r=1;r<p5;r++)s=s-n(s)/e(s);return s}function N_(n,e){return n*Math.sqrt(1-e*e)}const g5=["duration","bounce"],y5=["stiffness","damping","mass"];function AC(n,e){return e.some(t=>n[t]!==void 0)}function v5(n){let e={velocity:At.velocity,stiffness:At.stiffness,damping:At.damping,mass:At.mass,isResolvedFromDuration:!1,...n};if(!AC(n,y5)&&AC(n,g5))if(n.visualDuration){const t=n.visualDuration,s=2*Math.PI/(t*1.2),r=s*s,i=2*Ui(.05,1,1-(n.bounce||0))*Math.sqrt(r);e={...e,mass:At.mass,stiffness:r,damping:i}}else{const t=f5(n);e={...e,...t,mass:At.mass},e.isResolvedFromDuration=!0}return e}function o1(n=At.visualDuration,e=At.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:s,restDelta:r}=t;const i=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:c,mass:h,duration:f,velocity:p,isResolvedFromDuration:m}=v5({...t,velocity:-Di(t.velocity||0)}),y=p||0,w=c/(2*Math.sqrt(l*h)),b=o-i,g=Di(Math.sqrt(l/h)),v=Math.abs(b)<5;s||(s=v?At.restSpeed.granular:At.restSpeed.default),r||(r=v?At.restDelta.granular:At.restDelta.default);let x;if(w<1){const A=N_(g,w);x=C=>{const N=Math.exp(-w*g*C);return o-N*((y+w*g*b)/A*Math.sin(A*C)+b*Math.cos(A*C))}}else if(w===1)x=A=>o-Math.exp(-g*A)*(b+(y+g*b)*A);else{const A=g*Math.sqrt(w*w-1);x=C=>{const N=Math.exp(-w*g*C),P=Math.min(A*C,300);return o-N*((y+w*g*b)*Math.sinh(P)+A*b*Math.cosh(P))/A}}const S={calculatedDuration:m&&f||null,next:A=>{const C=x(A);if(m)a.done=A>=f;else{let N=0;w<1&&(N=A===0?Li(y):Aj(x,A,C));const P=Math.abs(N)<=s,R=Math.abs(o-C)<=r;a.done=P&&R}return a.value=a.done?o:C,a},toString:()=>{const A=Math.min(WA(S),Dv),C=WI(N=>S.next(A*N).value,A,30);return A+"ms "+C}};return S}function TC({keyframes:n,velocity:e=0,power:t=.8,timeConstant:s=325,bounceDamping:r=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:h}){const f=n[0],p={done:!1,value:f},m=P=>a!==void 0&&P<a||l!==void 0&&P>l,y=P=>a===void 0?l:l===void 0||Math.abs(a-P)<Math.abs(l-P)?a:l;let w=t*e;const b=f+w,g=o===void 0?b:o(b);g!==b&&(w=g-f);const v=P=>-w*Math.exp(-P/s),x=P=>g+v(P),S=P=>{const R=v(P),O=x(P);p.done=Math.abs(R)<=c,p.value=p.done?g:O};let A,C;const N=P=>{m(p.value)&&(A=P,C=o1({keyframes:[p.value,y(p.value)],velocity:Aj(x,P,p.value),damping:r,stiffness:i,restDelta:c,restSpeed:h}))};return N(0),{calculatedDuration:null,next:P=>{let R=!1;return!C&&A===void 0&&(R=!0,S(P),N(P)),A!==void 0&&P>=A?C.next(P-A):(!R&&S(P),p)}}}const w5=oy(.42,0,1,1),x5=oy(0,0,.58,1),Tj=oy(.42,0,.58,1),Cj=n=>Array.isArray(n)&&typeof n[0]!="number",b5={linear:Jn,easeIn:w5,easeInOut:Tj,easeOut:x5,circIn:e1,circInOut:aj,circOut:oj,backIn:ZA,backInOut:rj,backOut:sj,anticipate:ij},CC=n=>{if(YA(n)){EI(n.length===4);const[e,t,s,r]=n;return oy(e,t,s,r)}else if(typeof n=="string")return b5[n];return n};function _5(n,e,t){const s=[],r=t||Ej,i=n.length-1;for(let o=0;o<i;o++){let a=r(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||Jn:e;a=ay(l,a)}s.push(a)}return s}function a1(n,e,{clamp:t=!0,ease:s,mixer:r}={}){const i=n.length;if(EI(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=n[0]===n[1];n[0]>n[i-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=_5(e,s,r),l=a.length,c=h=>{if(o&&h<n[0])return e[0];let f=0;if(l>1)for(;f<n.length-2&&!(h<n[f+1]);f++);const p=pl(n[f],n[f+1],h);return a[f](p)};return t?h=>c(Ui(n[0],n[i-1],h)):c}function kj(n,e){const t=n[n.length-1];for(let s=1;s<=e;s++){const r=pl(0,e,s);n.push(ht(t,1,r))}}function l1(n){const e=[0];return kj(e,n.length-1),e}function S5(n,e){return n.map(t=>t*e)}function E5(n,e){return n.map(()=>e||Tj).splice(0,n.length-1)}function Bv({duration:n=300,keyframes:e,times:t,ease:s="easeInOut"}){const r=Cj(s)?s.map(CC):CC(s),i={done:!1,value:e[0]},o=S5(t&&t.length===e.length?t:l1(e),n),a=a1(o,e,{ease:Array.isArray(r)?r:E5(e,r)});return{calculatedDuration:n,next:l=>(i.value=a(l),i.done=l>=n,i)}}const A5=n=>{const e=({timestamp:t})=>n(t);return{start:()=>Pe.update(e,!0),stop:()=>ei(e),now:()=>on.isProcessing?on.timestamp:Fi.now()}},T5={decay:TC,inertia:TC,tween:Bv,keyframes:Bv,spring:o1},C5=n=>n/100;class c1 extends _j{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:t,motionValue:s,element:r,keyframes:i}=this.options,o=(r==null?void 0:r.KeyframeResolver)||r1,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(i,a,t,s,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:i,velocity:o=0}=this.options,a=Zw(t)?t:T5[t]||Bv;let l,c;a!==Bv&&typeof e[0]!="number"&&(l=ay(C5,Ej(e[0],e[1])),e=[0,100]);const h=a({...this.options,keyframes:e});i==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=WA(h));const{calculatedDuration:f}=h,p=f+r,m=p*(s+1)-r;return{generator:h,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:f,resolvedDuration:p,totalDuration:m}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:s}=this;if(!s){const{keyframes:P}=this.options;return{done:!0,value:P[P.length-1]}}const{finalKeyframe:r,generator:i,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:h,resolvedDuration:f}=s;if(this.startTime===null)return i.next(0);const{delay:p,repeat:m,repeatType:y,repeatDelay:w,onUpdate:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const g=this.currentTime-p*(this.speed>=0?1:-1),v=this.speed>=0?g<0:g>h;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let x=this.currentTime,S=i;if(m){const P=Math.min(this.currentTime,h)/f;let R=Math.floor(P),O=P%1;!O&&P>=1&&(O=1),O===1&&R--,R=Math.min(R,m+1),!!(R%2)&&(y==="reverse"?(O=1-O,w&&(O-=w/f)):y==="mirror"&&(S=o)),x=Ui(0,1,O)*f}const A=v?{done:!1,value:l[0]}:S.next(x);a&&(A.value=a(A.value));let{done:C}=A;!v&&c!==null&&(C=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const N=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return N&&r!==void 0&&(A.value=tx(l,this.options,r)),b&&b(A.value),N&&this.finish(),A}get duration(){const{resolved:e}=this;return e?Di(e.calculatedDuration):0}get time(){return Di(this.currentTime)}set time(e){e=Li(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Di(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=A5,onPlay:t,startTime:s}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),t&&t();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=s??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const k5=new Set(["opacity","clipPath","filter","transform"]);function N5(n,e,t,{delay:s=0,duration:r=300,repeat:i=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:t};l&&(c.offset=l);const h=KI(a,r);return Array.isArray(h)&&(c.easing=h),n.animate(c,{delay:s,duration:r,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}const P5=RA(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Uv=10,R5=2e4;function I5(n){return Zw(n.type)||n.type==="spring"||!YI(n.ease)}function j5(n,e){const t=new c1({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:n[0]};const r=[];let i=0;for(;!s.done&&i<R5;)s=t.sample(i),r.push(s.value),i+=Uv;return{times:void 0,keyframes:r,duration:i-Uv,ease:"linear"}}const Nj={anticipate:ij,backInOut:rj,circInOut:aj};function O5(n){return n in Nj}class kC extends _j{constructor(e){super(e);const{name:t,motionValue:s,element:r,keyframes:i}=this.options;this.resolver=new bj(i,(o,a)=>this.onKeyframesResolved(o,a),t,s,r),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:s=300,times:r,ease:i,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof i=="string"&&Mv()&&O5(i)&&(i=Nj[i]),I5(this.options)){const{onComplete:f,onUpdate:p,motionValue:m,element:y,...w}=this.options,b=j5(e,w);e=b.keyframes,e.length===1&&(e[1]=e[0]),s=b.duration,r=b.times,i=b.ease,o="keyframes"}const h=N5(a.owner.current,l,e,{...this.options,duration:s,times:r,ease:i});return h.startTime=c??this.calcStartTime(),this.pendingTimeline?(dC(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:f}=this.options;a.set(tx(e,this.options,t)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:s,times:r,type:o,ease:i,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return Di(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return Di(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:s}=t;s.currentTime=Li(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:s}=t;s.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return Jn;const{animation:s}=t;dC(s,e)}return Jn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:s,duration:r,type:i,ease:o,times:a}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:h,onComplete:f,element:p,...m}=this.options,y=new c1({...m,keyframes:s,duration:r,type:i,ease:o,times:a,isGenerator:!0}),w=Li(this.time);c.setWithVelocity(y.sample(w-Uv).value,y.sample(w).value,Uv)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:s,repeatDelay:r,repeatType:i,damping:o,type:a}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=t.owner.getProps();return P5()&&s&&k5.has(s)&&!l&&!c&&!r&&i!=="mirror"&&o!==0&&a!=="inertia"}}const L5={type:"spring",stiffness:500,damping:25,restSpeed:10},D5=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),M5={type:"keyframes",duration:.8},F5={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},B5=(n,{keyframes:e})=>e.length>2?M5:ku.has(n)?n.startsWith("scale")?D5(e[1]):L5:F5;function U5({when:n,delay:e,delayChildren:t,staggerChildren:s,staggerDirection:r,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...h}){return!!Object.keys(h).length}const u1=(n,e,t,s={},r,i)=>o=>{const a=GA(s,n)||{},l=a.delay||s.delay||0;let{elapsed:c=0}=s;c=c-Li(l);let h={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:n,motionValue:e,element:i?void 0:r};U5(a)||(h={...h,...B5(n,h)}),h.duration&&(h.duration=Li(h.duration)),h.repeatDelay&&(h.repeatDelay=Li(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let f=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(f=!0)),f&&!i&&e.get()!==void 0){const p=tx(h.keyframes,a);if(p!==void 0)return Pe.update(()=>{h.onUpdate(p),h.onComplete()}),new GI([])}return!i&&kC.supports(h)?new kC(h):new c1(h)};function $5({protectedKeys:n,needsAnimating:e},t){const s=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,s}function h1(n,e,{delay:t=0,transitionOverride:s,type:r}={}){var i;let{transition:o=n.getDefaultTransition(),transitionEnd:a,...l}=e;s&&(o=s);const c=[],h=r&&n.animationState&&n.animationState.getState()[r];for(const f in l){const p=n.getValue(f,(i=n.latestValues[f])!==null&&i!==void 0?i:null),m=l[f];if(m===void 0||h&&$5(h,f))continue;const y={delay:t,...GA(o||{},f)};let w=!1;if(window.MotionHandoffAnimation){const g=ZI(n);if(g){const v=window.MotionHandoffAnimation(g,f,Pe);v!==null&&(y.startTime=v,w=!0)}}S_(n,f),p.start(u1(f,p,m,n.shouldReduceMotion&&QI.has(f)?{type:!1}:y,n,w));const b=p.animation;b&&c.push(b)}return a&&Promise.all(c).then(()=>{Pe.update(()=>{a&&S$(n,a)})}),c}function P_(n,e,t={}){var s;const r=Qw(n,e,t.type==="exit"?(s=n.presenceContext)===null||s===void 0?void 0:s.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const o=r?()=>Promise.all(h1(n,r,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:p}=i;return V5(n,e,h+c,f,p,t)}:()=>Promise.resolve(),{when:l}=i;if(l){const[c,h]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>h())}else return Promise.all([o(),a(t.delay)])}function V5(n,e,t=0,s=0,r=1,i){const o=[],a=(n.variantChildren.size-1)*s,l=r===1?(c=0)=>c*s:(c=0)=>a-c*s;return Array.from(n.variantChildren).sort(H5).forEach((c,h)=>{c.notify("AnimationStart",e),o.push(P_(c,e,{...i,delay:t+l(h)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function H5(n,e){return n.sortNodePosition(e)}function z5(n,e,t={}){n.notify("AnimationStart",e);let s;if(Array.isArray(e)){const r=e.map(i=>P_(n,i,t));s=Promise.all(r)}else if(typeof e=="string")s=P_(n,e,t);else{const r=typeof e=="function"?Qw(n,e,t.custom):e;s=Promise.all(h1(n,r,t))}return s.then(()=>{n.notify("AnimationComplete",e)})}const G5=jA.length;function Pj(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?Pj(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<G5;t++){const s=jA[t],r=n.props[s];(Xp(r)||r===!1)&&(e[s]=r)}return e}const W5=[...IA].reverse(),Y5=IA.length;function K5(n){return e=>Promise.all(e.map(({animation:t,options:s})=>z5(n,t,s)))}function q5(n){let e=K5(n),t=NC(),s=!0;const r=l=>(c,h)=>{var f;const p=Qw(n,h,l==="exit"?(f=n.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(p){const{transition:m,transitionEnd:y,...w}=p;c={...c,...w,...y}}return c};function i(l){e=l(n)}function o(l){const{props:c}=n,h=Pj(n.parent)||{},f=[],p=new Set;let m={},y=1/0;for(let b=0;b<Y5;b++){const g=W5[b],v=t[g],x=c[g]!==void 0?c[g]:h[g],S=Xp(x),A=g===l?v.isActive:null;A===!1&&(y=b);let C=x===h[g]&&x!==c[g]&&S;if(C&&s&&n.manuallyAnimateOnMount&&(C=!1),v.protectedKeys={...m},!v.isActive&&A===null||!x&&!v.prevProp||Xw(x)||typeof x=="boolean")continue;const N=X5(v.prevProp,x);let P=N||g===l&&v.isActive&&!C&&S||b>y&&S,R=!1;const O=Array.isArray(x)?x:[x];let M=O.reduce(r(g),{});A===!1&&(M={});const{prevResolvedValues:Y={}}=v,J={...Y,...M},U=B=>{P=!0,p.has(B)&&(R=!0,p.delete(B)),v.needsAnimating[B]=!0;const I=n.getValue(B);I&&(I.liveStyle=!1)};for(const B in J){const I=M[B],j=Y[B];if(m.hasOwnProperty(B))continue;let L=!1;b_(I)&&b_(j)?L=!HI(I,j):L=I!==j,L?I!=null?U(B):p.add(B):I!==void 0&&p.has(B)?U(B):v.protectedKeys[B]=!0}v.prevProp=x,v.prevResolvedValues=M,v.isActive&&(m={...m,...M}),s&&n.blockInitialAnimation&&(P=!1),P&&(!(C&&N)||R)&&f.push(...O.map(B=>({animation:B,options:{type:g}})))}if(p.size){const b={};p.forEach(g=>{const v=n.getBaseTarget(g),x=n.getValue(g);x&&(x.liveStyle=!0),b[g]=v??null}),f.push({animation:b})}let w=!!f.length;return s&&(c.initial===!1||c.initial===c.animate)&&!n.manuallyAnimateOnMount&&(w=!1),s=!1,w?e(f):Promise.resolve()}function a(l,c){var h;if(t[l].isActive===c)return Promise.resolve();(h=n.variantChildren)===null||h===void 0||h.forEach(p=>{var m;return(m=p.animationState)===null||m===void 0?void 0:m.setActive(l,c)}),t[l].isActive=c;const f=o(l);for(const p in t)t[p].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>t,reset:()=>{t=NC(),s=!0}}}function X5(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!HI(e,n):!1}function Cl(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function NC(){return{animate:Cl(!0),whileInView:Cl(),whileHover:Cl(),whileTap:Cl(),whileDrag:Cl(),whileFocus:Cl(),exit:Cl()}}let _l=class{constructor(e){this.isMounted=!1,this.node=e}update(){}};class J5 extends _l{constructor(e){super(e),e.animationState||(e.animationState=q5(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Xw(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let Q5=0;class Z5 extends _l{constructor(){super(...arguments),this.id=Q5++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const eV={animation:{Feature:J5},exit:{Feature:Z5}};function Zp(n,e,t,s={passive:!0}){return n.addEventListener(e,t,s),()=>n.removeEventListener(e,t)}function ly(n){return{point:{x:n.pageX,y:n.pageY}}}const tV=n=>e=>qA(e)&&n(e,ly(e));function Tp(n,e,t,s){return Zp(n,e,tV(t),s)}const PC=(n,e)=>Math.abs(n-e);function nV(n,e){const t=PC(n.x,e.x),s=PC(n.y,e.y);return Math.sqrt(t**2+s**2)}class Rj{constructor(e,t,{transformPagePoint:s,contextWindow:r,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Jx(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=nV(f.offset,{x:0,y:0})>=3;if(!p&&!m)return;const{point:y}=f,{timestamp:w}=on;this.history.push({...y,timestamp:w});const{onStart:b,onMove:g}=this.handlers;p||(b&&b(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Xx(p,this.transformPagePoint),Pe.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:m,onSessionEnd:y,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=Jx(f.type==="pointercancel"?this.lastMoveEventInfo:Xx(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(f,b),y&&y(f,b)},!qA(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=s,this.contextWindow=r||window;const o=ly(e),a=Xx(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=on;this.history=[{...l,timestamp:c}];const{onSessionStart:h}=t;h&&h(e,Jx(a,this.history)),this.removeListeners=ay(Tp(this.contextWindow,"pointermove",this.handlePointerMove),Tp(this.contextWindow,"pointerup",this.handlePointerUp),Tp(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ei(this.updatePoint)}}function Xx(n,e){return e?{point:e(n.point)}:n}function RC(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Jx({point:n},e){return{point:n,delta:RC(n,Ij(e)),offset:RC(n,sV(e)),velocity:rV(e,.1)}}function sV(n){return n[0]}function Ij(n){return n[n.length-1]}function rV(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,s=null;const r=Ij(n);for(;t>=0&&(s=n[t],!(r.timestamp-s.timestamp>Li(e)));)t--;if(!s)return{x:0,y:0};const i=Di(r.timestamp-s.timestamp);if(i===0)return{x:0,y:0};const o={x:(r.x-s.x)/i,y:(r.y-s.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const jj=1e-4,iV=1-jj,oV=1+jj,Oj=.01,aV=0-Oj,lV=0+Oj;function Xs(n){return n.max-n.min}function cV(n,e,t){return Math.abs(n-e)<=t}function IC(n,e,t,s=.5){n.origin=s,n.originPoint=ht(e.min,e.max,n.origin),n.scale=Xs(t)/Xs(e),n.translate=ht(t.min,t.max,n.origin)-n.originPoint,(n.scale>=iV&&n.scale<=oV||isNaN(n.scale))&&(n.scale=1),(n.translate>=aV&&n.translate<=lV||isNaN(n.translate))&&(n.translate=0)}function Cp(n,e,t,s){IC(n.x,e.x,t.x,s?s.originX:void 0),IC(n.y,e.y,t.y,s?s.originY:void 0)}function jC(n,e,t){n.min=t.min+e.min,n.max=n.min+Xs(e)}function uV(n,e,t){jC(n.x,e.x,t.x),jC(n.y,e.y,t.y)}function OC(n,e,t){n.min=e.min-t.min,n.max=n.min+Xs(e)}function kp(n,e,t){OC(n.x,e.x,t.x),OC(n.y,e.y,t.y)}function hV(n,{min:e,max:t},s){return e!==void 0&&n<e?n=s?ht(e,n,s.min):Math.max(n,e):t!==void 0&&n>t&&(n=s?ht(t,n,s.max):Math.min(n,t)),n}function LC(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function dV(n,{top:e,left:t,bottom:s,right:r}){return{x:LC(n.x,t,r),y:LC(n.y,e,s)}}function DC(n,e){let t=e.min-n.min,s=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,s]=[s,t]),{min:t,max:s}}function fV(n,e){return{x:DC(n.x,e.x),y:DC(n.y,e.y)}}function pV(n,e){let t=.5;const s=Xs(n),r=Xs(e);return r>s?t=pl(e.min,e.max-s,n.min):s>r&&(t=pl(n.min,n.max-r,e.min)),Ui(0,1,t)}function mV(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const R_=.35;function gV(n=R_){return n===!1?n=0:n===!0&&(n=R_),{x:MC(n,"left","right"),y:MC(n,"top","bottom")}}function MC(n,e,t){return{min:FC(n,e),max:FC(n,t)}}function FC(n,e){return typeof n=="number"?n:n[e]||0}const BC=()=>({translate:0,scale:1,origin:0,originPoint:0}),lh=()=>({x:BC(),y:BC()}),UC=()=>({min:0,max:0}),Et=()=>({x:UC(),y:UC()});function sr(n){return[n("x"),n("y")]}function Lj({top:n,left:e,right:t,bottom:s}){return{x:{min:e,max:t},y:{min:n,max:s}}}function yV({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function vV(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),s=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:s.y,right:s.x}}function Qx(n){return n===void 0||n===1}function I_({scale:n,scaleX:e,scaleY:t}){return!Qx(n)||!Qx(e)||!Qx(t)}function Ll(n){return I_(n)||Dj(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function Dj(n){return $C(n.x)||$C(n.y)}function $C(n){return n&&n!=="0%"}function $v(n,e,t){const s=n-t,r=e*s;return t+r}function VC(n,e,t,s,r){return r!==void 0&&(n=$v(n,r,s)),$v(n,t,s)+e}function j_(n,e=0,t=1,s,r){n.min=VC(n.min,e,t,s,r),n.max=VC(n.max,e,t,s,r)}function Mj(n,{x:e,y:t}){j_(n.x,e.translate,e.scale,e.originPoint),j_(n.y,t.translate,t.scale,t.originPoint)}const HC=.999999999999,zC=1.0000000000001;function wV(n,e,t,s=!1){const r=t.length;if(!r)return;e.x=e.y=1;let i,o;for(let a=0;a<r;a++){i=t[a],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(s&&i.options.layoutScroll&&i.scroll&&i!==i.root&&uh(n,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Mj(n,o)),s&&Ll(i.latestValues)&&uh(n,i.latestValues))}e.x<zC&&e.x>HC&&(e.x=1),e.y<zC&&e.y>HC&&(e.y=1)}function ch(n,e){n.min=n.min+e,n.max=n.max+e}function GC(n,e,t,s,r=.5){const i=ht(n.min,n.max,r);j_(n,e,t,i,s)}function uh(n,e){GC(n.x,e.x,e.scaleX,e.scale,e.originX),GC(n.y,e.y,e.scaleY,e.scale,e.originY)}function Fj(n,e){return Lj(vV(n.getBoundingClientRect(),e))}function xV(n,e,t){const s=Fj(n,t),{scroll:r}=e;return r&&(ch(s.x,r.offset.x),ch(s.y,r.offset.y)),s}const Bj=({current:n})=>n?n.ownerDocument.defaultView:null,bV=new WeakMap;class _V{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Et(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const r=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(ly(h).point)},i=(h,f)=>{const{drag:p,dragPropagation:m,onDragStart:y}=this.getProps();if(p&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=v$(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),sr(b=>{let g=this.getAxisMotionValue(b).get()||0;if(Mi.test(g)){const{projection:v}=this.visualElement;if(v&&v.layout){const x=v.layout.layoutBox[b];x&&(g=Xs(x)*(parseFloat(g)/100))}}this.originPoint[b]=g}),y&&Pe.postRender(()=>y(h,f)),S_(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},o=(h,f)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:y,onDrag:w}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:b}=f;if(m&&this.currentDirection===null){this.currentDirection=SV(b),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",f.point,b),this.updateAxis("y",f.point,b),this.visualElement.render(),w&&w(h,f)},a=(h,f)=>this.stop(h,f),l=()=>sr(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new Rj(e,{onSessionStart:r,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:Bj(this.visualElement)})}stop(e,t){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:i}=this.getProps();i&&Pe.postRender(()=>i(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,s){const{drag:r}=this.getProps();if(!s||!By(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(o=hV(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:s}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;t&&oh(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=dV(r.layoutBox,t):this.constraints=!1,this.elastic=gV(s),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&sr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=mV(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!oh(e))return!1;const s=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=xV(s,r.root,this.visualElement.getTransformPagePoint());let o=fV(r.layout.layoutBox,i);if(t){const a=t(yV(o));this.hasMutatedConstraints=!!a,a&&(o=Lj(a))}return o}startAnimation(e){const{drag:t,dragMomentum:s,dragElastic:r,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=sr(h=>{if(!By(h,t,this.currentDirection))return;let f=l&&l[h]||{};o&&(f={min:0,max:0});const p=r?200:1e6,m=r?40:1e7,y={type:"inertia",velocity:s?e[h]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(h,y)});return Promise.all(c).then(a)}startAxisValueAnimation(e,t){const s=this.getAxisMotionValue(e);return S_(this.visualElement,e),s.start(u1(e,s,0,t,this.visualElement,!1))}stopAnimation(){sr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){sr(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),r=s[t];return r||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){sr(t=>{const{drag:s}=this.getProps();if(!By(t,s,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[t];i.set(e[t]-ht(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:s}=this.visualElement;if(!oh(t)||!s||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};sr(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();r[o]=pV({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),sr(o=>{if(!By(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(ht(l,c,r[o]))})}addListeners(){if(!this.visualElement.current)return;bV.set(this.visualElement,this);const e=this.visualElement.current,t=Tp(e,"pointerdown",l=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(l)}),s=()=>{const{dragConstraints:l}=this.getProps();oh(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,i=r.addEventListener("measure",s);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Pe.read(s);const o=Zp(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(sr(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=l[h].translate,f.set(f.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),t(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:s=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:o=R_,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:s,dragPropagation:r,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function By(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function SV(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class EV extends _l{constructor(e){super(e),this.removeGroupControls=Jn,this.removeListeners=Jn,this.controls=new _V(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Jn}unmount(){this.removeGroupControls(),this.removeListeners()}}const WC=n=>(e,t)=>{n&&Pe.postRender(()=>n(e,t))};class AV extends _l{constructor(){super(...arguments),this.removePointerDownListener=Jn}onPointerDown(e){this.session=new Rj(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Bj(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:s,onPanEnd:r}=this.node.getProps();return{onSessionStart:WC(e),onStart:WC(t),onMove:s,onEnd:(i,o)=>{delete this.session,r&&Pe.postRender(()=>r(i,o))}}}mount(){this.removePointerDownListener=Tp(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const T0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function YC(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Rf={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(he.test(n))n=parseFloat(n);else return n;const t=YC(n,e.target.x),s=YC(n,e.target.y);return`${t}% ${s}%`}},TV={correct:(n,{treeScale:e,projectionDelta:t})=>{const s=n,r=ml.parse(n);if(r.length>5)return s;const i=ml.createTransformer(n),o=typeof r[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const c=ht(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=c),typeof r[3+o]=="number"&&(r[3+o]/=c),i(r)}};class CV extends k.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s,layoutId:r}=this.props,{projection:i}=e;Z4(kV),i&&(t.group&&t.group.add(i),s&&s.register&&r&&s.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),T0.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:s,drag:r,isPresent:i}=this.props,o=s.projection;return o&&(o.isPresent=i,r||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Pe.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),LA.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),s&&s.deregister&&s.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Uj(n){const[e,t]=SI(),s=k.useContext(NA);return d.jsx(CV,{...n,layoutGroup:s,switchLayoutGroup:k.useContext(PI),isPresent:e,safeToRemove:t})}const kV={borderRadius:{...Rf,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Rf,borderTopRightRadius:Rf,borderBottomLeftRadius:Rf,borderBottomRightRadius:Rf,boxShadow:TV};function $j(n,e,t){const s=ln(n)?n:Ii(n);return s.start(u1("",s,e,t)),s.animation}function Vj(n){return n instanceof SVGElement&&n.tagName!=="svg"}const NV=(n,e)=>n.depth-e.depth;class PV{constructor(){this.children=[],this.isDirty=!1}add(e){XA(this.children,e),this.isDirty=!0}remove(e){ex(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(NV),this.isDirty=!1,this.children.forEach(e)}}function RV(n,e){const t=Fi.now(),s=({timestamp:r})=>{const i=r-t;i>=e&&(ei(s),n(i-e))};return Pe.read(s,!0),()=>ei(s)}const Hj=["TopLeft","TopRight","BottomLeft","BottomRight"],IV=Hj.length,KC=n=>typeof n=="string"?parseFloat(n):n,qC=n=>typeof n=="number"||he.test(n);function jV(n,e,t,s,r,i){r?(n.opacity=ht(0,t.opacity!==void 0?t.opacity:1,OV(s)),n.opacityExit=ht(e.opacity!==void 0?e.opacity:1,0,LV(s))):i&&(n.opacity=ht(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,s));for(let o=0;o<IV;o++){const a=`border${Hj[o]}Radius`;let l=XC(e,a),c=XC(t,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||qC(l)===qC(c)?(n[a]=Math.max(ht(KC(l),KC(c),s),0),(Mi.test(c)||Mi.test(l))&&(n[a]+="%")):n[a]=c}(e.rotate||t.rotate)&&(n.rotate=ht(e.rotate||0,t.rotate||0,s))}function XC(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const OV=zj(0,.5,oj),LV=zj(.5,.95,Jn);function zj(n,e,t){return s=>s<n?0:s>e?1:t(pl(n,e,s))}function JC(n,e){n.min=e.min,n.max=e.max}function er(n,e){JC(n.x,e.x),JC(n.y,e.y)}function QC(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function ZC(n,e,t,s,r){return n-=e,n=$v(n,1/t,s),r!==void 0&&(n=$v(n,1/r,s)),n}function DV(n,e=0,t=1,s=.5,r,i=n,o=n){if(Mi.test(e)&&(e=parseFloat(e),e=ht(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=ht(i.min,i.max,s);n===i&&(a-=e),n.min=ZC(n.min,e,t,a,r),n.max=ZC(n.max,e,t,a,r)}function ek(n,e,[t,s,r],i,o){DV(n,e[t],e[s],e[r],e.scale,i,o)}const MV=["x","scaleX","originX"],FV=["y","scaleY","originY"];function tk(n,e,t,s){ek(n.x,e,MV,t?t.x:void 0,s?s.x:void 0),ek(n.y,e,FV,t?t.y:void 0,s?s.y:void 0)}function nk(n){return n.translate===0&&n.scale===1}function Gj(n){return nk(n.x)&&nk(n.y)}function sk(n,e){return n.min===e.min&&n.max===e.max}function BV(n,e){return sk(n.x,e.x)&&sk(n.y,e.y)}function rk(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function Wj(n,e){return rk(n.x,e.x)&&rk(n.y,e.y)}function ik(n){return Xs(n.x)/Xs(n.y)}function ok(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class UV{constructor(){this.members=[]}add(e){XA(this.members,e),e.scheduleRender()}remove(e){if(ex(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let s;for(let r=t;r>=0;r--){const i=this.members[r];if(i.isPresent!==!1){s=i;break}}return s?(this.promote(s),!0):!1}promote(e,t){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,t&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:s}=e;t.onExitComplete&&t.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function $V(n,e,t){let s="";const r=n.x.translate/e.x,i=n.y.translate/e.y,o=(t==null?void 0:t.z)||0;if((r||i||o)&&(s=`translate3d(${r}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:c,rotate:h,rotateX:f,rotateY:p,skewX:m,skewY:y}=t;c&&(s=`perspective(${c}px) ${s}`),h&&(s+=`rotate(${h}deg) `),f&&(s+=`rotateX(${f}deg) `),p&&(s+=`rotateY(${p}deg) `),m&&(s+=`skewX(${m}deg) `),y&&(s+=`skewY(${y}deg) `)}const a=n.x.scale*e.x,l=n.y.scale*e.y;return(a!==1||l!==1)&&(s+=`scale(${a}, ${l})`),s||"none"}const Dl={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Gf=typeof window<"u"&&window.MotionDebug!==void 0,Zx=["","X","Y","Z"],VV={visibility:"hidden"},ak=1e3;let HV=0;function eb(n,e,t,s){const{latestValues:r}=e;r[n]&&(t[n]=r[n],e.setStaticValue(n,0),s&&(s[n]=0))}function Yj(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=ZI(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:i}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Pe,!(r||i))}const{parent:s}=n;s&&!s.hasCheckedOptimisedAppear&&Yj(s)}function Kj({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:s,resetTransform:r}){return class{constructor(o={},a=e==null?void 0:e()){this.id=HV++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Gf&&(Dl.totalNodes=Dl.resolvedTargetDeltas=Dl.recalculatedProjection=0),this.nodes.forEach(WV),this.nodes.forEach(JV),this.nodes.forEach(QV),this.nodes.forEach(YV),Gf&&window.MotionDebug.record(Dl)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new PV)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new JA),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Vj(o),this.instance=o;const{layoutId:l,layout:c,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),n){let f;const p=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=RV(p,250),T0.hasAnimatedSinceResize&&(T0.hasAnimatedSinceResize=!1,this.nodes.forEach(ck))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||h.getDefaultTransition()||sH,{onLayoutAnimationStart:b,onLayoutAnimationComplete:g}=h.getProps(),v=!this.targetLayout||!Wj(this.targetLayout,y)||m,x=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||x||p&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,x);const S={...GA(w,"layout"),onPlay:b,onComplete:g};(h.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S)}else p||ck(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ei(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ZV),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Yj(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(lk);return}this.isUpdating||this.nodes.forEach(qV),this.isUpdating=!1,this.nodes.forEach(XV),this.nodes.forEach(zV),this.nodes.forEach(GV),this.clearAllSnapshots();const a=Fi.now();on.delta=Ui(0,1e3/60,a-on.timestamp),on.timestamp=a,on.isProcessing=!0,zx.update.process(on),zx.preRender.process(on),zx.render.process(on),on.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,LA.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(KV),this.sharedNodes.forEach(eH)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Pe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Pe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Et(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=s(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!Gj(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;o&&(a||Ll(this.latestValues)||h)&&(r(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),rH(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return Et();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(iH))){const{scroll:h}=this.root;h&&(ch(l.x,h.offset.x),ch(l.y,h.offset.y))}return l}removeElementScroll(o){var a;const l=Et();if(er(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const h=this.path[c],{scroll:f,options:p}=h;h!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&er(l,o),ch(l.x,f.offset.x),ch(l.y,f.offset.y))}return l}applyTransform(o,a=!1){const l=Et();er(l,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&uh(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Ll(h.latestValues)&&uh(l,h.latestValues)}return Ll(this.latestValues)&&uh(l,this.latestValues),l}removeTransform(o){const a=Et();er(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Ll(c.latestValues))continue;I_(c.latestValues)&&c.updateSnapshot();const h=Et(),f=c.measurePageBox();er(h,f),tk(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return Ll(this.latestValues)&&tk(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==on.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=on.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Et(),this.relativeTargetOrigin=Et(),kp(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),er(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Et(),this.targetWithTransforms=Et()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),uV(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):er(this.target,this.layout.layoutBox),Mj(this.target,this.targetDelta)):er(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Et(),this.relativeTargetOrigin=Et(),kp(this.relativeTargetOrigin,this.target,m.target),er(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Gf&&Dl.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||I_(this.parent.latestValues)||Dj(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===on.timestamp&&(c=!1),c)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;er(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;wV(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Et());const{target:y}=a;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(QC(this.prevProjectionDelta.x,this.projectionDelta.x),QC(this.prevProjectionDelta.y,this.projectionDelta.y)),Cp(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!ok(this.projectionDelta.x,this.prevProjectionDelta.x)||!ok(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),Gf&&Dl.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=lh(),this.projectionDelta=lh(),this.projectionDeltaWithTransform=lh()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},h={...this.latestValues},f=lh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=Et(),m=l?l.source:void 0,y=this.layout?this.layout.source:void 0,w=m!==y,b=this.getStack(),g=!b||b.members.length<=1,v=!!(w&&!g&&this.options.crossfade===!0&&!this.path.some(nH));this.animationProgress=0;let x;this.mixTargetDelta=S=>{const A=S/1e3;uk(f.x,o.x,A),uk(f.y,o.y,A),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(kp(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),tH(this.relativeTarget,this.relativeTargetOrigin,p,A),x&&BV(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=Et()),er(x,this.relativeTarget)),w&&(this.animationValues=h,jV(h,c,this.latestValues,A,v,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ei(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Pe.update(()=>{T0.hasAnimatedSinceResize=!0,this.currentAnimation=$j(0,ak,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ak),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:h}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&qj(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Et();const f=Xs(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const p=Xs(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}er(a,l),uh(a,h),Cp(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new UV),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&eb("z",o,c,this.animationValues);for(let h=0;h<Zx.length;h++)eb(`rotate${Zx[h]}`,o,c,this.animationValues),eb(`skew${Zx[h]}`,o,c,this.animationValues);o.render();for(const h in c)o.setStaticValue(h,c[h]),this.animationValues&&(this.animationValues[h]=c[h]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return VV;const c={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=E0(o==null?void 0:o.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none",c;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const w={};return this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=E0(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Ll(this.latestValues)&&(w.transform=h?h({},""):"none",this.hasProjected=!1),w}const p=f.animationValues||f.latestValues;this.applyTransformsToTarget(),c.transform=$V(this.projectionDeltaWithTransform,this.treeScale,p),h&&(c.transform=h(p,c.transform));const{x:m,y}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,f.animationValues?c.opacity=f===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const w in Lv){if(p[w]===void 0)continue;const{correct:b,applyTo:g}=Lv[w],v=c.transform==="none"?p[w]:b(p[w],f);if(g){const x=g.length;for(let S=0;S<x;S++)c[g[S]]=v}else c[w]=v}return this.options.layoutId&&(c.pointerEvents=f===this?E0(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(lk),this.root.sharedNodes.clear()}}}function zV(n){n.updateLayout()}function GV(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:r}=n.layout,{animationType:i}=n.options,o=t.source!==n.layout.source;i==="size"?sr(f=>{const p=o?t.measuredBox[f]:t.layoutBox[f],m=Xs(p);p.min=s[f].min,p.max=p.min+m}):qj(i,t.layoutBox,s)&&sr(f=>{const p=o?t.measuredBox[f]:t.layoutBox[f],m=Xs(s[f]);p.max=p.min+m,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[f].max=n.relativeTarget[f].min+m)});const a=lh();Cp(a,s,t.layoutBox);const l=lh();o?Cp(l,n.applyTransform(r,!0),t.measuredBox):Cp(l,s,t.layoutBox);const c=!Gj(a);let h=!1;if(!n.resumeFrom){const f=n.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:m}=f;if(p&&m){const y=Et();kp(y,t.layoutBox,p.layoutBox);const w=Et();kp(w,s,m.layoutBox),Wj(y,w)||(h=!0),f.options.layoutRoot&&(n.relativeTarget=w,n.relativeTargetOrigin=y,n.relativeParent=f)}}}n.notifyListeners("didUpdate",{layout:s,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:h})}else if(n.isLead()){const{onExitComplete:s}=n.options;s&&s()}n.options.transition=void 0}function WV(n){Gf&&Dl.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function YV(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function KV(n){n.clearSnapshot()}function lk(n){n.clearMeasurements()}function qV(n){n.isLayoutDirty=!1}function XV(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function ck(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function JV(n){n.resolveTargetDelta()}function QV(n){n.calcProjection()}function ZV(n){n.resetSkewAndRotation()}function eH(n){n.removeLeadSnapshot()}function uk(n,e,t){n.translate=ht(e.translate,0,t),n.scale=ht(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function hk(n,e,t,s){n.min=ht(e.min,t.min,s),n.max=ht(e.max,t.max,s)}function tH(n,e,t,s){hk(n.x,e.x,t.x,s),hk(n.y,e.y,t.y,s)}function nH(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const sH={duration:.45,ease:[.4,0,.1,1]},dk=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),fk=dk("applewebkit/")&&!dk("chrome/")?Math.round:Jn;function pk(n){n.min=fk(n.min),n.max=fk(n.max)}function rH(n){pk(n.x),pk(n.y)}function qj(n,e,t){return n==="position"||n==="preserve-aspect"&&!cV(ik(e),ik(t),.2)}function iH(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const oH=Kj({attachResizeListener:(n,e)=>Zp(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),tb={current:void 0},Xj=Kj({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!tb.current){const n=new oH({});n.mount(window),n.setOptions({layoutScroll:!0}),tb.current=n}return tb.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),aH={pan:{Feature:AV},drag:{Feature:EV,ProjectionNode:Xj,MeasureLayout:Uj}};function mk(n,e,t){const{props:s}=n;n.animationState&&s.whileHover&&n.animationState.setActive("whileHover",t==="Start");const r="onHover"+t,i=s[r];i&&Pe.postRender(()=>i(e,ly(e)))}class lH extends _l{mount(){const{current:e}=this.node;e&&(this.unmount=f$(e,t=>(mk(this.node,t,"Start"),s=>mk(this.node,s,"End"))))}unmount(){}}class cH extends _l{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ay(Zp(this.node.current,"focus",()=>this.onFocus()),Zp(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function gk(n,e,t){const{props:s}=n;n.animationState&&s.whileTap&&n.animationState.setActive("whileTap",t==="Start");const r="onTap"+(t==="End"?"":t),i=s[r];i&&Pe.postRender(()=>i(e,ly(e)))}class uH extends _l{mount(){const{current:e}=this.node;e&&(this.unmount=y$(e,t=>(gk(this.node,t,"Start"),(s,{success:r})=>gk(this.node,s,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const O_=new WeakMap,nb=new WeakMap,hH=n=>{const e=O_.get(n.target);e&&e(n)},dH=n=>{n.forEach(hH)};function fH({root:n,...e}){const t=n||document;nb.has(t)||nb.set(t,{});const s=nb.get(t),r=JSON.stringify(e);return s[r]||(s[r]=new IntersectionObserver(dH,{root:n,...e})),s[r]}function pH(n,e,t){const s=fH(e);return O_.set(n,t),s.observe(n),()=>{O_.delete(n),s.unobserve(n)}}const mH={some:0,all:1};class gH extends _l{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:s,amount:r="some",once:i}=e,o={root:t?t.current:void 0,rootMargin:s,threshold:typeof r=="number"?r:mH[r]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),p=c?h:f;p&&p(l)};return pH(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(yH(e,t))&&this.startObserver()}unmount(){}}function yH({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const vH={inView:{Feature:gH},tap:{Feature:uH},focus:{Feature:cH},hover:{Feature:lH}},wH={layout:{ProjectionNode:Xj,MeasureLayout:Uj}},L_={current:null},Jj={current:!1};function xH(){if(Jj.current=!0,!!PA)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>L_.current=n.matches;n.addListener(e),e()}else L_.current=!1}const bH=[...xj,Dn,ml],_H=n=>bH.find(wj(n)),lf=new WeakMap;function SH(n,e,t){for(const s in e){const r=e[s],i=t[s];if(ln(r))n.addValue(s,r);else if(ln(i))n.addValue(s,Ii(r,{owner:n}));else if(i!==r)if(n.hasValue(s)){const o=n.getValue(s);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=n.getStaticValue(s);n.addValue(s,Ii(o!==void 0?o:r,{owner:n}))}}for(const s in t)e[s]===void 0&&n.removeValue(s);return e}const yk=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Qj{scrapeMotionValuesFromProps(e,t,s){return{}}constructor({parent:e,props:t,presenceContext:s,reducedMotionConfig:r,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=r1,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Fi.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Pe.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:h}=o;this.onUpdate=h,this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=t,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=Jw(t),this.isVariantNode=kI(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...p}=this.scrapeMotionValuesFromProps(t,{},this);for(const m in p){const y=p[m];l[m]!==void 0&&ln(y)&&y.set(l[m],!1)}}mount(e){this.current=e,lf.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,s)=>this.bindToMotionValue(s,t)),Jj.current||xH(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:L_.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){lf.delete(this.current),this.projection&&this.projection.unmount(),ei(this.notifyUpdate),ei(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=ku.has(e),r=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Pe.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),i=t.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),i(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in of){const t=of[e];if(!t)continue;const{isEnabled:s,Feature:r}=t;if(!this.features[e]&&r&&s(this.props)&&(this.features[e]=new r(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Et()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let s=0;s<yk.length;s++){const r=yk[s];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const i="on"+r,o=e[i];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=SH(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const s=this.values.get(e);t!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&t!==void 0&&(s=Ii(t===null?void 0:t,{owner:this}),this.addValue(e,s)),s}readValue(e,t){var s;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(s=this.getBaseTargetFromProps(this.props,e))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(yj(r)||lj(r))?r=parseFloat(r):!_H(r)&&ml.test(t)&&(r=pj(e,t)),this.setBaseTarget(e,ln(r)?r.get():r)),ln(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:s}=this.props;let r;if(typeof s=="string"||typeof s=="object"){const o=MA(this.props,s,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);o&&(r=o[e])}if(s&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!ln(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new JA),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class Zj extends Qj{constructor(){super(...arguments),this.KeyframeResolver=bj}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:s}){delete t[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ln(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function EH(n){return window.getComputedStyle(n)}class eO extends Zj{constructor(){super(...arguments),this.type="html",this.renderInstance=MI}readValueFromInstance(e,t){if(ku.has(t)){const s=s1(t);return s&&s.default||0}else{const s=EH(e),r=(OI(t)?s.getPropertyValue(t):s[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return Fj(e,t)}build(e,t,s){UA(e,t,s.transformTemplate)}scrapeMotionValuesFromProps(e,t,s){return zA(e,t,s)}}class tO extends Zj{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Et}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(ku.has(t)){const s=s1(t);return s&&s.default||0}return t=FI.has(t)?t:OA(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,s){return $I(e,t,s)}build(e,t,s){$A(e,t,this.isSVGTag,s.transformTemplate)}renderInstance(e,t,s,r){BI(e,t,s,r)}mount(e){this.isSVGTag=HA(e.tagName),super.mount(e)}}const AH=(n,e)=>DA(n)?new tO(e):new eO(e,{allowProjection:n!==k.Fragment}),TH=l$({...eV,...vH,...aH,...wH},AH),Gi=S4(TH);function nO(n,e){let t;const s=()=>{const{currentTime:r}=e,o=(r===null?0:r.value)/100;t!==o&&n(o),t=o};return Pe.update(s,!0),()=>ei(s)}const C0=new WeakMap;let ta;function CH(n,e){if(e){const{inlineSize:t,blockSize:s}=e[0];return{width:t,height:s}}else return n instanceof SVGElement&&"getBBox"in n?n.getBBox():{width:n.offsetWidth,height:n.offsetHeight}}function kH({target:n,contentRect:e,borderBoxSize:t}){var s;(s=C0.get(n))===null||s===void 0||s.forEach(r=>{r({target:n,contentSize:e,get size(){return CH(n,t)}})})}function NH(n){n.forEach(kH)}function PH(){typeof ResizeObserver>"u"||(ta=new ResizeObserver(NH))}function RH(n,e){ta||PH();const t=KA(n);return t.forEach(s=>{let r=C0.get(s);r||(r=new Set,C0.set(s,r)),r.add(e),ta==null||ta.observe(s)}),()=>{t.forEach(s=>{const r=C0.get(s);r==null||r.delete(e),r!=null&&r.size||ta==null||ta.unobserve(s)})}}const k0=new Set;let Np;function IH(){Np=()=>{const n={width:window.innerWidth,height:window.innerHeight},e={target:window,size:n,contentSize:n};k0.forEach(t=>t(e))},window.addEventListener("resize",Np)}function jH(n){return k0.add(n),Np||IH(),()=>{k0.delete(n),!k0.size&&Np&&(Np=void 0)}}function OH(n,e){return typeof n=="function"?jH(n):RH(n,e)}const LH=50,vk=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),DH=()=>({time:0,x:vk(),y:vk()}),MH={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function wk(n,e,t,s){const r=t[e],{length:i,position:o}=MH[e],a=r.current,l=t.time;r.current=n[`scroll${o}`],r.scrollLength=n[`scroll${i}`]-n[`client${i}`],r.offset.length=0,r.offset[0]=0,r.offset[1]=r.scrollLength,r.progress=pl(0,r.scrollLength,r.current);const c=s-l;r.velocity=c>LH?0:QA(r.current-a,c)}function FH(n,e,t){wk(n,"x",e,t),wk(n,"y",e,t),e.time=t}function BH(n,e){const t={x:0,y:0};let s=n;for(;s&&s!==e;)if(s instanceof HTMLElement)t.x+=s.offsetLeft,t.y+=s.offsetTop,s=s.offsetParent;else if(s.tagName==="svg"){const r=s.getBoundingClientRect();s=s.parentElement;const i=s.getBoundingClientRect();t.x+=r.left-i.left,t.y+=r.top-i.top}else if(s instanceof SVGGraphicsElement){const{x:r,y:i}=s.getBBox();t.x+=r,t.y+=i;let o=null,a=s.parentNode;for(;!o;)a.tagName==="svg"&&(o=a),a=s.parentNode;s=o}else break;return t}const D_={start:0,center:.5,end:1};function xk(n,e,t=0){let s=0;if(n in D_&&(n=D_[n]),typeof n=="string"){const r=parseFloat(n);n.endsWith("px")?s=r:n.endsWith("%")?n=r/100:n.endsWith("vw")?s=r/100*document.documentElement.clientWidth:n.endsWith("vh")?s=r/100*document.documentElement.clientHeight:n=r}return typeof n=="number"&&(s=e*n),t+s}const UH=[0,0];function $H(n,e,t,s){let r=Array.isArray(n)?n:UH,i=0,o=0;return typeof n=="number"?r=[n,n]:typeof n=="string"&&(n=n.trim(),n.includes(" ")?r=n.split(" "):r=[n,D_[n]?n:"0"]),i=xk(r[0],t,s),o=xk(r[1],e),i-o}const VH={All:[[0,0],[1,1]]},HH={x:0,y:0};function zH(n){return"getBBox"in n&&n.tagName!=="svg"?n.getBBox():{width:n.clientWidth,height:n.clientHeight}}function GH(n,e,t){const{offset:s=VH.All}=t,{target:r=n,axis:i="y"}=t,o=i==="y"?"height":"width",a=r!==n?BH(r,n):HH,l=r===n?{width:n.scrollWidth,height:n.scrollHeight}:zH(r),c={width:n.clientWidth,height:n.clientHeight};e[i].offset.length=0;let h=!e[i].interpolate;const f=s.length;for(let p=0;p<f;p++){const m=$H(s[p],c[o],l[o],a[i]);!h&&m!==e[i].interpolatorOffsets[p]&&(h=!0),e[i].offset[p]=m}h&&(e[i].interpolate=a1(e[i].offset,l1(s),{clamp:!1}),e[i].interpolatorOffsets=[...e[i].offset]),e[i].progress=Ui(0,1,e[i].interpolate(e[i].current))}function WH(n,e=n,t){if(t.x.targetOffset=0,t.y.targetOffset=0,e!==n){let s=e;for(;s&&s!==n;)t.x.targetOffset+=s.offsetLeft,t.y.targetOffset+=s.offsetTop,s=s.offsetParent}t.x.targetLength=e===n?e.scrollWidth:e.clientWidth,t.y.targetLength=e===n?e.scrollHeight:e.clientHeight,t.x.containerLength=n.clientWidth,t.y.containerLength=n.clientHeight}function YH(n,e,t,s={}){return{measure:()=>WH(n,s.target,t),update:r=>{FH(n,t,r),(s.offset||s.target)&&GH(n,t,s)},notify:()=>e(t)}}const If=new WeakMap,bk=new WeakMap,sb=new WeakMap,_k=n=>n===document.documentElement?window:n;function d1(n,{container:e=document.documentElement,...t}={}){let s=sb.get(e);s||(s=new Set,sb.set(e,s));const r=DH(),i=YH(e,n,r,t);if(s.add(i),!If.has(e)){const a=()=>{for(const p of s)p.measure()},l=()=>{for(const p of s)p.update(on.timestamp)},c=()=>{for(const p of s)p.notify()},h=()=>{Pe.read(a,!1,!0),Pe.read(l,!1,!0),Pe.update(c,!1,!0)};If.set(e,h);const f=_k(e);window.addEventListener("resize",h,{passive:!0}),e!==document.documentElement&&bk.set(e,OH(e,h)),f.addEventListener("scroll",h,{passive:!0})}const o=If.get(e);return Pe.read(o,!1,!0),()=>{var a;ei(o);const l=sb.get(e);if(!l||(l.delete(i),l.size))return;const c=If.get(e);If.delete(e),c&&(_k(e).removeEventListener("scroll",c),(a=bk.get(e))===null||a===void 0||a(),window.removeEventListener("resize",c))}}function KH({source:n,container:e,axis:t="y"}){n&&(e=n);const s={value:0},r=d1(i=>{s.value=i[t].progress*100},{container:e,axis:t});return{currentTime:s,cancel:r}}const rb=new Map;function sO({source:n,container:e=document.documentElement,axis:t="y"}={}){n&&(e=n),rb.has(e)||rb.set(e,{});const s=rb.get(e);return s[t]||(s[t]=zI()?new ScrollTimeline({source:e,axis:t}):KH({source:e,axis:t})),s[t]}function qH(n){return n.length===2}function rO(n){return n&&(n.target||n.offset)}function XH(n,e){return qH(n)||rO(e)?d1(t=>{n(t[e.axis].progress,t)},e):nO(n,sO(e))}function JH(n,e){if(n.flatten(),rO(e))return n.pause(),d1(t=>{n.time=n.duration*t[e.axis].progress},e);{const t=sO(e);return n.attachTimeline?n.attachTimeline(t,s=>(s.pause(),nO(r=>{s.time=s.duration*r},t))):Jn}}function QH(n,{axis:e="y",...t}={}){const s={axis:e,...t};return typeof n=="function"?XH(n,s):JH(n,s)}function Sk(n,e){m4(!!(!e||e.current))}const ZH=()=>({scrollX:Ii(0),scrollY:Ii(0),scrollXProgress:Ii(0),scrollYProgress:Ii(0)});function e6({container:n,target:e,layoutEffect:t=!0,...s}={}){const r=pf(ZH);return(t?Yw:k.useEffect)(()=>(Sk("target",e),Sk("container",n),QH((o,{x:a,y:l})=>{r.scrollX.set(a.current),r.scrollXProgress.set(a.progress),r.scrollY.set(l.current),r.scrollYProgress.set(l.progress)},{...s,container:(n==null?void 0:n.current)||void 0,target:(e==null?void 0:e.current)||void 0})),[n,e,JSON.stringify(s.offset)]),r}function t6(n){const e=pf(()=>Ii(n)),{isStatic:t}=k.useContext(Ww);if(t){const[,s]=k.useState(n);k.useEffect(()=>e.on("change",s),[])}return e}function iO(n,e){const t=t6(e()),s=()=>t.set(e());return s(),Yw(()=>{const r=()=>Pe.preRender(s,!1,!0),i=n.map(o=>o.on("change",r));return()=>{i.forEach(o=>o()),ei(s)}}),t}const n6=n=>n&&typeof n=="object"&&n.mix,s6=n=>n6(n)?n.mix:void 0;function r6(...n){const e=!Array.isArray(n[0]),t=e?0:-1,s=n[0+t],r=n[1+t],i=n[2+t],o=n[3+t],a=a1(r,i,{mixer:s6(i[0]),...o});return e?a(s):a}function i6(n){Ep.current=[],n();const e=iO(Ep.current,n);return Ep.current=void 0,e}function Ek(n,e,t,s){if(typeof n=="function")return i6(n);const r=typeof e=="function"?e:r6(e,t,s);return Array.isArray(n)?Ak(n,r):Ak([n],([i])=>r(i))}function Ak(n,e){const t=pf(()=>[]);return iO(n,()=>{t.length=0;const s=n.length;for(let r=0;r<s;r++)t[r]=n[r].get();return e(t)})}const o6=(n,e,t)=>{const s=e-n;return((t-n)%s+s)%s+n};function oO(n,e){return Cj(n)?n[o6(0,n.length,e)]:n}function f1(n){return typeof n=="object"&&!Array.isArray(n)}function aO(n,e,t,s){return typeof n=="string"&&f1(e)?KA(n,t,s):n instanceof NodeList?Array.from(n):Array.isArray(n)?n:[n]}function a6(n,e,t){return n*(e+1)}function Tk(n,e,t,s){var r;return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,n+parseFloat(e)):e==="<"?t:(r=s.get(e))!==null&&r!==void 0?r:n}function l6(n,e,t){for(let s=0;s<n.length;s++){const r=n[s];r.at>e&&r.at<t&&(ex(n,r),s--)}}function c6(n,e,t,s,r,i){l6(n,r,i);for(let o=0;o<e.length;o++)n.push({value:e[o],at:ht(r,i,s[o]),easing:oO(t,o)})}function u6(n,e){for(let t=0;t<n.length;t++)n[t]=n[t]/(e+1)}function h6(n,e){return n.at===e.at?n.value===null?1:e.value===null?-1:0:n.at-e.at}const d6="easeInOut";function f6(n,{defaultTransition:e={},...t}={},s,r){const i=e.duration||.3,o=new Map,a=new Map,l={},c=new Map;let h=0,f=0,p=0;for(let m=0;m<n.length;m++){const y=n[m];if(typeof y=="string"){c.set(y,f);continue}else if(!Array.isArray(y)){c.set(y.name,Tk(f,y.at,h,c));continue}let[w,b,g={}]=y;g.at!==void 0&&(f=Tk(f,g.at,h,c));let v=0;const x=(S,A,C,N=0,P=0)=>{const R=p6(S),{delay:O=0,times:M=l1(R),type:Y="keyframes",repeat:J,repeatType:U,repeatDelay:z=0,...$}=A;let{ease:B=e.ease||"easeOut",duration:I}=A;const j=typeof O=="function"?O(N,P):O,L=R.length,D=Zw(Y)?Y:r==null?void 0:r[Y];if(L<=2&&D){let se=100;if(L===2&&y6(R)){const K=R[1]-R[0];se=Math.abs(K)}const ae={...$};I!==void 0&&(ae.duration=Li(I));const re=u$(ae,se,D);B=re.ease,I=re.duration}I??(I=i);const V=f+j;M.length===1&&M[0]===0&&(M[1]=1);const F=M.length-R.length;if(F>0&&kj(M,F),R.length===1&&R.unshift(null),J){I=a6(I,J);const se=[...R],ae=[...M];B=Array.isArray(B)?[...B]:[B];const re=[...B];for(let K=0;K<J;K++){R.push(...se);for(let Q=0;Q<se.length;Q++)M.push(ae[Q]+(K+1)),B.push(Q===0?"linear":oO(re,Q-1))}u6(M,J)}const H=V+I;c6(C,R,B,M,V,H),v=Math.max(j+I,v),p=Math.max(H,p)};if(ln(w)){const S=Ck(w,a);x(b,g,kk("default",S))}else{const S=aO(w,b,s,l),A=S.length;for(let C=0;C<A;C++){b=b,g=g;const N=S[C],P=Ck(N,a);for(const R in b)x(b[R],m6(g,R),kk(R,P),C,A)}}h=f,f+=v}return a.forEach((m,y)=>{for(const w in m){const b=m[w];b.sort(h6);const g=[],v=[],x=[];for(let A=0;A<b.length;A++){const{at:C,value:N,easing:P}=b[A];g.push(N),v.push(pl(0,p,C)),x.push(P||"easeOut")}v[0]!==0&&(v.unshift(0),g.unshift(g[0]),x.unshift(d6)),v[v.length-1]!==1&&(v.push(1),g.push(null)),o.has(y)||o.set(y,{keyframes:{},transition:{}});const S=o.get(y);S.keyframes[w]=g,S.transition[w]={...e,duration:p,ease:x,times:v,...t}}}),o}function Ck(n,e){return!e.has(n)&&e.set(n,{}),e.get(n)}function kk(n,e){return e[n]||(e[n]=[]),e[n]}function p6(n){return Array.isArray(n)?n:[n]}function m6(n,e){return n&&n[e]?{...n,...n[e]}:{...n}}const g6=n=>typeof n=="number",y6=n=>n.every(g6);function v6(n,e){return n in e}class w6 extends Qj{constructor(){super(...arguments),this.type="object"}readValueFromInstance(e,t){if(v6(t,e)){const s=e[t];if(typeof s=="string"||typeof s=="number")return s}}getBaseTargetFromProps(){}removeValueFromRenderState(e,t){delete t.output[e]}measureInstanceViewportBox(){return Et()}build(e,t){Object.assign(e.output,t)}renderInstance(e,{output:t}){Object.assign(e,t)}sortInstanceNodePosition(){return 0}}function x6(n){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},t=Vj(n)?new tO(e):new eO(e);t.mount(n),lf.set(n,t)}function b6(n){const e={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},t=new w6(e);t.mount(n),lf.set(n,t)}function _6(n,e){return ln(n)||typeof n=="number"||typeof n=="string"&&!f1(e)}function lO(n,e,t,s){const r=[];if(_6(n,e))r.push($j(n,f1(e)&&e.default||e,t&&(t.default||t)));else{const i=aO(n,e,s),o=i.length;for(let a=0;a<o;a++){const l=i[a],c=l instanceof Element?x6:b6;lf.has(l)||c(l);const h=lf.get(l),f={...t};"delay"in f&&typeof f.delay=="function"&&(f.delay=f.delay(a,o)),r.push(...h1(h,{...e,transition:f},{}))}}return r}function S6(n,e,t){const s=[];return f6(n,e,t,{spring:o1}).forEach(({keyframes:i,transition:o},a)=>{s.push(...lO(a,i,o))}),s}function E6(n){return Array.isArray(n)&&n.some(Array.isArray)}function A6(n){function e(t,s,r){let i=[];return E6(t)?i=S6(t,s,n):i=lO(t,s,r,n),new GI(i)}return e}const T6=A6(),vs=({sectionId:n,title:e,isOpen:t,setIsOpen:s,children:r})=>{const i=`${n}-content`;return d.jsxs("div",{className:"border-b border-slate-200 last:border-b-0",children:[d.jsxs("button",{type:"button",className:"flex items-center justify-between w-full p-4 font-semibold text-left text-slate-700 hover:bg-slate-50 focus:outline-none rounded-t-lg",onClick:s,"aria-expanded":t,"aria-controls":i,children:[d.jsx("span",{children:e}),d.jsx(TA,{collapsed:!t})]}),d.jsx(Kw,{initial:!1,children:t&&d.jsx(Gi.div,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.3,ease:[.04,.62,.23,.98]},id:i,role:"region",className:"overflow-hidden",children:d.jsx("div",{className:"p-4 pt-0",children:r})},"content")})]})},Nt=n=>{const{children:e,variant:t="outline",size:s="md",leftIcon:r,isLoading:i=!1,fullWidth:o=!1,className:a=""}=n,l="inline-flex items-center justify-center font-semibold rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 transition-all duration-200 disabled:opacity-60 disabled:cursor-not-allowed shadow-sm",c={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},h={primary:"text-white bg-primary hover:bg-blue-700 focus:ring-primary",secondary:"text-white bg-slate-800 hover:bg-slate-900 focus:ring-slate-800",danger:"text-red-600 bg-red-100 hover:bg-red-200 focus:ring-red-500",outline:"text-slate-700 bg-white border border-slate-300 hover:bg-slate-50 focus:ring-primary"},f=`${l} ${c[s]} ${h[t]} ${o?"w-full":""} ${a}`,p=d.jsxs(d.Fragment,{children:[i&&d.jsx(fl,{className:"h-5 w-5 mr-2"}),!i&&r&&d.jsx("span",{className:"mr-2 -ml-1 h-5 w-5 flex items-center",children:r}),e]});if(n.as==="link"){const{as:N,to:P,children:R,variant:O,size:M,leftIcon:Y,isLoading:J,fullWidth:U,className:z,...$}=n;return d.jsx(tt,{to:P,...$,className:f,children:p})}const{as:m,children:y,variant:w,size:b,leftIcon:g,isLoading:v,fullWidth:x,className:S,disabled:A,...C}=n;return d.jsx("button",{...C,className:f,disabled:A||i,children:p})},Pt=({children:n,className:e=""})=>d.jsx("div",{className:`bg-white p-6 sm:p-8 rounded-2xl shadow-lg border border-slate-200/80 ${e}`,children:n}),Re=({text:n,children:e})=>d.jsxs("span",{className:"inline-flex items-center",children:[e,d.jsxs("span",{className:"relative group/tooltip cursor-help ml-1",children:[d.jsx(qU,{}),d.jsxs("span",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-64 p-3 bg-slate-800 text-white text-xs rounded-lg shadow-lg opacity-0 group-hover/tooltip:opacity-100 transition-opacity duration-300 pointer-events-none z-50 text-left",children:[n,d.jsx("svg",{className:"absolute text-slate-800 h-2 w-4 left-1/2 -translate-x-1/2 top-full",x:"0px",y:"0px",viewBox:"0 0 255 255",children:d.jsx("polygon",{className:"fill-current",points:"0,0 127.5,127.5 255,0"})})]})]})]}),kl=({message:n,id:e})=>n?d.jsx("p",{id:e,className:"text-red-500 text-xs mt-1",children:n}):null,Ee="block w-full text-sm p-2.5 border rounded-md focus:ring-1 focus:ring-primary transition-colors duration-200 shadow-sm placeholder-gray-400",Nl="border-red-400 bg-red-50 text-red-900 focus:border-red-500 focus:ring-red-500",Ae="border-gray-300 bg-gray-50 text-gray-900 focus:border-primary",C6=n=>{const e={},t=n.fullName.trim().split(/\s+/),s=t[0]||"",r=t.slice(1).join(" ");s||(e.firstName="First name is required."),r||(e.lastName="Last name is required."),n.phone.trim()||(e.phone="Phone is required.");const i=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;n.email.trim()?i.test(n.email)||(e.email="Invalid email address. Please enter a valid email format."):e.email="Email is required.";const o=/^(https?:\/\/)?([\da-z.-]+)\.([a-z.]{2,6})([/\w .-]*)*\/?$/;return n.website&&!o.test(n.website)&&(e.website="Invalid URL format."),n.linkedin&&!/^(https?:\/\/)?(www\.)?linkedin\.com\/in\/[a-zA-Z0-9_-]+\/?$/.test(n.linkedin)&&(e.linkedin="Invalid LinkedIn URL."),n.github&&!/^(https?:\/\/)?(www\.)?github\.com\/[a-zA-Z0-9_-]+\/?$/.test(n.github)&&(e.github="Invalid GitHub URL."),e},k6=Jt.memo(()=>{const{profile:n,setProfile:e}=k.useContext(Ke),[t,s]=k.useState({}),[r,i]=k.useState(""),[o,a]=k.useState("");k.useEffect(()=>{const f=`${r} ${o}`.trim();if(n.fullName.trim()!==f){const p=n.fullName.trim().split(/\s+/),m=p[0]||"",y=p.slice(1).join(" ");i(m),a(y)}},[n.fullName,r,o]);const l=f=>{i(f);const p=`${f} ${o}`.trim();e(m=>({...m,fullName:p}))},c=f=>{a(f);const p=`${r} ${f}`.trim();e(m=>({...m,fullName:p}))};k.useEffect(()=>{s(C6(n))},[n.fullName,n.email,n.phone,n.website,n.linkedin,n.github]);const h=f=>{const{name:p,value:m}=f.target;e(y=>({...y,[p]:m}))};return d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),d.jsx("input",{name:"firstName",value:r,onChange:f=>l(f.target.value),className:`${Ee} ${t.firstName?Nl:Ae}`,placeholder:"Jordan"}),d.jsx(kl,{message:t.firstName,id:"firstName-error"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),d.jsx("input",{name:"lastName",value:o,onChange:f=>c(f.target.value),className:`${Ee} ${t.lastName?Nl:Ae}`,placeholder:"Lee"}),d.jsx(kl,{message:t.lastName,id:"lastName-error"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),d.jsx("input",{name:"email",value:n.email,onChange:h,className:`${Ee} ${t.email?Nl:Ae}`,placeholder:"jordan.lee@example.com"}),d.jsx(kl,{message:t.email,id:"email-error"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:d.jsx(Re,{text:"Link to your personal website or online portfolio. e.g., 'yourname.dev'",children:"Website/Portfolio"})}),d.jsx("input",{name:"website",value:n.website,onChange:h,className:`${Ee} ${t.website?Nl:Ae}`,placeholder:"yourportfolio.com"}),d.jsx(kl,{message:t.website,id:"website-error"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:d.jsx(Re,{text:"Your professional contact number. e.g., (555) 123-4567",children:"Phone"})}),d.jsx("input",{name:"phone",value:n.phone,onChange:h,className:`${Ee} ${t.phone?Nl:Ae}`,placeholder:"(555) 123-4567"}),d.jsx(kl,{message:t.phone,id:"phone-error"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:d.jsx(Re,{text:"Full URL to your LinkedIn profile. e.g., 'linkedin.com/in/yourname'",children:"LinkedIn"})}),d.jsx("input",{name:"linkedin",value:n.linkedin,onChange:h,className:`${Ee} ${t.linkedin?Nl:Ae}`,placeholder:"linkedin.com/in/yourprofile"}),d.jsx(kl,{message:t.linkedin,id:"linkedin-error"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:d.jsx(Re,{text:"Your city and state. e.g., 'San Francisco, CA'",children:"Location"})}),d.jsx("input",{name:"location",value:n.location,onChange:h,className:`${Ee} ${Ae}`,placeholder:"New York, NY"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:d.jsx(Re,{text:"Full URL to your GitHub profile. e.g., 'github.com/yourusername'",children:"GitHub"})}),d.jsx("input",{name:"github",value:n.github,onChange:h,className:`${Ee} ${t.github?Nl:Ae}`,placeholder:"github.com/yourusername"}),d.jsx(kl,{message:t.github,id:"github-error"})]})]})}),N6=Jt.memo(()=>{const{profile:n,setProfile:e}=k.useContext(Ke),t=s=>{e(r=>({...r,summary:s.target.value}))};return d.jsx("textarea",{name:"summary",value:n.summary,onChange:t,rows:4,className:`${Ee} ${Ae}`,placeholder:"Results-driven Financial Analyst with 5+ years of experience in data analysis and financial modeling. Or: Organized Administrative Assistant skilled in office management and executive support."})}),P6=Jt.memo(()=>{const{profile:n,setProfile:e}=k.useContext(Ke),t=(i,o,a)=>{e(l=>({...l,education:l.education.map(c=>c.id===i?{...c,[o]:a}:c)}))},s=()=>{e(i=>({...i,education:[...i.education,{id:crypto.randomUUID(),institution:"",degree:"",fieldOfStudy:"",startDate:"",endDate:"",gpa:"",relevantCoursework:"",awardsHonors:""}]}))},r=i=>{e(o=>({...o,education:o.education.filter(a=>a.id!==i)}))};return d.jsxs("div",{className:"space-y-6",children:[n.education.map(i=>d.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg relative group/item bg-white",children:[d.jsx("button",{onClick:()=>r(i.id),className:"absolute top-2 right-2 text-gray-400 hover:text-red-500 opacity-0 group-hover/item:opacity-100 transition-opacity p-1","aria-label":`Remove education at ${i.institution}`,children:d.jsx(zi,{})}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:d.jsx(Re,{text:"Name of the university, college, or bootcamp.",children:"Institution"})}),d.jsx("input",{value:i.institution,onChange:o=>t(i.id,"institution",o.target.value),className:`${Ee} ${Ae}`,placeholder:"State University"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:d.jsx(Re,{text:"e.g., 'Bachelor of Science', 'M.S.', 'Ph.D.'",children:"Degree"})}),d.jsx("input",{value:i.degree,onChange:o=>t(i.id,"degree",o.target.value),className:`${Ee} ${Ae}`,placeholder:"B.S. or Bachelor of Arts"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:d.jsx(Re,{text:"e.g., 'Computer Science', 'Business Administration'",children:"Field of Study"})}),d.jsx("input",{value:i.fieldOfStudy,onChange:o=>t(i.id,"fieldOfStudy",o.target.value),className:`${Ee} ${Ae}`,placeholder:"Computer Science, Finance"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:d.jsx(Re,{text:"Enter your Grade Point Average. e.g., '3.8/4.0'",children:"GPA"})}),d.jsx("input",{value:i.gpa,onChange:o=>t(i.id,"gpa",o.target.value),className:`${Ee} ${Ae}`,placeholder:"3.8/4.0"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:d.jsx(Re,{text:"Year you started. e.g., '2018'",children:"Start Date"})}),d.jsx("input",{value:i.startDate,onChange:o=>t(i.id,"startDate",o.target.value),placeholder:"YYYY",className:`${Ee} ${Ae}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:d.jsx(Re,{text:"Year you graduated or 'Present'. e.g., '2022'",children:"End Date"})}),d.jsx("input",{value:i.endDate,onChange:o=>t(i.id,"endDate",o.target.value),placeholder:"YYYY or Present",className:`${Ee} ${Ae}`})]}),d.jsxs("div",{className:"md:col-span-2",children:[d.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:d.jsx(Re,{text:"List key courses relevant to your target roles.",children:"Relevant Coursework"})}),d.jsx("textarea",{value:i.relevantCoursework,onChange:o=>t(i.id,"relevantCoursework",o.target.value),rows:2,className:`${Ee} ${Ae}`,placeholder:"Data Structures, Corporate Finance, Project Management"})]}),d.jsxs("div",{className:"md:col-span-2",children:[d.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:d.jsx(Re,{text:"List any academic awards, scholarships, or honors.",children:"Awards & Honors"})}),d.jsx("textarea",{value:i.awardsHonors,onChange:o=>t(i.id,"awardsHonors",o.target.value),rows:2,className:`${Ee} ${Ae}`,placeholder:"Dean's List (2020-2022)"})]})]})]},i.id)),d.jsx("button",{onClick:s,className:"w-full mt-2 text-center px-4 py-2 border border-dashed border-gray-400 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:"+ Add Education"})]})}),R6=Jt.memo(()=>{const{profile:n,setProfile:e}=k.useContext(Ke),t=(l,c,h)=>{e(f=>({...f,experience:f.experience.map(p=>p.id===l?{...p,[c]:h}:p)}))},s=(l,c,h)=>{e(f=>({...f,experience:f.experience.map(p=>p.id===l?{...p,achievements:p.achievements.map(m=>m.id===c?{...m,text:h}:m)}:p)}))},r=l=>{e(c=>({...c,experience:c.experience.map(h=>h.id===l?{...h,achievements:[...h.achievements,{id:crypto.randomUUID(),text:""}]}:h)}))},i=(l,c)=>{e(h=>({...h,experience:h.experience.map(f=>f.id===l?{...f,achievements:f.achievements.filter(p=>p.id!==c)}:f)}))},o=()=>{e(l=>({...l,experience:[...l.experience,{id:crypto.randomUUID(),company:"",title:"",location:"",startDate:"",endDate:"",achievements:[{id:crypto.randomUUID(),text:""}]}]}))},a=l=>{e(c=>({...c,experience:c.experience.filter(h=>h.id!==l)}))};return d.jsxs("div",{className:"space-y-6",children:[n.experience.map(l=>d.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg relative group/item bg-white",children:[d.jsx("button",{onClick:()=>a(l.id),className:"absolute top-2 right-2 text-gray-400 hover:text-red-500 opacity-0 group-hover/item:opacity-100 transition-opacity p-1","aria-label":`Remove experience at ${l.company}`,children:d.jsx(zi,{})}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:d.jsx(Re,{text:"The name of the company.",children:"Company"})}),d.jsx("input",{value:l.company,onChange:c=>t(l.id,"company",c.target.value),className:`${Ee} ${Ae}`,placeholder:"Innovate Inc. or Sterling Bank"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:d.jsx(Re,{text:"Your job title for this role.",children:"Title"})}),d.jsx("input",{value:l.title,onChange:c=>t(l.id,"title",c.target.value),className:`${Ee} ${Ae}`,placeholder:"Software Engineer or Office Manager"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:d.jsx(Re,{text:"e.g., 'Remote' or 'City, CA'",children:"Location"})}),d.jsx("input",{value:l.location,onChange:c=>t(l.id,"location",c.target.value),className:`${Ee} ${Ae}`,placeholder:"Remote"})]}),d.jsx("div",{}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:d.jsx(Re,{text:"Start date of employment. e.g., 'MM/YYYY' or 'YYYY'",children:"Start Date"})}),d.jsx("input",{value:l.startDate,onChange:c=>t(l.id,"startDate",c.target.value),placeholder:"YYYY or MM/YYYY",className:`${Ee} ${Ae}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:d.jsx(Re,{text:"End date of employment. e.g., 'MM/YYYY' or 'Present'",children:"End Date"})}),d.jsx("input",{value:l.endDate,onChange:c=>t(l.id,"endDate",c.target.value),placeholder:"YYYY or Present",className:`${Ee} ${Ae}`})]})]}),d.jsxs("div",{className:"mt-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:d.jsx(Re,{text:"List your accomplishments with strong action verbs and quantifiable results where possible.",children:"Achievements / Responsibilities"})}),d.jsx("div",{className:"space-y-2 mt-1",children:l.achievements.map(c=>d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("textarea",{value:c.text,onChange:h=>s(l.id,c.id,h.target.value),rows:2,className:`${Ee} ${Ae}`,placeholder:"Use the STAR method (Situation, Task, Action, Result) to describe your accomplishments."}),d.jsx("button",{onClick:()=>i(l.id,c.id),className:"text-gray-400 hover:text-red-500 p-1 flex-shrink-0","aria-label":"Remove achievement",children:d.jsx(fs,{})})]},c.id))}),d.jsx("button",{onClick:()=>r(l.id),className:"w-full mt-2 text-center px-4 py-1 border border-dashed border-gray-300 text-xs font-medium rounded-md text-gray-600 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:"+ Add Achievement"})]})]},l.id)),d.jsx("button",{onClick:o,className:"w-full mt-2 text-center px-4 py-2 border border-dashed border-gray-400 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:"+ Add Experience"})]})}),I6=Jt.memo(()=>{const{profile:n,setProfile:e}=k.useContext(Ke),t=(i,o,a)=>{e(l=>({...l,projects:l.projects.map(c=>c.id===i?{...c,[o]:a}:c)}))},s=()=>{e(i=>({...i,projects:[...i.projects,{id:crypto.randomUUID(),name:"",description:"",url:"",technologiesUsed:"",startDate:"",endDate:""}]}))},r=i=>{e(o=>({...o,projects:o.projects.filter(a=>a.id!==i)}))};return d.jsxs("div",{className:"space-y-6",children:[n.projects.map(i=>d.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg relative group/item bg-white",children:[d.jsx("button",{onClick:()=>r(i.id),className:"absolute top-2 right-2 text-gray-400 hover:text-red-500 opacity-0 group-hover/item:opacity-100 transition-opacity p-1","aria-label":`Remove project ${i.name}`,children:d.jsx(zi,{})}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:d.jsx(Re,{text:"The official name of your project.",children:"Project Name"})}),d.jsx("input",{value:i.name,onChange:o=>t(i.id,"name",o.target.value),className:`${Ee} ${Ae}`,placeholder:"Q3 Budget Forecast or Portfolio Website"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:d.jsx(Re,{text:"Link to the live project or its repository (e.g., GitHub).",children:"Project URL"})}),d.jsx("input",{value:i.url,onChange:o=>t(i.id,"url",o.target.value),className:`${Ee} ${Ae}`,placeholder:"yourprojectlink.com"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:d.jsx(Re,{text:"Year the project started. e.g., '2023'",children:"Start Date"})}),d.jsx("input",{value:i.startDate,onChange:o=>t(i.id,"startDate",o.target.value),placeholder:"YYYY",className:`${Ee} ${Ae}`})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:d.jsx(Re,{text:"Year the project ended or 'Present'.",children:"End Date"})}),d.jsx("input",{value:i.endDate,onChange:o=>t(i.id,"endDate",o.target.value),placeholder:"YYYY or Present",className:`${Ee} ${Ae}`})]}),d.jsxs("div",{className:"md:col-span-2",children:[d.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:d.jsx(Re,{text:"Comma-separated list of key technologies. e.g., 'React, Node.js, PostgreSQL'",children:"Technologies Used"})}),d.jsx("input",{value:i.technologiesUsed,onChange:o=>t(i.id,"technologiesUsed",o.target.value),placeholder:"Python, Pandas, Excel, React, MS Office Suite",className:`${Ee} ${Ae}`})]}),d.jsxs("div",{className:"md:col-span-2",children:[d.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:d.jsx(Re,{text:"Briefly describe the project's purpose and your role.",children:"Description"})}),d.jsx("textarea",{value:i.description,onChange:o=>t(i.id,"description",o.target.value),rows:3,className:`${Ee} ${Ae}`,placeholder:"Coordinated a 50-person company offsite event."})]})]})]},i.id)),d.jsx("button",{onClick:s,className:"w-full mt-2 text-center px-4 py-2 border border-dashed border-gray-400 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:"+ Add Project"})]})}),jf=Jt.memo(({section:n,title:e,placeholder:t})=>{const{profile:s,setProfile:r}=k.useContext(Ke),i=s[n],o=k.useCallback((c,h)=>{r(f=>{const p=f[n].map(m=>m.id===c?{...m,name:h}:m);return{...f,[n]:p}})},[n,r]),a=k.useCallback(c=>{r(h=>({...h,[n]:h[n].filter(f=>f.id!==c)}))},[n,r]),l=k.useCallback(()=>{r(c=>({...c,[n]:[...c[n],{id:crypto.randomUUID(),name:""}]}))},[n,r]);return d.jsxs("div",{className:"space-y-3",children:[i.map(c=>d.jsxs("div",{className:"flex items-center space-x-2 group/item",children:[d.jsx("input",{value:c.name,onChange:h=>o(c.id,h.target.value),placeholder:t,className:`${Ee} ${Ae}`}),d.jsx("button",{onClick:()=>a(c.id),className:"text-gray-400 hover:text-red-500 opacity-0 group-hover/item:opacity-100 transition-opacity p-1","aria-label":`Remove ${t} item`,children:d.jsx(zi,{})})]},c.id)),d.jsxs("button",{onClick:l,className:"w-full mt-2 text-center px-4 py-2 border border-dashed border-gray-400 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:["+ Add ",e]})]})}),j6=Jt.memo(()=>{const{profile:n,setProfile:e}=k.useContext(Ke),t=(i,o,a)=>{e(l=>({...l,languages:l.languages.map(c=>c.id===i?{...c,[o]:a}:c)}))},s=()=>{e(i=>({...i,languages:[...i.languages,{id:crypto.randomUUID(),name:"",proficiency:"conversational"}]}))},r=i=>{e(o=>({...o,languages:o.languages.filter(a=>a.id!==i)}))};return d.jsxs("div",{className:"space-y-3",children:[n.languages.map(i=>d.jsxs("div",{className:"flex items-center space-x-2 group/item",children:[d.jsx("input",{value:i.name,onChange:o=>t(i.id,"name",o.target.value),placeholder:"English",className:`${Ee} ${Ae}`}),d.jsxs("select",{value:i.proficiency,onChange:o=>t(i.id,"proficiency",o.target.value),className:`${Ee} ${Ae} w-48`,children:[d.jsx("option",{value:"basic",children:"Basic"}),d.jsx("option",{value:"conversational",children:"Conversational"}),d.jsx("option",{value:"fluent",children:"Fluent"}),d.jsx("option",{value:"native",children:"Native"})]}),d.jsx("button",{onClick:()=>r(i.id),className:"text-gray-400 hover:text-red-500 opacity-0 group-hover/item:opacity-100 transition-opacity p-1","aria-label":"Remove language item",children:d.jsx(zi,{})})]},i.id)),d.jsx("button",{onClick:s,className:"w-full mt-2 text-center px-4 py-2 border border-dashed border-gray-400 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:"+ Add Language"})]})}),O6=Jt.memo(()=>{const{profile:n,setProfile:e}=k.useContext(Ke),t=(l,c)=>{e(h=>({...h,customSections:h.customSections.map(f=>f.id===l?{...f,title:c}:f)}))},s=(l,c,h)=>{e(f=>({...f,customSections:f.customSections.map(p=>p.id===l?{...p,items:p.items.map(m=>m.id===c?{...m,text:h}:m)}:p)}))},r=()=>{e(l=>({...l,customSections:[...l.customSections,{id:crypto.randomUUID(),title:"",items:[{id:crypto.randomUUID(),text:""}]}]}))},i=l=>{e(c=>({...c,customSections:c.customSections.filter(h=>h.id!==l)}))},o=l=>{e(c=>({...c,customSections:c.customSections.map(h=>h.id===l?{...h,items:[...h.items,{id:crypto.randomUUID(),text:""}]}:h)}))},a=(l,c)=>{e(h=>({...h,customSections:h.customSections.map(f=>f.id===l?{...f,items:f.items.filter(p=>p.id!==c)}:f)}))};return d.jsxs("div",{className:"space-y-6",children:[n.customSections.map(l=>d.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg relative group/item bg-white",children:[d.jsx("button",{onClick:()=>i(l.id),className:"absolute top-2 right-2 text-gray-400 hover:text-red-500 opacity-0 group-hover/item:opacity-100 transition-opacity p-1","aria-label":`Remove custom section ${l.title}`,children:d.jsx(zi,{})}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Section Title"}),d.jsx("input",{value:l.title,onChange:c=>t(l.id,c.target.value),className:`${Ee} ${Ae} font-semibold`,placeholder:"Publications, Volunteer Work"})]}),d.jsx("div",{className:"mt-4 space-y-2",children:l.items.map(c=>d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("textarea",{value:c.text,onChange:h=>s(l.id,c.id,h.target.value),rows:2,className:`${Ee} ${Ae}`,placeholder:"'Contributed to open-source project X by implementing feature Y.'"}),d.jsx("button",{onClick:()=>a(l.id,c.id),className:"text-gray-400 hover:text-red-500 p-1 flex-shrink-0","aria-label":"Remove item",children:d.jsx(fs,{})})]},c.id))}),d.jsx("button",{onClick:()=>o(l.id),className:"w-full mt-2 text-center px-4 py-1 border border-dashed border-gray-300 text-xs font-medium rounded-md text-gray-600 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:"+ Add Item"})]},l.id)),d.jsx("button",{onClick:r,className:"w-full mt-2 text-center px-4 py-2 border border-dashed border-gray-400 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:"+ Add Custom Section"})]})}),L6=Jt.memo(()=>{const{profile:n,setProfile:e}=k.useContext(Ke),t=s=>{const{name:r,value:i}=s.target;e(o=>({...o,[r]:i}))};return d.jsx("textarea",{name:"additionalInformation",value:n.additionalInformation,onChange:t,rows:3,className:`${Ee} ${Ae}`,placeholder:"Certified Financial Planner (CFP). Or: Proficient in QuickBooks and Salesforce."})}),D6=()=>{const n=k.useContext(Ke);if(!n||!n.profile)return d.jsx("div",{children:"Loading profile editor..."});const{profile:e,setProfile:t,saveProfile:s,lastSavedProfile:r,isParsing:i,parsingError:o,parseResumeInBackground:a,clearParsingError:l}=n,[c,h]=k.useState(()=>new Set(["personal"])),[f,p]=k.useState(!1),m=k.useRef(null),y=e&&r?JSON.stringify(e)!==JSON.stringify(r):!1,w=()=>{s()&&(p(!0),setTimeout(()=>p(!1),3e3))},b=v=>{h(x=>{const S=new Set(x);return S.has(v)?S.delete(v):S.add(v),S})},g=v=>{var S;const x=(S=v.target.files)==null?void 0:S[0];x&&(v.target.value="",a(x))};return d.jsxs(d.Fragment,{children:[d.jsxs(Pt,{children:[d.jsxs("div",{className:"border-b border-gray-200 pb-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-4",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold text-neutral",children:"Your Professional Profile"}),d.jsx("p",{className:"mt-1 text-gray-500",children:"This is the core information the AI will use to build your applications."})]}),d.jsxs("div",{className:"text-right flex-shrink-0",children:[d.jsx("input",{type:"file",ref:m,onChange:g,className:"hidden",accept:".pdf,.txt,.md",disabled:i}),d.jsx(Nt,{onClick:()=>{var v;return(v=m.current)==null?void 0:v.click()},isLoading:i,variant:"secondary",leftIcon:d.jsx(CA,{}),children:i?"Parsing...":"Import from Resume"}),d.jsx("p",{className:"mt-2 text-xs text-gray-500",children:".pdf, .txt, or .md accepted"})]})]}),o&&d.jsxs("div",{className:"mt-4 bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md relative flex justify-between items-center shadow-md",role:"alert",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-bold",children:"File Upload Error"}),d.jsx("p",{children:o})]}),d.jsx("button",{onClick:l,className:"p-1 rounded-full hover:bg-red-200 transition-colors","aria-label":"Close file error",children:d.jsx(fs,{className:"h-6 w-6"})})]})]}),d.jsx("div",{className:"mt-6",children:d.jsxs("div",{className:"space-y-2",children:[d.jsx(vs,{sectionId:"personal",title:"Personal Info",isOpen:c.has("personal"),setIsOpen:()=>b("personal"),children:d.jsx(k6,{})}),d.jsx(vs,{sectionId:"summary",title:"Professional Summary",isOpen:c.has("summary"),setIsOpen:()=>b("summary"),children:d.jsx(N6,{})}),d.jsx(vs,{sectionId:"experience",title:"Work Experience",isOpen:c.has("experience"),setIsOpen:()=>b("experience"),children:d.jsx(R6,{})}),d.jsx(vs,{sectionId:"education",title:"Education",isOpen:c.has("education"),setIsOpen:()=>b("education"),children:d.jsx(P6,{})}),d.jsx(vs,{sectionId:"projects",title:"Projects",isOpen:c.has("projects"),setIsOpen:()=>b("projects"),children:d.jsx(I6,{})}),d.jsx(vs,{sectionId:"technicalSkills",title:"Technical Skills",isOpen:c.has("technicalSkills"),setIsOpen:()=>b("technicalSkills"),children:d.jsx(jf,{section:"technicalSkills",title:"Technical Skill",placeholder:"Python, SQL, Financial Modeling"})}),d.jsx(vs,{sectionId:"softSkills",title:"Soft Skills",isOpen:c.has("softSkills"),setIsOpen:()=>b("softSkills"),children:d.jsx(jf,{section:"softSkills",title:"Soft Skill",placeholder:"Team Collaboration"})}),d.jsx(vs,{sectionId:"tools",title:"Tools & Technologies",isOpen:c.has("tools"),setIsOpen:()=>b("tools"),children:d.jsx(jf,{section:"tools",title:"Tool/Technology",placeholder:"Git, Bloomberg Terminal, Salesforce"})}),d.jsx(vs,{sectionId:"languages",title:"Languages",isOpen:c.has("languages"),setIsOpen:()=>b("languages"),children:d.jsx(j6,{})}),d.jsx(vs,{sectionId:"certifications",title:"Certifications",isOpen:c.has("certifications"),setIsOpen:()=>b("certifications"),children:d.jsx(jf,{section:"certifications",title:"Certification",placeholder:"CFA Level II, AWS Certified"})}),d.jsx(vs,{sectionId:"interests",title:"Interests",isOpen:c.has("interests"),setIsOpen:()=>b("interests"),children:d.jsx(jf,{section:"interests",title:"Interest",placeholder:"Market Analysis, Volunteer Tutoring"})}),d.jsx(vs,{sectionId:"custom",title:"Custom Sections",isOpen:c.has("custom"),setIsOpen:()=>b("custom"),children:d.jsx(O6,{})}),d.jsx(vs,{sectionId:"additional",title:"Additional Information",isOpen:c.has("additional"),setIsOpen:()=>b("additional"),children:d.jsx(L6,{})})]})})]}),y&&d.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white/90 backdrop-blur-sm p-4 border-t border-gray-200 shadow-lg z-40 animate-slide-in-up",children:d.jsxs("div",{className:"mx-auto flex justify-end items-center px-4 sm:px-6 lg:px-8",children:[d.jsx("p",{className:"text-gray-600 mr-4 hidden sm:block",children:"You have unsaved changes."}),d.jsx(Nt,{variant:"primary",size:"lg",onClick:w,children:"Save Changes"})]})}),f&&d.jsx("div",{className:"fixed bottom-6 right-6 bg-green-500 text-white py-2 px-4 rounded-lg shadow-lg z-50 animate-fade-in",role:"status",children:"Profile Saved!"})]})},M6=()=>{const n=k.useContext(Ke);if(!n)return null;const{profile:e,setProfile:t}=n,s=r=>{const{name:i,value:o}=r.target;t(a=>({...a,[i]:o}))};return d.jsxs(Pt,{children:[d.jsxs("div",{className:"border-b border-gray-200 pb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-neutral",children:"Target Role"}),d.jsx("p",{className:"mt-1 text-gray-500",children:"Define your career goals to help the AI tailor your documents."})]}),d.jsx("div",{className:"mt-6",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"targetJobTitle",className:"block text-sm font-medium text-gray-700",children:"Target Job Title"}),d.jsx("input",{type:"text",id:"targetJobTitle",name:"targetJobTitle",value:e.targetJobTitle,onChange:s,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-50 shadow-sm focus:border-primary focus:ring-1 focus:ring-primary sm:text-sm",placeholder:"Financial Analyst, Executive Assistant"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"companyName",className:"block text-sm font-medium text-gray-700",children:"Company Name"}),d.jsx("input",{type:"text",id:"companyName",name:"companyName",value:e.companyName,onChange:s,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-50 shadow-sm focus:border-primary focus:ring-1 focus:ring-primary sm:text-sm",placeholder:"e.g., Google, Goldman Sachs"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"experienceLevel",className:"block text-sm font-medium text-gray-700",children:"Seniority"}),d.jsxs("select",{id:"experienceLevel",name:"experienceLevel",value:e.experienceLevel,onChange:s,className:"mt-1 block w-full pl-3 pr-10 py-2.5 text-base border-gray-300 bg-gray-50 shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary sm:text-sm rounded-md",children:[d.jsx("option",{value:"internship",children:"Internship"}),d.jsx("option",{value:"entry",children:"Entry-Level"}),d.jsx("option",{value:"mid",children:"Mid-Level"}),d.jsx("option",{value:"senior",children:"Senior"}),d.jsx("option",{value:"executive",children:"Executive"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"industry",className:"block text-sm font-medium text-gray-700",children:"Industry"}),d.jsx("input",{type:"text",id:"industry",name:"industry",value:e.industry,onChange:s,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-50 shadow-sm focus:border-primary focus:ring-1 focus:ring-primary sm:text-sm",placeholder:"Technology, Finance, Healthcare"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"companyKeywords",className:"block text-sm font-medium text-gray-700",children:"Company Keywords"}),d.jsx("input",{type:"text",id:"companyKeywords",name:"companyKeywords",value:e.companyKeywords,onChange:s,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-50 shadow-sm focus:border-primary focus:ring-1 focus:ring-primary sm:text-sm",placeholder:"'Client-focused', 'Risk-averse'"}),d.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Keywords about the company, its products, or culture."})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"keySkillsToHighlight",className:"block text-sm font-medium text-gray-700",children:"Key Skills to Highlight"}),d.jsx("textarea",{id:"keySkillsToHighlight",name:"keySkillsToHighlight",rows:3,value:e.keySkillsToHighlight,onChange:s,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-50 shadow-sm focus:border-primary focus:ring-1 focus:ring-primary sm:text-sm",placeholder:"'Financial Modeling, Excel, SQL', 'Scheduling, Event Planning, MS Office'"}),d.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"List the most important skills for this role."})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"vibe",className:"block text-sm font-medium text-gray-700",children:"Writing Style & Focus"}),d.jsx("textarea",{id:"vibe",name:"vibe",rows:3,value:e.vibe,onChange:s,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-50 shadow-sm focus:border-primary focus:ring-1 focus:ring-primary sm:text-sm",placeholder:"'Analytical with a focus on accuracy', 'Personable, organized, and proactive.'"}),d.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Describe the tone and key specializations you want the AI to write with. This is your guide for the AI's voice."})]})]})})]})},F6=Jt.memo(M6),un=({children:n,className:e=""})=>d.jsx("div",{className:`mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-8 animate-fade-in ${e}`,children:n}),B6=()=>k.useContext(Ke)?d.jsx(un,{children:d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8 items-start",children:[d.jsx("aside",{className:"lg:col-span-1",children:d.jsx("div",{className:"sticky top-24 space-y-8",children:d.jsx(F6,{})})}),d.jsx("div",{className:"lg:col-span-3",children:d.jsx(D6,{})})]})}):d.jsx("div",{children:"Loading..."});var M_=function(n,e){return M_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])},M_(n,e)};function cO(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");M_(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Vv=function(){return Vv=Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++){t=arguments[s];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Vv.apply(this,arguments)};function yf(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t}function uO(n,e,t,s){var r=arguments.length,i=r<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,s);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(i=(r<3?o(i):r>3?o(e,t,i):o(e,t))||i);return r>3&&i&&Object.defineProperty(e,t,i),i}function hO(n,e){return function(t,s){e(t,s,n)}}function dO(n,e,t,s,r,i){function o(g){if(g!==void 0&&typeof g!="function")throw new TypeError("Function expected");return g}for(var a=s.kind,l=a==="getter"?"get":a==="setter"?"set":"value",c=!e&&n?s.static?n:n.prototype:null,h=e||(c?Object.getOwnPropertyDescriptor(c,s.name):{}),f,p=!1,m=t.length-1;m>=0;m--){var y={};for(var w in s)y[w]=w==="access"?{}:s[w];for(var w in s.access)y.access[w]=s.access[w];y.addInitializer=function(g){if(p)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(g||null))};var b=(0,t[m])(a==="accessor"?{get:h.get,set:h.set}:h[l],y);if(a==="accessor"){if(b===void 0)continue;if(b===null||typeof b!="object")throw new TypeError("Object expected");(f=o(b.get))&&(h.get=f),(f=o(b.set))&&(h.set=f),(f=o(b.init))&&r.unshift(f)}else(f=o(b))&&(a==="field"?r.unshift(f):h[l]=f)}c&&Object.defineProperty(c,s.name,h),p=!0}function fO(n,e,t){for(var s=arguments.length>2,r=0;r<e.length;r++)t=s?e[r].call(n,t):e[r].call(n);return s?t:void 0}function pO(n){return typeof n=="symbol"?n:"".concat(n)}function mO(n,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function gO(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function oe(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(h){try{c(s.next(h))}catch(f){o(f)}}function l(h){try{c(s.throw(h))}catch(f){o(f)}}function c(h){h.done?i(h.value):r(h.value).then(a,l)}c((s=s.apply(n,e||[])).next())})}function yO(n,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},s,r,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(h){return l([c,h])}}function l(c){if(s)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(t=0)),t;)try{if(s=1,r&&(i=c[0]&2?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,r=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){t.label=c[1];break}if(c[0]===6&&t.label<i[1]){t.label=i[1],i=c;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(c);break}i[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(h){c=[6,h],r=0}finally{s=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var nx=Object.create?function(n,e,t,s){s===void 0&&(s=t);var r=Object.getOwnPropertyDescriptor(e,t);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,s,r)}:function(n,e,t,s){s===void 0&&(s=t),n[s]=e[t]};function vO(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&nx(e,n,t)}function Hv(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function p1(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var s=t.call(n),r,i=[],o;try{for(;(e===void 0||e-- >0)&&!(r=s.next()).done;)i.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(t=s.return)&&t.call(s)}finally{if(o)throw o.error}}return i}function wO(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(p1(arguments[e]));return n}function xO(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var s=Array(n),r=0,e=0;e<t;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,r++)s[r]=i[o];return s}function bO(n,e,t){if(t||arguments.length===2)for(var s=0,r=e.length,i;s<r;s++)(i||!(s in e))&&(i||(i=Array.prototype.slice.call(e,0,s)),i[s]=e[s]);return n.concat(i||Array.prototype.slice.call(e))}function cf(n){return this instanceof cf?(this.v=n,this):new cf(n)}function _O(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),r,i=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),r[Symbol.asyncIterator]=function(){return this},r;function o(m){return function(y){return Promise.resolve(y).then(m,f)}}function a(m,y){s[m]&&(r[m]=function(w){return new Promise(function(b,g){i.push([m,w,b,g])>1||l(m,w)})},y&&(r[m]=y(r[m])))}function l(m,y){try{c(s[m](y))}catch(w){p(i[0][3],w)}}function c(m){m.value instanceof cf?Promise.resolve(m.value.v).then(h,f):p(i[0][2],m)}function h(m){l("next",m)}function f(m){l("throw",m)}function p(m,y){m(y),i.shift(),i.length&&l(i[0][0],i[0][1])}}function SO(n){var e,t;return e={},s("next"),s("throw",function(r){throw r}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(r,i){e[r]=n[r]?function(o){return(t=!t)?{value:cf(n[r](o)),done:!1}:i?i(o):o}:i}}function EO(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Hv=="function"?Hv(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(i){t[i]=n[i]&&function(o){return new Promise(function(a,l){o=n[i](o),r(a,l,o.done,o.value)})}}function r(i,o,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},o)}}function AO(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}var U6=Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e},F_=function(n){return F_=Object.getOwnPropertyNames||function(e){var t=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[t.length]=s);return t},F_(n)};function TO(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t=F_(n),s=0;s<t.length;s++)t[s]!=="default"&&nx(e,n,t[s]);return U6(e,n),e}function CO(n){return n&&n.__esModule?n:{default:n}}function kO(n,e,t,s){if(t==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?s:t==="a"?s.call(n):s?s.value:e.get(n)}function NO(n,e,t,s,r){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t}function PO(n,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?e===n:n.has(e)}function RO(n,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var s,r;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=e[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=e[Symbol.dispose],t&&(r=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");r&&(s=function(){try{r.call(this)}catch(i){return Promise.reject(i)}}),n.stack.push({value:e,dispose:s,async:t})}else t&&n.stack.push({async:!0});return e}var $6=typeof SuppressedError=="function"?SuppressedError:function(n,e,t){var s=new Error(t);return s.name="SuppressedError",s.error=n,s.suppressed=e,s};function IO(n){function e(i){n.error=n.hasError?new $6(i,n.error,"An error was suppressed during disposal."):i,n.hasError=!0}var t,s=0;function r(){for(;t=n.stack.pop();)try{if(!t.async&&s===1)return s=0,n.stack.push(t),Promise.resolve().then(r);if(t.dispose){var i=t.dispose.call(t.value);if(t.async)return s|=2,Promise.resolve(i).then(r,function(o){return e(o),r()})}else s|=1}catch(o){e(o)}if(s===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return r()}function jO(n,e){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,s,r,i,o){return s?e?".jsx":".js":r&&(!i||!o)?t:r+i+"."+o.toLowerCase()+"js"}):n}const V6={__extends:cO,__assign:Vv,__rest:yf,__decorate:uO,__param:hO,__esDecorate:dO,__runInitializers:fO,__propKey:pO,__setFunctionName:mO,__metadata:gO,__awaiter:oe,__generator:yO,__createBinding:nx,__exportStar:vO,__values:Hv,__read:p1,__spread:wO,__spreadArrays:xO,__spreadArray:bO,__await:cf,__asyncGenerator:_O,__asyncDelegator:SO,__asyncValues:EO,__makeTemplateObject:AO,__importStar:TO,__importDefault:CO,__classPrivateFieldGet:kO,__classPrivateFieldSet:NO,__classPrivateFieldIn:PO,__addDisposableResource:RO,__disposeResources:IO,__rewriteRelativeImportExtension:jO},H6=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:RO,get __assign(){return Vv},__asyncDelegator:SO,__asyncGenerator:_O,__asyncValues:EO,__await:cf,__awaiter:oe,__classPrivateFieldGet:kO,__classPrivateFieldIn:PO,__classPrivateFieldSet:NO,__createBinding:nx,__decorate:uO,__disposeResources:IO,__esDecorate:dO,__exportStar:vO,__extends:cO,__generator:yO,__importDefault:CO,__importStar:TO,__makeTemplateObject:AO,__metadata:gO,__param:hO,__propKey:pO,__read:p1,__rest:yf,__rewriteRelativeImportExtension:jO,__runInitializers:fO,__setFunctionName:mO,__spread:wO,__spreadArray:bO,__spreadArrays:xO,__values:Hv,default:V6},Symbol.toStringTag,{value:"Module"})),z6=n=>n?(...e)=>n(...e):(...e)=>fetch(...e);class m1 extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class G6 extends m1{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Nk extends m1{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Pk extends m1{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var B_;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(B_||(B_={}));class W6{constructor(e,{headers:t={},customFetch:s,region:r=B_.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=z6(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return oe(this,arguments,void 0,function*(t,s={}){var r;let i,o;try{const{headers:a,method:l,body:c,signal:h,timeout:f}=s;let p={},{region:m}=s;m||(m=this.region);const y=new URL(`${this.url}/${t}`);m&&m!=="any"&&(p["x-region"]=m,y.searchParams.set("forceFunctionRegion",m));let w;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",w=c):typeof c=="string"?(p["Content-Type"]="text/plain",w=c):typeof FormData<"u"&&c instanceof FormData?w=c:(p["Content-Type"]="application/json",w=JSON.stringify(c)):w=c;let b=h;f&&(o=new AbortController,i=setTimeout(()=>o.abort(),f),h?(b=o.signal,h.addEventListener("abort",()=>o.abort())):b=o.signal);const g=yield this.fetch(y.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),a),body:w,signal:b}).catch(A=>{throw new G6(A)}),v=g.headers.get("x-relay-error");if(v&&v==="true")throw new Nk(g);if(!g.ok)throw new Pk(g);let x=((r=g.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),S;return x==="application/json"?S=yield g.json():x==="application/octet-stream"||x==="application/pdf"?S=yield g.blob():x==="text/event-stream"?S=g:x==="multipart/form-data"?S=yield g.formData():S=yield g.text(),{data:S,error:null,response:g}}catch(a){return{data:null,error:a,response:a instanceof Pk||a instanceof Nk?a.context:void 0}}finally{i&&clearTimeout(i)}})}}var Kn={};const vf=QM(H6);var Uy={},$y={},Vy={},Hy={},zy={},Gy={},Rk;function OO(){if(Rk)return Gy;Rk=1,Object.defineProperty(Gy,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Gy.default=n,Gy}var Ik;function LO(){if(Ik)return zy;Ik=1,Object.defineProperty(zy,"__esModule",{value:!0});const e=vf.__importDefault(OO());class t{constructor(r){var i,o;this.shouldThrowOnError=!1,this.method=r.method,this.url=r.url,this.headers=new Headers(r.headers),this.schema=r.schema,this.body=r.body,this.shouldThrowOnError=(i=r.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=r.signal,this.isMaybeSingle=(o=r.isMaybeSingle)!==null&&o!==void 0?o:!1,r.fetch?this.fetch=r.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(r,i){return this.headers=new Headers(this.headers),this.headers.set(r,i),this}then(r,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let a=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var c,h,f,p;let m=null,y=null,w=null,b=l.status,g=l.statusText;if(l.ok){if(this.method!=="HEAD"){const A=await l.text();A===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((c=this.headers.get("Accept"))===null||c===void 0)&&c.includes("application/vnd.pgrst.plan+text"))?y=A:y=JSON.parse(A))}const x=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),S=(f=l.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");x&&S&&S.length>1&&(w=parseInt(S[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(y)&&(y.length>1?(m={code:"PGRST116",details:`Results contain ${y.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},y=null,w=null,b=406,g="Not Acceptable"):y.length===1?y=y[0]:y=null)}else{const x=await l.text();try{m=JSON.parse(x),Array.isArray(m)&&l.status===404&&(y=[],m=null,b=200,g="OK")}catch{l.status===404&&x===""?(b=204,g="No Content"):m={message:x}}if(m&&this.isMaybeSingle&&(!((p=m==null?void 0:m.details)===null||p===void 0)&&p.includes("0 rows"))&&(m=null,b=200,g="OK"),m&&this.shouldThrowOnError)throw new e.default(m)}return{error:m,data:y,count:w,status:b,statusText:g}});return this.shouldThrowOnError||(a=a.catch(l=>{var c,h,f,p,m,y;let w="";const b=l==null?void 0:l.cause;if(b){const g=(c=b==null?void 0:b.message)!==null&&c!==void 0?c:"",v=(h=b==null?void 0:b.code)!==null&&h!==void 0?h:"";w=`${(f=l==null?void 0:l.name)!==null&&f!==void 0?f:"FetchError"}: ${l==null?void 0:l.message}`,w+=`

Caused by: ${(p=b==null?void 0:b.name)!==null&&p!==void 0?p:"Error"}: ${g}`,v&&(w+=` (${v})`),b!=null&&b.stack&&(w+=`
${b.stack}`)}else w=(m=l==null?void 0:l.stack)!==null&&m!==void 0?m:"";return{error:{message:`${(y=l==null?void 0:l.name)!==null&&y!==void 0?y:"FetchError"}: ${l==null?void 0:l.message}`,details:w,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(r,i)}returns(){return this}overrideTypes(){return this}}return zy.default=t,zy}var jk;function DO(){if(jk)return Hy;jk=1,Object.defineProperty(Hy,"__esModule",{value:!0});const e=vf.__importDefault(LO());class t extends e.default{select(r){let i=!1;const o=(r??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(r,{ascending:i=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.order`:"order",h=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${h?`${h},`:""}${r}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:i,referencedTable:o=i}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${r}`),this}range(r,i,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${r}`),this.url.searchParams.set(c,`${i-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:r=!1,verbose:i=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:c="text"}={}){var h;const f=[r?"analyze":null,i?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),p=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${p}"; options=${f};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(r){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${r}`),this}}return Hy.default=t,Hy}var Ok;function g1(){if(Ok)return Vy;Ok=1,Object.defineProperty(Vy,"__esModule",{value:!0});const e=vf.__importDefault(DO()),t=new RegExp("[,()]");class s extends e.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}regexMatch(i,o){return this.url.searchParams.append(i,`match.${o}`),this}regexIMatch(i,o){return this.url.searchParams.append(i,`imatch.${o}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}isDistinct(i,o){return this.url.searchParams.append(i,`isdistinct.${o}`),this}in(i,o){const a=Array.from(new Set(o)).map(l=>typeof l=="string"&&t.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(i,`in.(${a})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:a,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const h=a===void 0?"":`(${a})`;return this.url.searchParams.append(i,`${c}fts${h}.${o}`),this}match(i){return Object.entries(i).forEach(([o,a])=>{this.url.searchParams.append(o,`eq.${a}`)}),this}not(i,o,a){return this.url.searchParams.append(i,`not.${o}.${a}`),this}or(i,{foreignTable:o,referencedTable:a=o}={}){const l=a?`${a}.or`:"or";return this.url.searchParams.append(l,`(${i})`),this}filter(i,o,a){return this.url.searchParams.append(i,`${o}.${a}`),this}}return Vy.default=s,Vy}var Lk;function MO(){if(Lk)return $y;Lk=1,Object.defineProperty($y,"__esModule",{value:!0});const e=vf.__importDefault(g1());class t{constructor(r,{headers:i={},schema:o,fetch:a}){this.url=r,this.headers=new Headers(i),this.schema=o,this.fetch=a}select(r,i){const{head:o=!1,count:a}=i??{},l=o?"HEAD":"GET";let c=!1;const h=(r??"*").split("").map(f=>/\s/.test(f)&&!c?"":(f==='"'&&(c=!c),f)).join("");return this.url.searchParams.set("select",h),a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(r,{count:i,defaultToNull:o=!0}={}){var a;const l="POST";if(i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const c=r.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(c.length>0){const h=[...new Set(c)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(r,{onConflict:i,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){var c;const h="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const f=r.reduce((p,m)=>p.concat(Object.keys(m)),[]);if(f.length>0){const p=[...new Set(f)].map(m=>`"${m}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(r,{count:i}={}){var o;const a="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:r}={}){var i;const o="DELETE";return r&&this.headers.append("Prefer",`count=${r}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return $y.default=t,$y}var Dk;function Y6(){if(Dk)return Uy;Dk=1,Object.defineProperty(Uy,"__esModule",{value:!0});const n=vf,e=n.__importDefault(MO()),t=n.__importDefault(g1());class s{constructor(i,{headers:o={},schema:a,fetch:l}={}){this.url=i,this.headers=new Headers(o),this.schemaName=a,this.fetch=l}from(i){if(!i||typeof i!="string"||i.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const o=new URL(`${this.url}/${i}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new s(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:a=!1,get:l=!1,count:c}={}){var h;let f;const p=new URL(`${this.url}/rpc/${i}`);let m;a||l?(f=a?"HEAD":"GET",Object.entries(o).filter(([w,b])=>b!==void 0).map(([w,b])=>[w,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([w,b])=>{p.searchParams.append(w,b)})):(f="POST",m=o);const y=new Headers(this.headers);return c&&y.set("Prefer",`count=${c}`),new t.default({method:f,url:p,headers:y,schema:this.schemaName,body:m,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}}return Uy.default=s,Uy}Object.defineProperty(Kn,"__esModule",{value:!0});var FO=Kn.PostgrestError=KO=Kn.PostgrestBuilder=WO=Kn.PostgrestTransformBuilder=zO=Kn.PostgrestFilterBuilder=VO=Kn.PostgrestQueryBuilder=UO=Kn.PostgrestClient=void 0;const wf=vf,BO=wf.__importDefault(Y6());var UO=Kn.PostgrestClient=BO.default;const $O=wf.__importDefault(MO());var VO=Kn.PostgrestQueryBuilder=$O.default;const HO=wf.__importDefault(g1());var zO=Kn.PostgrestFilterBuilder=HO.default;const GO=wf.__importDefault(DO());var WO=Kn.PostgrestTransformBuilder=GO.default;const YO=wf.__importDefault(LO());var KO=Kn.PostgrestBuilder=YO.default;const qO=wf.__importDefault(OO());FO=Kn.PostgrestError=qO.default;var XO=Kn.default={PostgrestClient:BO.default,PostgrestQueryBuilder:$O.default,PostgrestFilterBuilder:HO.default,PostgrestTransformBuilder:GO.default,PostgrestBuilder:YO.default,PostgrestError:qO.default};const K6=HP({__proto__:null,get PostgrestBuilder(){return KO},get PostgrestClient(){return UO},get PostgrestError(){return FO},get PostgrestFilterBuilder(){return zO},get PostgrestQueryBuilder(){return VO},get PostgrestTransformBuilder(){return WO},default:XO},[Kn]),{PostgrestClient:q6,PostgrestQueryBuilder:m9,PostgrestFilterBuilder:g9,PostgrestTransformBuilder:y9,PostgrestBuilder:v9,PostgrestError:w9}=XO||K6;class X6{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const s=t.node,r=parseInt(s.replace(/^v/,"").split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const s=this.getWebSocketConstructor();return new s(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const J6="2.84.0",Q6=`realtime-js/${J6}`,JO="1.0.0",Z6="2.0.0",Mk=JO,U_=1e4,ez=1e3,tz=100;var $l;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})($l||($l={}));var Vt;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Vt||(Vt={}));var Kr;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Kr||(Kr={}));var $_;(function(n){n.websocket="websocket"})($_||($_={}));var Vl;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Vl||(Vl={}));class nz{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast"}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,s,r,i;const o=e.topic,a=(t=e.ref)!==null&&t!==void 0?t:"",l=(s=e.join_ref)!==null&&s!==void 0?s:"",c=e.payload.event,h=(i=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&i!==void 0?i:new ArrayBuffer(0),f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+c.length,p=new ArrayBuffer(this.HEADER_LENGTH+f);let m=new DataView(p),y=0;m.setUint8(y++,this.KINDS.userBroadcastPush),m.setUint8(y++,l.length),m.setUint8(y++,a.length),m.setUint8(y++,o.length),m.setUint8(y++,c.length),m.setUint8(y++,this.BINARY_ENCODING),Array.from(l,b=>m.setUint8(y++,b.charCodeAt(0))),Array.from(a,b=>m.setUint8(y++,b.charCodeAt(0))),Array.from(o,b=>m.setUint8(y++,b.charCodeAt(0))),Array.from(c,b=>m.setUint8(y++,b.charCodeAt(0)));var w=new Uint8Array(p.byteLength+h.byteLength);return w.set(new Uint8Array(p),0),w.set(new Uint8Array(h),p.byteLength),w.buffer}_encodeJsonUserBroadcastPush(e){var t,s,r,i;const o=e.topic,a=(t=e.ref)!==null&&t!==void 0?t:"",l=(s=e.join_ref)!==null&&s!==void 0?s:"",c=e.payload.event,h=(i=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&i!==void 0?i:{},p=new TextEncoder().encode(JSON.stringify(h)).buffer,m=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+c.length,y=new ArrayBuffer(this.HEADER_LENGTH+m);let w=new DataView(y),b=0;w.setUint8(b++,this.KINDS.userBroadcastPush),w.setUint8(b++,l.length),w.setUint8(b++,a.length),w.setUint8(b++,o.length),w.setUint8(b++,c.length),w.setUint8(b++,this.JSON_ENCODING),Array.from(l,v=>w.setUint8(b++,v.charCodeAt(0))),Array.from(a,v=>w.setUint8(b++,v.charCodeAt(0))),Array.from(o,v=>w.setUint8(b++,v.charCodeAt(0))),Array.from(c,v=>w.setUint8(b++,v.charCodeAt(0)));var g=new Uint8Array(y.byteLength+p.byteLength);return g.set(new Uint8Array(y),0),g.set(new Uint8Array(p),y.byteLength),g.buffer}decode(e,t){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return t(s)}if(typeof e=="string"){const s=JSON.parse(e),[r,i,o,a,l]=s;return t({join_ref:r,ref:i,topic:o,event:a,payload:l})}return t({})}_binaryDecode(e){const t=new DataView(e),s=t.getUint8(0),r=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,r)}}_decodeUserBroadcast(e,t,s){const r=t.getUint8(1),i=t.getUint8(2),o=t.getUint8(3),a=t.getUint8(4);let l=this.HEADER_LENGTH+4;const c=s.decode(e.slice(l,l+r));l=l+r;const h=s.decode(e.slice(l,l+i));l=l+i;const f=s.decode(e.slice(l,l+o));l=l+o;const p=e.slice(l,e.byteLength),m=a===this.JSON_ENCODING?JSON.parse(s.decode(p)):p,y={type:this.BROADCAST_EVENT,event:h,payload:m};return o>0&&(y.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:y}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}}class QO{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Xe;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Xe||(Xe={}));const Fk=(n,e,t={})=>{var s;const r=(s=t.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=sz(o,n,e,r),i),{}):{}},sz=(n,e,t,s)=>{const r=e.find(a=>a.name===n),i=r==null?void 0:r.type,o=t[n];return i&&!s.includes(i)?ZO(i,o):V_(o)},ZO=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return az(e,t)}switch(n){case Xe.bool:return rz(e);case Xe.float4:case Xe.float8:case Xe.int2:case Xe.int4:case Xe.int8:case Xe.numeric:case Xe.oid:return iz(e);case Xe.json:case Xe.jsonb:return oz(e);case Xe.timestamp:return lz(e);case Xe.abstime:case Xe.date:case Xe.daterange:case Xe.int4range:case Xe.int8range:case Xe.money:case Xe.reltime:case Xe.text:case Xe.time:case Xe.timestamptz:case Xe.timetz:case Xe.tsrange:case Xe.tstzrange:return V_(e);default:return V_(e)}},V_=n=>n,rz=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},iz=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},oz=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},az=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,s=n[t];if(n[0]==="{"&&s==="}"){let i;const o=n.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>ZO(e,a))}return n},lz=n=>typeof n=="string"?n.replace(" ","T"):n,eL=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class ib{constructor(e,t,s={},r=U_){this.channel=e,this.event=t,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Bk;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Bk||(Bk={}));class Pp{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},r=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Pp.syncState(this.state,r,i,o),this.pendingDiffs.forEach(l=>{this.state=Pp.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(s.diff,{},r=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Pp.syncDiff(this.state,r,i,o),a())}),this.onJoin((r,i,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:i,newPresences:o})}),this.onLeave((r,i,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,r){const i=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(i,(c,h)=>{o[c]||(l[c]=h)}),this.map(o,(c,h)=>{const f=i[c];if(f){const p=h.map(b=>b.presence_ref),m=f.map(b=>b.presence_ref),y=h.filter(b=>m.indexOf(b.presence_ref)<0),w=f.filter(b=>p.indexOf(b.presence_ref)<0);y.length>0&&(a[c]=y),w.length>0&&(l[c]=w)}else a[c]=h}),this.syncDiff(i,{joins:a,leaves:l},s,r)}static syncDiff(e,t,s,r){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(i,(a,l)=>{var c;const h=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),h.length>0){const f=e[a].map(m=>m.presence_ref),p=h.filter(m=>f.indexOf(m.presence_ref)<0);e[a].unshift(...p)}s(a,h,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const h=l.map(f=>f.presence_ref);c=c.filter(f=>h.indexOf(f.presence_ref)<0),e[a]=c,r(a,c,l),c.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const r=e[s];return"metas"in r?t[s]=r.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[s]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Uk;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Uk||(Uk={}));var Rp;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Rp||(Rp={}));var Xi;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Xi||(Xi={}));class y1{constructor(e,t={config:{}},s){var r,i;if(this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=Vt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new ib(this,Kr.join,this.params,this.timeout),this.rejoinTimer=new QO(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Vt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Vt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Kr.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Pp(this),this.broadcastEndpointURL=eL(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(r=this.params.config)===null||r===void 0?void 0:r.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var s,r,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Vt.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(r=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(m=>m.filter))!==null&&r!==void 0?r:[],h=!!this.bindings[Rp.PRESENCE]&&this.bindings[Rp.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},p={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:h}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(m=>e==null?void 0:e(Xi.CHANNEL_ERROR,m)),this._onClose(()=>e==null?void 0:e(Xi.CLOSED)),this.updateJoinPayload(Object.assign({config:p},f)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:m})=>{var y;if(this.socket.setAuth(),m===void 0){e==null||e(Xi.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,b=(y=w==null?void 0:w.length)!==null&&y!==void 0?y:0,g=[];for(let v=0;v<b;v++){const x=w[v],{filter:{event:S,schema:A,table:C,filter:N}}=x,P=m&&m[v];if(P&&P.event===S&&P.schema===A&&P.table===C&&P.filter===N)g.push(Object.assign(Object.assign({},x),{id:P.id}));else{this.unsubscribe(),this.state=Vt.errored,e==null||e(Xi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(Xi.SUBSCRIBED);return}}).receive("error",m=>{this.state=Vt.errored,e==null||e(Xi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Xi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===Vt.joined&&e===Rp.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}async httpSend(e,t,s={}){var r;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(t==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,t={}){var s,r;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((r=c.body)===null||r===void 0?void 0:r.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Vt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Kr.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(r=>{s=new ib(this,Kr.leave,{},e),s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Vt.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const r=new AbortController,i=setTimeout(()=>r.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(i),o}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new ib(this,e,t,s);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>tz){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var r,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:h}=Kr;if(s&&[a,l,c,h].indexOf(o)>=0&&s!==this._joinRef())return;let p=this._onMessage(o,t,s);if(t&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(m=>{var y,w,b;return((y=m.filter)===null||y===void 0?void 0:y.event)==="*"||((b=(w=m.filter)===null||w===void 0?void 0:w.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(m=>m.callback(p,s)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var y,w,b,g,v,x;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const S=m.id,A=(y=m.filter)===null||y===void 0?void 0:y.event;return S&&((w=t.ids)===null||w===void 0?void 0:w.includes(S))&&(A==="*"||(A==null?void 0:A.toLocaleLowerCase())===((b=t.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const S=(v=(g=m==null?void 0:m.filter)===null||g===void 0?void 0:g.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return S==="*"||S===((x=t==null?void 0:t.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof p=="object"&&"ids"in p){const y=p.data,{schema:w,table:b,commit_timestamp:g,type:v,errors:x}=y;p=Object.assign(Object.assign({},{schema:w,table:b,commit_timestamp:g,eventType:v,new:{},old:{},errors:x}),this._getPayloadRecords(y))}m.callback(p,s)})}_isClosed(){return this.state===Vt.closed}_isJoined(){return this.state===Vt.joined}_isJoining(){return this.state===Vt.joining}_isLeaving(){return this.state===Vt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:s};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(r=>{var i;return!(((i=r.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&y1.isEqual(r.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Kr.close,{},e)}_onError(e){this._on(Kr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Vt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Fk(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Fk(e.columns,e.old_record)),t}}const ob=()=>{},Wy={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},cz=[1e3,2e3,5e3,1e4],uz=1e4,hz=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class dz{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=U_,this.transport=null,this.heartbeatIntervalMs=Wy.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ob,this.ref=0,this.reconnectTimer=null,this.vsn=Mk,this.logger=ob,this.conn=null,this.sendBuffer=[],this.serializer=new nz,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=r=>r?(...i)=>r(...i):(...i)=>fetch(...i),!(!((s=t==null?void 0:t.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${$_.websocket}`,this.httpEndpoint=eL(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=X6.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case $l.connecting:return Vl.Connecting;case $l.open:return Vl.Open;case $l.closing:return Vl.Closing;default:return Vl.Closed}}isConnected(){return this.connectionState()===Vl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const s=`realtime:${e}`,r=this.getChannels().find(i=>i.topic===s);if(r)return r;{const i=new y1(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:s,payload:r,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${s} (${i})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(ez,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Wy.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:r,payload:i,ref:o}=t,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${s} ${r} ${a}`.trim(),i),this.channels.filter(c=>c._isMember(s)).forEach(c=>c._trigger(r,i,o)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===$l.open||this.conn.readyState===$l.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Kr.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return`${e}${s}${r}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([hz],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const r={access_token:t,version:Q6};t&&s.updateJoinPayload(r),s.joinedOnce&&s._isJoined()&&s._push(Kr.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(r){this.log("error",`error in ${e} callback`,r)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new QO(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Wy.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,r,i,o,a,l,c,h,f,p,m;switch(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:U_,this.heartbeatIntervalMs=(r=e==null?void 0:e.heartbeatIntervalMs)!==null&&r!==void 0?r:Wy.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:ob,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:Mk,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:y=>cz[y-1]||uz,this.vsn){case JO:this.encode=(h=e==null?void 0:e.encode)!==null&&h!==void 0?h:(y,w)=>w(JSON.stringify(y)),this.decode=(f=e==null?void 0:e.decode)!==null&&f!==void 0?f:(y,w)=>w(JSON.parse(y));break;case Z6:this.encode=(p=e==null?void 0:e.encode)!==null&&p!==void 0?p:this.serializer.encode.bind(this.serializer),this.decode=(m=e==null?void 0:e.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class v1 extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function pt(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class fz extends v1{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class H_ extends v1{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const w1=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),pz=()=>Response,z_=n=>{if(Array.isArray(n))return n.map(t=>z_(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,s])=>{const r=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[r]=z_(s)}),e},mz=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},ab=n=>{var e;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(e=n.error)===null||e===void 0?void 0:e.message)||JSON.stringify(n)},gz=(n,e,t)=>oe(void 0,void 0,void 0,function*(){const s=yield pz();n instanceof s&&!(t!=null&&t.noResolveJson)?n.json().then(r=>{const i=n.status||500,o=(r==null?void 0:r.statusCode)||i+"";e(new fz(ab(r),i,o))}).catch(r=>{e(new H_(ab(r),r))}):e(new H_(ab(n),n))}),yz=(n,e,t,s)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!s?r:(mz(s)?(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(s)):r.body=s,e!=null&&e.duplex&&(r.duplex=e.duplex),Object.assign(Object.assign({},r),t))};function cy(n,e,t,s,r,i){return oe(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,yz(e,s,r,i)).then(l=>{if(!l.ok)throw l;return s!=null&&s.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>gz(l,a,s))})})}function em(n,e,t,s){return oe(this,void 0,void 0,function*(){return cy(n,"GET",e,t,s)})}function Or(n,e,t,s,r){return oe(this,void 0,void 0,function*(){return cy(n,"POST",e,s,r,t)})}function G_(n,e,t,s,r){return oe(this,void 0,void 0,function*(){return cy(n,"PUT",e,s,r,t)})}function vz(n,e,t,s){return oe(this,void 0,void 0,function*(){return cy(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function x1(n,e,t,s,r){return oe(this,void 0,void 0,function*(){return cy(n,"DELETE",e,s,r,t)})}class wz{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return oe(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(pt(e))return{data:null,error:e};throw e}})}}var tL;class xz{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[tL]="BlobDownloadBuilder",this.promise=null}asStream(){return new wz(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return oe(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(pt(e))return{data:null,error:e};throw e}})}}tL=Symbol.toStringTag;const bz={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},$k={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class _z{constructor(e,t={},s,r){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=s,this.fetch=w1(r)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,s,r){return oe(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},$k),r);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),l&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(l))):(i=s,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),r!=null&&r.headers&&(a=Object.assign(Object.assign({},a),r.headers));const c=this._removeEmptyFolders(t),h=this._getFinalPath(c),f=yield(e=="PUT"?G_:Or)(this.fetch,`${this.url}/object/${h}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(pt(i))return{data:null,error:i};throw i}})}upload(e,t,s){return oe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,r){return oe(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const c=Object.assign({upsert:$k.upsert},r),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.append("cacheControl",c.cacheControl)):(l=s,h["cache-control"]=`max-age=${c.cacheControl}`,h["content-type"]=c.contentType);const f=yield G_(this.fetch,a.toString(),l,{headers:h});return{data:{path:i,fullPath:f.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(pt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return oe(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const r=Object.assign({},this.headers);t!=null&&t.upsert&&(r["x-upsert"]="true");const i=yield Or(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:r}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new v1("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pt(s))return{data:null,error:s};throw s}})}update(e,t,s){return oe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return oe(this,void 0,void 0,function*(){try{return{data:yield Or(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pt(r))return{data:null,error:r};throw r}})}copy(e,t,s){return oe(this,void 0,void 0,function*(){try{return{data:{path:(yield Or(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pt(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,s){return oe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield Or(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pt(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,s){return oe(this,void 0,void 0,function*(){try{const r=yield Or(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pt(r))return{data:null,error:r};throw r}})}download(e,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"",a=this._getFinalPath(e),l=()=>em(this.fetch,`${this.url}/${r}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new xz(l,this.shouldThrowOnError)}info(e){return oe(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield em(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:z_(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pt(s))return{data:null,error:s};throw s}})}exists(e){return oe(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield vz(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pt(s)&&s instanceof H_){const r=s.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),r=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&r.push(i);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&r.push(l);let c=r.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${s}${c}`)}}}remove(e){return oe(this,void 0,void 0,function*(){try{return{data:yield x1(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pt(t))return{data:null,error:t};throw t}})}list(e,t,s){return oe(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},bz),t),{prefix:e||""});return{data:yield Or(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pt(r))return{data:null,error:r};throw r}})}listV2(e,t){return oe(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield Or(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},t),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const nL="2.84.0",sL={"X-Client-Info":`storage-js/${nL}`};class Sz{constructor(e,t={},s,r){this.shouldThrowOnError=!1;const i=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},sL),t),this.fetch=w1(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return oe(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield em(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pt(t))return{data:null,error:t};throw t}})}getBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:yield em(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pt(t))return{data:null,error:t};throw t}})}createBucket(e){return oe(this,arguments,void 0,function*(t,s={public:!1}){try{return{data:yield Or(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pt(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return oe(this,void 0,void 0,function*(){try{return{data:yield G_(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pt(s))return{data:null,error:s};throw s}})}emptyBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:yield Or(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:yield x1(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pt(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}class Ez{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},sL),t),this.fetch=w1(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:yield Or(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pt(t))return{data:null,error:t};throw t}})}listBuckets(e){return oe(this,void 0,void 0,function*(){try{const t=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&t.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&t.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&t.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&t.set("sortOrder",e.sortOrder),e!=null&&e.search&&t.set("search",e.search);const s=t.toString(),r=s?`${this.url}/bucket?${s}`:`${this.url}/bucket`;return{data:yield em(this.fetch,r,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:yield x1(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pt(t))return{data:null,error:t};throw t}})}}const b1={"X-Client-Info":`storage-js/${nL}`,"Content-Type":"application/json"};class rL extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function zs(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}class lb extends rL{constructor(e,t,s){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Az extends rL{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var Vk;(function(n){n.InternalError="InternalError",n.S3VectorConflictException="S3VectorConflictException",n.S3VectorNotFoundException="S3VectorNotFoundException",n.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",n.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",n.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Vk||(Vk={}));const _1=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),Tz=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},Hk=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Cz=(n,e,t)=>oe(void 0,void 0,void 0,function*(){if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!(t!=null&&t.noResolveJson)){const r=n.status||500,i=n;if(typeof i.json=="function")i.json().then(o=>{const a=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||r+"";e(new lb(Hk(o),r,a))}).catch(()=>{const o=r+"",a=i.statusText||`HTTP ${r} error`;e(new lb(a,r,o))});else{const o=r+"",a=i.statusText||`HTTP ${r} error`;e(new lb(a,r,o))}}else e(new Az(Hk(n),n))}),kz=(n,e,t,s)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return s?(Tz(s)?(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(s)):r.body=s,Object.assign(Object.assign({},r),t)):r};function Nz(n,e,t,s,r,i){return oe(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,kz(e,s,r,i)).then(l=>{if(!l.ok)throw l;if(s!=null&&s.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>Cz(l,a,s))})})}function Gs(n,e,t,s,r){return oe(this,void 0,void 0,function*(){return Nz(n,"POST",e,s,r,t)})}class Pz{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},b1),t),this.fetch=_1(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return oe(this,void 0,void 0,function*(){try{return{data:(yield Gs(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(zs(t))return{data:null,error:t};throw t}})}getIndex(e,t){return oe(this,void 0,void 0,function*(){try{return{data:yield Gs(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(zs(s))return{data:null,error:s};throw s}})}listIndexes(e){return oe(this,void 0,void 0,function*(){try{return{data:yield Gs(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(zs(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return oe(this,void 0,void 0,function*(){try{return{data:(yield Gs(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(zs(s))return{data:null,error:s};throw s}})}}class Rz{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},b1),t),this.fetch=_1(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return oe(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Gs(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(zs(t))return{data:null,error:t};throw t}})}getVectors(e){return oe(this,void 0,void 0,function*(){try{return{data:yield Gs(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(zs(t))return{data:null,error:t};throw t}})}listVectors(e){return oe(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Gs(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(zs(t))return{data:null,error:t};throw t}})}queryVectors(e){return oe(this,void 0,void 0,function*(){try{return{data:yield Gs(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(zs(t))return{data:null,error:t};throw t}})}deleteVectors(e){return oe(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Gs(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(zs(t))return{data:null,error:t};throw t}})}}class Iz{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},b1),t),this.fetch=_1(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:(yield Gs(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(zs(t))return{data:null,error:t};throw t}})}getBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:yield Gs(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(zs(t))return{data:null,error:t};throw t}})}listBuckets(){return oe(this,arguments,void 0,function*(e={}){try{return{data:yield Gs(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(zs(t))return{data:null,error:t};throw t}})}deleteBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:(yield Gs(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(zs(t))return{data:null,error:t};throw t}})}}class jz extends Iz{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new Oz(this.url,this.headers,e,this.fetch)}}class Oz extends Pz{constructor(e,t,s,r){super(e,t,r),this.vectorBucketName=s}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return oe(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return oe(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return oe(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return oe(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Lz(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class Lz extends Rz{constructor(e,t,s,r,i){super(e,t,i),this.vectorBucketName=s,this.indexName=r}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return oe(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return oe(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return oe(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return oe(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return oe(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Dz extends Sz{constructor(e,t={},s,r){super(e,t,s,r)}from(e){return new _z(this.url,this.headers,e,this.fetch)}get vectors(){return new jz(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Ez(this.url+"/iceberg",this.headers,this.fetch)}}const Mz="2.84.0";let Wf="";typeof Deno<"u"?Wf="deno":typeof document<"u"?Wf="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Wf="react-native":Wf="node";const Fz={"X-Client-Info":`supabase-js-${Wf}/${Mz}`},Bz={headers:Fz},Uz={schema:"public"},$z={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Vz={},Hz=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),zz=()=>Headers,Gz=(n,e,t)=>{const s=Hz(t),r=zz();return async(i,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:n;let c=new r(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",n),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),s(i,Object.assign(Object.assign({},o),{headers:c}))}};function Wz(n){return n.endsWith("/")?n:n+"/"}function Yz(n,e){var t,s;const{db:r,auth:i,realtime:o,global:a}=n,{db:l,auth:c,realtime:h,global:f}=e,p={db:Object.assign(Object.assign({},l),r),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},h),o),storage:{},global:Object.assign(Object.assign(Object.assign({},f),a),{headers:Object.assign(Object.assign({},(t=f==null?void 0:f.headers)!==null&&t!==void 0?t:{}),(s=a==null?void 0:a.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return n.accessToken?p.accessToken=n.accessToken:delete p.accessToken,p}function Kz(n){const e=n==null?void 0:n.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Wz(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const iL="2.84.0",Fu=30*1e3,W_=3,cb=W_*Fu,qz="http://localhost:9999",Xz="supabase.auth.token",Jz={"X-Client-Info":`gotrue-js/${iL}`},Y_="X-Supabase-Api-Version",oL={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Qz=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Zz=10*60*1e3;class tm extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function le(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class e8 extends tm{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function t8(n){return le(n)&&n.name==="AuthApiError"}class Hl extends tm{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Sl extends tm{constructor(e,t,s,r){super(e,s,r),this.name=t,this.status=s}}class xs extends Sl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function n8(n){return le(n)&&n.name==="AuthSessionMissingError"}class Iu extends Sl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Yy extends Sl{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ky extends Sl{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function s8(n){return le(n)&&n.name==="AuthImplicitGrantRedirectError"}class zk extends Sl{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class K_ extends Sl{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function ub(n){return le(n)&&n.name==="AuthRetryableFetchError"}class Gk extends Sl{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class q_ extends Sl{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const zv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Wk=` 	
\r=`.split(""),r8=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<Wk.length;e+=1)n[Wk[e].charCodeAt(0)]=-2;for(let e=0;e<zv.length;e+=1)n[zv[e].charCodeAt(0)]=e;return n})();function Yk(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(zv[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(zv[s]),e.queuedBits-=6}}function aL(n,e,t){const s=r8[n];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Kk(n){const e=[],t=o=>{e.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},i=o=>{a8(o,s,t)};for(let o=0;o<n.length;o+=1)aL(n.charCodeAt(o),r,i);return e.join("")}function i8(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function o8(n,e){for(let t=0;t<n.length;t+=1){let s=n.charCodeAt(t);if(s>55295&&s<=56319){const r=(s-55296)*1024&65535;s=(n.charCodeAt(t+1)-56320&65535|r)+65536,t+=1}i8(s,e)}}function a8(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let s=1;s<6;s+=1)if(!(n>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Sh(n){const e=[],t={queue:0,queuedBits:0},s=r=>{e.push(r)};for(let r=0;r<n.length;r+=1)aL(n.charCodeAt(r),t,s);return new Uint8Array(e)}function l8(n){const e=[];return o8(n,t=>e.push(t)),new Uint8Array(e)}function Jl(n){const e=[],t={queue:0,queuedBits:0},s=r=>{e.push(r)};return n.forEach(r=>Yk(r,t,s)),Yk(null,t,s),e.join("")}function c8(n){return Math.round(Date.now()/1e3)+n}function u8(){return Symbol("auth-callback")}const dn=()=>typeof window<"u"&&typeof document<"u",Pl={tested:!1,writable:!1},lL=()=>{if(!dn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Pl.tested)return Pl.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Pl.tested=!0,Pl.writable=!0}catch{Pl.tested=!0,Pl.writable=!1}return Pl.writable};function h8(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((r,i)=>{e[i]=r})}catch{}return t.searchParams.forEach((s,r)=>{e[r]=s}),e}const cL=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),d8=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Bu=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Rl=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Zo=async(n,e)=>{await n.removeItem(e)};class sx{constructor(){this.promise=new sx.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}sx.promiseConstructor=Promise;function hb(n){const e=n.split(".");if(e.length!==3)throw new q_("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!Qz.test(e[s]))throw new q_("JWT not in base64url format");return{header:JSON.parse(Kk(e[0])),payload:JSON.parse(Kk(e[1])),signature:Sh(e[2]),raw:{header:e[0],payload:e[1]}}}async function f8(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function p8(n,e){return new Promise((s,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await n(i);if(!e(i,null,o)){s(o);return}}catch(o){if(!e(i,o)){r(o);return}}})()})}function m8(n){return("0"+n.toString(16)).substr(-2)}function g8(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let r="";for(let i=0;i<56;i++)r+=t.charAt(Math.floor(Math.random()*s));return r}return crypto.getRandomValues(e),Array.from(e,m8).join("")}async function y8(n){const t=new TextEncoder().encode(n),s=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(s);return Array.from(r).map(i=>String.fromCharCode(i)).join("")}async function v8(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await y8(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ju(n,e,t=!1){const s=g8();let r=s;t&&(r+="/PASSWORD_RECOVERY"),await Bu(n,`${e}-code-verifier`,r);const i=await v8(s);return[i,s===i?"plain":"s256"]}const w8=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function x8(n){const e=n.headers.get(Y_);if(!e||!e.match(w8))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function b8(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function _8(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const S8=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ou(n){if(!S8.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function db(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const s=t.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function E8(n,e){return new Proxy(n,{get:(t,s,r)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const i=s.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,s,r)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,s,r)}})}function qk(n){return JSON.parse(JSON.stringify(n))}const Ml=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),A8=[502,503,504];async function Xk(n){var e;if(!d8(n))throw new K_(Ml(n),0);if(A8.includes(n.status))throw new K_(Ml(n),n.status);let t;try{t=await n.json()}catch(i){throw new Hl(Ml(i),i)}let s;const r=x8(n);if(r&&r.getTime()>=oL["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new Gk(Ml(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new xs}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Gk(Ml(t),n.status,t.weak_password.reasons);throw new e8(Ml(t),n.status||500,s)}const T8=(n,e,t,s)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),t))};async function ue(n,e,t,s){var r;const i=Object.assign({},s==null?void 0:s.headers);i[Y_]||(i[Y_]=oL["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(r=s==null?void 0:s.query)!==null&&r!==void 0?r:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await C8(n,e,t+a,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(l):{data:Object.assign({},l),error:null}}async function C8(n,e,t,s,r,i){const o=T8(e,s,r,i);let a;try{a=await n(t,Object.assign({},o))}catch(l){throw console.error(l),new K_(Ml(l),0)}if(a.ok||await Xk(a),s!=null&&s.noResolveJson)return a;try{return await a.json()}catch(l){await Xk(l)}}function Nr(n){var e;let t=null;P8(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=c8(n.expires_in)));const s=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:s},error:null}}function Jk(n){const e=Nr(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=n.weak_password),e}function la(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function k8(n){return{data:n,error:null}}function N8(n){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:r,verification_type:i}=n,o=yf(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:s,redirect_to:r,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Qk(n){return n}function P8(n){return n.access_token&&n.refresh_token&&n.expires_in}const fb=["global","local","others"];class R8{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=cL(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=fb[0]){if(fb.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${fb.join(", ")}`);try{return await ue(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(le(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await ue(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:la})}catch(s){if(le(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=yf(e,["options"]),r=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(r.new_email=s==null?void 0:s.newEmail,delete r.newEmail),await ue(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:N8,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(le(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await ue(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:la})}catch(t){if(le(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,r,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},h=await ue(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:Qk});if(h.error)throw h.error;const f=await h.json(),p=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=h.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(y=>{const w=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);c[`${b}Page`]=w}),c.total=parseInt(p)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(le(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Ou(e);try{return await ue(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:la})}catch(t){if(le(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Ou(e);try{return await ue(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:la})}catch(s){if(le(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){Ou(e);try{return await ue(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:la})}catch(s){if(le(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Ou(e.userId);try{const{data:t,error:s}=await ue(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:t,error:s}}catch(t){if(le(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Ou(e.userId),Ou(e.id);try{return{data:await ue(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(le(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,s,r,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},h=await ue(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:Qk});if(h.error)throw h.error;const f=await h.json(),p=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=h.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(y=>{const w=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);c[`${b}Page`]=w}),c.total=parseInt(p)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(le(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await ue(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(le(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await ue(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(le(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await ue(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(le(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await ue(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(le(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await ue(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(le(t))return{data:null,error:t};throw t}}}function Zk(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const Lu={debug:!!(globalThis&&lL()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class uL extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class I8 extends uL{}async function j8(n,e,t){Lu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Lu.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async r=>{if(r){Lu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,r.name);try{return await t()}finally{Lu.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,r.name)}}else{if(e===0)throw Lu.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new I8(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Lu.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function O8(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function hL(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function L8(n){return parseInt(n,16)}function D8(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function M8(n){var e;const{chainId:t,domain:s,expirationTime:r,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:h,uri:f,version:p}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const m=hL(n.address),y=h?`${h}://${s}`:s,w=n.statement?`${n.statement}
`:"",b=`${y} wants you to sign in with your Ethereum account:
${m}

${w}`;let g=`URI: ${f}
Version: ${p}
Chain ID: ${t}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(r&&(g+=`
Expiration Time: ${r.toISOString()}`),a&&(g+=`
Not Before: ${a.toISOString()}`),l&&(g+=`
Request ID: ${l}`),c){let v=`
Resources:`;for(const x of c){if(!x||typeof x!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${x}`);v+=`
- ${x}`}g+=v}return`${b}
${g}`}class Ft extends Error{constructor({message:e,code:t,cause:s,name:r}){var i;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(i=r??(s instanceof Error?s.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=t}}class Gv extends Ft{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function F8({error:n,options:e}){var t,s,r;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ft({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=i.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new Ft({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Ft({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Ft({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new Ft({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new Ft({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new Ft({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new Ft({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const o=window.location.hostname;if(dL(o)){if(i.rp.id!==o)return new Ft({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Ft({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Ft({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new Ft({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Ft({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function B8({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ft({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new Ft({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const s=window.location.hostname;if(dL(s)){if(t.rpId!==s)return new Ft({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Ft({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new Ft({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Ft({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class U8{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const $8=new U8;function V8(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:s}=n,r=yf(n,["challenge","user","excludeCredentials"]),i=Sh(e).buffer,o=Object.assign(Object.assign({},t),{id:Sh(t.id).buffer}),a=Object.assign(Object.assign({},r),{challenge:i,user:o});if(s&&s.length>0){a.excludeCredentials=new Array(s.length);for(let l=0;l<s.length;l++){const c=s[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Sh(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function H8(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,s=yf(n,["challenge","allowCredentials"]),r=Sh(e).buffer,i=Object.assign(Object.assign({},s),{challenge:r});if(t&&t.length>0){i.allowCredentials=new Array(t.length);for(let o=0;o<t.length;o++){const a=t[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:Sh(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function z8(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:Jl(new Uint8Array(n.response.attestationObject)),clientDataJSON:Jl(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function G8(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n,s=n.getClientExtensionResults(),r=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Jl(new Uint8Array(r.authenticatorData)),clientDataJSON:Jl(new Uint8Array(r.clientDataJSON)),signature:Jl(new Uint8Array(r.signature)),userHandle:r.userHandle?Jl(new Uint8Array(r.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function dL(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function eN(){var n,e;return!!(dn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function W8(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Gv("Browser returned unexpected credential type",e)}:{data:null,error:new Gv("Empty credential response",e)}}catch(e){return{data:null,error:F8({error:e,options:n})}}}async function Y8(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Gv("Browser returned unexpected credential type",e)}:{data:null,error:new Gv("Empty credential response",e)}}catch(e){return{data:null,error:B8({error:e,options:n})}}}const K8={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},q8={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Wv(...n){const e=r=>r!==null&&typeof r=="object"&&!Array.isArray(r),t=r=>r instanceof ArrayBuffer||ArrayBuffer.isView(r),s={};for(const r of n)if(r)for(const i in r){const o=r[i];if(o!==void 0)if(Array.isArray(o))s[i]=o;else if(t(o))s[i]=o;else if(e(o)){const a=s[i];e(a)?s[i]=Wv(a,o):s[i]=Wv(o)}else s[i]=o}return s}function X8(n,e){return Wv(K8,n,e||{})}function J8(n,e){return Wv(q8,n,e||{})}class Q8{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:s,signal:r},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!o)return{data:null,error:a};const l=r??$8.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${s}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=X8(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:h,error:f}=await W8({publicKey:c,signal:l});return h?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}case"request":{const c=J8(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:h,error:f}=await Y8(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:l}));return h?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}}}catch(o){return le(o)?{data:null,error:o}:{data:null,error:new Hl("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:t,webauthn:s}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},i){if(!t)return{data:null,error:new tm("rpId is required for WebAuthn authentication")};try{if(!eN())return{data:null,error:new Hl("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:s},signal:r},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:t,rpOrigins:s,credential_response:l.credential_response}})}catch(o){return le(o)?{data:null,error:o}:{data:null,error:new Hl("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},i){if(!t)return{data:null,error:new tm("rpId is required for WebAuthn registration")};try{if(!eN())return{data:null,error:new Hl("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(h=>{var f;return(f=h.data)===null||f===void 0?void 0:f.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===e&&p.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:t,rpOrigins:s},signal:r},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:t,rpOrigins:s,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return le(o)?{data:null,error:o}:{data:null,error:new Hl("Unexpected error in register",o)}}}}O8();const Z8={url:qz,storageKey:Xz,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Jz,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function tN(n,e,t){return await t()}const Du={};class nm{get jwks(){var e,t;return(t=(e=Du[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Du[this.storageKey]=Object.assign(Object.assign({},Du[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Du[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Du[this.storageKey]=Object.assign(Object.assign({},Du[this.storageKey]),{cachedAt:e})}constructor(e){var t,s,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},Z8),e);if(this.storageKey=i.storageKey,this.instanceID=(t=nm.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,nm.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&dn()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new R8({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=cL(i.fetch),this.lock=i.lock||tN,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:dn()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=j8:this.lock=tN,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Q8(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:lL()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Zk(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Zk(this.memoryStorage)),dn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${iL}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},s="none";if(dn()&&(t=h8(window.location.href),this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce")),dn()&&this.detectSessionInUrl&&s!=="none"){const{data:r,error:i}=await this._getSessionFromURL(t,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),s8(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return le(t)?this._returnResult({error:t}):this._returnResult({error:new Hl("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,r;try{const i=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:Nr}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(le(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var t,s,r;try{let i;if("email"in e){const{email:h,password:f,options:p}=e;let m=null,y=null;this.flowType==="pkce"&&([m,y]=await ju(this.storage,this.storageKey)),i=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:h,password:f,data:(t=p==null?void 0:p.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:y},xform:Nr})}else if("phone"in e){const{phone:h,password:f,options:p}=e;i=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:f,data:(s=p==null?void 0:p.data)!==null&&s!==void 0?s:{},channel:(r=p==null?void 0:p.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Nr})}else throw new Yy("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(le(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:o,options:a}=e;t=await ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Jk})}else if("phone"in e){const{phone:i,password:o,options:a}=e;t=await ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Jk})}else throw new Yy("You must provide either an email or phone number and a password");const{data:s,error:r}=t;if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!s||!s.session||!s.user){const i=new Iu;return this._returnResult({data:{user:null,session:null},error:i})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:r})}catch(t){if(le(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,s,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,s,r,i,o,a,l,c,h,f,p;let m,y;if("message"in e)m=e.message,y=e.signature;else{const{chain:w,wallet:b,statement:g,options:v}=e;let x;if(dn())if(typeof b=="object")x=b;else{const R=window;if("ethereum"in R&&typeof R.ethereum=="object"&&"request"in R.ethereum&&typeof R.ethereum.request=="function")x=R.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=b}const S=new URL((t=v==null?void 0:v.url)!==null&&t!==void 0?t:window.location.href),A=await x.request({method:"eth_requestAccounts"}).then(R=>R).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!A||A.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const C=hL(A[0]);let N=(s=v==null?void 0:v.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!N){const R=await x.request({method:"eth_chainId"});N=L8(R)}const P={domain:S.host,address:C,statement:g,uri:S.href,version:"1",chainId:N,nonce:(r=v==null?void 0:v.signInWithEthereum)===null||r===void 0?void 0:r.nonce,issuedAt:(o=(i=v==null?void 0:v.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=v==null?void 0:v.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=v==null?void 0:v.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=v==null?void 0:v.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(h=v==null?void 0:v.signInWithEthereum)===null||h===void 0?void 0:h.resources};m=M8(P),y=await x.request({method:"personal_sign",params:[D8(m),C]})}try{const{data:w,error:b}=await ue(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:y},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Nr});if(b)throw b;if(!w||!w.session||!w.user){const g=new Iu;return this._returnResult({data:{user:null,session:null},error:g})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:b})}catch(w){if(le(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(e){var t,s,r,i,o,a,l,c,h,f,p,m;let y,w;if("message"in e)y=e.message,w=e.signature;else{const{chain:b,wallet:g,statement:v,options:x}=e;let S;if(dn())if(typeof g=="object")S=g;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))S=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=g}const A=new URL((t=x==null?void 0:x.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in S&&S.signIn){const C=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),v?{statement:v}:null));let N;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")N=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)N=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)y=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),w=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${A.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(r=(s=x==null?void 0:x.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((i=x==null?void 0:x.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((o=x==null?void 0:x.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((a=x==null?void 0:x.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((c=x==null?void 0:x.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((f=(h=x==null?void 0:x.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||f===void 0)&&f.length?["Resources",...x.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const C=await S.signMessage(new TextEncoder().encode(y),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=C}}try{const{data:b,error:g}=await ue(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:Jl(w)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Nr});if(g)throw g;if(!b||!b.session||!b.user){const v=new Iu;return this._returnResult({data:{user:null,session:null},error:v})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:g})}catch(b){if(le(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(e){const t=await Rl(this.storage,`${this.storageKey}-code-verifier`),[s,r]=(t??"").split("/");try{const{data:i,error:o}=await ue(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Nr});if(await Zo(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const a=new Iu;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:r??null}),error:o})}catch(i){if(le(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:t,provider:s,token:r,access_token:i,nonce:o}=e,a=await ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Nr}),{data:l,error:c}=a;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const h=new Iu;return this._returnResult({data:{user:null,session:null},error:h})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(t){if(le(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,s,r,i,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,h=null;this.flowType==="pkce"&&([c,h]=await ju(this.storage,this.storageKey));const{error:f}=await ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:h},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:h}=await ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:h})}throw new Yy("You must provide either an email or phone number.")}catch(a){if(le(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var t,s;try{let r,i;"options"in e&&(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:a}=await ue(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:Nr});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(r){if(le(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithSSO(e){var t,s,r,i,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await ju(this.storage,this.storageKey));const c=await ue(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:k8});return!((i=c.data)===null||i===void 0)&&i.url&&dn()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(a){if(le(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new xs;const{error:r}=await ue(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:r})})}catch(e){if(le(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:i}=e,{error:o}=await ue(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:s,type:r,options:i}=e,{data:o,error:a}=await ue(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new Yy("You must provide either an email or phone number and a type")}catch(t){if(le(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Rl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<cb:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const o=await Rl(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=db()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=E8(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:r},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:la}):await this._useSession(async t=>{var s,r,i;const{data:o,error:a}=t;if(a)throw a;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new xs}:await ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,xform:la})})}catch(t){if(le(t))return n8(t)&&(await this._removeSession(),await Zo(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:r,error:i}=s;if(i)throw i;if(!r.session)throw new xs;const o=r.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await ju(this.storage,this.storageKey));const{data:c,error:h}=await ue(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:la});if(h)throw h;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(s){if(le(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new xs;const t=Date.now()/1e3;let s=t,r=!0,i=null;const{payload:o}=hb(e.access_token);if(o.exp&&(s=o.exp,r=s<=t),r){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(t){if(le(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new xs;const{data:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):r?this._returnResult({data:{user:r.user,session:r},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(le(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!dn())throw new Ky("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ky(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new zk("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ky("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new zk("No code detected.");const{data:v,error:x}=await this._exchangeCodeForSession(e.code);if(x)throw x;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:r,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!i||!a||!o||!c)throw new Ky("No session defined in URL");const h=Math.round(Date.now()/1e3),f=parseInt(a);let p=h+f;l&&(p=parseInt(l));const m=p-h;m*1e3<=Fu&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const y=p-f;h-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,p,h):h-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,p,h);const{data:w,error:b}=await this._getUser(i);if(b)throw b;const g={provider_token:s,provider_refresh_token:r,access_token:i,expires_in:f,expires_at:p,refresh_token:o,token_type:c,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:e.type},error:null})}catch(s){if(le(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Rl(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:r,error:i}=t;if(i)return this._returnResult({error:i});const o=(s=r.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(t8(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await Zo(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=u8(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,r;try{const{data:{session:i},error:o}=t;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let s=null,r=null;this.flowType==="pkce"&&([s,r]=await ju(this.storage,this.storageKey,!0));try{return await ue(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(le(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(le(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:s,error:r}=await this._useSession(async i=>{var o,a,l,c,h;const{data:f,error:p}=i;if(p)throw p;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ue(this.fetch,"GET",m,{headers:this.headers,jwt:(h=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&h!==void 0?h:void 0})});if(r)throw r;return dn()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:e.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(le(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var s;try{const{error:r,data:{session:i}}=t;if(r)throw r;const{options:o,provider:a,token:l,access_token:c,nonce:h}=e,f=await ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=i==null?void 0:i.access_token)!==null&&s!==void 0?s:void 0,body:{provider:a,id_token:l,access_token:c,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Nr}),{data:p,error:m}=f;return m?this._returnResult({data:{user:null,session:null},error:m}):!p||!p.session||!p.user?this._returnResult({data:{user:null,session:null},error:new Iu}):(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),this._returnResult({data:p,error:m}))}catch(r){if(le(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,r;const{data:i,error:o}=t;if(o)throw o;return await ue(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:void 0})})}catch(t){if(le(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await p8(async r=>(r>0&&await f8(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await ue(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Nr})),(r,i)=>{const o=200*Math.pow(2,r);return i&&ub(i)&&Date.now()+o-s<Fu})}catch(s){if(this._debug(t,"error",s),le(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),dn()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const r=await Rl(this.storage,this.storageKey);if(r&&this.userStorage){let o=await Rl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:r.user},await Bu(this.userStorage,this.storageKey+"-user",o)),r.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:db()}else if(r&&!r.user&&!r.user){const o=await Rl(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(r.user=o.user,await Zo(this.storage,this.storageKey+"-user"),await Bu(this.storage,this.storageKey,r)):r.user=db()}if(this._debug(s,"session from storage",r),!this._isValidSession(r)){this._debug(s,"session is not valid"),r!==null&&await this._removeSession();return}const i=((t=r.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<cb;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${cb}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),ub(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(r.access_token);!a&&(o!=null&&o.user)?(r.user=o.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(s,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(s,"error",r),console.error(r);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new xs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new sx;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new xs;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(r,"error",i),le(i)){const o={data:null,error:i};return ub(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,s=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&t.user&&await Bu(this.userStorage,this.storageKey+"-user",{user:t.user});const r=Object.assign({},t);delete r.user;const i=qk(r);await Bu(this.storage,this.storageKey,i)}else{const r=qk(t);await Bu(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),await Zo(this.storage,this.storageKey),await Zo(this.storage,this.storageKey+"-code-verifier"),await Zo(this.storage,this.storageKey+"-user"),this.userStorage&&await Zo(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&dn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Fu);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((s.expires_at*1e3-e)/Fu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Fu}ms, refresh threshold is ${W_} ticks`),r<=W_&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof uL)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!dn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const r=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&r.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&r.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,o]=await ju(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(a.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);r.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&r.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;return i?this._returnResult({data:null,error:i}):await ue(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(le(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,r;const{data:i,error:o}=t;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await ue(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((r=l==null?void 0:l.totp)===null||r===void 0)&&r.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(t){if(le(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?z8(e.webauthn.credential_response):G8(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(t){if(le(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;if(i)return this._returnResult({data:null,error:i});const o=await ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:V8(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:H8(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(le(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const r={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])r.all.push(i),i.status==="verified"&&r[i.factor_type].push(i);return{data:r,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:s},error:r}=await this.getSession();if(r)return this._returnResult({data:null,error:r});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=hb(s.access_token);let o=null;i.aal&&(o=i.aal);let a=o;((t=(e=s.user.factors)===null||e===void 0?void 0:e.filter(h=>h.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(a="aal2");const c=i.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:s},error:r}=t;return r?this._returnResult({data:null,error:r}):s?await ue(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new xs})})}catch(t){if(le(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async s=>{const{data:{session:r},error:i}=s;if(i)return this._returnResult({data:null,error:i});if(!r)return this._returnResult({data:null,error:new xs});const o=await ue(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&dn()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(s){if(le(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,t){try{return await this._useSession(async s=>{const{data:{session:r},error:i}=s;if(i)return this._returnResult({data:null,error:i});if(!r)return this._returnResult({data:null,error:new xs});const o=await ue(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&dn()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(s){if(le(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;return s?this._returnResult({data:null,error:s}):t?await ue(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:r=>({data:r,error:null})}):this._returnResult({data:null,error:new xs})})}catch(e){if(le(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:s},error:r}=t;return r?this._returnResult({data:null,error:r}):s?await ue(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:e.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new xs})})}catch(t){if(le(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(a=>a.kid===e);if(s)return s;const r=Date.now();if(s=this.jwks.keys.find(a=>a.kid===e),s&&this.jwks_cached_at+Zz>r)return s;const{data:i,error:o}=await ue(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=r,s=i.keys.find(a=>a.kid===e),!s)?null:s}async getClaims(e,t={}){try{let s=e;if(!s){const{data:m,error:y}=await this.getSession();if(y||!m.session)return this._returnResult({data:null,error:y});s=m.session.access_token}const{header:r,payload:i,signature:o,raw:{header:a,payload:l}}=hb(s);t!=null&&t.allowExpired||b8(i.exp);const c=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!c){const{error:m}=await this.getUser(s);if(m)throw m;return{data:{claims:i,header:r,signature:o},error:null}}const h=_8(r.alg),f=await crypto.subtle.importKey("jwk",c,h,!0,["verify"]);if(!await crypto.subtle.verify(h,f,o,l8(`${a}.${l}`)))throw new q_("Invalid JWT signature");return{data:{claims:i,header:r,signature:o},error:null}}catch(s){if(le(s))return this._returnResult({data:null,error:s});throw s}}}nm.nextInstanceID={};const eG=nm;class tG extends eG{constructor(e){super(e)}}class nG{constructor(e,t,s){var r,i,o;this.supabaseUrl=e,this.supabaseKey=t;const a=Kz(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,c={db:Uz,realtime:Vz,auth:Object.assign(Object.assign({},$z),{storageKey:l}),global:Bz},h=Yz(s??{},c);this.storageKey=(r=h.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=Gz(t,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.accessToken&&this.accessToken().then(f=>this.realtime.setAuth(f)).catch(f=>console.warn("Failed to set initial Realtime auth token:",f)),this.rest=new q6(new URL("rest/v1",a).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new Dz(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new W6(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:s}=await this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,userStorage:i,storageKey:o,flowType:a,lock:l,debug:c,throwOnError:h},f,p){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new tG({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),f),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,userStorage:i,flowType:a,lock:l,debug:c,throwOnError:h,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new dz(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const sG=(n,e,t)=>new nG(n,e,t);function rG(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}rG()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const iG={VITE_SUPABASE_PUBLISHABLE_KEY:"sb_publishable_cCuUc9y6VJRC478K0te-9w_Jj1NFalw",VITE_SUPABASE_URL:"https://adktjayvtprtypgqlwpr.supabase.co"},fL=iG||{},pL=fL.VITE_SUPABASE_URL,mL=fL.VITE_SUPABASE_PUBLISHABLE_KEY,gL=!!(pL&&mL),Yt=gL?sG(pL,mL):null;gL||console.warn("Supabase is not configured. Set VITE_SUPABASE_URL and VITE_SUPABASE_PUBLISHABLE_KEY in your .env to enable auth/storage.");const oG="http://localhost:8000",aG=async()=>{var e;const n={"Content-Type":"application/json"};if(Yt){const{data:t}=await Yt.auth.getSession(),s=(e=t.session)==null?void 0:e.access_token;s&&(n.Authorization=`Bearer ${s}`)}return n},Zs=async(n,e)=>{const t=await aG(),s=await fetch(`${oG}${n}`,{method:"POST",headers:t,body:JSON.stringify(e)});if(!s.ok){const r=await s.text();throw new Error(r||`Request failed with status ${s.status}`)}return s.json()},lG={resume:"# Mock Resume",coverLetter:"Dear Hiring Manager, This is a mock response."},cG=async(n,e)=>{try{const t=await Zs("/api/llm/generate-documents",{profile:n,options:e});return{documents:{resume:t.resume,coverLetter:t.coverLetter},analysis:t.analysis??null}}catch(t){return console.error("Document generation failed, falling back to mock.",t),{documents:lG,analysis:null}}},uG=async n=>{let e;try{const r=/^(https?:\/\/)/.test(n)?n:`https://${n}`;e=new URL(r)}catch{throw new Error('The URL you entered appears to be invalid. Please double-check it. It should look like "company.com/careers/job".')}const{hostname:t}=e,s=/^\d{1,3}(\.\d{1,3}){3}$/.test(t);throw!t.includes(".")&&t!=="localhost"&&!s?new Error(`The URL hostname "${t}" seems to be missing a top-level domain like '.com' or '.org'. Please provide a full and valid URL.`):new Error("Fetching job descriptions from URLs requires a backend service and is disabled in this environment. Please copy and paste the job description manually.")};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 *//**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var nN;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(nN||(nN={}));var sN;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(sN||(sN={}));var rN;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(rN||(rN={}));var X;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(X||(X={}));var iN;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(iN||(iN={}));var oN;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(oN||(oN={}));var aN;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(aN||(aN={}));var lN;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(lN||(lN={}));var cN;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(cN||(cN={}));var uN;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.HIGH="HIGH"})(uN||(uN={}));var hN;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(hN||(hN={}));var dN;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(dN||(dN={}));var fN;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(fN||(fN={}));var pN;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(pN||(pN={}));var mN;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(mN||(mN={}));var gN;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(gN||(gN={}));var yN;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(yN||(yN={}));var vN;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(vN||(vN={}));var wN;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(wN||(wN={}));var xN;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(xN||(xN={}));var bN;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(bN||(bN={}));var _N;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(_N||(_N={}));var SN;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(SN||(SN={}));var EN;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(EN||(EN={}));var AN;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(AN||(AN={}));var TN;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(TN||(TN={}));var CN;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(CN||(CN={}));var kN;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(kN||(kN={}));var NN;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(NN||(NN={}));var PN;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(PN||(PN={}));var RN;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(RN||(RN={}));var IN;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(IN||(IN={}));var jN;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(jN||(jN={}));var ON;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(ON||(ON={}));var LN;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(LN||(LN={}));var DN;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(DN||(DN={}));var MN;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(MN||(MN={}));var FN;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(FN||(FN={}));var BN;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(BN||(BN={}));var UN;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(UN||(UN={}));var $N;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})($N||($N={}));var VN;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(VN||(VN={}));var HN;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(HN||(HN={}));var zN;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(zN||(zN={}));var GN;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(GN||(GN={}));var WN;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(WN||(WN={}));var YN;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(YN||(YN={}));var KN;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(KN||(KN={}));var qN;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(qN||(qN={}));var XN;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(XN||(XN={}));var JN;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(JN||(JN={}));var QN;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(QN||(QN={}));var ZN;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(ZN||(ZN={}));var eP;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(eP||(eP={}));var tP;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(tP||(tP={}));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var nP;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(nP||(nP={}));const Gn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),X_=[.001,0,0,.001,0,0],pb=1.35,Us={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ca={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},sm="pdfjs_internal_editor_",pe={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},_e={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},hG={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},J_={TRIANGLES:1,LATTICE:2},hn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},N0={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Dt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Uu={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},rx={ERRORS:0,WARNINGS:1,INFOS:5},rm={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Of={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},dG={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let ix=rx.WARNINGS;function fG(n){Number.isInteger(n)&&(ix=n)}function pG(){return ix}function ox(n){ix>=rx.INFOS&&console.info(`Info: ${n}`)}function de(n){ix>=rx.WARNINGS&&console.warn(`Warning: ${n}`)}function Ye(n){throw new Error(n)}function Se(n,e){n||Ye(e)}function mG(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function yL(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const r=n.match(/\./g);(r==null?void 0:r.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=xG(n)}catch{}}const s=e?URL.parse(n,e):URL.parse(n);return mG(s)?s:null}function vL(n,e,t=!1){const s=URL.parse(n);return s?(s.hash=e,s.href):t&&yL(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function ge(n,e,t,s=!1){return Object.defineProperty(n,e,{value:t,enumerable:!s,configurable:!0,writable:!1}),t}const Nu=function(){function e(t,s){this.message=t,this.name=s}return e.prototype=new Error,e.constructor=e,e}();class sP extends Nu{constructor(e,t){super(e,"PasswordException"),this.code=t}}class mb extends Nu{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Q_ extends Nu{constructor(e){super(e,"InvalidPDFException")}}class Yv extends Nu{constructor(e,t,s){super(e,"ResponseException"),this.status=t,this.missing=s}}class gG extends Nu{constructor(e){super(e,"FormatError")}}class gl extends Nu{constructor(e){super(e,"AbortException")}}function wL(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&Ye("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const s=[];for(let r=0;r<e;r+=t){const i=Math.min(r+t,e),o=n.subarray(r,i);s.push(String.fromCharCode.apply(null,o))}return s.join("")}function uy(n){typeof n!="string"&&Ye("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let s=0;s<e;++s)t[s]=n.charCodeAt(s)&255;return t}function yG(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function vG(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function wG(){try{return new Function(""),!0}catch{return!1}}class Sn{static get isLittleEndian(){return ge(this,"isLittleEndian",vG())}static get isEvalSupported(){return ge(this,"isEvalSupported",wG())}static get isOffscreenCanvasSupported(){return ge(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return ge(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return ge(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return ge(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return ge(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return ge(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const gb=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var Uo,P0,Z_;class ne{static makeHexColor(e,t,s){return`#${gb[e]}${gb[t]}${gb[s]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let s;e[0]?(e[0]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[3],t[3]*=e[3]):(s=t[0],t[0]=t[1],t[1]=s,s=t[2],t[2]=t[3],t[3]=s,e[1]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,s=0){const r=e[s],i=e[s+1];e[s]=r*t[0]+i*t[2]+t[4],e[s+1]=r*t[1]+i*t[3]+t[5]}static applyTransformToBezier(e,t,s=0){const r=t[0],i=t[1],o=t[2],a=t[3],l=t[4],c=t[5];for(let h=0;h<6;h+=2){const f=e[s+h],p=e[s+h+1];e[s+h]=f*r+p*o+l,e[s+h+1]=f*i+p*a+c}}static applyInverseTransform(e,t){const s=e[0],r=e[1],i=t[0]*t[3]-t[1]*t[2];e[0]=(s*t[3]-r*t[2]+t[2]*t[5]-t[4]*t[3])/i,e[1]=(-s*t[1]+r*t[0]+t[4]*t[1]-t[5]*t[0])/i}static axialAlignedBoundingBox(e,t,s){const r=t[0],i=t[1],o=t[2],a=t[3],l=t[4],c=t[5],h=e[0],f=e[1],p=e[2],m=e[3];let y=r*h+l,w=y,b=r*p+l,g=b,v=a*f+c,x=v,S=a*m+c,A=S;if(i!==0||o!==0){const C=i*h,N=i*p,P=o*f,R=o*m;y+=P,g+=P,b+=R,w+=R,v+=C,A+=C,S+=N,x+=N}s[0]=Math.min(s[0],y,b,w,g),s[1]=Math.min(s[1],v,S,x,A),s[2]=Math.max(s[2],y,b,w,g),s[3]=Math.max(s[3],v,S,x,A)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const s=e[0],r=e[1],i=e[2],o=e[3],a=s**2+r**2,l=s*i+r*o,c=i**2+o**2,h=(a+c)/2,f=Math.sqrt(h**2-(a*c-l**2));t[0]=Math.sqrt(h+f||1),t[1]=Math.sqrt(h-f||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const s=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(s>r)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>o?null:[s,i,r,o]}static pointBoundingBox(e,t,s){s[0]=Math.min(s[0],e),s[1]=Math.min(s[1],t),s[2]=Math.max(s[2],e),s[3]=Math.max(s[3],t)}static rectBoundingBox(e,t,s,r,i){i[0]=Math.min(i[0],e,s),i[1]=Math.min(i[1],t,r),i[2]=Math.max(i[2],e,s),i[3]=Math.max(i[3],t,r)}static bezierBoundingBox(e,t,s,r,i,o,a,l,c){c[0]=Math.min(c[0],e,a),c[1]=Math.min(c[1],t,l),c[2]=Math.max(c[2],e,a),c[3]=Math.max(c[3],t,l),T(this,Uo,Z_).call(this,e,s,i,a,t,r,o,l,3*(-e+3*(s-i)+a),6*(e-2*s+i),3*(s-e),c),T(this,Uo,Z_).call(this,e,s,i,a,t,r,o,l,3*(-t+3*(r-o)+l),6*(t-2*r+o),3*(r-t),c)}}Uo=new WeakSet,P0=function(e,t,s,r,i,o,a,l,c,h){if(c<=0||c>=1)return;const f=1-c,p=c*c,m=p*c,y=f*(f*(f*e+3*c*t)+3*p*s)+m*r,w=f*(f*(f*i+3*c*o)+3*p*a)+m*l;h[0]=Math.min(h[0],y),h[1]=Math.min(h[1],w),h[2]=Math.max(h[2],y),h[3]=Math.max(h[3],w)},Z_=function(e,t,s,r,i,o,a,l,c,h,f,p){if(Math.abs(c)<1e-12){Math.abs(h)>=1e-12&&T(this,Uo,P0).call(this,e,t,s,r,i,o,a,l,-f/h,p);return}const m=h**2-4*f*c;if(m<0)return;const y=Math.sqrt(m),w=2*c;T(this,Uo,P0).call(this,e,t,s,r,i,o,a,l,(-h+y)/w,p),T(this,Uo,P0).call(this,e,t,s,r,i,o,a,l,(-h-y)/w,p)},E(ne,Uo);function xG(n){return decodeURIComponent(escape(n))}let yb=null,rP=null;function bG(n){return yb||(yb=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,rP=new Map([["","t"]])),n.replaceAll(yb,(e,t,s)=>t?t.normalize("NFKC"):rP.get(s))}function xL(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),wL(n)}const hh="pdfjs_internal_id_";function _G(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[s,r,...i]=t;if(!n(s)&&!Number.isInteger(s)||!e(r))return!1;const o=i.length;let a=!0;switch(r.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;a=!1;break;default:return!1}for(const l of i)if(!(typeof l=="number"||a&&l===null))return!1;return!0}function Wn(n,e,t){return Math.min(Math.max(n,e),t)}function bL(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(wL(n))}function SG(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):uy(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});class im{static textContent(e){const t=[],s={items:t,styles:Object.create(null)};function r(i){var l;if(!i)return;let o=null;const a=i.name;if(a==="#text")o=i.value;else if(im.shouldBuildText(a))(l=i==null?void 0:i.attributes)!=null&&l.textContent?o=i.attributes.textContent:i.value&&(o=i.value);else return;if(o!==null&&t.push({str:o}),!!i.children)for(const c of i.children)r(c)}return r(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class _L{static setupStorage(e,t,s,r,i){const o=r.getValue(t,{value:null});switch(s.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),i==="print")break;e.addEventListener("input",a=>{r.setValue(t,{value:a.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(o.value===s.attributes.xfaOn?e.setAttribute("checked",!0):o.value===s.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",a=>{r.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),i==="print")break;e.addEventListener("input",a=>{r.setValue(t,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of s.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const l=a.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;r.setValue(t,{value:c})});break}}static setAttributes({html:e,element:t,storage:s=null,intent:r,linkService:i}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${r}`);for(const[l,c]of Object.entries(o))if(c!=null)switch(l){case"class":c.length&&e.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!a||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,c)}a&&i.addLinkAttributes(e,o.href,o.newWindow),s&&o.dataId&&this.setupStorage(e,o.dataId,t,s)}static render(e){var f,p;const t=e.annotationStorage,s=e.linkService,r=e.xfaHtml,i=e.intent||"display",o=document.createElement(r.name);r.attributes&&this.setAttributes({html:o,element:r,intent:i,linkService:s});const a=i!=="richText",l=e.div;if(l.append(o),e.viewport){const m=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=m}a&&l.setAttribute("class","xfaLayer xfaFont");const c=[];if(r.children.length===0){if(r.value){const m=document.createTextNode(r.value);o.append(m),a&&im.shouldBuildText(r.name)&&c.push(m)}return{textDivs:c}}const h=[[r,-1,o]];for(;h.length>0;){const[m,y,w]=h.at(-1);if(y+1===m.children.length){h.pop();continue}const b=m.children[++h.at(-1)[1]];if(b===null)continue;const{name:g}=b;if(g==="#text"){const x=document.createTextNode(b.value);c.push(x),w.append(x);continue}const v=(f=b==null?void 0:b.attributes)!=null&&f.xmlns?document.createElementNS(b.attributes.xmlns,g):document.createElement(g);if(w.append(v),b.attributes&&this.setAttributes({html:v,element:b,storage:t,intent:i,linkService:s}),((p=b.children)==null?void 0:p.length)>0)h.push([b,-1,v]);else if(b.value){const x=document.createTextNode(b.value);a&&im.shouldBuildText(g)&&c.push(x),v.append(x)}}for(const m of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Wi="http://www.w3.org/2000/svg",zl=class zl{};G(zl,"CSS",96),G(zl,"PDF",72),G(zl,"PDF_TO_CSS_UNITS",zl.CSS/zl.PDF);let yl=zl;async function hy(n,e="text"){if(Yf(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,s)=>{const r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}s(new Error(r.statusText))}},r.send(null)})}class dy{constructor({viewBox:e,userUnit:t,scale:s,rotation:r,offsetX:i=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=e,this.userUnit=t,this.scale=s,this.rotation=r,this.offsetX=i,this.offsetY=o,s*=t;const l=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let h,f,p,m;switch(r%=360,r<0&&(r+=360),r){case 180:h=-1,f=0,p=0,m=1;break;case 90:h=0,f=1,p=1,m=0;break;case 270:h=0,f=-1,p=-1,m=0;break;case 0:h=1,f=0,p=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(p=-p,m=-m);let y,w,b,g;h===0?(y=Math.abs(c-e[1])*s+i,w=Math.abs(l-e[0])*s+o,b=(e[3]-e[1])*s,g=(e[2]-e[0])*s):(y=Math.abs(l-e[0])*s+i,w=Math.abs(c-e[1])*s+o,b=(e[2]-e[0])*s,g=(e[3]-e[1])*s),this.transform=[h*s,f*s,p*s,m*s,y-h*s*l-p*s*c,w-f*s*l-m*s*c],this.width=b,this.height=g}get rawDims(){const e=this.viewBox;return ge(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:s=this.offsetX,offsetY:r=this.offsetY,dontFlip:i=!1}={}){return new dy({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:r,dontFlip:i})}convertToViewportPoint(e,t){const s=[e,t];return ne.applyTransform(s,this.transform),s}convertToViewportRectangle(e){const t=[e[0],e[1]];ne.applyTransform(t,this.transform);const s=[e[2],e[3]];return ne.applyTransform(s,this.transform),[t[0],t[1],s[0],s[1]]}convertToPdfPoint(e,t){const s=[e,t];return ne.applyInverseTransform(s,this.transform),s}}class S1 extends Nu{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function ax(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function E1(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function EG(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function AG(n,e="document.pdf"){if(typeof n!="string")return e;if(ax(n))return de('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const s=(a=>{try{return new URL(a)}catch{try{return new URL(decodeURIComponent(a))}catch{try{return new URL(a,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(a),"https://foo.bar")}catch{return null}}}}})(n);if(!s)return e;const r=a=>{try{let l=decodeURIComponent(a);return l.includes("/")?(l=l.split("/").at(-1),l.test(/^\.pdf$/i)?l:a):l}catch{return a}},i=/\.pdf$/i,o=s.pathname.split("/").at(-1);if(i.test(o))return r(o);if(s.searchParams.size>0){const a=Array.from(s.searchParams.values()).reverse();for(const c of a)if(i.test(c))return r(c);const l=Array.from(s.searchParams.keys()).reverse();for(const c of l)if(i.test(c))return r(c)}if(s.hash){const l=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(l)return r(l[0])}return e}class iP{constructor(){G(this,"started",Object.create(null));G(this,"times",[])}time(e){e in this.started&&de(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||de(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:s}of this.times)t=Math.max(s.length,t);for(const{name:s,start:r,end:i}of this.times)e.push(`${s.padEnd(t)} ${i-r}ms
`);return e.join("")}}function Yf(n,e){const t=e?URL.parse(n,e):URL.parse(n);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function Ar(n){n.preventDefault()}function kt(n){n.preventDefault(),n.stopPropagation()}function TG(n){console.log("Deprecated API usage: "+n)}var lm;class Kv{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;u(this,lm)||_(this,lm,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=u(this,lm).exec(e);if(!t)return null;const s=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const c=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let f=parseInt(t[9],10)||0;return f=f>=0&&f<=59?f:0,c==="-"?(o+=h,a+=f):c==="+"&&(o-=h,a-=f),new Date(Date.UTC(s,r,i,o,a,l))}}lm=new WeakMap,E(Kv,lm);function CG(n,{scale:e=1,rotation:t=0}){const{width:s,height:r}=n.attributes.style,i=[0,0,parseInt(s),parseInt(r)];return new dy({viewBox:i,userUnit:1,scale:e,rotation:t})}function fy(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(de(`Not a valid color format: "${n}"`),[0,0,0])}function kG(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const s=window.getComputedStyle(e).color;n.set(t,fy(s))}e.remove()}function ft(n){const{a:e,b:t,c:s,d:r,e:i,f:o}=n.getTransform();return[e,t,s,r,i,o]}function ri(n){const{a:e,b:t,c:s,d:r,e:i,f:o}=n.getTransform().invertSelf();return[e,t,s,r,i,o]}function _u(n,e,t=!1,s=!0){if(e instanceof dy){const{pageWidth:r,pageHeight:i}=e.rawDims,{style:o}=n,a=Sn.isCSSRoundSupported,l=`var(--total-scale-factor) * ${r}px`,c=`var(--total-scale-factor) * ${i}px`,h=a?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,f=a?`round(down, ${c}, var(--scale-round-y))`:`calc(${c})`;!t||e.rotation%180===0?(o.width=h,o.height=f):(o.width=f,o.height=h)}s&&n.setAttribute("data-main-rotation",e.rotation)}class $i{constructor(){const{pixelRatio:e}=$i;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,s,r,i=-1){let o=1/0,a=1/0,l=1/0;s=$i.capPixels(s,i),s>0&&(o=Math.sqrt(s/(e*t))),r!==-1&&(a=r/e,l=r/t);const c=Math.min(o,a,l);return this.sx>c||this.sy>c?(this.sx=c,this.sy=c,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,s):s}return e}}const eS=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class NG{static get isDarkMode(){var e;return ge(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class PG{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:s}=window.getComputedStyle(e);return e.remove(),ge(this,"commentForegroundColor",fy(s))}}function RG(n,e,t,s){s=Math.min(Math.max(s??1,0),1);const r=255*(1-s);return n=Math.round(n*s+r),e=Math.round(e*s+r),t=Math.round(t*s+r),[n,e,t]}function oP(n,e){const t=n[0]/255,s=n[1]/255,r=n[2]/255,i=Math.max(t,s,r),o=Math.min(t,s,r),a=(i+o)/2;if(i===o)e[0]=e[1]=0;else{const l=i-o;switch(e[1]=a<.5?l/(i+o):l/(2-i-o),i){case t:e[0]=((s-r)/l+(s<r?6:0))*60;break;case s:e[0]=((r-t)/l+2)*60;break;case r:e[0]=((t-s)/l+4)*60;break}}e[2]=a}function tS(n,e){const t=n[0],s=n[1],r=n[2],i=(1-Math.abs(2*r-1))*s,o=i*(1-Math.abs(t/60%2-1)),a=r-i/2;switch(Math.floor(t/60)){case 0:e[0]=i+a,e[1]=o+a,e[2]=a;break;case 1:e[0]=o+a,e[1]=i+a,e[2]=a;break;case 2:e[0]=a,e[1]=i+a,e[2]=o+a;break;case 3:e[0]=a,e[1]=o+a,e[2]=i+a;break;case 4:e[0]=o+a,e[1]=a,e[2]=i+a;break;case 5:case 6:e[0]=i+a,e[1]=a,e[2]=o+a;break}}function aP(n){return n<=.03928?n/12.92:((n+.055)/1.055)**2.4}function lP(n,e,t){tS(n,t),t.map(aP);const s=.2126*t[0]+.7152*t[1]+.0722*t[2];tS(e,t),t.map(aP);const r=.2126*t[0]+.7152*t[1]+.0722*t[2];return s>r?(s+.05)/(r+.05):(r+.05)/(s+.05)}const cP=new Map;function IG(n,e){const t=n[0]+n[1]*256+n[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let s=cP.get(t);if(s)return s;const r=new Float32Array(9),i=r.subarray(0,3),o=r.subarray(3,6);oP(n,o);const a=r.subarray(6,9);oP(e,a);const l=a[2]<.5,c=l?12:4.5;if(o[2]=l?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),lP(o,a,i)<c){let h,f;l?(h=o[2],f=1):(h=0,f=o[2]);const p=.005;for(;f-h>p;){const m=o[2]=(h+f)/2;l===lP(o,a,i)<c?h=m:f=m}o[2]=l?f:h}return tS(o,i),s=ne.makeHexColor(Math.round(i[0]*255),Math.round(i[1]*255),Math.round(i[2]*255)),cP.set(t,s),s}function SL({html:n,dir:e,className:t},s){const r=document.createDocumentFragment();if(typeof n=="string"){const i=document.createElement("p");i.dir=e||"auto";const o=n.split(/(?:\r\n?|\n)/);for(let a=0,l=o.length;a<l;++a){const c=o[a];i.append(document.createTextNode(c)),a<l-1&&i.append(document.createElement("br"))}r.append(i)}else _L.render({xfaHtml:n,div:r,intent:"richText"});r.firstChild.classList.add("richText",t),s.append(r)}function EL(n){const e=new Path2D;if(!n)return e;for(let t=0,s=n.length;t<s;)switch(n[t++]){case Of.moveTo:e.moveTo(n[t++],n[t++]);break;case Of.lineTo:e.lineTo(n[t++],n[t++]);break;case Of.curveTo:e.bezierCurveTo(n[t++],n[t++],n[t++],n[t++],n[t++],n[t++]);break;case Of.quadraticCurveTo:e.quadraticCurveTo(n[t++],n[t++],n[t++],n[t++]);break;case Of.closePath:e.closePath();break;default:de(`Unrecognized drawing path operator: ${n[t-1]}`);break}return e}var ua,ha,rr,ir,cm,da,Ch,kh,um,aw,AL,bn,TL,CL,$u,Kf;const Ji=class Ji{constructor(e){E(this,bn);E(this,ua,null);E(this,ha,null);E(this,rr);E(this,ir,null);E(this,cm,null);E(this,da,null);E(this,Ch,null);E(this,kh,null);_(this,rr,e),u(Ji,um)||_(Ji,um,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=_(this,ua,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=u(this,rr)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",Ar,{signal:t}),e.addEventListener("pointerdown",T(Ji,aw,AL),{signal:t}));const s=_(this,ir,document.createElement("div"));s.className="buttons",e.append(s);const r=u(this,rr).toolbarPosition;if(r){const{style:i}=e,o=u(this,rr)._uiManager.direction==="ltr"?1-r[0]:r[0];i.insetInlineEnd=`${100*o}%`,i.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return u(this,ua)}hide(){var e;u(this,ua).classList.add("hidden"),(e=u(this,ha))==null||e.hideDropdown()}show(){var e,t;u(this,ua).classList.remove("hidden"),(e=u(this,cm))==null||e.shown(),(t=u(this,da))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=u(this,rr),s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",u(Ji,um)[e]),T(this,bn,$u).call(this,s)&&s.addEventListener("click",r=>{t.delete()},{signal:t._signal}),u(this,ir).append(s)}async addAltText(e){const t=await e.render();T(this,bn,$u).call(this,t),u(this,ir).append(t,u(this,bn,Kf)),_(this,cm,e)}addComment(e,t=null){if(u(this,da))return;const s=e.renderForToolbar();if(!s)return;T(this,bn,$u).call(this,s);const r=_(this,Ch,u(this,bn,Kf));t?(u(this,ir).insertBefore(s,t),u(this,ir).insertBefore(r,t)):u(this,ir).append(s,r),_(this,da,e),e.toolbar=this}addColorPicker(e){if(u(this,ha))return;_(this,ha,e);const t=e.renderButton();T(this,bn,$u).call(this,t),u(this,ir).append(t,u(this,bn,Kf))}async addEditSignatureButton(e){const t=_(this,kh,await e.renderEditButton(u(this,rr)));T(this,bn,$u).call(this,t),u(this,ir).append(t,u(this,bn,Kf))}removeButton(e){var t,s;switch(e){case"comment":(t=u(this,da))==null||t.removeToolbarCommentButton(),_(this,da,null),(s=u(this,Ch))==null||s.remove(),_(this,Ch,null);break}}async addButton(e,t){switch(e){case"colorPicker":t&&this.addColorPicker(t);break;case"altText":t&&await this.addAltText(t);break;case"editSignature":t&&await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":t&&this.addComment(t);break}}async addButtonBefore(e,t,s){if(!t&&e==="comment")return;const r=u(this,ir).querySelector(s);r&&e==="comment"&&this.addComment(t,r)}updateEditSignatureButton(e){u(this,kh)&&(u(this,kh).title=e)}remove(){var e;u(this,ua).remove(),(e=u(this,ha))==null||e.destroy(),_(this,ha,null)}};ua=new WeakMap,ha=new WeakMap,rr=new WeakMap,ir=new WeakMap,cm=new WeakMap,da=new WeakMap,Ch=new WeakMap,kh=new WeakMap,um=new WeakMap,aw=new WeakSet,AL=function(e){e.stopPropagation()},bn=new WeakSet,TL=function(e){u(this,rr)._focusEventsAllowed=!1,kt(e)},CL=function(e){u(this,rr)._focusEventsAllowed=!0,kt(e)},$u=function(e){const t=u(this,rr)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",T(this,bn,TL).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",T(this,bn,CL).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Ar,{signal:t}),!0)},Kf=function(){const e=document.createElement("div");return e.className="divider",e},E(Ji,aw),E(Ji,um,null);let nS=Ji;var hm,Zl,eo,Ko,kL,NL,sS;class jG{constructor(e){E(this,Ko);E(this,hm,null);E(this,Zl,null);E(this,eo);_(this,eo,e)}show(e,t,s){const[r,i]=T(this,Ko,NL).call(this,t,s),{style:o}=u(this,Zl)||_(this,Zl,T(this,Ko,kL).call(this));e.append(u(this,Zl)),o.insetInlineEnd=`${100*r}%`,o.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){u(this,Zl).remove()}}hm=new WeakMap,Zl=new WeakMap,eo=new WeakMap,Ko=new WeakSet,kL=function(){const e=_(this,Zl,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=u(this,eo)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",Ar,{signal:t});const s=_(this,hm,document.createElement("div"));return s.className="buttons",e.append(s),u(this,eo).hasCommentManager()&&T(this,Ko,sS).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{u(this,eo).commentSelection("floating_button")}),T(this,Ko,sS).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{u(this,eo).highlightSelection("floating_button")}),e},NL=function(e,t){let s=0,r=0;for(const i of e){const o=i.y+i.height;if(o<s)continue;const a=i.x+(t?i.width:0);if(o>s){r=a,s=o;continue}t?a>r&&(r=a):a<r&&(r=a)}return[t?1-r:r,s]},sS=function(e,t,s,r){const i=document.createElement("button");i.classList.add("basic",e),i.tabIndex=0,i.setAttribute("data-l10n-id",t);const o=document.createElement("span");i.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",s);const a=u(this,eo)._signal;a instanceof AbortSignal&&!a.aborted&&(i.addEventListener("contextmenu",Ar,{signal:a}),i.addEventListener("click",r,{signal:a})),u(this,hm).append(i)};function PL(n,e,t){for(const s of t)e.addEventListener(s,n[s].bind(n))}var ec,tc,Nh,nc;const Me=class Me{static initializeAndAddPointerId(e){(u(Me,tc)||_(Me,tc,new Set)).add(e)}static setPointer(e,t){u(Me,ec)||_(Me,ec,t),u(Me,nc)??_(Me,nc,e)}static setTimeStamp(e){_(Me,Nh,e)}static isSamePointerId(e){return u(Me,ec)===e}static isSamePointerIdOrRemove(e){var t;return u(Me,ec)===e?!0:((t=u(Me,tc))==null||t.delete(e),!1)}static isSamePointerType(e){return u(Me,nc)===e}static isInitializedAndDifferentPointerType(e){return u(Me,nc)!==null&&!Me.isSamePointerType(e)}static isSameTimeStamp(e){return u(Me,Nh)===e}static isUsingMultiplePointers(){var e;return((e=u(Me,tc))==null?void 0:e.size)>=1}static clearPointerType(){_(Me,nc,null)}static clearPointerIds(){_(Me,ec,NaN),_(Me,tc,null)}static clearTimeStamp(){_(Me,Nh,NaN)}};ec=new WeakMap,tc=new WeakMap,Nh=new WeakMap,nc=new WeakMap,E(Me,ec,NaN),E(Me,tc,null),E(Me,Nh,NaN),E(Me,nc,null);let Pn=Me;var lw;class OG{constructor(){E(this,lw,0)}get id(){return`${sm}${$t(this,lw)._++}`}}lw=new WeakMap;var Ph,dm,Rn,Rh,R0;const L1=class L1{constructor(){E(this,Rh);E(this,Ph,xL());E(this,dm,0);E(this,Rn,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const i=r.decode().then(()=>(s.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return ge(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:s,size:r,type:i}=e;return T(this,Rh,R0).call(this,`${t}_${s}_${r}_${i}`,e)}async getFromUrl(e){return T(this,Rh,R0).call(this,e,e)}async getFromBlob(e,t){const s=await t;return T(this,Rh,R0).call(this,e,s)}async getFromId(e){u(this,Rn)||_(this,Rn,new Map);const t=u(this,Rn).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:s}=t;return delete t.blobPromise,this.getFromBlob(t.id,s)}return this.getFromUrl(t.url)}getFromCanvas(e,t){u(this,Rn)||_(this,Rn,new Map);let s=u(this,Rn).get(e);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),s={bitmap:r.transferToImageBitmap(),id:`image_${u(this,Ph)}_${$t(this,dm)._++}`,refCounter:1,isSvg:!1},u(this,Rn).set(e,s),u(this,Rn).set(s.id,s),s}getSvgUrl(e){const t=u(this,Rn).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;u(this,Rn)||_(this,Rn,new Map);const t=u(this,Rn).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:s}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(s.width,s.height);i.getContext("bitmaprenderer").transferFromImageBitmap(s),t.blobPromise=i.convertToBlob()}(r=s.close)==null||r.call(s),t.bitmap=null}isValidId(e){return e.startsWith(`image_${u(this,Ph)}_`)}};Ph=new WeakMap,dm=new WeakMap,Rn=new WeakMap,Rh=new WeakSet,R0=async function(e,t){u(this,Rn)||_(this,Rn,new Map);let s=u(this,Rn).get(e);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${u(this,Ph)}_${$t(this,dm)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(s.url=t,r=await hy(t,"blob")):t instanceof File?r=s.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const i=L1._isSVGFittingCanvas,o=new FileReader,a=new Image,l=new Promise((c,h)=>{a.onload=()=>{s.bitmap=a,s.isSvg=!0,c()},o.onload=async()=>{const f=s.svgUrl=o.result;a.src=await i?`${f}#svgView(preserveAspectRatio(none))`:f},a.onerror=o.onerror=h});o.readAsDataURL(r),await l}else s.bitmap=await createImageBitmap(r);s.refCounter=1}catch(r){de(r),s=null}return u(this,Rn).set(e,s),s&&u(this,Rn).set(s.id,s),s};let rS=L1;var Rt,fa,fm,dt;class LG{constructor(e=128){E(this,Rt,[]);E(this,fa,!1);E(this,fm);E(this,dt,-1);_(this,fm,e)}add({cmd:e,undo:t,post:s,mustExec:r,type:i=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(r&&e(),u(this,fa))return;const l={cmd:e,undo:t,post:s,type:i};if(u(this,dt)===-1){u(this,Rt).length>0&&(u(this,Rt).length=0),_(this,dt,0),u(this,Rt).push(l);return}if(o&&u(this,Rt)[u(this,dt)].type===i){a&&(l.undo=u(this,Rt)[u(this,dt)].undo),u(this,Rt)[u(this,dt)]=l;return}const c=u(this,dt)+1;c===u(this,fm)?u(this,Rt).splice(0,1):(_(this,dt,c),c<u(this,Rt).length&&u(this,Rt).splice(c)),u(this,Rt).push(l)}undo(){if(u(this,dt)===-1)return;_(this,fa,!0);const{undo:e,post:t}=u(this,Rt)[u(this,dt)];e(),t==null||t(),_(this,fa,!1),_(this,dt,u(this,dt)-1)}redo(){if(u(this,dt)<u(this,Rt).length-1){_(this,dt,u(this,dt)+1),_(this,fa,!0);const{cmd:e,post:t}=u(this,Rt)[u(this,dt)];e(),t==null||t(),_(this,fa,!1)}}hasSomethingToUndo(){return u(this,dt)!==-1}hasSomethingToRedo(){return u(this,dt)<u(this,Rt).length-1}cleanType(e){if(u(this,dt)!==-1){for(let t=u(this,dt);t>=0;t--)if(u(this,Rt)[t].type!==e){u(this,Rt).splice(t+1,u(this,dt)-t),_(this,dt,t);return}u(this,Rt).length=0,_(this,dt,-1)}}destroy(){_(this,Rt,null)}}Rt=new WeakMap,fa=new WeakMap,fm=new WeakMap,dt=new WeakMap;var cw,RL;class py{constructor(e){E(this,cw);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Sn.platform;for(const[s,r,i={}]of e)for(const o of s){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:r,options:i}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:r,options:i}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const s=this.callbacks.get(T(this,cw,RL).call(this,t));if(!s)return;const{callback:r,options:{bubbles:i=!1,args:o=[],checker:a=null}}=s;a&&!a(e,t)||(r.bind(e,...o,t)(),i||kt(t))}}cw=new WeakSet,RL=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const uw=class uw{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return kG(e),ge(this,"_colors",e)}convert(e){const t=fy(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[s,r]of this._colors)if(r.every((i,o)=>i===t[o]))return uw._colorsMapping.get(s);return t}getHexCode(e){const t=this._colors.get(e);return t?ne.makeHexColor(...t):e}};G(uw,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let iS=uw;var Ih,_s,jh,xt,Gt,Oh,or,Lh,ar,In,pa,ma,Dh,ga,li,lr,sc,pm,mm,Mh,gm,ci,ya,Fh,va,ui,hw,wa,Bh,ym,xa,rc,Uh,ba,vm,Mt,je,to,_a,Sa,wm,$h,xm,Ea,hi,no,bm,_m,cr,q,I0,oS,IL,jL,qf,OL,LL,DL,aS,ML,FL,BL,UL,Un,Yi,$L,VL,lS,HL,Xf,cS;const fh=class fh{constructor(e,t,s,r,i,o,a,l,c,h,f,p,m,y,w,b){E(this,q);E(this,Ih,new AbortController);E(this,_s,null);E(this,jh,null);E(this,xt,new Map);E(this,Gt,new Map);E(this,Oh,null);E(this,or,null);E(this,Lh,null);E(this,ar,new LG);E(this,In,null);E(this,pa,null);E(this,ma,null);E(this,Dh,0);E(this,ga,new Set);E(this,li,null);E(this,lr,null);E(this,sc,new Set);G(this,"_editorUndoBar",null);E(this,pm,!1);E(this,mm,!1);E(this,Mh,!1);E(this,gm,null);E(this,ci,null);E(this,ya,null);E(this,Fh,null);E(this,va,!1);E(this,ui,null);E(this,hw,new OG);E(this,wa,!1);E(this,Bh,!1);E(this,ym,!1);E(this,xa,null);E(this,rc,null);E(this,Uh,null);E(this,ba,null);E(this,vm,null);E(this,Mt,pe.NONE);E(this,je,new Set);E(this,to,null);E(this,_a,null);E(this,Sa,null);E(this,wm,null);E(this,$h,null);E(this,xm,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});E(this,Ea,[0,0]);E(this,hi,null);E(this,no,null);E(this,bm,null);E(this,_m,null);E(this,cr,null);const g=this._signal=u(this,Ih).signal;_(this,no,e),_(this,bm,t),_(this,_m,s),_(this,Oh,r),_(this,In,i),_(this,_a,o),_(this,$h,l),this._eventBus=a,a._on("editingaction",this.onEditingAction.bind(this),{signal:g}),a._on("pagechanging",this.onPageChanging.bind(this),{signal:g}),a._on("scalechanging",this.onScaleChanging.bind(this),{signal:g}),a._on("rotationchanging",this.onRotationChanging.bind(this),{signal:g}),a._on("setpreference",this.onSetPreference.bind(this),{signal:g}),a._on("switchannotationeditorparams",v=>this.updateParams(v.type,v.value),{signal:g}),window.addEventListener("pointerdown",()=>{_(this,Bh,!0)},{capture:!0,signal:g}),window.addEventListener("pointerup",()=>{_(this,Bh,!1)},{capture:!0,signal:g}),T(this,q,OL).call(this),T(this,q,UL).call(this),T(this,q,aS).call(this),_(this,or,l.annotationStorage),_(this,gm,l.filterFactory),_(this,Sa,c),_(this,Fh,h||null),_(this,pm,f),_(this,mm,p),_(this,Mh,m),_(this,vm,y||null),this.viewParameters={realScale:yl.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=w||null,this._supportsPinchToZoom=b!==!1,i==null||i.setSidebarUiManager(this)}static get _keyboardManager(){const e=fh.prototype,t=o=>u(o,no).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),s=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:l}=a;return l!=="text"&&l!=="number"}return!0},r=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return ge(this,"_keyboardManager",new py([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&u(o,no).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&u(o,no).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,s,r,i,o,a,l,c;(e=u(this,cr))==null||e.resolve(),_(this,cr,null),(t=u(this,Ih))==null||t.abort(),_(this,Ih,null),this._signal=null;for(const h of u(this,Gt).values())h.destroy();u(this,Gt).clear(),u(this,xt).clear(),u(this,sc).clear(),(s=u(this,ba))==null||s.clear(),_(this,_s,null),u(this,je).clear(),u(this,ar).destroy(),(r=u(this,Oh))==null||r.destroy(),(i=u(this,In))==null||i.destroy(),(o=u(this,_a))==null||o.destroy(),(a=u(this,ui))==null||a.hide(),_(this,ui,null),(l=u(this,Uh))==null||l.destroy(),_(this,Uh,null),_(this,jh,null),u(this,ci)&&(clearTimeout(u(this,ci)),_(this,ci,null)),u(this,hi)&&(clearTimeout(u(this,hi)),_(this,hi,null)),(c=this._editorUndoBar)==null||c.destroy(),_(this,$h,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return u(this,vm)}get useNewAltTextFlow(){return u(this,mm)}get useNewAltTextWhenAddingImage(){return u(this,Mh)}get hcmFilter(){return ge(this,"hcmFilter",u(this,Sa)?u(this,gm).addHCMFilter(u(this,Sa).foreground,u(this,Sa).background):"none")}get direction(){return ge(this,"direction",getComputedStyle(u(this,no)).direction)}get _highlightColors(){return ge(this,"_highlightColors",u(this,Fh)?new Map(u(this,Fh).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return ge(this,"highlightColors",null);const t=new Map,s=!!u(this,Sa);for(const[r,i]of e){const o=r.endsWith("_HCM");if(s&&o){t.set(r.replace("_HCM",""),i);continue}!s&&!o&&t.set(r,i)}return ge(this,"highlightColors",t)}get highlightColorNames(){return ge(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),_(this,ma,e)}setMainHighlightColorPicker(e){_(this,Uh,e)}editAltText(e,t=!1){var s;(s=u(this,Oh))==null||s.editAltText(this,e,t)}hasCommentManager(){return!!u(this,In)}editComment(e,t,s,r){var i;(i=u(this,In))==null||i.showDialog(this,e,t,s,r)}selectComment(e,t){const s=u(this,Gt).get(e),r=s==null?void 0:s.getEditorByUID(t);r==null||r.toggleComment(!0,!0)}updateComment(e){var t;(t=u(this,In))==null||t.updateComment(e.getData())}updatePopupColor(e){var t;(t=u(this,In))==null||t.updatePopupColor(e)}removeComment(e){var t;(t=u(this,In))==null||t.removeComments([e.uid])}toggleComment(e,t,s=void 0){var r;(r=u(this,In))==null||r.toggleCommentPopup(e,t,s)}makeCommentColor(e,t){var s;return e&&((s=u(this,In))==null?void 0:s.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return((e=u(this,In))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(u(this,Gt).has(e-1))return;const{resolve:t,promise:s}=Promise.withResolvers(),r=i=>{i.pageNumber===e&&(this._eventBus._off("editorsrendered",r),t())};this._eventBus.on("editorsrendered",r),await s}getSignature(e){var t;(t=u(this,_a))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return u(this,_a)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":_(this,Mh,t);break}}onPageChanging({pageNumber:e}){_(this,Dh,e-1)}focusMainContainer(){u(this,no).focus()}findParent(e,t){for(const s of u(this,Gt).values()){const{x:r,y:i,width:o,height:a}=s.div.getBoundingClientRect();if(e>=r&&e<=r+o&&t>=i&&t<=i+a)return s}return null}disableUserSelect(e=!1){u(this,bm).classList.toggle("noUserSelect",e)}addShouldRescale(e){u(this,sc).add(e)}removeShouldRescale(e){u(this,sc).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*yl.PDF_TO_CSS_UNITS;for(const s of u(this,sc))s.onScaleChanging();(t=u(this,ma))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:a}=s,l=s.toString(),h=T(this,q,I0).call(this,s).closest(".textLayer"),f=this.getSelectionBoxes(h);if(!f)return;s.empty();const p=T(this,q,oS).call(this,h),m=u(this,Mt)===pe.NONE,y=()=>{const w=p==null?void 0:p.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:f,anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:a,text:l});m&&this.showAllEditors("highlight",!0,!0),t&&(w==null||w.editComment())};if(m){this.switchToMode(pe.HIGHLIGHT,y);return}y()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!u(this,or))return null;const t=`${sm}${e}`,s=u(this,or).getRawValue(t);return s&&u(this,or).remove(t),s}addToAnnotationStorage(e){!e.isEmpty()&&u(this,or)&&!u(this,or).has(e.id)&&u(this,or).setValue(e.id,e)}a11yAlert(e,t=null){const s=u(this,_m);s&&(s.setAttribute("data-l10n-id",e),t?s.setAttribute("data-l10n-args",JSON.stringify(t)):s.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,u(this,va)&&(_(this,va,!1),T(this,q,qf).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of u(this,je))if(t.div.contains(e)){_(this,rc,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!u(this,rc))return;const[e,t]=u(this,rc);_(this,rc,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){T(this,q,aS).call(this),this.setEditingState(!0)}removeEditListeners(){T(this,q,ML).call(this),this.setEditingState(!1)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const s of u(this,lr))if(s.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const s of u(this,lr))if(s.isHandlingMimeForPasting(t.type)){s.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var s;if(e.preventDefault(),(s=u(this,_s))==null||s.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of u(this,je)){const i=r.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const o of u(this,lr))if(o.isHandlingMimeForPasting(i.type)){o.paste(i,this.currentLayer);return}let s=t.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(i){de(`paste: "${i.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const r=this.currentLayer;try{const i=[];for(const l of s){const c=await r.deserialize(l);if(!c)return;i.push(c)}const o=()=>{for(const l of i)T(this,q,lS).call(this,l);T(this,q,cS).call(this,i)},a=()=>{for(const l of i)l.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(i){de(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),u(this,Mt)!==pe.NONE&&!this.isEditorHandlingKeyboard&&fh._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,u(this,va)&&(_(this,va,!1),T(this,q,qf).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(T(this,q,LL).call(this),T(this,q,FL).call(this),T(this,q,Un).call(this,{isEditing:u(this,Mt)!==pe.NONE,isEmpty:T(this,q,Xf).call(this),hasSomethingToUndo:u(this,ar).hasSomethingToUndo(),hasSomethingToRedo:u(this,ar).hasSomethingToRedo(),hasSelectedEditor:!1})):(T(this,q,DL).call(this),T(this,q,BL).call(this),T(this,q,Un).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!u(this,lr)){_(this,lr,e);for(const t of u(this,lr))T(this,q,Yi).call(this,t.defaultPropertiesToUpdate)}}getId(){return u(this,hw).id}get currentLayer(){return u(this,Gt).get(u(this,Dh))}getLayer(e){return u(this,Gt).get(e)}get currentPageIndex(){return u(this,Dh)}addLayer(e){u(this,Gt).set(e.pageIndex,e),u(this,wa)?e.enable():e.disable()}removeLayer(e){u(this,Gt).delete(e.pageIndex)}async updateMode(e,t=null,s=!1,r=!1,i=!1){var o,a,l,c,h,f;if(u(this,Mt)!==e&&!(u(this,cr)&&(await u(this,cr).promise,!u(this,cr)))){if(_(this,cr,Promise.withResolvers()),(o=u(this,ma))==null||o.commitOrRemove(),u(this,Mt)===pe.POPUP&&((a=u(this,In))==null||a.hideSidebar()),(l=u(this,In))==null||l.destroyPopup(),_(this,Mt,e),e===pe.NONE){this.setEditingState(!1),T(this,q,VL).call(this);for(const p of u(this,xt).values())p.hideStandaloneCommentButton();(c=this._editorUndoBar)==null||c.hide(),this.toggleComment(null),u(this,cr).resolve();return}for(const p of u(this,xt).values())p.addStandaloneCommentButton();e===pe.SIGNATURE&&await((h=u(this,_a))==null?void 0:h.loadSignatures()),this.setEditingState(!0),await T(this,q,$L).call(this),this.unselectAll();for(const p of u(this,Gt).values())p.updateMode(e);if(e===pe.POPUP){u(this,jh)||_(this,jh,await u(this,$h).getAnnotationsByType(new Set(u(this,lr).map(y=>y._editorType))));const p=new Set,m=[];for(const y of u(this,xt).values()){const{annotationElementId:w,hasComment:b,deleted:g}=y;w&&p.add(w),b&&!g&&m.push(y.getData())}for(const y of u(this,jh)){const{id:w,popupRef:b,contentsObj:g}=y;b&&(g!=null&&g.str)&&!p.has(w)&&!u(this,ga).has(w)&&m.push(y)}(f=u(this,In))==null||f.showSidebar(m)}if(!t){s&&this.addNewEditorFromKeyboard(),u(this,cr).resolve();return}for(const p of u(this,xt).values())p.uid===t?(this.setSelected(p),i?p.editComment():r?p.enterInEditMode():p.focus()):p.unselect();u(this,cr).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==u(this,Mt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(u(this,lr)){switch(e){case _e.CREATE:this.currentLayer.addNewEditor(t);return;case _e.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(u(this,wm)||_(this,wm,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const s of u(this,je))s.updateParams(e,t);else for(const s of u(this,lr))s.updateDefaultParams(e,t)}}showAllEditors(e,t,s=!1){var i;for(const o of u(this,xt).values())o.editorType===e&&o.show(t);(((i=u(this,wm))==null?void 0:i.get(_e.HIGHLIGHT_SHOW_ALL))??!0)!==t&&T(this,q,Yi).call(this,[[_e.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(u(this,ym)!==e){_(this,ym,e);for(const t of u(this,Gt).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of u(this,xt).values())t.pageIndex===e&&(yield t)}getEditor(e){return u(this,xt).get(e)}addEditor(e){u(this,xt).set(e.id,e)}removeEditor(e){var t,s;e.div.contains(document.activeElement)&&(u(this,ci)&&clearTimeout(u(this,ci)),_(this,ci,setTimeout(()=>{this.focusMainContainer(),_(this,ci,null)},0))),u(this,xt).delete(e.id),e.annotationElementId&&((t=u(this,ba))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!u(this,ga).has(e.annotationElementId))&&((s=u(this,or))==null||s.remove(e.id))}addDeletedAnnotationElement(e){u(this,ga).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return u(this,ga).has(e)}removeDeletedAnnotationElement(e){u(this,ga).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){u(this,_s)!==e&&(_(this,_s,e),e&&T(this,q,Yi).call(this,e.propertiesToUpdate))}updateUI(e){u(this,q,HL)===e&&T(this,q,Yi).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){T(this,q,Yi).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(u(this,je).has(e)){u(this,je).delete(e),e.unselect(),T(this,q,Un).call(this,{hasSelectedEditor:this.hasSelection});return}u(this,je).add(e),e.select(),T(this,q,Yi).call(this,e.propertiesToUpdate),T(this,q,Un).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.uid}),(t=u(this,ma))==null||t.commitOrRemove();for(const s of u(this,je))s!==e&&s.unselect();u(this,je).clear(),u(this,je).add(e),e.select(),T(this,q,Yi).call(this,e.propertiesToUpdate),T(this,q,Un).call(this,{hasSelectedEditor:!0})}isSelected(e){return u(this,je).has(e)}get firstSelectedEditor(){return u(this,je).values().next().value}unselect(e){e.unselect(),u(this,je).delete(e),T(this,q,Un).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return u(this,je).size!==0}get isEnterHandled(){return u(this,je).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;u(this,ar).undo(),T(this,q,Un).call(this,{hasSomethingToUndo:u(this,ar).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:T(this,q,Xf).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){u(this,ar).redo(),T(this,q,Un).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:u(this,ar).hasSomethingToRedo(),isEmpty:T(this,q,Xf).call(this)})}addCommands(e){u(this,ar).add(e),T(this,q,Un).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:T(this,q,Xf).call(this)})}cleanUndoStack(e){u(this,ar).cleanType(e)}delete(){var i;this.commitOrRemove();const e=(i=this.currentLayer)==null?void 0:i.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...u(this,je)],s=()=>{var o;(o=this._editorUndoBar)==null||o.show(r,t.length===1?t[0].editorType:t.length);for(const a of t)a.remove()},r=()=>{for(const o of t)T(this,q,lS).call(this,o)};this.addCommands({cmd:s,undo:r,mustExec:!0})}commitOrRemove(){var e;(e=u(this,_s))==null||e.commitOrRemove()}hasSomethingToControl(){return u(this,_s)||this.hasSelection}selectAll(){for(const e of u(this,je))e.commit();T(this,q,cS).call(this,u(this,xt).values())}unselectAll(){var e;if(!(u(this,_s)&&(u(this,_s).commitOrRemove(),u(this,Mt)!==pe.NONE))&&!((e=u(this,ma))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of u(this,je))t.unselect();u(this,je).clear(),T(this,q,Un).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;u(this,Ea)[0]+=e,u(this,Ea)[1]+=t;const[r,i]=u(this,Ea),o=[...u(this,je)],a=1e3;u(this,hi)&&clearTimeout(u(this,hi)),_(this,hi,setTimeout(()=>{_(this,hi,null),u(this,Ea)[0]=u(this,Ea)[1]=0,this.addCommands({cmd:()=>{for(const l of o)u(this,xt).has(l.id)&&(l.translateInPage(r,i),l.translationDone())},undo:()=>{for(const l of o)u(this,xt).has(l.id)&&(l.translateInPage(-r,-i),l.translationDone())},mustExec:!1})},a));for(const l of o)l.translateInPage(e,t),l.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),_(this,li,new Map);for(const e of u(this,je))u(this,li).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!u(this,li))return!1;this.disableUserSelect(!1);const e=u(this,li);_(this,li,null);let t=!1;for(const[{x:r,y:i,pageIndex:o},a]of e)a.newX=r,a.newY=i,a.newPageIndex=o,t||(t=r!==a.savedX||i!==a.savedY||o!==a.savedPageIndex);if(!t)return!1;const s=(r,i,o,a)=>{if(u(this,xt).has(r.id)){const l=u(this,Gt).get(a);l?r._setParentAndPosition(l,i,o):(r.pageIndex=a,r.x=i,r.y=o)}};return this.addCommands({cmd:()=>{for(const[r,{newX:i,newY:o,newPageIndex:a}]of e)s(r,i,o,a)},undo:()=>{for(const[r,{savedX:i,savedY:o,savedPageIndex:a}]of e)s(r,i,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(u(this,li))for(const s of u(this,li).keys())s.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||u(this,je).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return u(this,_s)===e}getActive(){return u(this,_s)}getMode(){return u(this,Mt)}isEditingMode(){return u(this,Mt)!==pe.NONE}get imageManager(){return ge(this,"imageManager",new rS)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let c=0,h=t.rangeCount;c<h;c++)if(!e.contains(t.getRangeAt(c).commonAncestorContainer))return null;const{x:s,y:r,width:i,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(c,h,f,p)=>({x:(h-r)/o,y:1-(c+f-s)/i,width:p/o,height:f/i});break;case"180":a=(c,h,f,p)=>({x:1-(c+f-s)/i,y:1-(h+p-r)/o,width:f/i,height:p/o});break;case"270":a=(c,h,f,p)=>({x:1-(h+p-r)/o,y:(c-s)/i,width:p/o,height:f/i});break;default:a=(c,h,f,p)=>({x:(c-s)/i,y:(h-r)/o,width:f/i,height:p/o});break}const l=[];for(let c=0,h=t.rangeCount;c<h;c++){const f=t.getRangeAt(c);if(!f.collapsed)for(const{x:p,y:m,width:y,height:w}of f.getClientRects())y===0||w===0||l.push(a(p,m,y,w))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(u(this,Lh)||_(this,Lh,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=u(this,Lh))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=u(this,Lh))==null?void 0:r.get(e.data.id);if(!t)return;const s=u(this,or).getRawValue(t);s&&(u(this,Mt)===pe.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}setMissingCanvas(e,t,s){var i;const r=(i=u(this,ba))==null?void 0:i.get(e);r&&(r.setCanvas(t,s),u(this,ba).delete(e))}addMissingCanvas(e,t){(u(this,ba)||_(this,ba,new Map)).set(e,t)}};Ih=new WeakMap,_s=new WeakMap,jh=new WeakMap,xt=new WeakMap,Gt=new WeakMap,Oh=new WeakMap,or=new WeakMap,Lh=new WeakMap,ar=new WeakMap,In=new WeakMap,pa=new WeakMap,ma=new WeakMap,Dh=new WeakMap,ga=new WeakMap,li=new WeakMap,lr=new WeakMap,sc=new WeakMap,pm=new WeakMap,mm=new WeakMap,Mh=new WeakMap,gm=new WeakMap,ci=new WeakMap,ya=new WeakMap,Fh=new WeakMap,va=new WeakMap,ui=new WeakMap,hw=new WeakMap,wa=new WeakMap,Bh=new WeakMap,ym=new WeakMap,xa=new WeakMap,rc=new WeakMap,Uh=new WeakMap,ba=new WeakMap,vm=new WeakMap,Mt=new WeakMap,je=new WeakMap,to=new WeakMap,_a=new WeakMap,Sa=new WeakMap,wm=new WeakMap,$h=new WeakMap,xm=new WeakMap,Ea=new WeakMap,hi=new WeakMap,no=new WeakMap,bm=new WeakMap,_m=new WeakMap,cr=new WeakMap,q=new WeakSet,I0=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},oS=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const s of u(this,Gt).values())if(s.hasTextLayer(e))return s;return null},IL=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=T(this,q,I0).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(s);r&&(u(this,ui)||_(this,ui,new jG(this)),u(this,ui).show(s,r,this.direction==="ltr"))},jL=function(){var i,o,a;const e=document.getSelection();if(!e||e.isCollapsed){u(this,to)&&((i=u(this,ui))==null||i.hide(),_(this,to,null),T(this,q,Un).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===u(this,to))return;const r=T(this,q,I0).call(this,e).closest(".textLayer");if(!r){u(this,to)&&((o=u(this,ui))==null||o.hide(),_(this,to,null),T(this,q,Un).call(this,{hasSelectedText:!1}));return}if((a=u(this,ui))==null||a.hide(),_(this,to,t),T(this,q,Un).call(this,{hasSelectedText:!0}),!(u(this,Mt)!==pe.HIGHLIGHT&&u(this,Mt)!==pe.NONE)&&(u(this,Mt)===pe.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),_(this,va,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=u(this,Mt)===pe.HIGHLIGHT?T(this,q,oS).call(this,r):null;if(l==null||l.toggleDrawing(),u(this,Bh)){const c=new AbortController,h=this.combinedSignal(c),f=p=>{p.type==="pointerup"&&p.button!==0||(c.abort(),l==null||l.toggleDrawing(!0),p.type==="pointerup"&&T(this,q,qf).call(this,"main_toolbar"))};window.addEventListener("pointerup",f,{signal:h}),window.addEventListener("blur",f,{signal:h})}else l==null||l.toggleDrawing(!0),T(this,q,qf).call(this,"main_toolbar")}},qf=function(e=""){u(this,Mt)===pe.HIGHLIGHT?this.highlightSelection(e):u(this,pm)&&T(this,q,IL).call(this)},OL=function(){document.addEventListener("selectionchange",T(this,q,jL).bind(this),{signal:this._signal})},LL=function(){if(u(this,ya))return;_(this,ya,new AbortController);const e=this.combinedSignal(u(this,ya));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},DL=function(){var e;(e=u(this,ya))==null||e.abort(),_(this,ya,null)},aS=function(){if(u(this,xa))return;_(this,xa,new AbortController);const e=this.combinedSignal(u(this,xa));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},ML=function(){var e;(e=u(this,xa))==null||e.abort(),_(this,xa,null)},FL=function(){if(u(this,pa))return;_(this,pa,new AbortController);const e=this.combinedSignal(u(this,pa));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},BL=function(){var e;(e=u(this,pa))==null||e.abort(),_(this,pa,null)},UL=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Un=function(e){Object.entries(e).some(([s,r])=>u(this,xm)[s]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(u(this,xm),e)}),u(this,Mt)===pe.HIGHLIGHT&&e.hasSelectedEditor===!1&&T(this,q,Yi).call(this,[[_e.HIGHLIGHT_FREE,!0]]))},Yi=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},$L=async function(){if(!u(this,wa)){_(this,wa,!0);const e=[];for(const t of u(this,Gt).values())e.push(t.enable());await Promise.all(e);for(const t of u(this,xt).values())t.enable()}},VL=function(){if(this.unselectAll(),u(this,wa)){_(this,wa,!1);for(const e of u(this,Gt).values())e.disable();for(const e of u(this,xt).values())e.disable()}},lS=function(e){const t=u(this,Gt).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},HL=function(){let e=null;for(e of u(this,je));return e},Xf=function(){if(u(this,xt).size===0)return!0;if(u(this,xt).size===1)for(const e of u(this,xt).values())return e.isEmpty();return!1},cS=function(e){for(const t of u(this,je))t.unselect();u(this,je).clear();for(const t of e)t.isEmpty()||(u(this,je).add(t),t.select());T(this,q,Un).call(this,{hasSelectedEditor:this.hasSelection})},G(fh,"TRANSLATE_SMALL",1),G(fh,"TRANSLATE_BIG",10);let Su=fh;var Qt,di,Lr,Vh,fi,Ss,Hh,pi,ss,so,ic,mi,Aa,Xr,Jf,j0;const $n=class $n{constructor(e){E(this,Xr);E(this,Qt,null);E(this,di,!1);E(this,Lr,null);E(this,Vh,null);E(this,fi,null);E(this,Ss,null);E(this,Hh,!1);E(this,pi,null);E(this,ss,null);E(this,so,null);E(this,ic,null);E(this,mi,!1);_(this,ss,e),_(this,mi,e._uiManager.useNewAltTextFlow),u($n,Aa)||_($n,Aa,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){$n._l10n??($n._l10n=e)}async render(){const e=_(this,Lr,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=_(this,Vh,document.createElement("span"));e.append(t),u(this,mi)?(e.classList.add("new"),e.setAttribute("data-l10n-id",u($n,Aa).missing),t.setAttribute("data-l10n-id",u($n,Aa)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=u(this,ss)._uiManager._signal;e.addEventListener("contextmenu",Ar,{signal:s}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:s});const r=i=>{i.preventDefault(),u(this,ss)._uiManager.editAltText(u(this,ss)),u(this,mi)&&u(this,ss)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:u(this,Xr,Jf)}})};return e.addEventListener("click",r,{capture:!0,signal:s}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(_(this,Hh,!0),r(i))},{signal:s}),await T(this,Xr,j0).call(this),e}finish(){u(this,Lr)&&(u(this,Lr).focus({focusVisible:u(this,Hh)}),_(this,Hh,!1))}isEmpty(){return u(this,mi)?u(this,Qt)===null:!u(this,Qt)&&!u(this,di)}hasData(){return u(this,mi)?u(this,Qt)!==null||!!u(this,so):this.isEmpty()}get guessedText(){return u(this,so)}async setGuessedText(e){u(this,Qt)===null&&(_(this,so,e),_(this,ic,await $n._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),T(this,Xr,j0).call(this))}toggleAltTextBadge(e=!1){var t;if(!u(this,mi)||u(this,Qt)){(t=u(this,pi))==null||t.remove(),_(this,pi,null);return}if(!u(this,pi)){const s=_(this,pi,document.createElement("div"));s.className="noAltTextBadge",u(this,ss).div.append(s)}u(this,pi).classList.toggle("hidden",!e)}serialize(e){let t=u(this,Qt);return!e&&u(this,so)===t&&(t=u(this,ic)),{altText:t,decorative:u(this,di),guessedText:u(this,so),textWithDisclaimer:u(this,ic)}}get data(){return{altText:u(this,Qt),decorative:u(this,di)}}set data({altText:e,decorative:t,guessedText:s,textWithDisclaimer:r,cancel:i=!1}){s&&(_(this,so,s),_(this,ic,r)),!(u(this,Qt)===e&&u(this,di)===t)&&(i||(_(this,Qt,e),_(this,di,t)),T(this,Xr,j0).call(this))}toggle(e=!1){u(this,Lr)&&(!e&&u(this,Ss)&&(clearTimeout(u(this,Ss)),_(this,Ss,null)),u(this,Lr).disabled=!e)}shown(){u(this,ss)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:u(this,Xr,Jf)}})}destroy(){var e,t;(e=u(this,Lr))==null||e.remove(),_(this,Lr,null),_(this,Vh,null),_(this,fi,null),(t=u(this,pi))==null||t.remove(),_(this,pi,null)}};Qt=new WeakMap,di=new WeakMap,Lr=new WeakMap,Vh=new WeakMap,fi=new WeakMap,Ss=new WeakMap,Hh=new WeakMap,pi=new WeakMap,ss=new WeakMap,so=new WeakMap,ic=new WeakMap,mi=new WeakMap,Aa=new WeakMap,Xr=new WeakSet,Jf=function(){return u(this,Qt)&&"added"||u(this,Qt)===null&&this.guessedText&&"review"||"missing"},j0=async function(){var r,i,o;const e=u(this,Lr);if(!e)return;if(u(this,mi)){if(e.classList.toggle("done",!!u(this,Qt)),e.setAttribute("data-l10n-id",u($n,Aa)[u(this,Xr,Jf)]),(r=u(this,Vh))==null||r.setAttribute("data-l10n-id",u($n,Aa)[`${u(this,Xr,Jf)}-label`]),!u(this,Qt)){(i=u(this,fi))==null||i.remove();return}}else{if(!u(this,Qt)&&!u(this,di)){e.classList.remove("done"),(o=u(this,fi))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=u(this,fi);if(!t){_(this,fi,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${u(this,ss).id}`;const a=100,l=u(this,ss)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(u(this,Ss)),_(this,Ss,null)},{once:!0}),e.addEventListener("mouseenter",()=>{_(this,Ss,setTimeout(()=>{_(this,Ss,null),u(this,fi).classList.add("show"),u(this,ss)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:l}),e.addEventListener("mouseleave",()=>{var c;u(this,Ss)&&(clearTimeout(u(this,Ss)),_(this,Ss,null)),(c=u(this,fi))==null||c.classList.remove("show")},{signal:l})}u(this,di)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=u(this,Qt)),t.parentNode||e.append(t);const s=u(this,ss).getElementForAltText();s==null||s.setAttribute("aria-describedby",t.id)},E($n,Aa,null),G($n,"_l10n",null);let qv=$n;var fn,ur,oc,Qe,Sm,ac,Dr,lc,cc,uc,Em,uS;class qy{constructor(e){E(this,Em);E(this,fn,null);E(this,ur,null);E(this,oc,!1);E(this,Qe,null);E(this,Sm,null);E(this,ac,null);E(this,Dr,null);E(this,lc,null);E(this,cc,!1);E(this,uc,null);_(this,Qe,e)}renderForToolbar(){const e=_(this,ur,document.createElement("button"));return e.className="comment",T(this,Em,uS).call(this,e,!1)}renderForStandalone(){const e=_(this,fn,document.createElement("button"));e.className="annotationCommentButton";const t=u(this,Qe).commentButtonPosition;if(t){const{style:s}=e;s.insetInlineEnd=`calc(${100*(u(this,Qe)._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const r=u(this,Qe).commentButtonColor;r&&(s.backgroundColor=r)}return T(this,Em,uS).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=u(this,fn)??u(this,ur))==null||e.focus()},0)}onUpdatedColor(){if(!u(this,fn))return;const e=u(this,Qe).commentButtonColor;e&&(u(this,fn).style.backgroundColor=e),u(this,Qe)._uiManager.updatePopupColor(u(this,Qe))}get commentButtonWidth(){var e;return(((e=u(this,fn))==null?void 0:e.getBoundingClientRect().width)??0)/u(this,Qe).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(u(this,uc))return u(this,uc);if(!u(this,fn))return null;const{x:e,y:t,height:s}=u(this,fn).getBoundingClientRect(),{x:r,y:i,width:o,height:a}=u(this,Qe).parent.boundingClientRect;return[(e-r)/o,(t+s-i)/a]}set commentPopupPositionInLayer(e){_(this,uc,e)}hasDefaultPopupPosition(){return u(this,uc)===null}removeStandaloneCommentButton(){var e;(e=u(this,fn))==null||e.remove(),_(this,fn,null)}removeToolbarCommentButton(){var e;(e=u(this,ur))==null||e.remove(),_(this,ur,null)}setCommentButtonStates({selected:e,hasPopup:t}){u(this,fn)&&(u(this,fn).classList.toggle("selected",e),u(this,fn).ariaExpanded=t)}edit(e){const t=this.commentPopupPositionInLayer;let s,r;if(t)[s,r]=t;else{[s,r]=u(this,Qe).commentButtonPosition;const{width:h,height:f,x:p,y:m}=u(this,Qe);s=p+s*h,r=m+r*f}const i=u(this,Qe).parent.boundingClientRect,{x:o,y:a,width:l,height:c}=i;u(this,Qe)._uiManager.editComment(u(this,Qe),o+s*l,a+r*c,{...e,parentDimensions:i})}finish(){u(this,ur)&&(u(this,ur).focus({focusVisible:u(this,oc)}),_(this,oc,!1))}isDeleted(){return u(this,cc)||u(this,Dr)===""}isEmpty(){return u(this,Dr)===null}hasBeenEdited(){return this.isDeleted()||u(this,Dr)!==u(this,Sm)}serialize(){return this.data}get data(){return{text:u(this,Dr),richText:u(this,ac),date:u(this,lc),deleted:this.isDeleted()}}set data(e){if(e!==u(this,Dr)&&_(this,ac,null),e===null){_(this,Dr,""),_(this,cc,!0);return}_(this,Dr,e),_(this,lc,new Date),_(this,cc,!1)}setInitialText(e,t=null){_(this,Sm,e),this.data=e,_(this,lc,null),_(this,ac,t)}shown(){}destroy(){var e,t;(e=u(this,ur))==null||e.remove(),_(this,ur,null),(t=u(this,fn))==null||t.remove(),_(this,fn,null),_(this,Dr,""),_(this,ac,null),_(this,lc,null),_(this,Qe,null),_(this,oc,!1),_(this,cc,!1)}}fn=new WeakMap,ur=new WeakMap,oc=new WeakMap,Qe=new WeakMap,Sm=new WeakMap,ac=new WeakMap,Dr=new WeakMap,lc=new WeakMap,cc=new WeakMap,uc=new WeakMap,Em=new WeakSet,uS=function(e,t){if(!u(this,Qe)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[u(this,Qe)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const s=u(this,Qe)._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return e;e.addEventListener("contextmenu",Ar,{signal:s}),t&&(e.addEventListener("focusin",i=>{u(this,Qe)._focusEventsAllowed=!1,kt(i)},{capture:!0,signal:s}),e.addEventListener("focusout",i=>{u(this,Qe)._focusEventsAllowed=!0,kt(i)},{capture:!0,signal:s})),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:s});const r=i=>{i.preventDefault(),e===u(this,ur)?this.edit():u(this,Qe).toggleComment(!0)};return e.addEventListener("click",r,{capture:!0,signal:s}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(_(this,oc,!0),r(i))},{signal:s}),e.addEventListener("pointerenter",()=>{u(this,Qe).toggleComment(!1,!0)},{signal:s}),e.addEventListener("pointerleave",()=>{u(this,Qe).toggleComment(!1,!1)},{signal:s}),e};var zh,hc,Am,Tm,Cm,km,Nm,ro,dc,io,fc,oo,vl,zL,GL,WL;const D1=class D1{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:s=null,onPinchStart:r=null,onPinching:i=null,onPinchEnd:o=null,signal:a}){E(this,vl);E(this,zh);E(this,hc,!1);E(this,Am,null);E(this,Tm);E(this,Cm);E(this,km);E(this,Nm);E(this,ro,null);E(this,dc);E(this,io,null);E(this,fc);E(this,oo,null);_(this,zh,e),_(this,Am,s),_(this,Tm,t),_(this,Cm,r),_(this,km,i),_(this,Nm,o),_(this,fc,new AbortController),_(this,dc,AbortSignal.any([a,u(this,fc).signal])),e.addEventListener("touchstart",T(this,vl,zL).bind(this),{passive:!1,signal:u(this,dc)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/$i.pixelRatio}destroy(){var e,t;(e=u(this,fc))==null||e.abort(),_(this,fc,null),(t=u(this,ro))==null||t.abort(),_(this,ro,null)}};zh=new WeakMap,hc=new WeakMap,Am=new WeakMap,Tm=new WeakMap,Cm=new WeakMap,km=new WeakMap,Nm=new WeakMap,ro=new WeakMap,dc=new WeakMap,io=new WeakMap,fc=new WeakMap,oo=new WeakMap,vl=new WeakSet,zL=function(e){var r,i,o;if((r=u(this,Tm))!=null&&r.call(this))return;if(e.touches.length===1){if(u(this,ro))return;const a=_(this,ro,new AbortController),l=AbortSignal.any([u(this,dc),a.signal]),c=u(this,zh),h={capture:!0,signal:l,passive:!1},f=p=>{var m;p.pointerType==="touch"&&((m=u(this,ro))==null||m.abort(),_(this,ro,null))};c.addEventListener("pointerdown",p=>{p.pointerType==="touch"&&(kt(p),f(p))},h),c.addEventListener("pointerup",f,h),c.addEventListener("pointercancel",f,h);return}if(!u(this,oo)){_(this,oo,new AbortController);const a=AbortSignal.any([u(this,dc),u(this,oo).signal]),l=u(this,zh),c={signal:a,capture:!1,passive:!1};l.addEventListener("touchmove",T(this,vl,GL).bind(this),c);const h=T(this,vl,WL).bind(this);l.addEventListener("touchend",h,c),l.addEventListener("touchcancel",h,c),c.capture=!0,l.addEventListener("pointerdown",kt,c),l.addEventListener("pointermove",kt,c),l.addEventListener("pointercancel",kt,c),l.addEventListener("pointerup",kt,c),(i=u(this,Cm))==null||i.call(this)}if(kt(e),e.touches.length!==2||(o=u(this,Am))!=null&&o.call(this)){_(this,io,null);return}let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]),_(this,io,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:s.screenX,touch1Y:s.screenY})},GL=function(e){var S;if(!u(this,io)||e.touches.length!==2)return;kt(e);let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]);const{screenX:r,screenY:i}=t,{screenX:o,screenY:a}=s,l=u(this,io),{touch0X:c,touch0Y:h,touch1X:f,touch1Y:p}=l,m=f-c,y=p-h,w=o-r,b=a-i,g=Math.hypot(w,b)||1,v=Math.hypot(m,y)||1;if(!u(this,hc)&&Math.abs(v-g)<=D1.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=r,l.touch0Y=i,l.touch1X=o,l.touch1Y=a,!u(this,hc)){_(this,hc,!0);return}const x=[(r+o)/2,(i+a)/2];(S=u(this,km))==null||S.call(this,x,v,g)},WL=function(e){var t;e.touches.length>=2||(u(this,oo)&&(u(this,oo).abort(),_(this,oo,null),(t=u(this,Nm))==null||t.call(this)),u(this,io)&&(kt(e),_(this,io,null),_(this,hc,!1)))};let Xv=D1;var pc,Mr,lt,ze,ao,Gh,Ta,Pm,pn,mc,lo,hr,Ca,Rm,gc,Es,Im,yc,co,gi,Wh,Yh,dr,vc,jm,dw,ce,hS,Om,dS,O0,YL,KL,fS,L0,pS,qL,XL,JL,mS,QL,gS,ZL,eD,tD,yS,Qf;const fe=class fe{constructor(e){E(this,ce);E(this,pc,null);E(this,Mr,null);E(this,lt,null);E(this,ze,null);E(this,ao,null);E(this,Gh,!1);E(this,Ta,null);E(this,Pm,"");E(this,pn,null);E(this,mc,null);E(this,lo,null);E(this,hr,null);E(this,Ca,null);E(this,Rm,"");E(this,gc,!1);E(this,Es,null);E(this,Im,!1);E(this,yc,!1);E(this,co,!1);E(this,gi,null);E(this,Wh,0);E(this,Yh,0);E(this,dr,null);E(this,vc,null);G(this,"isSelected",!1);G(this,"_isCopy",!1);G(this,"_editToolbar",null);G(this,"_initialOptions",Object.create(null));G(this,"_initialData",null);G(this,"_isVisible",!0);G(this,"_uiManager",null);G(this,"_focusEventsAllowed",!0);E(this,jm,!1);E(this,dw,fe._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;const{rotation:t,rawDims:{pageWidth:s,pageHeight:r,pageX:i,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,r],this.pageTranslation=[i,o];const[a,l]=this.parentDimensions;this.x=e.x/a,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=fe.prototype._resizeWithKeyboard,t=Su.TRANSLATE_SMALL,s=Su.TRANSLATE_BIG;return ge(this,"_resizerKeyboardManager",new py([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],fe.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return ge(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new DG({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(fe._l10n??(fe._l10n=e),fe._l10nResizer||(fe._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),fe._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);fe._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Ye("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return u(this,jm)}set _isDraggable(e){var t;_(this,jm,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=u(this,dw)}setParent(e){var t;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(T(this,ce,Qf).call(this),(t=u(this,hr))==null||t.remove(),_(this,hr,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(u(this,gc)?_(this,gc,!1):this.parent.setSelected(this))}focusout(e){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,s,r){const[i,o]=this.parentDimensions;[s,r]=this.screenToPageTranslation(s,r),this.x=(e+s)/i,this.y=(t+r)/o,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[s,r]=this.parentDimensions;this.setAt(e*s,t*r,this.width*s,this.height*r),this._onTranslated()}translate(e,t){T(this,ce,hS).call(this,this.parentDimensions,e,t)}translateInPage(e,t){u(this,Es)||_(this,Es,[this.x,this.y,this.width,this.height]),T(this,ce,hS).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){u(this,Es)||_(this,Es,[this.x,this.y,this.width,this.height]);const{div:s,parentDimensions:[r,i]}=this;if(this.x+=e/r,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:f,y:p}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,p)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this;const[l,c]=this.getBaseTranslation();o+=l,a+=c;const{style:h}=s;h.left=`${(100*o).toFixed(2)}%`,h.top=`${(100*a).toFixed(2)}%`,this._onTranslating(o,a),s.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!u(this,Es)&&(u(this,Es)[0]!==this.x||u(this,Es)[1]!==this.y)}get _hasBeenResized(){return!!u(this,Es)&&(u(this,Es)[2]!==this.width||u(this,Es)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:s}=fe,r=s/e,i=s/t;switch(this.rotation){case 90:return[-r,i];case 180:return[r,i];case 270:return[r,-i];default:return[-r,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[s,r]}=this;let{x:i,y:o,width:a,height:l}=this;if(a*=s,l*=r,i*=s,o*=r,this._mustFixPosition)switch(e){case 0:i=Wn(i,0,s-a),o=Wn(o,0,r-l);break;case 90:i=Wn(i,0,s-l),o=Wn(o,a,r);break;case 180:i=Wn(i,a,s),o=Wn(o,l,r);break;case 270:i=Wn(i,l,s),o=Wn(o,0,r-a);break}this.x=i/=s,this.y=o/=r;const[c,h]=this.getBaseTranslation();i+=c,o+=h,t.left=`${(100*i).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var s;return T(s=fe,Om,dS).call(s,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var s;return T(s=fe,Om,dS).call(s,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,s]}=this;return[t*e,s*e]}setDims(){const{div:{style:e},width:t,height:s}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=u(this,lt))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||u(this,yc))return this._editToolbar;this._editToolbar=new nS(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,s]of e)await this._editToolbar.addButton(t,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,t;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(t=u(this,lt))==null||t.destroy()}addContainer(e){var s;const t=(s=this._editToolbar)==null?void 0:s.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return u(this,lt)||(qv.initialize(fe._l10n),_(this,lt,new qv(this)),u(this,pc)&&(u(this,lt).data=u(this,pc),_(this,pc,null))),u(this,lt)}get altTextData(){var e;return(e=u(this,lt))==null?void 0:e.data}set altTextData(e){u(this,lt)&&(u(this,lt).data=e)}get guessedAltText(){var e;return(e=u(this,lt))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=u(this,lt))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=u(this,lt))==null?void 0:t.serialize(e)}hasAltText(){return!!u(this,lt)&&!u(this,lt).isEmpty()}hasAltTextData(){var e;return((e=u(this,lt))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=u(this,ze))==null||e.focusButton()}addCommentButton(){return this.canAddComment?u(this,ze)||_(this,ze,new qy(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(u(this,ao)){this._uiManager.isEditingMode()&&u(this,ao).classList.remove("hidden");return}this.hasComment&&(_(this,ao,u(this,ze).renderForStandalone()),this.div.append(u(this,ao)))}}removeStandaloneCommentButton(){u(this,ze).removeStandaloneCommentButton(),_(this,ao,null)}hideStandaloneCommentButton(){var e;(e=u(this,ao))==null||e.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:s,deleted:r}}=u(this,ze);return{text:t,richText:e,date:s,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){u(this,ze)||_(this,ze,new qy(this)),u(this,ze).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:s}){if(!t||(u(this,ze)||_(this,ze,new qy(this)),u(this,ze).setInitialText(e,s),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){var e;return(e=u(this,ze))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=u(this,ze))==null?void 0:e.isDeleted()}get hasComment(){return!!u(this,ze)&&!u(this,ze).isEmpty()&&!u(this,ze).isDeleted()}async editComment(e){u(this,ze)||_(this,ze,new qy(this)),u(this,ze).edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){u(this,ze).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,r]=e.rect,[i]=this.pageDimensions,[o]=this.pageTranslation,a=o+i+1,l=r-100,c=a+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[a,l,c,r]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){u(this,ze).data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var o;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=u(this,Gh)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),T(this,ce,gS).call(this);const[t,s]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*s/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/s).toFixed(2)}%`);const[r,i]=this.getInitialTranslation();return this.translate(r,i),PL(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(u(this,vc)||_(this,vc,new Xv({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:T(this,ce,qL).bind(this),onPinching:T(this,ce,XL).bind(this),onPinchEnd:T(this,ce,JL).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(o=this._uiManager._editorUndoBar)==null||o.hide(),e}pointerdown(e){const{isMac:t}=Sn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(_(this,gc,!0),this._isDraggable){T(this,ce,QL).call(this,e);return}T(this,ce,mS).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){u(this,gi)&&clearTimeout(u(this,gi)),_(this,gi,setTimeout(()=>{var e;_(this,gi,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,s){e.changeParent(this),this.x=t,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,s=this.rotation){const r=this.parentScale,[i,o]=this.pageDimensions,[a,l]=this.pageTranslation,c=e/r,h=t/r,f=this.x*i,p=this.y*o,m=this.width*i,y=this.height*o;switch(s){case 0:return[f+c+a,o-p-h-y+l,f+c+m+a,o-p-h+l];case 90:return[f+h+a,o-p+c+l,f+h+y+a,o-p+c+m+l];case 180:return[f-c-m+a,o-p+h+l,f-c+a,o-p+h+y+l];case 270:return[f-h-y+a,o-p-c-m+l,f-h+a,o-p-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[s,r,i,o]=e,a=i-s,l=o-r;switch(this.rotation){case 0:return[s,t-o,a,l];case 90:return[s,t-r,l,a];case 180:return[i,t-r,a,l];case 270:return[i,t-o,l,a];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&fe._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=u(this,ze))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:s,opacity:r,deleted:i,richText:o},uid:a,pageIndex:l,creationDate:c,modificationDate:h}=this;return{id:a,pageIndex:l,rect:this.getPDFRect(),richText:o,contentsObj:{str:e},creationDate:c,modificationDate:s||h,popupRef:!i,color:t,opacity:r}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),_(this,yc,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),_(this,yc,!1),!0):!1}isInEditMode(){return u(this,yc)}shouldGetKeyboardEvents(){return u(this,co)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:s,right:r}=this.getClientDimensions(),{innerHeight:i,innerWidth:o}=window;return t<o&&r>0&&e<i&&s>0}rebuild(){T(this,ce,gS).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){var s;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((s=this._initialData)==null?void 0:s.popupRef)||""}}static async deserialize(e,t,s){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:s,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});r.rotation=e.rotation,_(r,pc,e.accessibilityData),r._isCopy=e.isCopy||!1;const[i,o]=r.pageDimensions,[a,l,c,h]=r.getRectInCurrentCoords(e.rect,o);return r.x=a/i,r.y=l/o,r.width=c/i,r.height=h/o,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t,s;if((e=u(this,Ca))==null||e.abort(),_(this,Ca,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),u(this,gi)&&(clearTimeout(u(this,gi)),_(this,gi,null)),T(this,ce,Qf).call(this),this.removeEditToolbar(),u(this,dr)){for(const r of u(this,dr).values())clearTimeout(r);_(this,dr,null)}this.parent=null,(t=u(this,vc))==null||t.destroy(),_(this,vc,null),(s=u(this,hr))==null||s.remove(),_(this,hr,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(T(this,ce,YL).call(this),u(this,pn).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[s,r,i,o]=this.getPDFRect();return[fe._round(s+(i-s)*e),fe._round(r+(o-r)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return u(this,ze).commentPopupPositionInLayer}set commentPopupPosition(e){u(this,ze).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return u(this,ze).hasDefaultPopupPosition()}get commentButtonWidth(){return u(this,ze).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){var t;(t=u(this,ze))==null||t.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),_(this,lo,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=u(this,pn).children;if(!u(this,Mr)){_(this,Mr,Array.from(t));const o=T(this,ce,ZL).bind(this),a=T(this,ce,eD).bind(this),l=this._uiManager._signal;for(const c of u(this,Mr)){const h=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",o,{signal:l}),c.addEventListener("blur",a,{signal:l}),c.addEventListener("focus",T(this,ce,tD).bind(this,h),{signal:l}),c.setAttribute("data-l10n-id",fe._l10nResizer[h])}}const s=u(this,Mr)[0];let r=0;for(const o of t){if(o===s)break;r++}const i=(360-this.rotation+this.parentRotation)%360/90*(u(this,Mr).length/4);if(i!==r){if(i<r)for(let a=0;a<r-i;a++)u(this,pn).append(u(this,pn).firstChild);else if(i>r)for(let a=0;a<i-r;a++)u(this,pn).firstChild.before(u(this,pn).lastChild);let o=0;for(const a of t){const c=u(this,Mr)[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",fe._l10nResizer[c])}}T(this,ce,yS).call(this,0),_(this,co,!0),u(this,pn).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){u(this,co)&&T(this,ce,pS).call(this,u(this,Rm),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){T(this,ce,Qf).call(this),this.div.focus()}select(){var e,t,s;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,i;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((i=this._editToolbar)==null||i.show())});return}(t=this._editToolbar)==null||t.show(),(s=u(this,lt))==null||s.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,s,r,i;this.isSelected&&(this.isSelected=!1,(e=u(this,pn))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(i=u(this,lt))==null||i.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return u(this,Im)}set isEditing(e){_(this,Im,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){u(this,dr)||_(this,dr,new Map);const{action:s}=e;let r=u(this,dr).get(s);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),u(this,dr).delete(s),u(this,dr).size===0&&_(this,dr,null)},fe._telemetryTimeout),u(this,dr).set(s,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),_(this,Gh,!1)}disable(){this.div&&(this.div.tabIndex=-1),_(this,Gh,!0)}updateFakeAnnotationElement(e){if(!u(this,hr)&&!this.deleted){_(this,hr,e.addFakeAnnotation(this));return}if(this.deleted){u(this,hr).remove(),_(this,hr,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&u(this,hr).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const s=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),s.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};pc=new WeakMap,Mr=new WeakMap,lt=new WeakMap,ze=new WeakMap,ao=new WeakMap,Gh=new WeakMap,Ta=new WeakMap,Pm=new WeakMap,pn=new WeakMap,mc=new WeakMap,lo=new WeakMap,hr=new WeakMap,Ca=new WeakMap,Rm=new WeakMap,gc=new WeakMap,Es=new WeakMap,Im=new WeakMap,yc=new WeakMap,co=new WeakMap,gi=new WeakMap,Wh=new WeakMap,Yh=new WeakMap,dr=new WeakMap,vc=new WeakMap,jm=new WeakMap,dw=new WeakMap,ce=new WeakSet,hS=function([e,t],s,r){[s,r]=this.screenToPageTranslation(s,r),this.x+=s/e,this.y+=r/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Om=new WeakSet,dS=function(e,t,s){switch(s){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},O0=function(e){switch(e){case 90:{const[t,s]=this.pageDimensions;return[0,-t/s,s/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,s]=this.pageDimensions;return[0,t/s,-s/t,0]}default:return[1,0,0,1]}},YL=function(){if(u(this,pn))return;_(this,pn,document.createElement("div")),u(this,pn).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const s of e){const r=document.createElement("div");u(this,pn).append(r),r.classList.add("resizer",s),r.setAttribute("data-resizer-name",s),r.addEventListener("pointerdown",T(this,ce,KL).bind(this,s),{signal:t}),r.addEventListener("contextmenu",Ar,{signal:t}),r.tabIndex=-1}this.div.prepend(u(this,pn))},KL=function(e,t){var h;t.preventDefault();const{isMac:s}=Sn.platform;if(t.button!==0||t.ctrlKey&&s)return;(h=u(this,lt))==null||h.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,_(this,mc,[t.screenX,t.screenY]);const i=new AbortController,o=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",T(this,ce,pS).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",kt,{passive:!1,signal:o}),window.addEventListener("contextmenu",Ar,{signal:o}),_(this,lo,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const a=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const c=()=>{var f;i.abort(),this.parent.togglePointerEvents(!0),(f=u(this,lt))==null||f.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=a,this.div.style.cursor=l,T(this,ce,L0).call(this)};window.addEventListener("pointerup",c,{signal:o}),window.addEventListener("blur",c,{signal:o})},fS=function(e,t,s,r){this.width=s,this.height=r,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()},L0=function(){if(!u(this,lo))return;const{savedX:e,savedY:t,savedWidth:s,savedHeight:r}=u(this,lo);_(this,lo,null);const i=this.x,o=this.y,a=this.width,l=this.height;i===e&&o===t&&a===s&&l===r||this.addCommands({cmd:T(this,ce,fS).bind(this,i,o,a,l),undo:T(this,ce,fS).bind(this,e,t,s,r),mustExec:!0})},pS=function(e,t){const[s,r]=this.parentDimensions,i=this.x,o=this.y,a=this.width,l=this.height,c=fe.MIN_SIZE/s,h=fe.MIN_SIZE/r,f=T(this,ce,O0).call(this,this.rotation),p=($,B)=>[f[0]*$+f[2]*B,f[1]*$+f[3]*B],m=T(this,ce,O0).call(this,360-this.rotation),y=($,B)=>[m[0]*$+m[2]*B,m[1]*$+m[3]*B];let w,b,g=!1,v=!1;switch(e){case"topLeft":g=!0,w=($,B)=>[0,0],b=($,B)=>[$,B];break;case"topMiddle":w=($,B)=>[$/2,0],b=($,B)=>[$/2,B];break;case"topRight":g=!0,w=($,B)=>[$,0],b=($,B)=>[0,B];break;case"middleRight":v=!0,w=($,B)=>[$,B/2],b=($,B)=>[0,B/2];break;case"bottomRight":g=!0,w=($,B)=>[$,B],b=($,B)=>[0,0];break;case"bottomMiddle":w=($,B)=>[$/2,B],b=($,B)=>[$/2,0];break;case"bottomLeft":g=!0,w=($,B)=>[0,B],b=($,B)=>[$,0];break;case"middleLeft":v=!0,w=($,B)=>[0,B/2],b=($,B)=>[$,B/2];break}const x=w(a,l),S=b(a,l);let A=p(...S);const C=fe._round(i+A[0]),N=fe._round(o+A[1]);let P=1,R=1,O,M;if(t.fromKeyboard)({deltaX:O,deltaY:M}=t);else{const{screenX:$,screenY:B}=t,[I,j]=u(this,mc);[O,M]=this.screenToPageTranslation($-I,B-j),u(this,mc)[0]=$,u(this,mc)[1]=B}if([O,M]=y(O/s,M/r),g){const $=Math.hypot(a,l);P=R=Math.max(Math.min(Math.hypot(S[0]-x[0]-O,S[1]-x[1]-M)/$,1/a,1/l),c/a,h/l)}else v?P=Wn(Math.abs(S[0]-x[0]-O),c,1)/a:R=Wn(Math.abs(S[1]-x[1]-M),h,1)/l;const Y=fe._round(a*P),J=fe._round(l*R);A=p(...b(Y,J));const U=C-A[0],z=N-A[1];u(this,Es)||_(this,Es,[this.x,this.y,this.width,this.height]),this.width=Y,this.height=J,this.x=U,this.y=z,this.setDims(),this.fixAndSetPosition(),this._onResizing()},qL=function(){var e;_(this,lo,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=u(this,lt))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},XL=function(e,t,s){let i=.7*(s/t)+1-.7;if(i===1)return;const o=T(this,ce,O0).call(this,this.rotation),a=(C,N)=>[o[0]*C+o[2]*N,o[1]*C+o[3]*N],[l,c]=this.parentDimensions,h=this.x,f=this.y,p=this.width,m=this.height,y=fe.MIN_SIZE/l,w=fe.MIN_SIZE/c;i=Math.max(Math.min(i,1/p,1/m),y/p,w/m);const b=fe._round(p*i),g=fe._round(m*i);if(b===p&&g===m)return;u(this,Es)||_(this,Es,[h,f,p,m]);const v=a(p/2,m/2),x=fe._round(h+v[0]),S=fe._round(f+v[1]),A=a(b/2,g/2);this.x=x-A[0],this.y=S-A[1],this.width=b,this.height=g,this.setDims(),this.fixAndSetPosition(),this._onResizing()},JL=function(){var e;(e=u(this,lt))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),T(this,ce,L0).call(this)},mS=function(e){const{isMac:t}=Sn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},QL=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let s=!1;const r=new AbortController,i=this._uiManager.combinedSignal(r),o={capture:!0,passive:!1,signal:i},a=c=>{r.abort(),_(this,Ta,null),_(this,gc,!1),this._uiManager.endDragSession()||T(this,ce,mS).call(this,c),s&&this._onStopDragging()};t&&(_(this,Wh,e.clientX),_(this,Yh,e.clientY),_(this,Ta,e.pointerId),_(this,Pm,e.pointerType),window.addEventListener("pointermove",c=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:h,clientY:f,pointerId:p}=c;if(p!==u(this,Ta)){kt(c);return}const[m,y]=this.screenToPageTranslation(h-u(this,Wh),f-u(this,Yh));_(this,Wh,h),_(this,Yh,f),this._uiManager.dragSelectedEditors(m,y)},o),window.addEventListener("touchmove",kt,o),window.addEventListener("pointerdown",c=>{c.pointerType===u(this,Pm)&&(u(this,vc)||c.isPrimary)&&a(c),kt(c)},o));const l=c=>{if(!u(this,Ta)||u(this,Ta)===c.pointerId){a(c);return}kt(c)};window.addEventListener("pointerup",l,{signal:i}),window.addEventListener("blur",l,{signal:i})},gS=function(){if(u(this,Ca)||!this.div)return;_(this,Ca,new AbortController);const e=this._uiManager.combinedSignal(u(this,Ca));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},ZL=function(e){fe._resizerKeyboardManager.exec(this,e)},eD=function(e){var t;u(this,co)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==u(this,pn)&&T(this,ce,Qf).call(this)},tD=function(e){_(this,Rm,u(this,co)?e:"")},yS=function(e){if(u(this,Mr))for(const t of u(this,Mr))t.tabIndex=e},Qf=function(){_(this,co,!1),T(this,ce,yS).call(this,-1),T(this,ce,L0).call(this)},E(fe,Om),G(fe,"_l10n",null),G(fe,"_l10nResizer",null),G(fe,"_borderLineWidth",-1),G(fe,"_colorManager",new iS),G(fe,"_zIndex",1),G(fe,"_telemetryTimeout",1e3);let nt=fe;class DG extends nt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const uP=3285377520,tr=4294901760,ii=65535;class nD{constructor(e){this.h1=e?e&4294967295:uP,this.h2=e?e&4294967295:uP}update(e){let t,s;if(typeof e=="string"){t=new Uint8Array(e.length*2),s=0;for(let w=0,b=e.length;w<b;w++){const g=e.charCodeAt(w);g<=255?t[s++]=g:(t[s++]=g>>>8,t[s++]=g&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),s=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=s>>2,i=s-r*4,o=new Uint32Array(t.buffer,0,r);let a=0,l=0,c=this.h1,h=this.h2;const f=3432918353,p=461845907,m=f&ii,y=p&ii;for(let w=0;w<r;w++)w&1?(a=o[w],a=a*f&tr|a*m&ii,a=a<<15|a>>>17,a=a*p&tr|a*y&ii,c^=a,c=c<<13|c>>>19,c=c*5+3864292196):(l=o[w],l=l*f&tr|l*m&ii,l=l<<15|l>>>17,l=l*p&tr|l*y&ii,h^=l,h=h<<13|h>>>19,h=h*5+3864292196);switch(a=0,i){case 3:a^=t[r*4+2]<<16;case 2:a^=t[r*4+1]<<8;case 1:a^=t[r*4],a=a*f&tr|a*m&ii,a=a<<15|a>>>17,a=a*p&tr|a*y&ii,r&1?c^=a:h^=a}this.h1=c,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&tr|e*36045&ii,t=t*4283543511&tr|((t<<16|e>>>16)*2950163797&tr)>>>16,e^=t>>>1,e=e*444984403&tr|e*60499&ii,t=t*3301882366&tr|((t<<16|e>>>16)*3120437893&tr)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const vS=Object.freeze({map:null,hash:"",transfer:void 0});var wc,xc,uo,mn,fw,sD;class A1{constructor(){E(this,fw);E(this,wc,!1);E(this,xc,null);E(this,uo,null);E(this,mn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const s=u(this,mn).get(e);return s===void 0?t:Object.assign(t,s)}getRawValue(e){return u(this,mn).get(e)}remove(e){const t=u(this,mn).get(e);if(t!==void 0&&(t instanceof nt&&u(this,uo).delete(t.annotationElementId),u(this,mn).delete(e),u(this,mn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of u(this,mn).values())if(s instanceof nt)return;this.onAnnotationEditor(null)}}setValue(e,t){const s=u(this,mn).get(e);let r=!1;if(s!==void 0)for(const[i,o]of Object.entries(t))s[i]!==o&&(r=!0,s[i]=o);else r=!0,u(this,mn).set(e,t);r&&T(this,fw,sD).call(this),t instanceof nt&&((u(this,uo)||_(this,uo,new Map)).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return u(this,mn).has(e)}get size(){return u(this,mn).size}resetModified(){u(this,wc)&&(_(this,wc,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new rD(this)}get serializable(){if(u(this,mn).size===0)return vS;const e=new Map,t=new nD,s=[],r=Object.create(null);let i=!1;for(const[o,a]of u(this,mn)){const l=a instanceof nt?a.serialize(!1,r):a;l&&(e.set(o,l),t.update(`${o}:${JSON.stringify(l)}`),i||(i=!!l.bitmap))}if(i)for(const o of e.values())o.bitmap&&s.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:s}:vS}get editorStats(){let e=null;const t=new Map;let s=0,r=0;for(const i of u(this,mn).values()){if(!(i instanceof nt)){i.popup&&(i.popup.deleted?r+=1:s+=1);continue}i.isCommentDeleted?r+=1:i.hasEditedComment&&(s+=1);const o=i.telemetryFinalData;if(!o)continue;const{type:a}=o;t.has(a)||t.set(a,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const l=e[a]||(e[a]=new Map);for(const[c,h]of Object.entries(o)){if(c==="type")continue;let f=l.get(c);f||(f=new Map,l.set(c,f));const p=f.get(h)??0;f.set(h,p+1)}}if((r>0||s>0)&&(e||(e=Object.create(null)),e.comments={deleted:r,edited:s}),!e)return null;for(const[i,o]of t)e[i]=o.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){_(this,xc,null)}updateEditor(e,t){var r;const s=(r=u(this,uo))==null?void 0:r.get(e);return s?(s.updateFromAnnotationLayer(t),!0):!1}getEditor(e){var t;return((t=u(this,uo))==null?void 0:t.get(e))||null}get modifiedIds(){if(u(this,xc))return u(this,xc);const e=[];if(u(this,uo))for(const t of u(this,uo).values())t.serialize()&&e.push(t.annotationElementId);return _(this,xc,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return u(this,mn).entries()}}wc=new WeakMap,xc=new WeakMap,uo=new WeakMap,mn=new WeakMap,fw=new WeakSet,sD=function(){u(this,wc)||(_(this,wc,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Lm;class rD extends A1{constructor(t){super();E(this,Lm);const{map:s,hash:r,transfer:i}=t.serializable,o=structuredClone(s,i?{transfer:i}:null);_(this,Lm,{map:o,hash:r,transfer:i})}get print(){Ye("Should not call PrintAnnotationStorage.print")}get serializable(){return u(this,Lm)}get modifiedIds(){return ge(this,"modifiedIds",{ids:new Set,hash:""})}}Lm=new WeakMap;var Kh;class MG{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){E(this,Kh,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),u(this,Kh).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:s}){if(!(!e||u(this,Kh).has(e.loadedName))){if(Se(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:i,style:o}=e,a=new FontFace(r,i,o);this.addNativeFontFace(a);try{await a.load(),u(this,Kh).add(r),s==null||s(e)}catch{de(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}Ye("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(r){throw de(`Failed to load font '${s.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const r=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return ge(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return ge(this,"isSyncFontLoadingSupported",Gn||Sn.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Se(!r.done,"completeRequest() cannot be called twice."),r.done=!0;s.length>0&&s[0].done;){const i=s.shift();setTimeout(i.callback,0)}}const{loadingRequests:s}=this,r={done:!1,complete:t,callback:e};return s.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ge(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function s(S,A){return S.charCodeAt(A)<<24|S.charCodeAt(A+1)<<16|S.charCodeAt(A+2)<<8|S.charCodeAt(A+3)&255}function r(S,A,C,N){const P=S.substring(0,A),R=S.substring(A+C);return P+N+R}let i,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let c=0;function h(S,A){if(++c>30){de("Load test font never loaded."),A();return}if(l.font="30px "+S,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){A();return}setTimeout(h.bind(null,S,A))}const f=`lt${Date.now()}${this.loadTestFontId++}`;let p=this._loadTestFont;p=r(p,976,f.length,f);const y=16,w=1482184792;let b=s(p,y);for(i=0,o=f.length-3;i<o;i+=4)b=b-w+s(f,i)|0;i<f.length&&(b=b-w+s(f+"XXX",i)|0),p=r(p,y,4,yG(b));const g=`url(data:font/opentype;base64,${btoa(p)});`,v=`@font-face {font-family:"${f}";src:${g}}`;this.insertRule(v);const x=this._document.createElement("div");x.style.visibility="hidden",x.style.width=x.style.height="10px",x.style.position="absolute",x.style.top=x.style.left="0px";for(const S of[e.loadedName,f]){const A=this._document.createElement("span");A.textContent="Hi",A.style.fontFamily=S,x.append(A)}this._document.body.append(x),h(f,()=>{x.remove(),t.complete()})}}Kh=new WeakMap;var Fe;class FG{constructor(e,t=null,s,r){E(this,Fe);this.compiledGlyphs=Object.create(null),_(this,Fe,e),this._inspectFont=t,s&&Object.assign(this,s),r&&(this.charProcOperatorList=r)}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${bL(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(s=this._inspectFont)==null||s.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const s=this.loadedName+"_path_"+t;let r;try{r=e.get(s)}catch(o){de(`getPathGenerator - ignoring character: "${o}".`)}const i=EL(r);return this.fontExtraProperties||e.delete(s),this.compiledGlyphs[t]=i}get black(){return u(this,Fe).black}get bold(){return u(this,Fe).bold}get disableFontFace(){return u(this,Fe).disableFontFace??!1}get fontExtraProperties(){return u(this,Fe).fontExtraProperties??!1}get isInvalidPDFjsFont(){return u(this,Fe).isInvalidPDFjsFont}get isType3Font(){return u(this,Fe).isType3Font}get italic(){return u(this,Fe).italic}get missingFile(){return u(this,Fe).missingFile}get remeasure(){return u(this,Fe).remeasure}get vertical(){return u(this,Fe).vertical}get ascent(){return u(this,Fe).ascent}get defaultWidth(){return u(this,Fe).defaultWidth}get descent(){return u(this,Fe).descent}get bbox(){return u(this,Fe).bbox}get fontMatrix(){return u(this,Fe).fontMatrix}get fallbackName(){return u(this,Fe).fallbackName}get loadedName(){return u(this,Fe).loadedName}get mimetype(){return u(this,Fe).mimetype}get name(){return u(this,Fe).name}get data(){return u(this,Fe).data}clearData(){u(this,Fe).clearData()}get cssFontInfo(){return u(this,Fe).cssFontInfo}get systemFontInfo(){return u(this,Fe).systemFontInfo}get defaultVMetrics(){return u(this,Fe).defaultVMetrics}}Fe=new WeakMap;var qh,Xh,Dm,Jh,D0;const ph=class ph{constructor(e){E(this,Jh);E(this,qh);E(this,Xh);E(this,Dm);_(this,qh,e),_(this,Xh,new DataView(u(this,qh))),_(this,Dm,new TextDecoder)}static write(e){const t=new TextEncoder,s={};let r=0;for(const c of ph.strings){const h=t.encode(e[c]);s[c]=h,r+=4+h.length}const i=new ArrayBuffer(r),o=new Uint8Array(i),a=new DataView(i);let l=0;for(const c of ph.strings){const h=s[c],f=h.length;a.setUint32(l,f),o.set(h,l+4),l+=4+f}return Se(l===i.byteLength,"CssFontInfo.write: Buffer overflow"),i}get fontFamily(){return T(this,Jh,D0).call(this,0)}get fontWeight(){return T(this,Jh,D0).call(this,1)}get italicAngle(){return T(this,Jh,D0).call(this,2)}};qh=new WeakMap,Xh=new WeakMap,Dm=new WeakMap,Jh=new WeakSet,D0=function(e){Se(e<ph.strings.length,"Invalid string index");let t=0;for(let r=0;r<e;r++)t+=u(this,Xh).getUint32(t)+4;const s=u(this,Xh).getUint32(t);return u(this,Dm).decode(new Uint8Array(u(this,qh),t+4,s))},G(ph,"strings",["fontFamily","fontWeight","italicAngle"]);let Jv=ph;var ka,yi,bc,_c,Zf;const mh=class mh{constructor(e){E(this,_c);E(this,ka);E(this,yi);E(this,bc);_(this,ka,e),_(this,yi,new DataView(u(this,ka))),_(this,bc,new TextDecoder)}static write(e){const t=new TextEncoder,s={};let r=0;for(const p of mh.strings){const m=t.encode(e[p]);s[p]=m,r+=4+m.length}r+=4;let i,o,a=1+r;e.style&&(i=t.encode(e.style.style),o=t.encode(e.style.weight),a+=4+i.length+4+o.length);const l=new ArrayBuffer(a),c=new Uint8Array(l),h=new DataView(l);let f=0;h.setUint8(f++,e.guessFallback?1:0),h.setUint32(f,0),f+=4,r=0;for(const p of mh.strings){const m=s[p],y=m.length;r+=4+y,h.setUint32(f,y),c.set(m,f+4),f+=4+y}return h.setUint32(f-r-4,r),e.style&&(h.setUint32(f,i.length),c.set(i,f+4),f+=4+i.length,h.setUint32(f,o.length),c.set(o,f+4),f+=4+o.length),Se(f<=l.byteLength,"SubstitionInfo.write: Buffer overflow"),l.transferToFixedLength(f)}get guessFallback(){return u(this,yi).getUint8(0)!==0}get css(){return T(this,_c,Zf).call(this,0)}get loadedName(){return T(this,_c,Zf).call(this,1)}get baseFontName(){return T(this,_c,Zf).call(this,2)}get src(){return T(this,_c,Zf).call(this,3)}get style(){let e=1;e+=4+u(this,yi).getUint32(e);const t=u(this,yi).getUint32(e),s=u(this,bc).decode(new Uint8Array(u(this,ka),e+4,t));e+=4+t;const r=u(this,yi).getUint32(e),i=u(this,bc).decode(new Uint8Array(u(this,ka),e+4,r));return{style:s,weight:i}}};ka=new WeakMap,yi=new WeakMap,bc=new WeakMap,_c=new WeakSet,Zf=function(e){Se(e<mh.strings.length,"Invalid string index");let t=5;for(let r=0;r<e;r++)t+=u(this,yi).getUint32(t)+4;const s=u(this,yi).getUint32(t);return u(this,bc).decode(new Uint8Array(u(this,ka),t+4,s))},G(mh,"strings",["css","loadedName","baseFontName","src"]);let Qv=mh;var Qh,Zh,ed,td,As,vi,Mm,Be,Tt,Pr,M0,ep;const me=class me{constructor({data:e,extra:t}){E(this,Tt);E(this,vi);E(this,Mm);E(this,Be);_(this,vi,e),_(this,Mm,new TextDecoder),_(this,Be,new DataView(u(this,vi))),t&&Object.assign(this,t)}get black(){return T(this,Tt,Pr).call(this,0)}get bold(){return T(this,Tt,Pr).call(this,1)}get disableFontFace(){return T(this,Tt,Pr).call(this,2)}get fontExtraProperties(){return T(this,Tt,Pr).call(this,3)}get isInvalidPDFjsFont(){return T(this,Tt,Pr).call(this,4)}get isType3Font(){return T(this,Tt,Pr).call(this,5)}get italic(){return T(this,Tt,Pr).call(this,6)}get missingFile(){return T(this,Tt,Pr).call(this,7)}get remeasure(){return T(this,Tt,Pr).call(this,8)}get vertical(){return T(this,Tt,Pr).call(this,9)}get ascent(){return T(this,Tt,M0).call(this,0)}get defaultWidth(){return T(this,Tt,M0).call(this,1)}get descent(){return T(this,Tt,M0).call(this,2)}get bbox(){let e=u(me,Zh);if(u(this,Be).getUint8(e)===0)return;e+=1;const s=[];for(let r=0;r<4;r++)s.push(u(this,Be).getInt16(e,!0)),e+=2;return s}get fontMatrix(){let e=u(me,ed);if(u(this,Be).getUint8(e)===0)return;e+=1;const s=[];for(let r=0;r<6;r++)s.push(u(this,Be).getFloat64(e,!0)),e+=8;return s}get defaultVMetrics(){let e=u(me,td);if(u(this,Be).getUint8(e)===0)return;e+=1;const s=[];for(let r=0;r<3;r++)s.push(u(this,Be).getInt16(e,!0)),e+=2;return s}get fallbackName(){return T(this,Tt,ep).call(this,0)}get loadedName(){return T(this,Tt,ep).call(this,1)}get mimetype(){return T(this,Tt,ep).call(this,2)}get name(){return T(this,Tt,ep).call(this,3)}get data(){let e=u(me,As);const t=u(this,Be).getUint32(e);e+=4+t;const s=u(this,Be).getUint32(e);e+=4+s;const r=u(this,Be).getUint32(e);e+=4+r;const i=u(this,Be).getUint32(e);if(i!==0)return new Uint8Array(u(this,vi),e+4,i)}clearData(){let e=u(me,As);const t=u(this,Be).getUint32(e);e+=4+t;const s=u(this,Be).getUint32(e);e+=4+s;const r=u(this,Be).getUint32(e);e+=4+r;const i=u(this,Be).getUint32(e);new Uint8Array(u(this,vi),e+4,i).fill(0),u(this,Be).setUint32(e,0)}get cssFontInfo(){let e=u(me,As);const t=u(this,Be).getUint32(e);e+=4+t;const s=u(this,Be).getUint32(e);e+=4+s;const r=u(this,Be).getUint32(e);if(r===0)return null;const i=new Uint8Array(r);return i.set(new Uint8Array(u(this,vi),e+4,r)),new Jv(i.buffer)}get systemFontInfo(){let e=u(me,As);const t=u(this,Be).getUint32(e);e+=4+t;const s=u(this,Be).getUint32(e);if(s===0)return null;const r=new Uint8Array(s);return r.set(new Uint8Array(u(this,vi),e+4,s)),new Qv(r.buffer)}static write(e){const t=e.systemFontInfo?Qv.write(e.systemFontInfo):null,s=e.cssFontInfo?Jv.write(e.cssFontInfo):null,r=new TextEncoder,i={};let o=0;for(const w of me.strings)i[w]=r.encode(e[w]),o+=4+i[w].length;const a=u(me,As)+4+o+4+(t?t.byteLength:0)+4+(s?s.byteLength:0)+4+(e.data?e.data.length:0),l=new ArrayBuffer(a),c=new Uint8Array(l),h=new DataView(l);let f=0;const p=me.bools.length;let m=0,y=0;for(let w=0;w<p;w++){const b=e[me.bools[w]];m|=(b===void 0?0:b?2:1)<<y,y+=2,(y===8||w===p-1)&&(h.setUint8(f++,m),m=0,y=0)}Se(f===u(me,Qh),"FontInfo.write: Boolean properties offset mismatch");for(const w of me.numbers)h.setFloat64(f,e[w]),f+=8;if(Se(f===u(me,Zh),"FontInfo.write: Number properties offset mismatch"),e.bbox){h.setUint8(f++,4);for(const w of e.bbox)h.setInt16(f,w,!0),f+=2}else h.setUint8(f++,0),f+=2*4;if(Se(f===u(me,ed),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){h.setUint8(f++,6);for(const w of e.fontMatrix)h.setFloat64(f,w,!0),f+=8}else h.setUint8(f++,0),f+=8*6;if(Se(f===u(me,td),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){h.setUint8(f++,1);for(const w of e.defaultVMetrics)h.setInt16(f,w,!0),f+=2}else h.setUint8(f++,0),f+=3*2;Se(f===u(me,As),"FontInfo.write: DefaultVMetrics properties offset mismatch"),h.setUint32(u(me,As),0),f+=4;for(const w of me.strings){const b=i[w],g=b.length;h.setUint32(f,g),c.set(b,f+4),f+=4+g}if(h.setUint32(u(me,As),f-u(me,As)-4),!t)h.setUint32(f,0),f+=4;else{const w=t.byteLength;h.setUint32(f,w),Se(f+4+w<=l.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),c.set(new Uint8Array(t),f+4),f+=4+w}if(!s)h.setUint32(f,0),f+=4;else{const w=s.byteLength;h.setUint32(f,w),Se(f+4+w<=l.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),c.set(new Uint8Array(s),f+4),f+=4+w}return e.data===void 0?(h.setUint32(f,0),f+=4):(h.setUint32(f,e.data.length),c.set(e.data,f+4),f+=4+e.data.length),Se(f<=l.byteLength,"FontInfo.write: Buffer overflow"),l.transferToFixedLength(f)}};Qh=new WeakMap,Zh=new WeakMap,ed=new WeakMap,td=new WeakMap,As=new WeakMap,vi=new WeakMap,Mm=new WeakMap,Be=new WeakMap,Tt=new WeakSet,Pr=function(e){Se(e<me.bools.length,"Invalid boolean index");const t=Math.floor(e/4),s=e*2%8,r=u(this,Be).getUint8(t)>>s&3;return r===0?void 0:r===2},M0=function(e){return Se(e<me.numbers.length,"Invalid number index"),u(this,Be).getFloat64(u(me,Qh)+e*8)},ep=function(e){Se(e<me.strings.length,"Invalid string index");let t=u(me,As)+4;for(let i=0;i<e;i++)t+=u(this,Be).getUint32(t)+4;const s=u(this,Be).getUint32(t),r=new Uint8Array(s);return r.set(new Uint8Array(u(this,vi),t+4,s)),u(this,Mm).decode(r)},G(me,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),G(me,"numbers",["ascent","defaultWidth","descent"]),G(me,"strings",["fallbackName","loadedName","mimetype","name"]),E(me,Qh,Math.ceil(me.bools.length*2/8)),E(me,Zh,u(me,Qh)+me.numbers.length*8),E(me,ed,u(me,Zh)+1+2*4),E(me,td,u(me,ed)+1+8*6),E(me,As,u(me,td)+1+2*3);let wS=me;var Fm,Bm,Um,$m,Vm,Hm,zm,Gm;const Je=class Je{constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(e){let t,s=null,r=[],i=[],o=[],a=[],l=null,c=null;switch(e[0]){case"RadialAxial":t=e[1]==="axial"?1:2,s=e[2],o=e[3],t===1?r.push(...e[4],...e[5]):r.push(e[4][0],e[4][1],e[6],e[5][0],e[5][1],e[7]);break;case"Mesh":t=3,l=e[1],r=e[2],i=e[3],a=e[4]||[],s=e[6],c=e[7];break;default:throw new Error(`Unsupported pattern type: ${e[0]}`)}const h=Math.floor(r.length/2),f=Math.floor(i.length/3),p=o.length,m=a.length;let y=0;for(const A of a)y+=1,y=Math.ceil(y/4)*4,y+=4+A.coords.length*4,y+=4+A.colors.length*4,A.verticesPerRow!==void 0&&(y+=4);const w=20+h*8+f*3+p*8+(s?16:0)+(c?3:0)+y,b=new ArrayBuffer(w),g=new DataView(b),v=new Uint8Array(b);g.setUint8(u(Je,Fm),t),g.setUint8(u(Je,Bm),s?1:0),g.setUint8(u(Je,Um),c?1:0),g.setUint8(u(Je,$m),l),g.setUint32(u(Je,Vm),h,!0),g.setUint32(u(Je,Hm),f,!0),g.setUint32(u(Je,zm),p,!0),g.setUint32(u(Je,Gm),m,!0);let x=20;new Float32Array(b,x,h*2).set(r),x+=h*8,v.set(i,x),x+=f*3;for(const[A,C]of o)g.setFloat32(x,A,!0),x+=4,g.setUint32(x,parseInt(C.slice(1),16),!0),x+=4;if(s)for(const A of s)g.setFloat32(x,A,!0),x+=4;c&&(v.set(c,x),x+=3);for(let A=0;A<a.length;A++){const C=a[A];g.setUint8(x,C.type),x+=1,x=Math.ceil(x/4)*4,g.setUint32(x,C.coords.length,!0),x+=4,new Int32Array(b,x,C.coords.length).set(C.coords),x+=C.coords.length*4,g.setUint32(x,C.colors.length,!0),x+=4,new Int32Array(b,x,C.colors.length).set(C.colors),x+=C.colors.length*4,C.verticesPerRow!==void 0&&(g.setUint32(x,C.verticesPerRow,!0),x+=4)}return b}getIR(){const e=this.view,t=this.data[u(Je,Fm)],s=!!this.data[u(Je,Bm)],r=!!this.data[u(Je,Um)],i=e.getUint32(u(Je,Vm),!0),o=e.getUint32(u(Je,Hm),!0),a=e.getUint32(u(Je,zm),!0),l=e.getUint32(u(Je,Gm),!0);let c=20;const h=new Float32Array(this.buffer,c,i*2);c+=i*8;const f=new Uint8Array(this.buffer,c,o*3);c+=o*3;const p=[];for(let b=0;b<a;++b){const g=e.getFloat32(c,!0);c+=4;const v=e.getUint32(c,!0);c+=4,p.push([g,`#${v.toString(16).padStart(6,"0")}`])}let m=null;if(s){m=[];for(let b=0;b<4;++b)m.push(e.getFloat32(c,!0)),c+=4}let y=null;r&&(y=new Uint8Array(this.buffer,c,3),c+=3);const w=[];for(let b=0;b<l;++b){const g=e.getUint8(c);c+=1,c=Math.ceil(c/4)*4;const v=e.getUint32(c,!0);c+=4;const x=new Int32Array(this.buffer,c,v);c+=v*4;const S=e.getUint32(c,!0);c+=4;const A=new Int32Array(this.buffer,c,S);c+=S*4;const C={type:g,coords:x,colors:A};g===J_.LATTICE&&(C.verticesPerRow=e.getUint32(c,!0),c+=4),w.push(C)}if(t===1)return["RadialAxial","axial",m,p,Array.from(h.slice(0,2)),Array.from(h.slice(2,4)),null,null];if(t===2)return["RadialAxial","radial",m,p,[h[0],h[1]],[h[3],h[4]],h[2],h[5]];if(t===3){const b=this.data[u(Je,$m)];let g=null;if(h.length>0){let v=h[0],x=h[0],S=h[1],A=h[1];for(let C=0;C<h.length;C+=2){const N=h[C],P=h[C+1];v=v>N?N:v,S=S>P?P:S,x=x<N?N:x,A=A<P?P:A}g=[v,S,x,A]}return["Mesh",b,h,f,w,g,m,y]}throw new Error(`Unsupported pattern kind: ${t}`)}};Fm=new WeakMap,Bm=new WeakMap,Um=new WeakMap,$m=new WeakMap,Vm=new WeakMap,Hm=new WeakMap,zm=new WeakMap,Gm=new WeakMap,E(Je,Fm,0),E(Je,Bm,1),E(Je,Um,2),E(Je,$m,3),E(Je,Vm,4),E(Je,Hm,8),E(Je,zm,12),E(Je,Gm,16);let xS=Je;function BG(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(Gn)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function UG(n){if(Gn&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return uy(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Xy(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const bS=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,$G=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",VG=_G.bind(null,bS,$G);var ho,pw;class HG{constructor(){E(this,ho,new Map);E(this,pw,Promise.resolve())}postMessage(e,t){const s={data:structuredClone(e,t?{transfer:t}:null)};u(this,pw).then(()=>{for(const[r]of u(this,ho))r.call(this,s)})}addEventListener(e,t,s=null){let r=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:i}=s;if(i.aborted){de("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);r=()=>i.removeEventListener("abort",o),i.addEventListener("abort",o)}u(this,ho).set(t,r)}removeEventListener(e,t){const s=u(this,ho).get(t);s==null||s(),u(this,ho).delete(t)}terminate(){for(const[,e]of u(this,ho))e==null||e();u(this,ho).clear()}}ho=new WeakMap,pw=new WeakMap;const Jy={DATA:1,ERROR:2},Ot={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function hP(){}function ts(n){if(n instanceof gl||n instanceof Q_||n instanceof sP||n instanceof Yv||n instanceof mb)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||Ye('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new gl(n.message);case"InvalidPDFException":return new Q_(n.message);case"PasswordException":return new sP(n.message,n.code);case"ResponseException":return new Yv(n.message,n.status,n.missing);case"UnknownErrorException":return new mb(n.message,n.details)}return new mb(n.message,n.toString())}var nd,br,iD,oD,aD,F0;class tp{constructor(e,t,s){E(this,br);E(this,nd,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",T(this,br,iD).bind(this),{signal:u(this,nd).signal})}on(e,t){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=t}send(e,t,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},s)}sendWithPromise(e,t,s){const r=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[r]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},s)}catch(o){i.reject(o)}return i.promise}sendWithStream(e,t,s,r){const i=this.streamId++,o=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const h=Promise.withResolvers();return this.streamControllers[i]={controller:c,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:o,targetName:a,action:e,streamId:i,data:t,desiredSize:c.desiredSize},r),h.promise},pull:c=>{const h=Promise.withResolvers();return this.streamControllers[i].pullCall=h,l.postMessage({sourceName:o,targetName:a,stream:Ot.PULL,streamId:i,desiredSize:c.desiredSize}),h.promise},cancel:c=>{Se(c instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[i].cancelCall=h,this.streamControllers[i].isClosed=!0,l.postMessage({sourceName:o,targetName:a,stream:Ot.CANCEL,streamId:i,reason:ts(c)}),h.promise}},s)}destroy(){var e;(e=u(this,nd))==null||e.abort(),_(this,nd,null)}}nd=new WeakMap,br=new WeakSet,iD=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){T(this,br,aD).call(this,e);return}if(e.callback){const s=e.callbackId,r=this.callbackCapabilities[s];if(!r)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],e.callback===Jy.DATA)r.resolve(e.data);else if(e.callback===Jy.ERROR)r.reject(ts(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const s=this.sourceName,r=e.sourceName,i=this.comObj;Promise.try(t,e.data).then(function(o){i.postMessage({sourceName:s,targetName:r,callback:Jy.DATA,callbackId:e.callbackId,data:o})},function(o){i.postMessage({sourceName:s,targetName:r,callback:Jy.ERROR,callbackId:e.callbackId,reason:ts(o)})});return}if(e.streamId){T(this,br,oD).call(this,e);return}t(e.data)},oD=function(e){const t=e.streamId,s=this.sourceName,r=e.sourceName,i=this.comObj,o=this,a=this.actionHandler[e.action],l={enqueue(c,h=1,f){if(this.isCancelled)return;const p=this.desiredSize;this.desiredSize-=h,p>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:s,targetName:r,stream:Ot.ENQUEUE,streamId:t,chunk:c},f)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:s,targetName:r,stream:Ot.CLOSE,streamId:t}),delete o.streamSinks[t])},error(c){Se(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:s,targetName:r,stream:Ot.ERROR,streamId:t,reason:ts(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,Promise.try(a,e.data,l).then(function(){i.postMessage({sourceName:s,targetName:r,stream:Ot.START_COMPLETE,streamId:t,success:!0})},function(c){i.postMessage({sourceName:s,targetName:r,stream:Ot.START_COMPLETE,streamId:t,reason:ts(c)})})},aD=function(e){const t=e.streamId,s=this.sourceName,r=e.sourceName,i=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case Ot.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(ts(e.reason));break;case Ot.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(ts(e.reason));break;case Ot.PULL:if(!a){i.postMessage({sourceName:s,targetName:r,stream:Ot.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||hP).then(function(){i.postMessage({sourceName:s,targetName:r,stream:Ot.PULL_COMPLETE,streamId:t,success:!0})},function(c){i.postMessage({sourceName:s,targetName:r,stream:Ot.PULL_COMPLETE,streamId:t,reason:ts(c)})});break;case Ot.ENQUEUE:if(Se(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case Ot.CLOSE:if(Se(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),T(this,br,F0).call(this,o,t);break;case Ot.ERROR:Se(o,"error should have stream controller"),o.controller.error(ts(e.reason)),T(this,br,F0).call(this,o,t);break;case Ot.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(ts(e.reason)),T(this,br,F0).call(this,o,t);break;case Ot.CANCEL:if(!a)break;const l=ts(e.reason);Promise.try(a.onCancel||hP,l).then(function(){i.postMessage({sourceName:s,targetName:r,stream:Ot.CANCEL_COMPLETE,streamId:t,success:!0})},function(c){i.postMessage({sourceName:s,targetName:r,stream:Ot.CANCEL_COMPLETE,streamId:t,reason:ts(c)})}),a.sinkCapability.reject(l),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},F0=async function(e,t){var s,r,i;await Promise.allSettled([(s=e.startCall)==null?void 0:s.promise,(r=e.pullCall)==null?void 0:r.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var Wm;class lD{constructor({enableHWA:e=!1}){E(this,Wm,!1);_(this,Wm,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,t);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!u(this,Wm)})}}reset(e,t,s){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Ye("Abstract method `_createCanvas` called.")}}Wm=new WeakMap;class zG extends lD{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const s=this._document.createElement("canvas");return s.width=e,s.height=t,s}}class cD{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Ye("Abstract method `_fetch` called.")}}class dP extends cD{async _fetch(e){const t=await hy(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):uy(t)}}class uD{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,s,r,i){return"none"}destroy(e=!1){}}var Sc,sd,fo,po,jn,Ec,Ac,Z,Nn,np,Vu,B0,Hu,hD,_S,zu,sp,rp,SS,ip;class GG extends uD{constructor({docId:t,ownerDocument:s=globalThis.document}){super();E(this,Z);E(this,Sc);E(this,sd);E(this,fo);E(this,po);E(this,jn);E(this,Ec);E(this,Ac,0);_(this,po,t),_(this,jn,s)}addFilter(t){if(!t)return"none";let s=u(this,Z,Nn).get(t);if(s)return s;const[r,i,o]=T(this,Z,B0).call(this,t),a=t.length===1?r:`${r}${i}${o}`;if(s=u(this,Z,Nn).get(a),s)return u(this,Z,Nn).set(t,s),s;const l=`g_${u(this,po)}_transfer_map_${$t(this,Ac)._++}`,c=T(this,Z,Hu).call(this,l);u(this,Z,Nn).set(t,c),u(this,Z,Nn).set(a,c);const h=T(this,Z,zu).call(this,l);return T(this,Z,rp).call(this,r,i,o,h),c}addHCMFilter(t,s){var y;const r=`${t}-${s}`,i="base";let o=u(this,Z,np).get(i);if((o==null?void 0:o.key)===r||(o?((y=o.filter)==null||y.remove(),o.key=r,o.url="none",o.filter=null):(o={key:r,url:"none",filter:null},u(this,Z,np).set(i,o)),!t||!s))return o.url;const a=T(this,Z,ip).call(this,t);t=ne.makeHexColor(...a);const l=T(this,Z,ip).call(this,s);if(s=ne.makeHexColor(...l),u(this,Z,Vu).style.color="",t==="#000000"&&s==="#ffffff"||t===s)return o.url;const c=new Array(256);for(let w=0;w<=255;w++){const b=w/255;c[w]=b<=.03928?b/12.92:((b+.055)/1.055)**2.4}const h=c.join(","),f=`g_${u(this,po)}_hcm_filter`,p=o.filter=T(this,Z,zu).call(this,f);T(this,Z,rp).call(this,h,h,h,p),T(this,Z,_S).call(this,p);const m=(w,b)=>{const g=a[w]/255,v=l[w]/255,x=new Array(b+1);for(let S=0;S<=b;S++)x[S]=g+S/b*(v-g);return x.join(",")};return T(this,Z,rp).call(this,m(0,5),m(1,5),m(2,5),p),o.url=T(this,Z,Hu).call(this,f),o.url}addAlphaFilter(t){let s=u(this,Z,Nn).get(t);if(s)return s;const[r]=T(this,Z,B0).call(this,[t]),i=`alpha_${r}`;if(s=u(this,Z,Nn).get(i),s)return u(this,Z,Nn).set(t,s),s;const o=`g_${u(this,po)}_alpha_map_${$t(this,Ac)._++}`,a=T(this,Z,Hu).call(this,o);u(this,Z,Nn).set(t,a),u(this,Z,Nn).set(i,a);const l=T(this,Z,zu).call(this,o);return T(this,Z,SS).call(this,r,l),a}addLuminosityFilter(t){let s=u(this,Z,Nn).get(t||"luminosity");if(s)return s;let r,i;if(t?([r]=T(this,Z,B0).call(this,[t]),i=`luminosity_${r}`):i="luminosity",s=u(this,Z,Nn).get(i),s)return u(this,Z,Nn).set(t,s),s;const o=`g_${u(this,po)}_luminosity_map_${$t(this,Ac)._++}`,a=T(this,Z,Hu).call(this,o);u(this,Z,Nn).set(t,a),u(this,Z,Nn).set(i,a);const l=T(this,Z,zu).call(this,o);return T(this,Z,hD).call(this,l),t&&T(this,Z,SS).call(this,r,l),a}addHighlightHCMFilter(t,s,r,i,o){var v;const a=`${s}-${r}-${i}-${o}`;let l=u(this,Z,np).get(t);if((l==null?void 0:l.key)===a||(l?((v=l.filter)==null||v.remove(),l.key=a,l.url="none",l.filter=null):(l={key:a,url:"none",filter:null},u(this,Z,np).set(t,l)),!s||!r))return l.url;const[c,h]=[s,r].map(T(this,Z,ip).bind(this));let f=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),p=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[m,y]=[i,o].map(T(this,Z,ip).bind(this));p<f&&([f,p,m,y]=[p,f,y,m]),u(this,Z,Vu).style.color="";const w=(x,S,A)=>{const C=new Array(256),N=(p-f)/A,P=x/255,R=(S-x)/(255*A);let O=0;for(let M=0;M<=A;M++){const Y=Math.round(f+M*N),J=P+M*R;for(let U=O;U<=Y;U++)C[U]=J;O=Y+1}for(let M=O;M<256;M++)C[M]=C[O-1];return C.join(",")},b=`g_${u(this,po)}_hcm_${t}_filter`,g=l.filter=T(this,Z,zu).call(this,b);return T(this,Z,_S).call(this,g),T(this,Z,rp).call(this,w(m[0],y[0],5),w(m[1],y[1],5),w(m[2],y[2],5),g),l.url=T(this,Z,Hu).call(this,b),l.url}destroy(t=!1){var s,r,i,o;t&&((s=u(this,Ec))!=null&&s.size)||((r=u(this,fo))==null||r.parentNode.parentNode.remove(),_(this,fo,null),(i=u(this,sd))==null||i.clear(),_(this,sd,null),(o=u(this,Ec))==null||o.clear(),_(this,Ec,null),_(this,Ac,0))}}Sc=new WeakMap,sd=new WeakMap,fo=new WeakMap,po=new WeakMap,jn=new WeakMap,Ec=new WeakMap,Ac=new WeakMap,Z=new WeakSet,Nn=function(){return u(this,sd)||_(this,sd,new Map)},np=function(){return u(this,Ec)||_(this,Ec,new Map)},Vu=function(){if(!u(this,fo)){const t=u(this,jn).createElement("div"),{style:s}=t;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const r=u(this,jn).createElementNS(Wi,"svg");r.setAttribute("width",0),r.setAttribute("height",0),_(this,fo,u(this,jn).createElementNS(Wi,"defs")),t.append(r),r.append(u(this,fo)),u(this,jn).body.append(t)}return u(this,fo)},B0=function(t){if(t.length===1){const c=t[0],h=new Array(256);for(let p=0;p<256;p++)h[p]=c[p]/255;const f=h.join(",");return[f,f,f]}const[s,r,i]=t,o=new Array(256),a=new Array(256),l=new Array(256);for(let c=0;c<256;c++)o[c]=s[c]/255,a[c]=r[c]/255,l[c]=i[c]/255;return[o.join(","),a.join(","),l.join(",")]},Hu=function(t){if(u(this,Sc)===void 0){_(this,Sc,"");const s=u(this,jn).URL;s!==u(this,jn).baseURI&&(ax(s)?de('#createUrl: ignore "data:"-URL for performance reasons.'):_(this,Sc,vL(s,"")))}return`url(${u(this,Sc)}#${t})`},hD=function(t){const s=u(this,jn).createElementNS(Wi,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(s)},_S=function(t){const s=u(this,jn).createElementNS(Wi,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(s)},zu=function(t){const s=u(this,jn).createElementNS(Wi,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",t),u(this,Z,Vu).append(s),s},sp=function(t,s,r){const i=u(this,jn).createElementNS(Wi,s);i.setAttribute("type","discrete"),i.setAttribute("tableValues",r),t.append(i)},rp=function(t,s,r,i){const o=u(this,jn).createElementNS(Wi,"feComponentTransfer");i.append(o),T(this,Z,sp).call(this,o,"feFuncR",t),T(this,Z,sp).call(this,o,"feFuncG",s),T(this,Z,sp).call(this,o,"feFuncB",r)},SS=function(t,s){const r=u(this,jn).createElementNS(Wi,"feComponentTransfer");s.append(r),T(this,Z,sp).call(this,r,"feFuncA",t)},ip=function(t){return u(this,Z,Vu).style.color=t,fy(getComputedStyle(u(this,Z,Vu)).getPropertyValue("color"))};class dD{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Ye("Abstract method `_fetch` called.")}}class fP extends dD{async _fetch(e){const t=await hy(e,"arraybuffer");return new Uint8Array(t)}}class fD{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){Ye("Abstract method `_fetch` called.")}}class pP extends fD{async _fetch(e){const t=await hy(e,"arraybuffer");return new Uint8Array(t)}}Gn&&de("Please use the `legacy` build in Node.js environments.");async function T1(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class WG extends uD{}class YG extends lD{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class KG extends cD{async _fetch(e){return T1(e)}}class qG extends dD{async _fetch(e){return T1(e)}}class XG extends fD{async _fetch(e){return T1(e)}}const Mu="__forcedDependency",{floor:mP,ceil:gP}=Math;function Qy(n,e,t,s,r,i){n[e*4+0]=Math.min(n[e*4+0],t),n[e*4+1]=Math.min(n[e*4+1],s),n[e*4+2]=Math.max(n[e*4+2],r),n[e*4+3]=Math.max(n[e*4+3],i)}const ES=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var rd,Na;class JG{constructor(e,t){E(this,rd);E(this,Na);_(this,rd,e),_(this,Na,t)}get length(){return u(this,rd).length}isEmpty(e){return u(this,rd)[e]===ES}minX(e){return u(this,Na)[e*4+0]/256}minY(e){return u(this,Na)[e*4+1]/256}maxX(e){return(u(this,Na)[e*4+2]+1)/256}maxY(e){return(u(this,Na)[e*4+3]+1)/256}}rd=new WeakMap,Na=new WeakMap;const Zy=(n,e)=>{if(!n)return;let t=n.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},n.set(e,t)),t};var rs,is,Tc,Fr,Cc,mo,Oe,Ue,go,os,Ym,id,kc,Nc,yo,On,wi,Km,AS;class QG{constructor(e,t,s=!1){E(this,Km);E(this,rs,{__proto__:null});E(this,is,{__proto__:null,transform:[],moveText:[],sameLineText:[],[Mu]:[]});E(this,Tc,new Map);E(this,Fr,[]);E(this,Cc,[]);E(this,mo,[[1,0,0,1,0,0]]);E(this,Oe,[-1/0,-1/0,1/0,1/0]);E(this,Ue,new Float64Array([1/0,1/0,-1/0,-1/0]));E(this,go,-1);E(this,os,new Set);E(this,Ym,new Map);E(this,id,new Map);E(this,kc);E(this,Nc);E(this,yo);E(this,On);E(this,wi);_(this,kc,e.width),_(this,Nc,e.height),T(this,Km,AS).call(this,t),s&&_(this,wi,new Map)}growOperationsCount(e){e>=u(this,On).length&&T(this,Km,AS).call(this,e,u(this,On))}save(e){return _(this,rs,{__proto__:u(this,rs)}),_(this,is,{__proto__:u(this,is),transform:{__proto__:u(this,is).transform},moveText:{__proto__:u(this,is).moveText},sameLineText:{__proto__:u(this,is).sameLineText},[Mu]:{__proto__:u(this,is)[Mu]}}),_(this,Oe,{__proto__:u(this,Oe)}),u(this,Fr).push(e),this}restore(e){var r;const t=Object.getPrototypeOf(u(this,rs));if(t===null)return this;_(this,rs,t),_(this,is,Object.getPrototypeOf(u(this,is))),_(this,Oe,Object.getPrototypeOf(u(this,Oe)));const s=u(this,Fr).pop();return s!==void 0&&((r=Zy(u(this,wi),e))==null||r.dependencies.add(s),u(this,On)[e]=u(this,On)[s]),this}recordOpenMarker(e){return u(this,Fr).push(e),this}getOpenMarker(){return u(this,Fr).length===0?null:u(this,Fr).at(-1)}recordCloseMarker(e){var s;const t=u(this,Fr).pop();return t!==void 0&&((s=Zy(u(this,wi),e))==null||s.dependencies.add(t),u(this,On)[e]=u(this,On)[t]),this}beginMarkedContent(e){return u(this,Cc).push(e),this}endMarkedContent(e){var s;const t=u(this,Cc).pop();return t!==void 0&&((s=Zy(u(this,wi),e))==null||s.dependencies.add(t),u(this,On)[e]=u(this,On)[t]),this}pushBaseTransform(e){return u(this,mo).push(ne.multiplyByDOMMatrix(u(this,mo).at(-1),e.getTransform())),this}popBaseTransform(){return u(this,mo).length>1&&u(this,mo).pop(),this}recordSimpleData(e,t){return u(this,rs)[e]=t,this}recordIncrementalData(e,t){return u(this,is)[e].push(t),this}resetIncrementalData(e,t){return u(this,is)[e].length=0,this}recordNamedData(e,t){return u(this,Tc).set(e,t),this}recordSimpleDataFromNamed(e,t,s){u(this,rs)[e]=u(this,Tc).get(t)??s}recordFutureForcedDependency(e,t){return this.recordIncrementalData(Mu,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in u(this,rs)&&this.recordFutureForcedDependency(t,u(this,rs)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of u(this,os))this.recordFutureForcedDependency(Mu,e);return this}resetBBox(e){return u(this,go)!==e&&(_(this,go,e),u(this,Ue)[0]=1/0,u(this,Ue)[1]=1/0,u(this,Ue)[2]=-1/0,u(this,Ue)[3]=-1/0),this}recordClipBox(e,t,s,r,i,o){const a=ne.multiplyByDOMMatrix(u(this,mo).at(-1),t.getTransform()),l=[1/0,1/0,-1/0,-1/0];ne.axialAlignedBoundingBox([s,i,r,o],a,l);const c=ne.intersect(u(this,Oe),l);return c?(u(this,Oe)[0]=c[0],u(this,Oe)[1]=c[1],u(this,Oe)[2]=c[2],u(this,Oe)[3]=c[3]):(u(this,Oe)[0]=u(this,Oe)[1]=1/0,u(this,Oe)[2]=u(this,Oe)[3]=-1/0),this}recordBBox(e,t,s,r,i,o){const a=u(this,Oe);if(a[0]===1/0)return this;const l=ne.multiplyByDOMMatrix(u(this,mo).at(-1),t.getTransform());if(a[0]===-1/0)return ne.axialAlignedBoundingBox([s,i,r,o],l,u(this,Ue)),this;const c=[1/0,1/0,-1/0,-1/0];return ne.axialAlignedBoundingBox([s,i,r,o],l,c),u(this,Ue)[0]=Math.min(u(this,Ue)[0],Math.max(c[0],a[0])),u(this,Ue)[1]=Math.min(u(this,Ue)[1],Math.max(c[1],a[1])),u(this,Ue)[2]=Math.max(u(this,Ue)[2],Math.min(c[2],a[2])),u(this,Ue)[3]=Math.max(u(this,Ue)[3],Math.min(c[3],a[3])),this}recordCharacterBBox(e,t,s,r=1,i=0,o=0,a){const l=s.bbox;let c,h;if(l&&(c=l[2]!==l[0]&&l[3]!==l[1]&&u(this,id).get(s),c!==!1&&(h=[0,0,0,0],ne.axialAlignedBoundingBox(l,s.fontMatrix,h),(r!==1||i!==0||o!==0)&&ne.scaleMinMax([r,0,0,-r,i,o],h),c)))return this.recordBBox(e,t,h[0],h[2],h[1],h[3]);if(!a)return this.recordFullPageBBox(e);const f=a();return l&&h&&c===void 0&&(c=h[0]<=i-f.actualBoundingBoxLeft&&h[2]>=i+f.actualBoundingBoxRight&&h[1]<=o-f.actualBoundingBoxAscent&&h[3]>=o+f.actualBoundingBoxDescent,u(this,id).set(s,c),c)?this.recordBBox(e,t,h[0],h[2],h[1],h[3]):this.recordBBox(e,t,i-f.actualBoundingBoxLeft,i+f.actualBoundingBoxRight,o-f.actualBoundingBoxAscent,o+f.actualBoundingBoxDescent)}recordFullPageBBox(e){return u(this,Ue)[0]=Math.max(0,u(this,Oe)[0]),u(this,Ue)[1]=Math.max(0,u(this,Oe)[1]),u(this,Ue)[2]=Math.min(u(this,kc),u(this,Oe)[2]),u(this,Ue)[3]=Math.min(u(this,Nc),u(this,Oe)[3]),this}getSimpleIndex(e){return u(this,rs)[e]}recordDependencies(e,t){const s=u(this,os),r=u(this,rs),i=u(this,is);for(const o of t)o in u(this,rs)?s.add(r[o]):o in i&&i[o].forEach(s.add,s);return this}recordNamedDependency(e,t){return u(this,Tc).has(t)&&u(this,os).add(u(this,Tc).get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[Mu]),u(this,wi)){const s=Zy(u(this,wi),e),{dependencies:r}=s;u(this,os).forEach(r.add,r),u(this,Fr).forEach(r.add,r),u(this,Cc).forEach(r.add,r),r.delete(e),s.isRenderingOperation=!0}if(u(this,go)===e){const s=mP(u(this,Ue)[0]*256/u(this,kc)),r=mP(u(this,Ue)[1]*256/u(this,Nc)),i=gP(u(this,Ue)[2]*256/u(this,kc)),o=gP(u(this,Ue)[3]*256/u(this,Nc));Qy(u(this,yo),e,s,r,i,o);for(const a of u(this,os))a!==e&&Qy(u(this,yo),a,s,r,i,o);for(const a of u(this,Fr))a!==e&&Qy(u(this,yo),a,s,r,i,o);for(const a of u(this,Cc))a!==e&&Qy(u(this,yo),a,s,r,i,o);t||(u(this,os).clear(),_(this,go,-1))}return this}recordShowTextOperation(e,t=!1){const s=Array.from(u(this,os));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const r of s)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(e,t=!1){return u(this,go)===e&&(_(this,go,-1),u(this,Oe)[0]=Math.max(u(this,Oe)[0],u(this,Ue)[0]),u(this,Oe)[1]=Math.max(u(this,Oe)[1],u(this,Ue)[1]),u(this,Oe)[2]=Math.min(u(this,Oe)[2],u(this,Ue)[2]),u(this,Oe)[3]=Math.min(u(this,Oe)[3],u(this,Ue)[3]),t||u(this,os).clear()),this}_takePendingDependencies(){const e=u(this,os);return _(this,os,new Set),e}_extractOperation(e){const t=u(this,Ym).get(e);return u(this,Ym).delete(e),t}_pushPendingDependencies(e){for(const t of e)u(this,os).add(t)}take(){return u(this,id).clear(),new JG(u(this,On),u(this,yo))}takeDebugMetadata(){return u(this,wi)}}rs=new WeakMap,is=new WeakMap,Tc=new WeakMap,Fr=new WeakMap,Cc=new WeakMap,mo=new WeakMap,Oe=new WeakMap,Ue=new WeakMap,go=new WeakMap,os=new WeakMap,Ym=new WeakMap,id=new WeakMap,kc=new WeakMap,Nc=new WeakMap,yo=new WeakMap,On=new WeakMap,wi=new WeakMap,Km=new WeakSet,AS=function(e,t){const s=new ArrayBuffer(e*4);_(this,yo,new Uint8ClampedArray(s)),_(this,On,new Uint32Array(s)),t&&t.length>0?(u(this,On).set(t),u(this,On).fill(ES,t.length)):u(this,On).fill(ES)};var Ge,bt,Br,od,ad;const M1=class M1{constructor(e,t,s){E(this,Ge);E(this,bt);E(this,Br);E(this,od,0);E(this,ad,0);if(e instanceof M1&&u(e,Br)===!!s)return e;_(this,Ge,e),_(this,bt,t),_(this,Br,!!s)}growOperationsCount(){throw new Error("Unreachable")}save(e){return $t(this,ad)._++,u(this,Ge).save(u(this,bt)),this}restore(e){return u(this,ad)>0&&(u(this,Ge).restore(u(this,bt)),$t(this,ad)._--),this}recordOpenMarker(e){return $t(this,od)._++,this}getOpenMarker(){return u(this,od)>0?u(this,bt):u(this,Ge).getOpenMarker()}recordCloseMarker(e){return $t(this,od)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return u(this,Ge).pushBaseTransform(e),this}popBaseTransform(){return u(this,Ge).popBaseTransform(),this}recordSimpleData(e,t){return u(this,Ge).recordSimpleData(e,u(this,bt)),this}recordIncrementalData(e,t){return u(this,Ge).recordIncrementalData(e,u(this,bt)),this}resetIncrementalData(e,t){return u(this,Ge).resetIncrementalData(e,u(this,bt)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,s){return u(this,Ge).recordSimpleDataFromNamed(e,t,u(this,bt)),this}recordFutureForcedDependency(e,t){return u(this,Ge).recordFutureForcedDependency(e,u(this,bt)),this}inheritSimpleDataAsFutureForcedDependencies(e){return u(this,Ge).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return u(this,Ge).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return u(this,Br)||u(this,Ge).resetBBox(u(this,bt)),this}recordClipBox(e,t,s,r,i,o){return u(this,Br)||u(this,Ge).recordClipBox(u(this,bt),t,s,r,i,o),this}recordBBox(e,t,s,r,i,o){return u(this,Br)||u(this,Ge).recordBBox(u(this,bt),t,s,r,i,o),this}recordCharacterBBox(e,t,s,r,i,o,a){return u(this,Br)||u(this,Ge).recordCharacterBBox(u(this,bt),t,s,r,i,o,a),this}recordFullPageBBox(e){return u(this,Br)||u(this,Ge).recordFullPageBBox(u(this,bt)),this}getSimpleIndex(e){return u(this,Ge).getSimpleIndex(e)}recordDependencies(e,t){return u(this,Ge).recordDependencies(u(this,bt),t),this}recordNamedDependency(e,t){return u(this,Ge).recordNamedDependency(u(this,bt),t),this}recordOperation(e){return u(this,Ge).recordOperation(u(this,bt),!0),this}recordShowTextOperation(e){return u(this,Ge).recordShowTextOperation(u(this,bt),!0),this}bboxToClipBoxDropOperation(e){return u(this,Br)||u(this,Ge).bboxToClipBoxDropOperation(u(this,bt),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};Ge=new WeakMap,bt=new WeakMap,Br=new WeakMap,od=new WeakMap,ad=new WeakMap;let Zv=M1;const nr={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},wn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function TS(n,e){if(!e)return;const t=e[2]-e[0],s=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,s),n.clip(r)}class C1{isModifyingCurrentTransform(){return!1}getPattern(){Ye("Abstract method `getPattern` called.")}}class ZG extends C1{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)t.addColorStop(s[0],s[1]);return t}getPattern(e,t,s,r){let i;if(r===wn.STROKE||r===wn.FILL){const o=t.current.getClippedPathBoundingBox(r,ft(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,l=Math.ceil(o[3]-o[1])||1,c=t.cachedCanvases.getCanvas("pattern",a,l),h=c.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-o[0],-o[1]),s=ne.transform(s,[1,0,0,1,o[0],o[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),TS(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),i=e.createPattern(c.canvas,"no-repeat");const f=new DOMMatrix(s);i.setTransform(f)}else TS(e,this._bbox),i=this._createGradient(e);return i}}function vb(n,e,t,s,r,i,o,a){const l=e.coords,c=e.colors,h=n.data,f=n.width*4;let p;l[t+1]>l[s+1]&&(p=t,t=s,s=p,p=i,i=o,o=p),l[s+1]>l[r+1]&&(p=s,s=r,r=p,p=o,o=a,a=p),l[t+1]>l[s+1]&&(p=t,t=s,s=p,p=i,i=o,o=p);const m=(l[t]+e.offsetX)*e.scaleX,y=(l[t+1]+e.offsetY)*e.scaleY,w=(l[s]+e.offsetX)*e.scaleX,b=(l[s+1]+e.offsetY)*e.scaleY,g=(l[r]+e.offsetX)*e.scaleX,v=(l[r+1]+e.offsetY)*e.scaleY;if(y>=v)return;const x=c[i],S=c[i+1],A=c[i+2],C=c[o],N=c[o+1],P=c[o+2],R=c[a],O=c[a+1],M=c[a+2],Y=Math.round(y),J=Math.round(v);let U,z,$,B,I,j,L,D;for(let V=Y;V<=J;V++){if(V<b){const re=V<y?0:(y-V)/(y-b);U=m-(m-w)*re,z=x-(x-C)*re,$=S-(S-N)*re,B=A-(A-P)*re}else{let re;V>v?re=1:b===v?re=0:re=(b-V)/(b-v),U=w-(w-g)*re,z=C-(C-R)*re,$=N-(N-O)*re,B=P-(P-M)*re}let F;V<y?F=0:V>v?F=1:F=(y-V)/(y-v),I=m-(m-g)*F,j=x-(x-R)*F,L=S-(S-O)*F,D=A-(A-M)*F;const H=Math.round(Math.min(U,I)),se=Math.round(Math.max(U,I));let ae=f*V+H*4;for(let re=H;re<=se;re++)F=(U-re)/(U-I),F<0?F=0:F>1&&(F=1),h[ae++]=z-(z-j)*F|0,h[ae++]=$-($-L)*F|0,h[ae++]=B-(B-D)*F|0,h[ae++]=255}}function eW(n,e,t){const s=e.coords,r=e.colors;let i,o;switch(e.type){case J_.LATTICE:const a=e.verticesPerRow,l=Math.floor(s.length/a)-1,c=a-1;for(i=0;i<l;i++){let h=i*a;for(let f=0;f<c;f++,h++)vb(n,t,s[h],s[h+1],s[h+a],r[h],r[h+1],r[h+a]),vb(n,t,s[h+a+1],s[h+1],s[h+a],r[h+a+1],r[h+1],r[h+a])}break;case J_.TRIANGLES:for(i=0,o=s.length;i<o;i+=3)vb(n,t,s[i],s[i+1],s[i+2],r[i],r[i+1],r[i+2]);break;default:throw new Error("illegal figure")}}class tW extends C1{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,s){const a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-a,h=Math.ceil(this._bounds[3])-l,f=Math.min(Math.ceil(Math.abs(c*e[0]*1.1)),3e3),p=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),m=c/f,y=h/p,w={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/m,scaleY:1/y},b=f+2*2,g=p+2*2,v=s.getCanvas("mesh",b,g),x=v.context,S=x.createImageData(f,p);if(t){const C=S.data;for(let N=0,P=C.length;N<P;N+=4)C[N]=t[0],C[N+1]=t[1],C[N+2]=t[2],C[N+3]=255}for(const C of this._figures)eW(S,C,w);return x.putImageData(S,2,2),{canvas:v.canvas,offsetX:a-2*m,offsetY:l-2*y,scaleX:m,scaleY:y}}isModifyingCurrentTransform(){return!0}getPattern(e,t,s,r){TS(e,this._bbox);const i=new Float32Array(2);if(r===wn.SHADING)ne.singularValueDecompose2dScale(ft(e),i);else if(this.matrix){ne.singularValueDecompose2dScale(this.matrix,i);const[a,l]=i;ne.singularValueDecompose2dScale(t.baseTransform,i),i[0]*=a,i[1]*=l}else ne.singularValueDecompose2dScale(t.baseTransform,i);const o=this._createMeshCanvas(i,r===wn.SHADING?null:this._background,t.cachedCanvases);return r!==wn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class nW extends C1{getPattern(){return"hotpink"}}function sW(n){switch(n[0]){case"RadialAxial":return new ZG(n);case"Mesh":return new tW(n);case"Dummy":return new nW}throw new Error(`Unknown IR type: ${n[0]}`)}const yP={COLORED:1,UNCOLORED:2},mw=class mw{constructor(e,t,s,r){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(e,t){var j,L;const{bbox:s,operatorList:r,paintType:i,tilingType:o,color:a,canvasGraphicsFactory:l}=this;let{xstep:c,ystep:h}=this;c=Math.abs(c),h=Math.abs(h),ox("TilingType: "+o);const f=s[0],p=s[1],m=s[2],y=s[3],w=m-f,b=y-p,g=new Float32Array(2);ne.singularValueDecompose2dScale(this.matrix,g);const[v,x]=g;ne.singularValueDecompose2dScale(this.baseTransform,g);const S=v*g[0],A=x*g[1];let C=w,N=b,P=!1,R=!1;const O=Math.ceil(c*S),M=Math.ceil(h*A),Y=Math.ceil(w*S),J=Math.ceil(b*A);O>=Y?C=c:P=!0,M>=J?N=h:R=!0;const U=this.getSizeAndScale(C,this.ctx.canvas.width,S),z=this.getSizeAndScale(N,this.ctx.canvas.height,A),$=e.cachedCanvases.getCanvas("pattern",U.size,z.size),B=$.context,I=l.createCanvasGraphics(B,t);if(I.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(I,i,a),B.translate(-U.scale*f,-z.scale*p),I.transform(0,U.scale,0,0,z.scale,0,0),B.save(),(j=I.dependencyTracker)==null||j.save(),this.clipBbox(I,f,p,m,y),I.baseTransform=ft(I.ctx),I.executeOperatorList(r),I.endDrawing(),(L=I.dependencyTracker)==null||L.restore(),B.restore(),P||R){const D=$.canvas;P&&(C=c),R&&(N=h);const V=this.getSizeAndScale(C,this.ctx.canvas.width,S),F=this.getSizeAndScale(N,this.ctx.canvas.height,A),H=V.size,se=F.size,ae=e.cachedCanvases.getCanvas("pattern-workaround",H,se),re=ae.context,K=P?Math.floor(w/c):0,Q=R?Math.floor(b/h):0;for(let De=0;De<=K;De++)for(let qe=0;qe<=Q;qe++)re.drawImage(D,H*De,se*qe,H,se,0,0,H,se);return{canvas:ae.canvas,scaleX:V.scale,scaleY:F.scale,offsetX:f,offsetY:p}}return{canvas:$.canvas,scaleX:U.scale,scaleY:z.scale,offsetX:f,offsetY:p}}getSizeAndScale(e,t,s){const r=Math.max(mw.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*s);return i>=r?i=r:s=i/e,{scale:s,size:i}}clipBbox(e,t,s,r,i){const o=r-t,a=i-s;e.ctx.rect(t,s,o,a),ne.axialAlignedBoundingBox([t,s,r,i],ft(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,s){const r=e.ctx,i=e.current;switch(t){case yP.COLORED:const{fillStyle:o,strokeStyle:a}=this.ctx;r.fillStyle=i.fillColor=o,r.strokeStyle=i.strokeColor=a;break;case yP.UNCOLORED:r.fillStyle=r.strokeStyle=s,i.fillColor=i.strokeColor=s;break;default:throw new gG(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,s,r,i){let o=s;r!==wn.SHADING&&(o=ne.transform(o,t.baseTransform),this.matrix&&(o=ne.transform(o,this.matrix)));const a=this.createPatternCanvas(t,i);let l=new DOMMatrix(o);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);const c=e.createPattern(a.canvas,"repeat");return c.setTransform(l),c}};G(mw,"MAX_PATTERN_SIZE",3e3);let CS=mw;function rW({src:n,srcPos:e=0,dest:t,width:s,height:r,nonBlackColor:i=4294967295,inverseDecode:o=!1}){const a=Sn.isLittleEndian?4278190080:255,[l,c]=o?[i,a]:[a,i],h=s>>3,f=s&7,p=n.length;t=new Uint32Array(t.buffer);let m=0;for(let y=0;y<r;y++){for(const b=e+h;e<b;e++){const g=e<p?n[e]:255;t[m++]=g&128?c:l,t[m++]=g&64?c:l,t[m++]=g&32?c:l,t[m++]=g&16?c:l,t[m++]=g&8?c:l,t[m++]=g&4?c:l,t[m++]=g&2?c:l,t[m++]=g&1?c:l}if(f===0)continue;const w=e<p?n[e++]:255;for(let b=0;b<f;b++)t[m++]=w&1<<7-b?c:l}return{srcPos:e,destPos:m}}const vP=16,wP=100,iW=15,xP=10,us=16,wb=new DOMMatrix,Vs=new Float32Array(2),dh=new Float32Array([1/0,1/0,-1/0,-1/0]);function oW(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,s){e.translate(t,s),this.__originalTranslate(t,s)},n.scale=function(t,s){e.scale(t,s),this.__originalScale(t,s)},n.transform=function(t,s,r,i,o,a){e.transform(t,s,r,i,o,a),this.__originalTransform(t,s,r,i,o,a)},n.setTransform=function(t,s,r,i,o,a){e.setTransform(t,s,r,i,o,a),this.__originalSetTransform(t,s,r,i,o,a)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,s){e.moveTo(t,s),this.__originalMoveTo(t,s)},n.lineTo=function(t,s){e.lineTo(t,s),this.__originalLineTo(t,s)},n.bezierCurveTo=function(t,s,r,i,o,a){e.bezierCurveTo(t,s,r,i,o,a),this.__originalBezierCurveTo(t,s,r,i,o,a)},n.rect=function(t,s,r,i){e.rect(t,s,r,i),this.__originalRect(t,s,r,i)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class aW{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,s){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,s)):(r=this.canvasFactory.create(t,s),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function e0(n,e,t,s,r,i,o,a,l,c){const[h,f,p,m,y,w]=ft(n);if(f===0&&p===0){const v=o*h+y,x=Math.round(v),S=a*m+w,A=Math.round(S),C=(o+l)*h+y,N=Math.abs(Math.round(C)-x)||1,P=(a+c)*m+w,R=Math.abs(Math.round(P)-A)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(m),x,A),n.drawImage(e,t,s,r,i,0,0,N,R),n.setTransform(h,f,p,m,y,w),[N,R]}if(h===0&&m===0){const v=a*p+y,x=Math.round(v),S=o*f+w,A=Math.round(S),C=(a+c)*p+y,N=Math.abs(Math.round(C)-x)||1,P=(o+l)*f+w,R=Math.abs(Math.round(P)-A)||1;return n.setTransform(0,Math.sign(f),Math.sign(p),0,x,A),n.drawImage(e,t,s,r,i,0,0,R,N),n.setTransform(h,f,p,m,y,w),[R,N]}n.drawImage(e,t,s,r,i,o,a,l,c);const b=Math.hypot(h,f),g=Math.hypot(p,m);return[b*l,g*c]}class bP{constructor(e,t,s){G(this,"alphaIsShape",!1);G(this,"fontSize",0);G(this,"fontSizeScale",1);G(this,"textMatrix",null);G(this,"textMatrixScale",1);G(this,"fontMatrix",X_);G(this,"leading",0);G(this,"x",0);G(this,"y",0);G(this,"lineX",0);G(this,"lineY",0);G(this,"charSpacing",0);G(this,"wordSpacing",0);G(this,"textHScale",1);G(this,"textRenderingMode",hn.FILL);G(this,"textRise",0);G(this,"fillColor","#000000");G(this,"strokeColor","#000000");G(this,"patternFill",!1);G(this,"patternStroke",!1);G(this,"fillAlpha",1);G(this,"strokeAlpha",1);G(this,"lineWidth",1);G(this,"activeSMask",null);G(this,"transferMaps","none");s==null||s(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=dh.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=wn.FILL,t=null){const s=this.minMax.slice();if(e===wn.STROKE){t||Ye("Stroke bounding box must include transform."),ne.singularValueDecompose2dScale(t,Vs);const r=Vs[0]*this.lineWidth/2,i=Vs[1]*this.lineWidth/2;s[0]-=r,s[1]-=i,s[2]+=r,s[3]+=i}return s}updateClipFromPath(){const e=ne.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(dh,0)}getClippedPathBoundingBox(e=wn.FILL,t=null){return ne.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function _P(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,s=e.width,r=t%us,i=(t-r)/us,o=r===0?i:i+1,a=n.createImageData(s,us);let l=0,c;const h=e.data,f=a.data;let p,m,y,w;if(e.kind===N0.GRAYSCALE_1BPP){const b=h.byteLength,g=new Uint32Array(f.buffer,0,f.byteLength>>2),v=g.length,x=s+7>>3,S=4294967295,A=Sn.isLittleEndian?4278190080:255;for(p=0;p<o;p++){for(y=p<i?us:r,c=0,m=0;m<y;m++){const C=b-l;let N=0;const P=C>x?s:C*8-7,R=P&-8;let O=0,M=0;for(;N<R;N+=8)M=h[l++],g[c++]=M&128?S:A,g[c++]=M&64?S:A,g[c++]=M&32?S:A,g[c++]=M&16?S:A,g[c++]=M&8?S:A,g[c++]=M&4?S:A,g[c++]=M&2?S:A,g[c++]=M&1?S:A;for(;N<P;N++)O===0&&(M=h[l++],O=128),g[c++]=M&O?S:A,O>>=1}for(;c<v;)g[c++]=0;n.putImageData(a,0,p*us)}}else if(e.kind===N0.RGBA_32BPP){for(m=0,w=s*us*4,p=0;p<i;p++)f.set(h.subarray(l,l+w)),l+=w,n.putImageData(a,0,m),m+=us;p<o&&(w=s*r*4,f.set(h.subarray(l,l+w)),n.putImageData(a,0,m))}else if(e.kind===N0.RGB_24BPP)for(y=us,w=s*y,p=0;p<o;p++){for(p>=i&&(y=r,w=s*y),c=0,m=w;m--;)f[c++]=h[l++],f[c++]=h[l++],f[c++]=h[l++],f[c++]=255;n.putImageData(a,0,p*us)}else throw new Error(`bad image kind: ${e.kind}`)}function SP(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,s=e.width,r=t%us,i=(t-r)/us,o=r===0?i:i+1,a=n.createImageData(s,us);let l=0;const c=e.data,h=a.data;for(let f=0;f<o;f++){const p=f<i?us:r;({srcPos:l}=rW({src:c,srcPos:l,dest:h,width:s,height:p,nonBlackColor:0})),n.putImageData(a,0,f*us)}}function Lf(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of t)n[s]!==void 0&&(e[s]=n[s]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function t0(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function EP(n,e){if(e)return!0;ne.singularValueDecompose2dScale(n,Vs);const t=Math.fround($i.pixelRatio*yl.PDF_TO_CSS_UNITS);return Vs[0]<=t&&Vs[1]<=t}const lW=["butt","round","square"],cW=["miter","round","bevel"],uW={},AP={};var ti,kS,NS,PS;const F1=class F1{constructor(e,t,s,r,i,{optionalContentConfig:o,markedContentStack:a=null},l,c,h){E(this,ti);this.ctx=e,this.current=new bP(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=s,this.canvasFactory=r,this.filterFactory=i,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new aW(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=h??null}getObject(e,t,s=null){var r;return typeof t=="string"?((r=this.dependencyTracker)==null||r.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):s}beginDrawing({transform:e,viewport:t,transparency:s=!1,background:r=null}){const i=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,i,o),this.ctx.fillStyle=a,s){const l=this.cachedCanvases.getCanvas("transparent",i,o);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...ft(this.compositeCtx))}this.ctx.save(),t0(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=ft(this.ctx)}executeOperatorList(e,t,s,r,i){var g;const o=e.argsArray,a=e.fnArray;let l=t||0;const c=o.length;if(c===l)return l;const h=c-l>xP&&typeof s=="function",f=h?Date.now()+iW:0;let p=0;const m=this.commonObjs,y=this.objs;let w,b;for(;;){if(r!==void 0&&l===r.nextBreakPoint)return r.breakIt(l,s),l;if(!i||i(l))if(w=a[l],b=o[l]??null,w!==rm.dependency)b===null?this[w](l):this[w](l,...b);else for(const v of b){(g=this.dependencyTracker)==null||g.recordNamedData(v,l);const x=v.startsWith("g_")?m:y;if(!x.has(v))return x.get(v,s),l}if(l++,l===c)return l;if(h&&++p>xP){if(Date.now()>f)return s(),l;p=0}}}endDrawing(){T(this,ti,kS).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),T(this,ti,NS).call(this)}_scaleImage(e,t){const s=e.width??e.displayWidth,r=e.height??e.displayHeight;let i=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=s,l=r,c="prescale1",h,f;for(;i>2&&a>1||o>2&&l>1;){let p=a,m=l;i>2&&a>1&&(p=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),i/=a/p),o>2&&l>1&&(m=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,o/=l/m),h=this.cachedCanvases.getCanvas(c,p,m),f=h.context,f.clearRect(0,0,p,m),f.drawImage(e,0,0,a,l,0,0,p,m),e=h.canvas,a=p,l=m,c=c==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:l}}_createMaskCanvas(e,t){var O,M;const s=this.ctx,{width:r,height:i}=t,o=this.current.fillColor,a=this.current.patternFill,l=ft(s);let c,h,f,p;if((t.bitmap||t.data)&&t.count>1){const Y=t.bitmap||t.data.buffer;h=JSON.stringify(a?l:[l.slice(0,4),o]),c=this._cachedBitmapsMap.get(Y),c||(c=new Map,this._cachedBitmapsMap.set(Y,c));const J=c.get(h);if(J&&!a){const U=Math.round(Math.min(l[0],l[2])+l[4]),z=Math.round(Math.min(l[1],l[3])+l[5]);return(O=this.dependencyTracker)==null||O.recordDependencies(e,nr.transformAndFill),{canvas:J,offsetX:U,offsetY:z}}f=J}f||(p=this.cachedCanvases.getCanvas("maskCanvas",r,i),SP(p.context,t));let m=ne.transform(l,[1/r,0,0,-1/i,0,0]);m=ne.transform(m,[1,0,0,1,0,-i]);const y=dh.slice();ne.axialAlignedBoundingBox([0,0,r,i],m,y);const[w,b,g,v]=y,x=Math.round(g-w)||1,S=Math.round(v-b)||1,A=this.cachedCanvases.getCanvas("fillCanvas",x,S),C=A.context,N=w,P=b;C.translate(-N,-P),C.transform(...m),f||(f=this._scaleImage(p.canvas,ri(C)),f=f.img,c&&a&&c.set(h,f)),C.imageSmoothingEnabled=EP(ft(C),t.interpolate),e0(C,f,0,0,f.width,f.height,0,0,r,i),C.globalCompositeOperation="source-in";const R=ne.transform(ri(C),[1,0,0,1,-N,-P]);return C.fillStyle=a?o.getPattern(s,this,R,wn.FILL,e):o,C.fillRect(0,0,r,i),c&&!a&&(this.cachedCanvases.delete("fillCanvas"),c.set(h,A.canvas)),(M=this.dependencyTracker)==null||M.recordDependencies(e,nr.transformAndFill),{canvas:A.canvas,offsetX:Math.round(N),offsetY:Math.round(P)}}setLineWidth(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("lineCap",e),this.ctx.lineCap=lW[t]}setLineJoin(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("lineJoin",e),this.ctx.lineJoin=cW[t]}setMiterLimit(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,s){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("dash",e);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(t),r.lineDashOffset=s)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var s,r,i,o,a;for(const[l,c]of t)switch(l){case"LW":this.setLineWidth(e,c);break;case"LC":this.setLineCap(e,c);break;case"LJ":this.setLineJoin(e,c);break;case"ML":this.setMiterLimit(e,c);break;case"D":this.setDash(e,c[0],c[1]);break;case"RI":this.setRenderingIntent(e,c);break;case"FL":this.setFlatness(e,c);break;case"Font":this.setFont(e,c[0],c[1]);break;case"CA":(s=this.dependencyTracker)==null||s.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=c;break;case"ca":(r=this.dependencyTracker)==null||r.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=c;break;case"BM":(i=this.dependencyTracker)==null||i.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=c;break;case"SMask":(o=this.dependencyTracker)==null||o.recordSimpleData("SMask",e),this.current.activeSMask=c?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(a=this.dependencyTracker)==null||a.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(c);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,s=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(r,t,s);this.suspendedCtx=this.ctx;const o=this.ctx=i.context;o.setTransform(this.suspendedCtx.getTransform()),Lf(this.suspendedCtx,o),oW(o,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Lf(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,s,r){const i=r[0],o=r[1],a=r[2]-i,l=r[3]-o;a===0||l===0||(this.genericComposeSMask(t.context,s,a,l,t.subtype,t.backdrop,t.transferMap,i,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,t,s,r,i,o,a,l,c,h,f){let p=e.canvas,m=l-h,y=c-f;if(o)if(m<0||y<0||m+s>p.width||y+r>p.height){const b=this.cachedCanvases.getCanvas("maskExtension",s,r),g=b.context;g.drawImage(p,-m,-y),g.globalCompositeOperation="destination-atop",g.fillStyle=o,g.fillRect(0,0,s,r),g.globalCompositeOperation="source-over",p=b.canvas,m=y=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const b=new Path2D;b.rect(m,y,s,r),e.clip(b),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(m,y,s,r),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const w=new Path2D;w.rect(l,c,s,r),t.clip(w),t.globalCompositeOperation="destination-in",t.drawImage(p,m,y,s,r,l,c,s,r),t.restore()}save(e){var s;this.inSMaskMode&&Lf(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),(s=this.dependencyTracker)==null||s.save(e)}restore(e){var t;if((t=this.dependencyTracker)==null||t.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Lf(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,s,r,i,o,a){var l;(l=this.dependencyTracker)==null||l.recordIncrementalData("transform",e),this.ctx.transform(t,s,r,i,o,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,s,r){let[i]=s;if(!r){i||(i=s[0]=new Path2D),this[t](e,i);return}if(this.dependencyTracker!==null){const o=t===rm.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,r[0]-o,r[2]+o,r[1]-o,r[3]+o).recordDependencies(e,["transform"])}i instanceof Path2D||(i=s[0]=EL(i)),ne.axialAlignedBoundingBox(r,ft(this.ctx),this.current.minMax),this[t](e,i),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,s=!0){var o;const r=this.ctx,i=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof i=="object"&&(i!=null&&i.getPattern)){const a=i.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=i.getPattern(r,this,ri(r),wn.STROKE,e),a){const l=new Path2D;l.addPath(t,r.getTransform().invertSelf().multiplySelf(a)),t=l}this.rescaleAndStroke(t,!1),r.restore()}else this.rescaleAndStroke(t,!0);(o=this.dependencyTracker)==null||o.recordDependencies(e,nr.stroke),s&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(wn.STROKE,ft(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,s=!0){var c,h,f;const r=this.ctx,i=this.current.fillColor,o=this.current.patternFill;let a=!1;if(o){const p=i.isModifyingCurrentTransform()?r.getTransform():null;if((c=this.dependencyTracker)==null||c.save(e),r.save(),r.fillStyle=i.getPattern(r,this,ri(r),wn.FILL,e),p){const m=new Path2D;m.addPath(t,r.getTransform().invertSelf().multiplySelf(p)),t=m}a=!0}const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(r.fill(t,"evenodd"),this.pendingEOFill=!1):r.fill(t)),(h=this.dependencyTracker)==null||h.recordDependencies(e,nr.fill),a&&(r.restore(),(f=this.dependencyTracker)==null||f.restore(e)),s&&this.consumePath(e,t,l)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var s;this.ctx.fill(t),(s=this.dependencyTracker)==null||s.recordDependencies(e,nr.rawFillPath).recordOperation(e)}clip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=uW}eoClip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=AP}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(t=this.dependencyTracker)==null||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;t!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",e),r.recordCloseMarker(e)}if(t!==void 0){const r=new Path2D,i=s.getTransform().invertSelf();for(const{transform:o,x:a,y:l,fontSize:c,path:h}of t)h&&r.addPath(h,new DOMMatrix(o).preMultiplySelf(i).translate(a,l).scale(c,-c));s.clip(r)}delete this.pendingTextPaths}setCharSpacing(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,s){var f,p;(f=this.dependencyTracker)==null||f.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const r=this.commonObjs.get(t),i=this.current;if(!r)throw new Error(`Can't find font for ${t}`);if(i.fontMatrix=r.fontMatrix||X_,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&de("Invalid font matrix for font "+t),s<0?(s=-s,i.fontDirection=-1):i.fontDirection=1,this.current.font=r,this.current.fontSize=s,r.isType3Font)return;const o=r.loadedName||"sans-serif",a=((p=r.systemFontInfo)==null?void 0:p.css)||`"${o}", ${r.fallbackName}`;let l="normal";r.black?l="900":r.bold&&(l="bold");const c=r.italic?"italic":"normal";let h=s;s<vP?h=vP:s>wP&&(h=wP),this.current.fontSizeScale=s/h,this.ctx.font=`${c} ${l} ${h}px ${a}`}setTextRenderingMode(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,s){var r;(r=this.dependencyTracker)==null||r.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=s}setLeadingMoveText(e,t,s){this.setLeading(e,-s),this.moveText(e,t,s)}setTextMatrix(e,t){var r;(r=this.dependencyTracker)==null||r.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",e);const{current:s}=this;s.textMatrix=t,s.textMatrixScale=Math.hypot(t[0],t[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),(t=this.dependencyTracker)==null||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,s,r,i,o){var g,v,x,S;const a=this.ctx,l=this.current,c=l.font,h=l.textRenderingMode,f=l.fontSize/l.fontSizeScale,p=h&hn.FILL_STROKE_MASK,m=!!(h&hn.ADD_TO_PATH_FLAG),y=l.patternFill&&!c.missingFile,w=l.patternStroke&&!c.missingFile;let b;if((c.disableFontFace||m||y||w)&&!c.missingFile&&(b=c.getPathGenerator(this.commonObjs,t)),b&&(c.disableFontFace||y||w)){a.save(),a.translate(s,r),a.scale(f,-f),(g=this.dependencyTracker)==null||g.recordCharacterBBox(e,a,c);let A;if(p===hn.FILL||p===hn.FILL_STROKE)if(i){A=a.getTransform(),a.setTransform(...i);const C=T(this,ti,PS).call(this,b,A,i);a.fill(C)}else a.fill(b);if(p===hn.STROKE||p===hn.FILL_STROKE)if(o){A||(A=a.getTransform()),a.setTransform(...o);const{a:C,b:N,c:P,d:R}=A,O=ne.inverseTransform(o),M=ne.transform([C,N,P,R,0,0],O);ne.singularValueDecompose2dScale(M,Vs),a.lineWidth*=Math.max(Vs[0],Vs[1])/f,a.stroke(T(this,ti,PS).call(this,b,A,o))}else a.lineWidth/=f,a.stroke(b);a.restore()}else(p===hn.FILL||p===hn.FILL_STROKE)&&(a.fillText(t,s,r),(v=this.dependencyTracker)==null||v.recordCharacterBBox(e,a,c,f,s,r,()=>a.measureText(t))),(p===hn.STROKE||p===hn.FILL_STROKE)&&(this.dependencyTracker&&((x=this.dependencyTracker)==null||x.recordCharacterBBox(e,a,c,f,s,r,()=>a.measureText(t)).recordDependencies(e,nr.stroke)),a.strokeText(t,s,r));m&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:ft(a),x:s,y:r,fontSize:f,path:b}),(S=this.dependencyTracker)==null||S.recordCharacterBBox(e,a,c,f,s,r))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let s=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){s=!0;break}return ge(this,"isFontSubpixelAAEnabled",s)}showText(e,t){var P,R,O,M;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,nr.showText).resetBBox(e),this.current.textRenderingMode&hn.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,r=s.font;if(r.isType3Font){this.showType3Text(e,t),(P=this.dependencyTracker)==null||P.recordShowTextOperation(e);return}const i=s.fontSize;if(i===0){(R=this.dependencyTracker)==null||R.recordOperation(e);return}const o=this.ctx,a=s.fontSizeScale,l=s.charSpacing,c=s.wordSpacing,h=s.fontDirection,f=s.textHScale*h,p=t.length,m=r.vertical,y=m?1:-1,w=r.defaultVMetrics,b=i*s.fontMatrix[0],g=s.textRenderingMode===hn.FILL&&!r.disableFontFace&&!s.patternFill;o.save(),s.textMatrix&&o.transform(...s.textMatrix),o.translate(s.x,s.y+s.textRise),h>0?o.scale(f,-1):o.scale(f,1);let v,x;if(s.patternFill){o.save();const Y=s.fillColor.getPattern(o,this,ri(o),wn.FILL,e);v=ft(o),o.restore(),o.fillStyle=Y}if(s.patternStroke){o.save();const Y=s.strokeColor.getPattern(o,this,ri(o),wn.STROKE,e);x=ft(o),o.restore(),o.strokeStyle=Y}let S=s.lineWidth;const A=s.textMatrixScale;if(A===0||S===0){const Y=s.textRenderingMode&hn.FILL_STROKE_MASK;(Y===hn.STROKE||Y===hn.FILL_STROKE)&&(S=this.getSinglePixelWidth())}else S/=A;if(a!==1&&(o.scale(a,a),S/=a),o.lineWidth=S,r.isInvalidPDFjsFont){const Y=[];let J=0;for(const z of t)Y.push(z.unicode),J+=z.width;const U=Y.join("");if(o.fillText(U,0,0),this.dependencyTracker!==null){const z=o.measureText(U);this.dependencyTracker.recordBBox(e,this.ctx,-z.actualBoundingBoxLeft,z.actualBoundingBoxRight,-z.actualBoundingBoxAscent,z.actualBoundingBoxDescent).recordShowTextOperation(e)}s.x+=J*b*f,o.restore(),this.compose();return}let C=0,N;for(N=0;N<p;++N){const Y=t[N];if(typeof Y=="number"){C+=y*Y*i/1e3;continue}let J=!1;const U=(Y.isSpace?c:0)+l,z=Y.fontChar,$=Y.accent;let B,I,j=Y.width;if(m){const V=Y.vmetric||w,F=-(Y.vmetric?V[1]:j*.5)*b,H=V[2]*b;j=V?-V[0]:j,B=F/a,I=(C+H)/a}else B=C/a,I=0;let L;if(r.remeasure&&j>0){L=o.measureText(z);const V=L.width*1e3/i*a;if(j<V&&this.isFontSubpixelAAEnabled){const F=j/V;J=!0,o.save(),o.scale(F,1),B/=F}else j!==V&&(B+=(j-V)/2e3*i/a)}if(this.contentVisible&&(Y.isInFont||r.missingFile)){if(g&&!$)o.fillText(z,B,I),(O=this.dependencyTracker)==null||O.recordCharacterBBox(e,o,L?{bbox:null}:r,i/a,B,I,()=>L??o.measureText(z));else if(this.paintChar(e,z,B,I,v,x),$){const V=B+i*$.offset.x/a,F=I-i*$.offset.y/a;this.paintChar(e,$.fontChar,V,F,v,x)}}const D=m?j*b-U*h:j*b+U*h;C+=D,J&&o.restore()}m?s.y-=C:s.x+=C*f,o.restore(),this.compose(),(M=this.dependencyTracker)==null||M.recordShowTextOperation(e)}showType3Text(e,t){const s=this.ctx,r=this.current,i=r.font,o=r.fontSize,a=r.fontDirection,l=i.vertical?1:-1,c=r.charSpacing,h=r.wordSpacing,f=r.textHScale*a,p=r.fontMatrix||X_,m=t.length,y=r.textRenderingMode===hn.INVISIBLE;let w,b,g,v;if(y||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),r.textMatrix&&s.transform(...r.textMatrix),s.translate(r.x,r.y+r.textRise),s.scale(f,a);const x=this.dependencyTracker;for(this.dependencyTracker=x?new Zv(x,e):null,w=0;w<m;++w){if(b=t[w],typeof b=="number"){v=l*b*o/1e3,this.ctx.translate(v,0),r.x+=v*f;continue}const S=(b.isSpace?h:0)+c,A=i.charProcOperatorList[b.operatorListId];A?this.contentVisible&&(this.save(),s.scale(o,o),s.transform(...p),this.executeOperatorList(A),this.restore()):de(`Type3 character "${b.operatorListId}" is not available.`);const C=[b.width,0];ne.applyTransform(C,p),g=C[0]*o+S,s.translate(g,0),r.x+=g*f}s.restore(),x&&(this.dependencyTracker=x)}setCharWidth(e,t,s){}setCharWidthAndBounds(e,t,s,r,i,o,a){var c;const l=new Path2D;l.rect(r,i,o-r,a-i),this.ctx.clip(l),(c=this.dependencyTracker)==null||c.recordBBox(e,this.ctx,r,o,i,a).recordClipBox(e,this.ctx,r,o,i,a),this.endPath(e)}getColorN_Pattern(e,t){let s;if(t[0]==="TilingPattern"){const r=this.baseTransform||ft(this.ctx),i={createCanvasGraphics:(o,a)=>new F1(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Zv(this.dependencyTracker,a,!0):null)};s=new CS(t,this.ctx,i,r)}else s=this._getPattern(e,t[1],t[2]);return s}setStrokeColorN(e,...t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,s=null){let r;return this.cachedPatterns.has(t)?r=this.cachedPatterns.get(t):(r=sW(this.getObject(e,t)),this.cachedPatterns.set(t,r)),s&&(r.matrix=s),r}shadingFill(e,t){var o;if(!this.contentVisible)return;const s=this.ctx;this.save(e);const r=this._getPattern(e,t);s.fillStyle=r.getPattern(s,this,ri(s),wn.SHADING,e);const i=ri(s);if(i){const{width:a,height:l}=s.canvas,c=dh.slice();ne.axialAlignedBoundingBox([0,0,a,l],i,c);const[h,f,p,m]=c;this.ctx.fillRect(h,f,p-h,m-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(o=this.dependencyTracker)==null||o.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,nr.transform).recordDependencies(e,nr.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){Ye("Should not call beginInlineImage")}beginImageData(){Ye("Should not call beginImageData")}paintFormXObjectBegin(e,t,s){var r;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=ft(this.ctx),s)){ne.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[i,o,a,l]=s,c=new Path2D;c.rect(i,o,a-i,l-o),this.ctx.clip(c),(r=this.dependencyTracker)==null||r.recordClipBox(e,this.ctx,i,a,o,l),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var x;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;t.isolated||ox("TODO: Support non-isolated groups."),t.knockout&&de("Knockout groups not supported.");const r=ft(s);if(t.matrix&&s.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=dh.slice();ne.axialAlignedBoundingBox(t.bbox,ft(s),i);const o=[0,0,s.canvas.width,s.canvas.height];i=ne.intersect(i,o)||[0,0,0,0];const a=Math.floor(i[0]),l=Math.floor(i[1]),c=Math.max(Math.ceil(i[2])-a,1),h=Math.max(Math.ceil(i[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,h]);let f="groupAt"+this.groupLevel;t.smask&&(f+="_smask_"+this.smaskCounter++%2);const p=this.cachedCanvases.getCanvas(f,c,h),m=p.context;m.translate(-a,-l),m.transform(...r);let y=new Path2D;const[w,b,g,v]=t.bbox;if(y.rect(w,b,g-w,v-b),t.matrix){const S=new Path2D;S.addPath(y,new DOMMatrix(t.matrix)),y=S}m.clip(y),t.smask&&this.smaskStack.push({canvas:p.canvas,context:m,offsetX:a,offsetY:l,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(a,l),s.save()),Lf(s,m),this.ctx=m,(x=this.dependencyTracker)==null||x.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(e,t){var i;if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,(i=this.dependencyTracker)==null||i.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=ft(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...o);const a=dh.slice();ne.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],o,a),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(e,t,s,r,i,o){if(T(this,ti,kS).call(this),t0(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const a=s[2]-s[0],l=s[3]-s[1];if(o&&this.annotationCanvasMap){r=r.slice(),r[4]-=s[0],r[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=a,s[3]=l,ne.singularValueDecompose2dScale(ft(this.ctx),Vs);const{viewportScale:c}=this,h=Math.ceil(a*this.outputScaleX*c),f=Math.ceil(l*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(h,f);const{canvas:p,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(t,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(Vs[0],0,0,-Vs[1],0,l*Vs[1]),t0(this.ctx)}else{t0(this.ctx),this.endPath(e);const c=new Path2D;c.rect(s[0],s[1],a,l),this.ctx.clip(c)}}this.current=new bP(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...r),this.transform(e,...i)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),T(this,ti,NS).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var a;if(!this.contentVisible)return;const s=t.count;t=this.getObject(e,t.data,t),t.count=s;const r=this.ctx,i=this._createMaskCanvas(e,t),o=i.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(o,i.offsetX,i.offsetY),(a=this.dependencyTracker)==null||a.resetBBox(e).recordBBox(e,this.ctx,i.offsetX,i.offsetX+o.width,i.offsetY,i.offsetY+o.height).recordOperation(e),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,s,r=0,i=0,o,a){var f,p,m;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const l=this.ctx;l.save();const c=ft(l);l.transform(s,r,i,o,0,0);const h=this._createMaskCanvas(e,t);l.setTransform(1,0,0,1,h.offsetX-c[4],h.offsetY-c[5]),(f=this.dependencyTracker)==null||f.resetBBox(e);for(let y=0,w=a.length;y<w;y+=2){const b=ne.transform(c,[s,r,i,o,a[y],a[y+1]]);l.drawImage(h.canvas,b[4],b[5]),(p=this.dependencyTracker)==null||p.recordBBox(e,this.ctx,b[4],b[4]+h.canvas.width,b[5],b[5]+h.canvas.height)}l.restore(),this.compose(),(m=this.dependencyTracker)==null||m.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var o,a,l;if(!this.contentVisible)return;const s=this.ctx,r=this.current.fillColor,i=this.current.patternFill;(o=this.dependencyTracker)==null||o.resetBBox(e).recordDependencies(e,nr.transformAndFill);for(const c of t){const{data:h,width:f,height:p,transform:m}=c,y=this.cachedCanvases.getCanvas("maskCanvas",f,p),w=y.context;w.save();const b=this.getObject(e,h,c);SP(w,b),w.globalCompositeOperation="source-in",w.fillStyle=i?r.getPattern(w,this,ri(s),wn.FILL,e):r,w.fillRect(0,0,f,p),w.restore(),s.save(),s.transform(...m),s.scale(1,-1),e0(s,y.canvas,0,0,f,p,0,-1,1,1),(a=this.dependencyTracker)==null||a.recordBBox(e,s,0,f,0,p),s.restore()}this.compose(),(l=this.dependencyTracker)==null||l.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const s=this.getObject(e,t);if(!s){de("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,s)}paintImageXObjectRepeat(e,t,s,r,i){if(!this.contentVisible)return;const o=this.getObject(e,t);if(!o){de("Dependent image isn't ready yet");return}const a=o.width,l=o.height,c=[];for(let h=0,f=i.length;h<f;h+=2)c.push({transform:[s,0,0,r,i[h],i[h+1]],x:0,y:0,w:a,h:l});this.paintInlineImageXObjectGroup(e,o,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:s,height:r}=e,i=this.cachedCanvases.getCanvas("inlineImage",s,r),o=i.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",i.canvas}paintInlineImageXObject(e,t){var c;if(!this.contentVisible)return;const s=t.width,r=t.height,i=this.ctx;this.save(e);const{filter:o}=i;o!=="none"&&o!==""&&(i.filter="none"),i.scale(1/s,-1/r);let a;if(t.bitmap)a=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)a=t;else{const f=this.cachedCanvases.getCanvas("inlineImage",s,r).context;_P(f,t),a=this.applyTransferMapsToCanvas(f)}const l=this._scaleImage(a,ri(i));i.imageSmoothingEnabled=EP(ft(i),t.interpolate),(c=this.dependencyTracker)==null||c.resetBBox(e).recordBBox(e,i,0,s,-r,0).recordDependencies(e,nr.imageXObject).recordOperation(e),e0(i,l.img,0,0,l.paintWidth,l.paintHeight,0,-r,s,r),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,s){var o,a,l;if(!this.contentVisible)return;const r=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const c=t.width,h=t.height,p=this.cachedCanvases.getCanvas("inlineImage",c,h).context;_P(p,t),i=this.applyTransferMapsToCanvas(p)}(o=this.dependencyTracker)==null||o.resetBBox(e);for(const c of s)r.save(),r.transform(...c.transform),r.scale(1,-1),e0(r,i,c.x,c.y,c.w,c.h,0,-1,1,1),(a=this.dependencyTracker)==null||a.recordBBox(e,r,0,1,-1,0),r.restore();(l=this.dependencyTracker)==null||l.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&((t=this.dependencyTracker)==null||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,nr.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,s){}beginMarkedContent(e,t){var s;(s=this.dependencyTracker)==null||s.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,s){var r;(r=this.dependencyTracker)==null||r.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;(t=this.dependencyTracker)==null||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,s){var o,a;const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const i=this.ctx;this.pendingClip?(r||(this.pendingClip===AP?i.clip(t,"evenodd"):i.clip(t)),this.pendingClip=null,(o=this.dependencyTracker)==null||o.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(a=this.dependencyTracker)==null||a.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=ft(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:s,c:r,d:i}=this.ctx.getTransform();let o,a;if(s===0&&r===0){const l=Math.abs(t),c=Math.abs(i);if(l===c)if(e===0)o=a=1/l;else{const h=l*e;o=a=h<1?1/h:1}else if(e===0)o=1/l,a=1/c;else{const h=l*e,f=c*e;o=h<1?1/h:1,a=f<1?1/f:1}}else{const l=Math.abs(t*i-s*r),c=Math.hypot(t,s),h=Math.hypot(r,i);if(e===0)o=h/l,a=c/l;else{const f=e*l;o=h>f?h/f:1,a=c>f?c/f:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:s,current:{lineWidth:r}}=this,[i,o]=this.getScaleForStroking();if(i===o){s.lineWidth=(r||1)*i,s.stroke(e);return}const a=s.getLineDash();t&&s.save(),s.scale(i,o),wb.a=1/i,wb.d=1/o;const l=new Path2D;if(l.addPath(e,wb),a.length>0){const c=Math.max(i,o);s.setLineDash(a.map(h=>h/c)),s.lineDashOffset/=c}s.lineWidth=r||1,s.stroke(l),t&&s.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};ti=new WeakSet,kS=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},NS=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},PS=function(e,t,s){const r=new Path2D;return r.addPath(e,new DOMMatrix(s).invertSelf().multiplySelf(t)),r};let Eh=F1;for(const n in rm)Eh.prototype[n]!==void 0&&(Eh.prototype[rm[n]]=Eh.prototype[n]);var qm,Xm;class Ri{static get workerPort(){return u(this,qm)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");_(this,qm,e)}static get workerSrc(){return u(this,Xm)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");_(this,Xm,e)}}qm=new WeakMap,Xm=new WeakMap,E(Ri,qm,null),E(Ri,Xm,"");var ld,Jm;class hW{constructor({parsedData:e,rawData:t}){E(this,ld);E(this,Jm);_(this,ld,e),_(this,Jm,t)}getRaw(){return u(this,Jm)}get(e){return u(this,ld).get(e)??null}[Symbol.iterator](){return u(this,ld).entries()}}ld=new WeakMap,Jm=new WeakMap;const Gu=Symbol("INTERNAL");var Qm,Zm,eg,cd;class dW{constructor(e,{name:t,intent:s,usage:r,rbGroups:i}){E(this,Qm,!1);E(this,Zm,!1);E(this,eg,!1);E(this,cd,!0);_(this,Qm,!!(e&Us.DISPLAY)),_(this,Zm,!!(e&Us.PRINT)),this.name=t,this.intent=s,this.usage=r,this.rbGroups=i}get visible(){if(u(this,eg))return u(this,cd);if(!u(this,cd))return!1;const{print:e,view:t}=this.usage;return u(this,Qm)?(t==null?void 0:t.viewState)!=="OFF":u(this,Zm)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,s=!1){e!==Gu&&Ye("Internal method `_setVisible` called."),_(this,eg,s),_(this,cd,t)}}Qm=new WeakMap,Zm=new WeakMap,eg=new WeakMap,cd=new WeakMap;var Pa,$e,ud,hd,tg,RS;class fW{constructor(e,t=Us.DISPLAY){E(this,tg);E(this,Pa,null);E(this,$e,new Map);E(this,ud,null);E(this,hd,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,_(this,hd,e.order);for(const s of e.groups)u(this,$e).set(s.id,new dW(t,s));if(e.baseState==="OFF")for(const s of u(this,$e).values())s._setVisible(Gu,!1);for(const s of e.on)u(this,$e).get(s)._setVisible(Gu,!0);for(const s of e.off)u(this,$e).get(s)._setVisible(Gu,!1);_(this,ud,this.getHash())}}isVisible(e){if(u(this,$e).size===0)return!0;if(!e)return ox("Optional content group not defined."),!0;if(e.type==="OCG")return u(this,$e).has(e.id)?u(this,$e).get(e.id).visible:(de(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return T(this,tg,RS).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!u(this,$e).has(t))return de(`Optional content group not found: ${t}`),!0;if(u(this,$e).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!u(this,$e).has(t))return de(`Optional content group not found: ${t}`),!0;if(!u(this,$e).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!u(this,$e).has(t))return de(`Optional content group not found: ${t}`),!0;if(!u(this,$e).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!u(this,$e).has(t))return de(`Optional content group not found: ${t}`),!0;if(u(this,$e).get(t).visible)return!1}return!0}return de(`Unknown optional content policy ${e.policy}.`),!0}return de(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,s=!0){var i;const r=u(this,$e).get(e);if(!r){de(`Optional content group not found: ${e}`);return}if(s&&t&&r.rbGroups.length)for(const o of r.rbGroups)for(const a of o)a!==e&&((i=u(this,$e).get(a))==null||i._setVisible(Gu,!1,!0));r._setVisible(Gu,!!t,!0),_(this,Pa,null)}setOCGState({state:e,preserveRB:t}){let s;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":s=r;continue}const i=u(this,$e).get(r);if(i)switch(s){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!i.visible,t);break}}_(this,Pa,null)}get hasInitialVisibility(){return u(this,ud)===null||this.getHash()===u(this,ud)}getOrder(){return u(this,$e).size?u(this,hd)?u(this,hd).slice():[...u(this,$e).keys()]:null}getGroup(e){return u(this,$e).get(e)||null}getHash(){if(u(this,Pa)!==null)return u(this,Pa);const e=new nD;for(const[t,s]of u(this,$e))e.update(`${t}:${s.visible}`);return _(this,Pa,e.hexdigest())}[Symbol.iterator](){return u(this,$e).entries()}}Pa=new WeakMap,$e=new WeakMap,ud=new WeakMap,hd=new WeakMap,tg=new WeakSet,RS=function(e){const t=e.length;if(t<2)return!0;const s=e[0];for(let r=1;r<t;r++){const i=e[r];let o;if(Array.isArray(i))o=T(this,tg,RS).call(this,i);else if(u(this,$e).has(i))o=u(this,$e).get(i).visible;else return de(`Optional content group not found: ${i}`),!0;switch(s){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return s==="And"};class pW{constructor(e,{disableRange:t=!1,disableStream:s=!1}){Se(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:i,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(i==null?void 0:i.length)>0){const l=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),e.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const s=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const r=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(s),!0)});Se(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,s,r,i;e.total===void 0?(s=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||s.call(t,{loaded:e.loaded}):(i=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||i.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Se(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new mW(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new gW(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeReaders.slice(0))s.cancel(e);this._pdfDataRangeTransport.abort()}}class mW{constructor(e,t,s=!1,r=null){this._stream=e,this._done=s||!1,this._filename=E1(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class gW{constructor(e,t,s){this._stream=e,this._begin=t,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function yW(n){let e=!0,t=s("filename\\*","i").exec(n);if(t){t=t[1];let h=a(t);return h=unescape(h),h=l(h),h=c(h),i(h)}if(t=o(n),t){const h=c(t);return i(h)}if(t=s("filename","i").exec(n),t){t=t[1];let h=a(t);return h=c(h),i(h)}function s(h,f){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function r(h,f){if(h){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const p=new TextDecoder(h,{fatal:!0}),m=uy(f);f=p.decode(m),e=!1}catch{}}return f}function i(h){return e&&/[\x80-\xff]/.test(h)&&(h=r("utf-8",h),e&&(h=r("iso-8859-1",h))),h}function o(h){const f=[];let p;const m=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(p=m.exec(h))!==null;){let[,w,b,g]=p;if(w=parseInt(w,10),w in f){if(w===0)break;continue}f[w]=[b,g]}const y=[];for(let w=0;w<f.length&&w in f;++w){let[b,g]=f[w];g=a(g),b&&(g=unescape(g),w===0&&(g=l(g))),y.push(g)}return y.join("")}function a(h){if(h.startsWith('"')){const f=h.slice(1).split('\\"');for(let p=0;p<f.length;++p){const m=f[p].indexOf('"');m!==-1&&(f[p]=f[p].slice(0,m),f.length=p+1),f[p]=f[p].replaceAll(/\\(.)/g,"$1")}h=f.join('"')}return h}function l(h){const f=h.indexOf("'");if(f===-1)return h;const p=h.slice(0,f),y=h.slice(f+1).replace(/^[^']*'/,"");return r(p,y)}function c(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,p,m,y){if(m==="q"||m==="Q")return y=y.replaceAll("_"," "),y=y.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,b){return String.fromCharCode(parseInt(b,16))}),r(p,y);try{y=atob(y)}catch{}return r(p,y)})}return""}function pD(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const s in e){const r=e[s];r!==void 0&&t.append(s,r)}return t}function lx(n){var e;return((e=URL.parse(n))==null?void 0:e.origin)??null}function mD({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:s}){const r={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(n.get("Content-Length"),10);return!Number.isInteger(i)||(r.suggestedLength=i,i<=2*t)||s||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function gD(n){const e=n.get("Content-Disposition");if(e){let t=yW(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(E1(t))return t}return null}function my(n,e){return new Yv(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function yD(n){return n===200||n===206}function vD(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function wD(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(de(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class vW{constructor(e){G(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=pD(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Se(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new wW(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new xW(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class wW{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const s=new Headers(e.headers),r=t.url;fetch(r,vD(s,this._withCredentials,this._abortController)).then(i=>{if(e._responseOrigin=lx(i.url),!yD(i.status))throw my(i.status,r);this._reader=i.body.getReader(),this._headersCapability.resolve();const o=i.headers,{allowRangeRequests:a,suggestedLength:l}=mD({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=gD(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new gl("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:wD(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class xW{constructor(e,t,s){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const i=new Headers(e.headers);i.append("Range",`bytes=${t}-${s-1}`);const o=r.url;fetch(o,vD(i,this._withCredentials,this._abortController)).then(a=>{const l=lx(a.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!yD(a.status))throw my(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:wD(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const xb=200,bb=206;function bW(n){const e=n.response;return typeof e!="string"?e:uy(e).buffer}class _W{constructor({url:e,httpHeaders:t,withCredentials:s}){G(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=pD(this.isHttp,t),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,s=this.currXhrId++,r=this.pendingRequests[s]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[i,o]of this.headers)t.setRequestHeader(i,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=bb):r.expectedStatus=xb,t.responseType="arraybuffer",Se(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,s),t.onprogress=this.onProgress.bind(this,s),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),s}onProgress(e,t){var r;const s=this.pendingRequests[e];s&&((r=s.onProgress)==null||r.call(s,t))}onStateChange(e,t){const s=this.pendingRequests[e];if(!s)return;const r=s.xhr;if(r.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){s.onError(r.status);return}const i=r.status||xb;if(!(i===xb&&s.expectedStatus===bb)&&i!==s.expectedStatus){s.onError(r.status);return}const a=bW(r);if(i===bb){const l=r.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);c?s.onDone({begin:parseInt(c[1],10),chunk:a}):(de('Missing or invalid "Content-Range" header.'),s.onError(0))}else a?s.onDone({begin:0,chunk:a}):s.onError(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class SW{constructor(e){this._source=e,this._manager=new _W(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Se(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new EW(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const s=new AW(this._manager,e,t);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class EW{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=lx(t.responseURL);const s=t.getAllResponseHeaders(),r=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[l,...c]=a.split(": ");return[l,c.join(": ")]}):[]),{allowRangeRequests:i,suggestedLength:o}=mD({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=gD(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=my(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class AW{constructor(e,t,s){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=lx((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=my(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const TW=/^[a-z][a-z0-9\-+.]+:/i;function CW(n){if(TW.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class kW{constructor(e){this.source=e,this.url=CW(e.url),Se(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Se(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new NW(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new PW(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class NW{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=my(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new gl("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class PW{constructor(e,t,s){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=e.source;this._isStreamingSupported=!r.disableStream;const i=process.getBuiltinModule("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Df=Symbol("INITIAL_DATA");var Ts,ng,IS;class xD{constructor(){E(this,ng);E(this,Ts,Object.create(null))}get(e,t=null){if(t){const r=T(this,ng,IS).call(this,e);return r.promise.then(()=>t(r.data)),null}const s=u(this,Ts)[e];if(!s||s.data===Df)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const t=u(this,Ts)[e];return!!t&&t.data!==Df}delete(e){const t=u(this,Ts)[e];return!t||t.data===Df?!1:(delete u(this,Ts)[e],!0)}resolve(e,t=null){const s=T(this,ng,IS).call(this,e);s.data=t,s.resolve()}clear(){var e;for(const t in u(this,Ts)){const{data:s}=u(this,Ts)[t];(e=s==null?void 0:s.bitmap)==null||e.close()}_(this,Ts,Object.create(null))}*[Symbol.iterator](){for(const e in u(this,Ts)){const{data:t}=u(this,Ts)[e];t!==Df&&(yield[e,t])}}}Ts=new WeakMap,ng=new WeakSet,IS=function(e){var t;return(t=u(this,Ts))[e]||(t[e]={...Promise.withResolvers(),data:Df})};const RW=1e5,TP=30;var VP,Ra,as,sg,rg,Pc,vo,ig,og,Rc,dd,fd,Ia,pd,ag,md,Ic,lg,cg,gd,jc,ug,ja,yd,qo,bD,_D,jS,Ks,U0,OS,SD,ED;const Ht=class Ht{constructor({textContentSource:e,container:t,viewport:s}){E(this,qo);E(this,Ra,Promise.withResolvers());E(this,as,null);E(this,sg,!1);E(this,rg,!!((VP=globalThis.FontInspector)!=null&&VP.enabled));E(this,Pc,null);E(this,vo,null);E(this,ig,0);E(this,og,0);E(this,Rc,null);E(this,dd,null);E(this,fd,0);E(this,Ia,0);E(this,pd,Object.create(null));E(this,ag,[]);E(this,md,null);E(this,Ic,[]);E(this,lg,new WeakMap);E(this,cg,null);var l;if(e instanceof ReadableStream)_(this,md,e);else if(typeof e=="object")_(this,md,new ReadableStream({start(c){c.enqueue(e),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');_(this,as,_(this,dd,t)),_(this,Ia,s.scale*$i.pixelRatio),_(this,fd,s.rotation),_(this,vo,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:i,pageX:o,pageY:a}=s.rawDims;_(this,cg,[1,0,0,-1,-o,a+i]),_(this,og,r),_(this,ig,i),T(l=Ht,Ks,SD).call(l),_u(t,s),u(this,Ra).promise.finally(()=>{u(Ht,yd).delete(this),_(this,vo,null),_(this,pd,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Sn.platform;return ge(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{u(this,Rc).read().then(({value:t,done:s})=>{if(s){u(this,Ra).resolve();return}u(this,Pc)??_(this,Pc,t.lang),Object.assign(u(this,pd),t.styles),T(this,qo,bD).call(this,t.items),e()},u(this,Ra).reject)};return _(this,Rc,u(this,md).getReader()),u(Ht,yd).add(this),e(),u(this,Ra).promise}update({viewport:e,onBefore:t=null}){var i;const s=e.scale*$i.pixelRatio,r=e.rotation;if(r!==u(this,fd)&&(t==null||t(),_(this,fd,r),_u(u(this,dd),{rotation:r})),s!==u(this,Ia)){t==null||t(),_(this,Ia,s);const o={div:null,properties:null,ctx:T(i=Ht,Ks,U0).call(i,u(this,Pc))};for(const a of u(this,Ic))o.properties=u(this,lg).get(a),o.div=a,T(this,qo,jS).call(this,o)}}cancel(){var t;const e=new gl("TextLayer task cancelled.");(t=u(this,Rc))==null||t.cancel(e).catch(()=>{}),_(this,Rc,null),u(this,Ra).reject(e)}get textDivs(){return u(this,Ic)}get textContentItemsStr(){return u(this,ag)}static cleanup(){if(!(u(this,yd).size>0)){u(this,gd).clear();for(const{canvas:e}of u(this,jc).values())e.remove();u(this,jc).clear()}}};Ra=new WeakMap,as=new WeakMap,sg=new WeakMap,rg=new WeakMap,Pc=new WeakMap,vo=new WeakMap,ig=new WeakMap,og=new WeakMap,Rc=new WeakMap,dd=new WeakMap,fd=new WeakMap,Ia=new WeakMap,pd=new WeakMap,ag=new WeakMap,md=new WeakMap,Ic=new WeakMap,lg=new WeakMap,cg=new WeakMap,gd=new WeakMap,jc=new WeakMap,ug=new WeakMap,ja=new WeakMap,yd=new WeakMap,qo=new WeakSet,bD=function(e){var r,i;if(u(this,sg))return;(i=u(this,vo)).ctx??(i.ctx=T(r=Ht,Ks,U0).call(r,u(this,Pc)));const t=u(this,Ic),s=u(this,ag);for(const o of e){if(t.length>RW){de("Ignoring additional textDivs for performance reasons."),_(this,sg,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=u(this,as);_(this,as,document.createElement("span")),u(this,as).classList.add("markedContent"),o.id&&u(this,as).setAttribute("id",`${o.id}`),a.append(u(this,as))}else o.type==="endMarkedContent"&&_(this,as,u(this,as).parentNode);continue}s.push(o.str),T(this,qo,_D).call(this,o)}},_D=function(e){var w;const t=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};u(this,Ic).push(t);const r=ne.transform(u(this,cg),e.transform);let i=Math.atan2(r[1],r[0]);const o=u(this,pd)[e.fontName];o.vertical&&(i+=Math.PI/2);let a=u(this,rg)&&o.fontSubstitution||o.fontFamily;a=Ht.fontFamilyMap.get(a)||a;const l=Math.hypot(r[2],r[3]),c=l*T(w=Ht,Ks,ED).call(w,a,o,u(this,Pc));let h,f;i===0?(h=r[4],f=r[5]-c):(h=r[4]+c*Math.sin(i),f=r[5]-c*Math.cos(i));const p="calc(var(--total-scale-factor) *",m=t.style;u(this,as)===u(this,dd)?(m.left=`${(100*h/u(this,og)).toFixed(2)}%`,m.top=`${(100*f/u(this,ig)).toFixed(2)}%`):(m.left=`${p}${h.toFixed(2)}px)`,m.top=`${p}${f.toFixed(2)}px)`),m.fontSize=`${p}${(u(Ht,ja)*l).toFixed(2)}px)`,m.fontFamily=a,s.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,u(this,rg)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),i!==0&&(s.angle=i*(180/Math.PI));let y=!1;if(e.str.length>1)y=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const b=Math.abs(e.transform[0]),g=Math.abs(e.transform[3]);b!==g&&Math.max(b,g)/Math.min(b,g)>1.5&&(y=!0)}if(y&&(s.canvasWidth=o.vertical?e.height:e.width),u(this,lg).set(t,s),u(this,vo).div=t,u(this,vo).properties=s,T(this,qo,jS).call(this,u(this,vo)),s.hasText&&u(this,as).append(t),s.hasEOL){const b=document.createElement("br");b.setAttribute("role","presentation"),u(this,as).append(b)}},jS=function(e){var a;const{div:t,properties:s,ctx:r}=e,{style:i}=t;let o="";if(u(Ht,ja)>1&&(o=`scale(${1/u(Ht,ja)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:l}=i,{canvasWidth:c,fontSize:h}=s;T(a=Ht,Ks,OS).call(a,r,h*u(this,Ia),l);const{width:f}=r.measureText(t.textContent);f>0&&(o=`scaleX(${c*u(this,Ia)/f}) ${o}`)}s.angle!==0&&(o=`rotate(${s.angle}deg) ${o}`),o.length>0&&(i.transform=o)},Ks=new WeakSet,U0=function(e=null){let t=u(this,jc).get(e||(e=""));if(!t){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),t=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),u(this,jc).set(e,t),u(this,ug).set(t,{size:0,family:""})}return t},OS=function(e,t,s){const r=u(this,ug).get(e);t===r.size&&s===r.family||(e.font=`${t}px ${s}`,r.size=t,r.family=s)},SD=function(){if(u(this,ja)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),_(this,ja,e.getBoundingClientRect().height),e.remove()},ED=function(e,t,s){const r=u(this,gd).get(e);if(r)return r;const i=T(this,Ks,U0).call(this,s);i.canvas.width=i.canvas.height=TP,T(this,Ks,OS).call(this,i,TP,e);const o=i.measureText(""),a=o.fontBoundingBoxAscent,l=Math.abs(o.fontBoundingBoxDescent);i.canvas.width=i.canvas.height=0;let c=.8;return a?c=a/(a+l):(Sn.platform.isFirefox&&de("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?c=t.ascent:t.descent&&(c=1+t.descent)),u(this,gd).set(e,c),c},E(Ht,Ks),E(Ht,gd,new Map),E(Ht,jc,new Map),E(Ht,ug,new WeakMap),E(Ht,ja,null),E(Ht,yd,new Set);let om=Ht;const IW=100;function AD(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new LS,{docId:t}=e,s=n.url?BG(n.url):null,r=n.data?UG(n.data):null,i=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,l=n.range instanceof TD?n.range:null,c=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let h=n.worker instanceof am?n.worker:null;const f=n.verbosity,p=typeof n.docBaseUrl=="string"&&!ax(n.docBaseUrl)?n.docBaseUrl:null,m=Xy(n.cMapUrl),y=n.cMapPacked!==!1,w=n.CMapReaderFactory||(Gn?KG:dP),b=Xy(n.iccUrl),g=Xy(n.standardFontDataUrl),v=n.StandardFontDataFactory||(Gn?qG:fP),x=Xy(n.wasmUrl),S=n.WasmFactory||(Gn?XG:pP),A=n.stopAtErrors!==!0,C=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,N=n.isEvalSupported!==!1,P=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Gn,R=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!Gn&&(Sn.platform.isFirefox||!globalThis.chrome),O=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,M=typeof n.disableFontFace=="boolean"?n.disableFontFace:Gn,Y=n.fontExtraProperties===!0,J=n.enableXfa===!0,U=n.ownerDocument||globalThis.document,z=n.disableRange===!0,$=n.disableStream===!0,B=n.disableAutoFetch===!0,I=n.pdfBug===!0,j=n.CanvasFactory||(Gn?YG:zG),L=n.FilterFactory||(Gn?WG:GG),D=n.enableHWA===!0,V=n.useWasm!==!1,F=l?l.length:n.length??NaN,H=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Gn&&!M,se=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(w===dP&&v===fP&&S===pP&&m&&g&&x&&Yf(m,document.baseURI)&&Yf(g,document.baseURI)&&Yf(x,document.baseURI)),ae=null;fG(f);const re={canvasFactory:new j({ownerDocument:U,enableHWA:D}),filterFactory:new L({docId:t,ownerDocument:U}),cMapReaderFactory:se?null:new w({baseUrl:m,isCompressed:y}),standardFontDataFactory:se?null:new v({baseUrl:g}),wasmFactory:se?null:new S({baseUrl:x})};h||(h=am.create({verbosity:f,port:Ri.workerPort}),e._worker=h);const K={docId:t,apiVersion:"5.4.394",data:r,password:a,disableAutoFetch:B,rangeChunkSize:c,length:F,docBaseUrl:p,enableXfa:J,evaluatorOptions:{maxImageSize:C,disableFontFace:M,ignoreErrors:A,isEvalSupported:N,isOffscreenCanvasSupported:P,isImageDecoderSupported:R,canvasMaxAreaInBytes:O,fontExtraProperties:Y,useSystemFonts:H,useWasm:V,useWorkerFetch:se,cMapUrl:m,iccUrl:b,standardFontDataUrl:g,wasmUrl:x}},Q={ownerDocument:U,pdfBug:I,styleElement:ae,loadingParams:{disableAutoFetch:B,enableXfa:J}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const De=h.messageHandler.sendWithPromise("GetDocRequest",K,r?[r.buffer]:null);let qe;if(l)qe=new pW(l,{disableRange:z,disableStream:$});else if(!r){if(!s)throw new Error("getDocument - no `url` parameter provided.");const Tl=Yf(s)?vW:Gn?kW:SW;qe=new Tl({url:s,length:F,httpHeaders:i,withCredentials:o,rangeChunkSize:c,disableRange:z,disableStream:$})}return De.then(Tl=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const st=new tp(t,Tl,h.port),ni=new LW(st,e,qe,Q,re,D);e._transport=ni,st.send("Ready",null)})}).catch(e._capability.reject),e}var gw;const yw=class yw{constructor(){G(this,"_capability",Promise.withResolvers());G(this,"_transport",null);G(this,"_worker",null);G(this,"docId",`d${$t(yw,gw)._++}`);G(this,"destroyed",!1);G(this,"onPassword",null);G(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,s,r;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(i){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,i}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}async getData(){return this._transport.getData()}};gw=new WeakMap,E(yw,gw,0);let LS=yw;var Oc,hg,dg,fg,pg;class TD{constructor(e,t,s=!1,r=null){E(this,Oc,Promise.withResolvers());E(this,hg,[]);E(this,dg,[]);E(this,fg,[]);E(this,pg,[]);this.length=e,this.initialData=t,this.progressiveDone=s,this.contentDispositionFilename=r}addRangeListener(e){u(this,pg).push(e)}addProgressListener(e){u(this,fg).push(e)}addProgressiveReadListener(e){u(this,dg).push(e)}addProgressiveDoneListener(e){u(this,hg).push(e)}onDataRange(e,t){for(const s of u(this,pg))s(e,t)}onDataProgress(e,t){u(this,Oc).promise.then(()=>{for(const s of u(this,fg))s(e,t)})}onDataProgressiveRead(e){u(this,Oc).promise.then(()=>{for(const t of u(this,dg))t(e)})}onDataProgressiveDone(){u(this,Oc).promise.then(()=>{for(const e of u(this,hg))e()})}transportReady(){u(this,Oc).resolve()}requestDataRange(e,t){Ye("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}Oc=new WeakMap,hg=new WeakMap,dg=new WeakMap,fg=new WeakMap,pg=new WeakMap;class jW{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ge(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var wo,Lc,op;class OW{constructor(e,t,s,r=!1){E(this,Lc);E(this,wo,!1);this._pageIndex=e,this._pageInfo=t,this._transport=s,this._stats=r?new iP:null,this._pdfBug=r,this.commonObjs=s.commonObjs,this.objs=new xD,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:s=0,offsetY:r=0,dontFlip:i=!1}={}){return new dy({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:r,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ge(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:s,intent:r="display",annotationMode:i=ca.ENABLE,transform:o=null,background:a=null,optionalContentConfigPromise:l=null,annotationCanvasMap:c=null,pageColors:h=null,printAnnotationStorage:f=null,isEditing:p=!1,recordOperations:m=!1,operationsFilter:y=null}){var R,O,M;(R=this._stats)==null||R.time("Overall");const w=this._transport.getRenderingIntent(r,i,f,p),{renderingIntent:b,cacheKey:g}=w;_(this,wo,!1),l||(l=this._transport.getOptionalContentConfig(b));let v=this._intentStates.get(g);v||(v=Object.create(null),this._intentStates.set(g,v)),v.streamReaderCancelTimeout&&(clearTimeout(v.streamReaderCancelTimeout),v.streamReaderCancelTimeout=null);const x=!!(b&Us.PRINT);v.displayReadyCapability||(v.displayReadyCapability=Promise.withResolvers(),v.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(O=this._stats)==null||O.time("Page Request"),this._pumpOperatorList(w));const S=!!(this._pdfBug&&((M=globalThis.StepperManager)!=null&&M.enabled)),A=!this.recordedBBoxes&&(m||S),C=Y=>{var J,U;if(v.renderTasks.delete(N),A){const z=(J=N.gfx)==null?void 0:J.dependencyTracker.take();z&&(N.stepper&&N.stepper.setOperatorBBoxes(z,N.gfx.dependencyTracker.takeDebugMetadata()),m&&(this.recordedBBoxes=z))}x&&_(this,wo,!0),T(this,Lc,op).call(this),Y?(N.capability.reject(Y),this._abortOperatorList({intentState:v,reason:Y instanceof Error?Y:new Error(Y)})):N.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(U=globalThis.Stats)!=null&&U.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},N=new DS({callback:C,params:{canvas:t,canvasContext:e,dependencyTracker:A?new QG(t,v.operatorList.length,S):null,viewport:s,transform:o,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:v.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!x,pdfBug:this._pdfBug,pageColors:h,enableHWA:this._transport.enableHWA,operationsFilter:y});(v.renderTasks||(v.renderTasks=new Set)).add(N);const P=N.task;return Promise.all([v.displayReadyCapability.promise,l]).then(([Y,J])=>{var U;if(this.destroyed){C();return}if((U=this._stats)==null||U.time("Rendering"),!(J.renderingIntent&b))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");N.initializeGraphics({transparency:Y,optionalContentConfig:J}),N.operatorListChanged()}).catch(C),P}getOperatorList({intent:e="display",annotationMode:t=ca.ENABLE,printAnnotationStorage:s=null,isEditing:r=!1}={}){var c;function i(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))}const o=this._transport.getRenderingIntent(e,t,s,r,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let l;return a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=i,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(c=this._stats)==null||c.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>im.textContent(s));const t=this.streamTextContent(e);return new Promise(function(s,r){function i(){o.read().then(function({value:l,done:c}){if(c){s(a);return}a.lang??(a.lang=l.lang),Object.assign(a.styles,l.styles),a.items.push(...l.items),i()},r)}const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const s of t.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),_(this,wo,!1),Promise.all(e)}cleanup(e=!1){_(this,wo,!0);const t=T(this,Lc,op).call(this);return e&&t&&this._stats&&(this._stats=new iP),t}_startRenderPage(e,t){var r,i;const s=this._intentStates.get(t);s&&((r=this._stats)==null||r.timeEnd("Page Request"),(i=s.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let s=0,r=e.length;s<r;s++)t.operatorList.fnArray.push(e.fnArray[s]),t.operatorList.argsArray.push(e.argsArray[s]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const s of t.renderTasks)s.operatorListChanged();e.lastChunk&&T(this,Lc,op).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:s,modifiedIds:r}){const{map:i,transfer:o}=s,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:r},o).getReader(),c=this._intentStates.get(t);c.streamReader=l;const h=()=>{l.read().then(({value:f,done:p})=>{if(p){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(f,c),h())},f=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const p of c.renderTasks)p.operatorListChanged();T(this,Lc,op).call(this)}if(c.displayReadyCapability)c.displayReadyCapability.reject(f);else if(c.opListReadCapability)c.opListReadCapability.reject(f);else throw f}})};h()}_abortOperatorList({intentState:e,reason:t,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(t instanceof S1){let r=IW;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new gl(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,i]of this._intentStates)if(i===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}wo=new WeakMap,Lc=new WeakSet,op=function(){if(!u(this,wo)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),_(this,wo,!1),!0};var Oa,Ur,xo,Dc,vw,Mc,Fc,qn,$0,CD,kD,ap,vd,V0;const at=class at{constructor({name:e=null,port:t=null,verbosity:s=pG()}={}){E(this,qn);E(this,Oa,Promise.withResolvers());E(this,Ur,null);E(this,xo,null);E(this,Dc,null);if(this.name=e,this.destroyed=!1,this.verbosity=s,t){if(u(at,Fc).has(t))throw new Error("Cannot use more than one PDFWorker per port.");u(at,Fc).set(t,this),T(this,qn,CD).call(this,t)}else T(this,qn,kD).call(this)}get promise(){return u(this,Oa).promise}get port(){return u(this,xo)}get messageHandler(){return u(this,Ur)}destroy(){var e,t;this.destroyed=!0,(e=u(this,Dc))==null||e.terminate(),_(this,Dc,null),u(at,Fc).delete(u(this,xo)),_(this,xo,null),(t=u(this,Ur))==null||t.destroy(),_(this,Ur,null)}static create(e){const t=u(this,Fc).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new at(e)}static get workerSrc(){if(Ri.workerSrc)return Ri.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ge(this,"_setupFakeWorkerGlobal",(async()=>u(this,vd,V0)?u(this,vd,V0):(await import(this.workerSrc)).WorkerMessageHandler)())}};Oa=new WeakMap,Ur=new WeakMap,xo=new WeakMap,Dc=new WeakMap,vw=new WeakMap,Mc=new WeakMap,Fc=new WeakMap,qn=new WeakSet,$0=function(){u(this,Oa).resolve(),u(this,Ur).send("configure",{verbosity:this.verbosity})},CD=function(e){_(this,xo,e),_(this,Ur,new tp("main","worker",e)),u(this,Ur).on("ready",()=>{}),T(this,qn,$0).call(this)},kD=function(){if(u(at,Mc)||u(at,vd,V0)){T(this,qn,ap).call(this);return}let{workerSrc:e}=at;try{at._isSameOrigin(window.location,e)||(e=at._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),s=new tp("main","worker",t),r=()=>{i.abort(),s.destroy(),t.terminate(),this.destroyed?u(this,Oa).reject(new Error("Worker was destroyed")):T(this,qn,ap).call(this)},i=new AbortController;t.addEventListener("error",()=>{u(this,Dc)||r()},{signal:i.signal}),s.on("test",a=>{if(i.abort(),this.destroyed||!a){r();return}_(this,Ur,s),_(this,xo,t),_(this,Dc,t),T(this,qn,$0).call(this)}),s.on("ready",a=>{if(i.abort(),this.destroyed){r();return}try{o()}catch{T(this,qn,ap).call(this)}});const o=()=>{const a=new Uint8Array;s.send("test",a,[a.buffer])};o();return}catch{ox("The worker has been disabled.")}T(this,qn,ap).call(this)},ap=function(){u(at,Mc)||(de("Setting up fake worker."),_(at,Mc,!0)),at._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){u(this,Oa).reject(new Error("Worker was destroyed"));return}const t=new HG;_(this,xo,t);const s=`fake${$t(at,vw)._++}`,r=new tp(s+"_worker",s,t);e.setup(r,t),_(this,Ur,new tp(s,s+"_worker",t)),T(this,qn,$0).call(this)}).catch(e=>{u(this,Oa).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},vd=new WeakSet,V0=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},E(at,vd),E(at,vw,0),E(at,Mc,!1),E(at,Fc,new WeakMap),Gn&&(_(at,Mc,!0),Ri.workerSrc||(Ri.workerSrc="./pdf.worker.mjs")),at._isSameOrigin=(e,t)=>{const s=URL.parse(e);if(!(s!=null&&s.origin)||s.origin==="null")return!1;const r=new URL(t,s);return s.origin===r.origin},at._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},at.fromPort=e=>{if(TG("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return at.create(e)};let am=at;var bo,xi,wd,xd,_o,Bc,lp;class LW{constructor(e,t,s,r,i,o){E(this,Bc);E(this,bo,new Map);E(this,xi,new Map);E(this,wd,new Map);E(this,xd,new Map);E(this,_o,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new xD,this.fontLoader=new MG({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.wasmFactory=i.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}get annotationStorage(){return ge(this,"annotationStorage",new A1)}getRenderingIntent(e,t=ca.ENABLE,s=null,r=!1,i=!1){let o=Us.DISPLAY,a=vS;switch(e){case"any":o=Us.ANY;break;case"display":break;case"print":o=Us.PRINT;break;default:de(`getRenderingIntent - invalid intent: ${e}`)}const l=o&Us.PRINT&&s instanceof rD?s:this.annotationStorage;switch(t){case ca.DISABLE:o+=Us.ANNOTATIONS_DISABLE;break;case ca.ENABLE:break;case ca.ENABLE_FORMS:o+=Us.ANNOTATIONS_FORMS;break;case ca.ENABLE_STORAGE:o+=Us.ANNOTATIONS_STORAGE,a=l.serializable;break;default:de(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(o+=Us.IS_EDITING),i&&(o+=Us.OPLIST);const{ids:c,hash:h}=l.modifiedIds,f=[o,a.hash,h];return{renderingIntent:o,cacheKey:f.join("_"),annotationStorageSerializable:a,modifiedIds:c}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=u(this,_o))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of u(this,xi).values())e.push(r._destroy());u(this,xi).clear(),u(this,wd).clear(),u(this,xd).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r,i;this.commonObjs.clear(),this.fontLoader.clear(),u(this,bo).clear(),this.filterFactory.destroy(),om.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new gl("Worker was terminated.")),(i=this.messageHandler)==null||i.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(s,r)=>{Se(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},r.onPull=()=>{this._fullReader.read().then(function({value:i,done:o}){if(o){r.close();return}Se(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{r.error(i)})},r.onCancel=i=>{this._fullReader.cancel(i),r.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async s=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:i,contentLength:o}=this._fullReader;return(!r||!i)&&(this._lastProgress&&((a=t.onProgress)==null||a.call(t,this._lastProgress)),this._fullReader.onProgress=l=>{var c;(c=t.onProgress)==null||c.call(t,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:r,isRangeSupported:i,contentLength:o}}),e.on("GetRangeReader",(s,r)=>{Se(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(s.begin,s.end);if(!i){r.close();return}r.onPull=()=>{i.read().then(function({value:o,done:a}){if(a){r.close();return}Se(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{i.cancel(o),r.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,t._capability.resolve(new jW(s,this))}),e.on("DocException",s=>{t._capability.reject(ts(s))}),e.on("PasswordRequest",s=>{_(this,_o,Promise.withResolvers());try{if(!t.onPassword)throw ts(s);const r=i=>{i instanceof Error?u(this,_o).reject(i):u(this,_o).resolve({password:i})};t.onPassword(r,s.code)}catch(r){u(this,_o).reject(r)}return u(this,_o).promise}),e.on("DataLoaded",s=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;u(this,xi).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,r,i])=>{var o;if(this.destroyed||this.commonObjs.has(s))return null;switch(r){case"Font":if("error"in i){const p=i.error;de(`Error during font loading: ${p}`),this.commonObjs.resolve(s,p);break}const a=new wS(i),l=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(p,m)=>globalThis.FontInspector.fontAdded(p,m):null,c=new FG(a,l,i.extra,i.charProcOperatorList);this.fontLoader.bind(c).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!c.fontExtraProperties&&c.data&&c.clearData(),this.commonObjs.resolve(s,c)});break;case"CopyLocalImage":const{imageRef:h}=i;Se(h,"The imageRef must be defined.");for(const p of u(this,xi).values())for(const[,m]of p.objs)if((m==null?void 0:m.ref)===h)return m.dataLen?(this.commonObjs.resolve(s,structuredClone(m)),m.dataLen):null;break;case"FontPath":case"Image":this.commonObjs.resolve(s,i);break;case"Pattern":const f=new xS(i);this.commonObjs.resolve(s,f.getIR());break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([s,r,i,o])=>{var l;if(this.destroyed)return;const a=u(this,xi).get(r);if(!a.objs.has(s)){if(a._intentStates.size===0){(l=o==null?void 0:o.bitmap)==null||l.close();return}switch(i){case"Image":case"Pattern":a.objs.resolve(s,o);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",s=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:s.loaded,total:s.total})}),e.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[s.type];if(!r)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&de("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((s=this._fullReader)==null?void 0:s.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,s=u(this,wd).get(t);if(s)return s;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&u(this,xd).set(i.refStr,e);const o=new OW(t,i,this,this._params.pdfBug);return u(this,xi).set(t,o),o});return u(this,wd).set(t,r),r}getPageIndex(e){return bS(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return T(this,Bc,lp).call(this,"GetFieldObjects")}hasJSActions(){return T(this,Bc,lp).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return T(this,Bc,lp).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return T(this,Bc,lp).call(this,"GetOptionalContentConfig").then(t=>new fW(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=u(this,bo).get(e);if(t)return t;const s=this.messageHandler.sendWithPromise(e,null).then(r=>{var i,o;return{info:r[0],metadata:r[1]?new hW(r[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return u(this,bo).set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of u(this,xi).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),u(this,bo).clear(),this.filterFactory.destroy(!0),om.cleanup()}}cachedPageNumber(e){if(!bS(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return u(this,xd).get(t)??null}}bo=new WeakMap,xi=new WeakMap,wd=new WeakMap,xd=new WeakMap,_o=new WeakMap,Bc=new WeakSet,lp=function(e,t=null){const s=u(this,bo).get(e);if(s)return s;const r=this.messageHandler.sendWithPromise(e,t);return u(this,bo).set(e,r),r};var La;class DW{constructor(e){E(this,La,null);G(this,"onContinue",null);G(this,"onError",null);_(this,La,e)}get promise(){return u(this,La).capability.promise}cancel(e=0){u(this,La).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=u(this,La).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=u(this,La);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}La=new WeakMap;var Da,Uc;const Gl=class Gl{constructor({callback:e,params:t,objs:s,commonObjs:r,annotationCanvasMap:i,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:h=!1,pdfBug:f=!1,pageColors:p=null,enableHWA:m=!1,operationsFilter:y=null}){E(this,Da,null);this.callback=e,this.params=t,this.objs=s,this.commonObjs=r,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=f,this.pageColors=p,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new DW(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=m,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=y}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var l,c;if(this.cancelled)return;if(this._canvas){if(u(Gl,Uc).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");u(Gl,Uc).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:r,background:i,dependencyTracker:o}=this.params,a=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Eh(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:r,viewport:s,transparency:e,background:i}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(e=null,t=0){var s,r,i;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),u(this,Da)&&(window.cancelAnimationFrame(u(this,Da)),_(this,Da,null)),u(Gl,Uc).delete(this._canvas),e||(e=new S1(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(i=(r=this.task).onError)==null||i.call(r,e)}operatorListChanged(){var e,t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?_(this,Da,window.requestAnimationFrame(()=>{_(this,Da,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),u(Gl,Uc).delete(this._canvas),this.callback())))}};Da=new WeakMap,Uc=new WeakMap,E(Gl,Uc,new WeakSet);let DS=Gl;const ND="5.4.394",MW="2cc809ade";var Cs,$c,bd,Wt,mg,_d,So,gg,Ma,$r,yg,Ve,MS,FS,BS,Fl,PD,na;const ns=class ns{constructor({editor:e=null,uiManager:t=null}){E(this,Ve);E(this,Cs,null);E(this,$c,null);E(this,bd);E(this,Wt,null);E(this,mg,!1);E(this,_d,!1);E(this,So,null);E(this,gg);E(this,Ma,null);E(this,$r,null);var s,r;e?(_(this,_d,!1),_(this,So,e)):_(this,_d,!0),_(this,$r,(e==null?void 0:e._uiManager)||t),_(this,gg,u(this,$r)._eventBus),_(this,bd,((s=e==null?void 0:e.color)==null?void 0:s.toUpperCase())||((r=u(this,$r))==null?void 0:r.highlightColors.values().next().value)||"#FFFF98"),u(ns,yg)||_(ns,yg,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return ge(this,"_keyboardManager",new py([[["Escape","mac+Escape"],ns.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ns.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ns.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ns.prototype._moveToPrevious],[["Home","mac+Home"],ns.prototype._moveToBeginning],[["End","mac+End"],ns.prototype._moveToEnd]]))}renderButton(){const e=_(this,Cs,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",u(this,So)&&(e.ariaControls=`${u(this,So).id}_colorpicker_dropdown`);const t=u(this,$r)._signal;e.addEventListener("click",T(this,Ve,Fl).bind(this),{signal:t}),e.addEventListener("keydown",T(this,Ve,BS).bind(this),{signal:t});const s=_(this,$c,document.createElement("span"));return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=u(this,bd),e.append(s),e}renderMainDropdown(){const e=_(this,Wt,T(this,Ve,MS).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===u(this,Cs)){T(this,Ve,Fl).call(this,e);return}const t=e.target.getAttribute("data-color");t&&T(this,Ve,FS).call(this,t,e)}_moveToNext(e){var t,s;if(!u(this,Ve,na)){T(this,Ve,Fl).call(this,e);return}if(e.target===u(this,Cs)){(t=u(this,Wt).firstChild)==null||t.focus();return}(s=e.target.nextSibling)==null||s.focus()}_moveToPrevious(e){var t,s;if(e.target===((t=u(this,Wt))==null?void 0:t.firstChild)||e.target===u(this,Cs)){u(this,Ve,na)&&this._hideDropdownFromKeyboard();return}u(this,Ve,na)||T(this,Ve,Fl).call(this,e),(s=e.target.previousSibling)==null||s.focus()}_moveToBeginning(e){var t;if(!u(this,Ve,na)){T(this,Ve,Fl).call(this,e);return}(t=u(this,Wt).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!u(this,Ve,na)){T(this,Ve,Fl).call(this,e);return}(t=u(this,Wt).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=u(this,Wt))==null||e.classList.add("hidden"),u(this,Cs).ariaExpanded="false",(t=u(this,Ma))==null||t.abort(),_(this,Ma,null)}_hideDropdownFromKeyboard(){var e;if(!u(this,_d)){if(!u(this,Ve,na)){(e=u(this,So))==null||e.unselect();return}this.hideDropdown(),u(this,Cs).focus({preventScroll:!0,focusVisible:u(this,mg)})}}updateColor(e){if(u(this,$c)&&(u(this,$c).style.backgroundColor=e),!u(this,Wt))return;const t=u(this,$r).highlightColors.values();for(const s of u(this,Wt).children)s.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=u(this,Cs))==null||e.remove(),_(this,Cs,null),_(this,$c,null),(t=u(this,Wt))==null||t.remove(),_(this,Wt,null)}};Cs=new WeakMap,$c=new WeakMap,bd=new WeakMap,Wt=new WeakMap,mg=new WeakMap,_d=new WeakMap,So=new WeakMap,gg=new WeakMap,Ma=new WeakMap,$r=new WeakMap,yg=new WeakMap,Ve=new WeakSet,MS=function(){const e=document.createElement("div"),t=u(this,$r)._signal;e.addEventListener("contextmenu",Ar,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),u(this,So)&&(e.id=`${u(this,So).id}_colorpicker_dropdown`);for(const[s,r]of u(this,$r).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",r),i.title=s,i.setAttribute("data-l10n-id",u(ns,yg)[s]);const o=document.createElement("span");i.append(o),o.className="swatch",o.style.backgroundColor=r,i.ariaSelected=r===u(this,bd),i.addEventListener("click",T(this,Ve,FS).bind(this,r),{signal:t}),e.append(i)}return e.addEventListener("keydown",T(this,Ve,BS).bind(this),{signal:t}),e},FS=function(e,t){t.stopPropagation(),u(this,gg).dispatch("switchannotationeditorparams",{source:this,type:_e.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},BS=function(e){ns._keyboardManager.exec(this,e)},Fl=function(e){if(u(this,Ve,na)){this.hideDropdown();return}if(_(this,mg,e.detail===0),u(this,Ma)||(_(this,Ma,new AbortController),window.addEventListener("pointerdown",T(this,Ve,PD).bind(this),{signal:u(this,$r).combinedSignal(u(this,Ma))})),u(this,Cs).ariaExpanded="true",u(this,Wt)){u(this,Wt).classList.remove("hidden");return}const t=_(this,Wt,T(this,Ve,MS).call(this));u(this,Cs).append(t)},PD=function(e){var t;(t=u(this,Wt))!=null&&t.contains(e.target)||this.hideDropdown()},na=function(){return u(this,Wt)&&!u(this,Wt).classList.contains("hidden")},E(ns,yg,null);let ew=ns;var bi,vg,Sd,wg;const Wl=class Wl{constructor(e){E(this,bi,null);E(this,vg,null);E(this,Sd,null);_(this,vg,e),_(this,Sd,e._uiManager),u(Wl,wg)||_(Wl,wg,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(u(this,bi))return u(this,bi);const{editorType:e,colorType:t,color:s}=u(this,vg),r=_(this,bi,document.createElement("input"));return r.type="color",r.value=s||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",u(Wl,wg)[e]),r.addEventListener("input",()=>{u(this,Sd).updateParams(t,r.value)},{signal:u(this,Sd)._signal}),r}update(e){u(this,bi)&&(u(this,bi).value=e)}destroy(){var e;(e=u(this,bi))==null||e.remove(),_(this,bi,null)}hideDropdown(){}};bi=new WeakMap,vg=new WeakMap,Sd=new WeakMap,wg=new WeakMap,E(Wl,wg,null);let tw=Wl;function CP(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Mf(n){return Math.max(0,Math.min(255,255*n))}class kP{static CMYK_G([e,t,s,r]){return["G",1-Math.min(1,.3*e+.59*s+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Mf(e),[e,e,e]}static G_HTML([e]){const t=CP(e);return`#${t}${t}${t}`}static RGB_G([e,t,s]){return["G",.3*e+.59*t+.11*s]}static RGB_rgb(e){return e.map(Mf)}static RGB_HTML(e){return`#${e.map(CP).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,s,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,s+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,s,r]){return[Mf(1-Math.min(1,e+r)),Mf(1-Math.min(1,s+r)),Mf(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,s]){const r=1-e,i=1-t,o=1-s,a=Math.min(r,i,o);return["CMYK",r,i,o,a]}}class FW{create(e,t,s=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),s||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Ye("Abstract method `_createSVG` called.")}}class nw extends FW{_createSVG(e){return document.createElementNS(Wi,e)}}const BW=9,Eu=new WeakSet,UW=new Date().getTimezoneOffset()*60*1e3;class _b{static create(e){switch(e.data.annotationType){case Dt.LINK:return new k1(e);case Dt.TEXT:return new VW(e);case Dt.WIDGET:switch(e.data.fieldType){case"Tx":return new HW(e);case"Btn":return e.data.radioButton?new jD(e):e.data.checkBox?new GW(e):new WW(e);case"Ch":return new YW(e);case"Sig":return new zW(e)}return new Pu(e);case Dt.POPUP:return new $S(e);case Dt.FREETEXT:return new FD(e);case Dt.LINE:return new qW(e);case Dt.SQUARE:return new XW(e);case Dt.CIRCLE:return new JW(e);case Dt.POLYLINE:return new BD(e);case Dt.CARET:return new ZW(e);case Dt.INK:return new N1(e);case Dt.POLYGON:return new QW(e);case Dt.HIGHLIGHT:return new UD(e);case Dt.UNDERLINE:return new e7(e);case Dt.SQUIGGLY:return new t7(e);case Dt.STRIKEOUT:return new n7(e);case Dt.STAMP:return new $D(e);case Dt.FILEATTACHMENT:return new s7(e);default:return new vt(e)}}}var Vc,Ed,fr,xg,US;const B1=class B1{constructor(e,{isRenderable:t=!1,ignoreBorder:s=!1,createQuadrilaterals:r=!1}={}){E(this,xg);E(this,Vc,null);E(this,Ed,!1);E(this,fr,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,t&&(this.contentElement=this.container=this._createContainer(s)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return B1._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var s;const{data:e}=this,t=(s=this.annotationStorage)==null?void 0:s.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var a;const e=(a=this.annotationStorage)==null?void 0:a.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:s,rect:r}=this.data;let i=-1/0,o=-1/0;if((t==null?void 0:t.length)>=8){for(let l=0;l<t.length;l+=8)t[l+1]>o?(o=t[l+1],i=t[l+2]):t[l+1]===o&&(i=Math.max(i,t[l+2]));return[i,o]}if((s==null?void 0:s.length)>=1){for(const l of s)for(let c=0,h=l.length;c<h;c+=2)l[c+1]>o?(o=l[c+1],i=l[c]):l[c+1]===o&&(i=Math.max(i,l[c]));if(i!==1/0)return[i,o]}return r?[r[2],r[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:s,pageHeight:r,pageX:i,pageY:o}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-i)/s,e[1]=100*(e[1]-o)/r,e}get commentText(){var t,s,r;const{data:e}=this;return((s=(t=this.annotationStorage.getRawValue(`${sm}${e.id}`))==null?void 0:t.popup)==null?void 0:s.contents)||((r=e.contentsObj)==null?void 0:r.str)||""}set commentText(e){const{data:t}=this,s={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:s})||this.annotationStorage.setValue(`${sm}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:s,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;(t=((e=u(this,fr))==null?void 0:e.popup)||this.popup)==null||t.remove(),_(this,fr,this.popup=null)}updateEdited(e){var i;if(!this.container)return;e.rect&&(u(this,Vc)||_(this,Vc,{rect:this.data.rect.slice(0)}));const{rect:t,popup:s}=e;t&&T(this,xg,US).call(this,t);let r=((i=u(this,fr))==null?void 0:i.popup)||this.popup;!r&&(s!=null&&s.text)&&(this._createPopup(s),r=u(this,fr).popup),r&&(r.updateEdited(e),s!=null&&s.deleted&&(r.remove(),_(this,fr,null),this.popup=null))}resetEdited(){var e;u(this,Vc)&&(T(this,xg,US).call(this,u(this,Vc).rect),(e=u(this,fr))==null||e.popup.resetEdited(),_(this,Vc,null))}_createContainer(e){const{data:t,parent:{page:s,viewport:r}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),!(this instanceof Pu)&&!(this instanceof k1)&&(i.tabIndex=0);const{style:o}=i;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof $S){const{rotation:w}=t;return!t.hasOwnCanvas&&w!==0&&this.setRotation(w,i),i}const{width:a,height:l}=this;if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const w=t.borderStyle.horizontalCornerRadius,b=t.borderStyle.verticalCornerRadius;if(w>0||b>0){const v=`calc(${w}px * var(--total-scale-factor)) / calc(${b}px * var(--total-scale-factor))`;o.borderRadius=v}else if(this instanceof jD){const v=`calc(${a}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;o.borderRadius=v}switch(t.borderStyle.style){case Uu.SOLID:o.borderStyle="solid";break;case Uu.DASHED:o.borderStyle="dashed";break;case Uu.BEVELED:de("Unimplemented border style: beveled");break;case Uu.INSET:de("Unimplemented border style: inset");break;case Uu.UNDERLINE:o.borderBottomStyle="solid";break}const g=t.borderColor||null;g?(_(this,Ed,!0),o.borderColor=ne.makeHexColor(g[0]|0,g[1]|0,g[2]|0)):o.borderWidth=0}const c=ne.normalizeRect([t.rect[0],s.view[3]-t.rect[1]+s.view[1],t.rect[2],s.view[3]-t.rect[3]+s.view[1]]),{pageWidth:h,pageHeight:f,pageX:p,pageY:m}=r.rawDims;o.left=`${100*(c[0]-p)/h}%`,o.top=`${100*(c[1]-m)/f}%`;const{rotation:y}=t;return t.hasOwnCanvas||y===0?(o.width=`${100*a/h}%`,o.height=`${100*l/f}%`):this.setRotation(y,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:r}=this.parent.viewport.rawDims;let{width:i,height:o}=this;e%180!==0&&([i,o]=[o,i]),t.style.width=`${100*i/s}%`,t.style.height=`${100*o/r}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,s,r)=>{const i=r.detail[t],o=i[0],a=i.slice(1);r.target.style[s]=kP[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[s]:kP[`${o}_rgb`](a)})};return ge(this,"_commonActions",{display:t=>{const{display:s}=t.detail,r=s%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:s===1||s===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:s}=t.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const s=t.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,t){const s=this._commonActions;for(const r of Object.keys(t.detail)){const i=e[r]||s[r];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const s=this._commonActions;for(const[r,i]of Object.entries(t)){const o=s[r];if(o){const a={detail:{[r]:i},target:e};o(a),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,s,r,i]=this.data.rect.map(w=>Math.fround(w));if(e.length===8){const[w,b,g,v]=e.subarray(2,6);if(r===w&&i===b&&t===g&&s===v)return}const{style:o}=this.container;let a;if(u(this,Ed)){const{borderColor:w,borderWidth:b}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${b}">`],this.container.classList.add("hasBorder")}const l=r-t,c=i-s,{svgFactory:h}=this,f=h.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0),f.role="none";const p=h.createElement("defs");f.append(p);const m=h.createElement("clipPath"),y=`clippath_${this.data.id}`;m.setAttribute("id",y),m.setAttribute("clipPathUnits","objectBoundingBox"),p.append(m);for(let w=2,b=e.length;w<b;w+=8){const g=e[w],v=e[w+1],x=e[w+2],S=e[w+3],A=h.createElement("rect"),C=(x-t)/l,N=(i-v)/c,P=(g-x)/l,R=(v-S)/c;A.setAttribute("x",C),A.setAttribute("y",N),A.setAttribute("width",P),A.setAttribute("height",R),m.append(A),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${C}" y="${N}" width="${P}" height="${R}"/>`)}u(this,Ed)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(f),this.container.style.clipPath=`url(#${y})`}_createPopup(e=null){const{data:t}=this;let s,r;e?(s={str:e.text},r=e.date):(s=t.contentsObj,r=t.modificationDate),_(this,fr,new $S({data:{color:t.color,titleObj:t.titleObj,modificationDate:r,contentsObj:s,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(u(this,fr)||this.popup||this.data.popupRef)}get extraPopupElement(){return u(this,fr)}render(){Ye("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const s=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:i,id:o,exportValues:a}of r){if(i===-1||o===t)continue;const l=typeof a=="string"?a:null,c=document.querySelector(`[data-element-id="${o}"]`);if(c&&!Eu.has(c)){de(`_getElementsByName - element not allowed: ${o}`);continue}s.push({id:o,exportValue:l,domElement:c})}return s}for(const r of document.getElementsByName(e)){const{exportValue:i}=r,o=r.getAttribute("data-element-id");o!==t&&Eu.has(r)&&s.push({id:o,exportValue:i,domElement:r})}return s}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Vc=new WeakMap,Ed=new WeakMap,fr=new WeakMap,xg=new WeakSet,US=function(e){const{container:{style:t},data:{rect:s,rotation:r},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:o,pageX:a,pageY:l}}}}=this;s==null||s.splice(0,4,...e),t.left=`${100*(e[0]-a)/i}%`,t.top=`${100*(o-e[3]+l)/o}%`,r===0?(t.width=`${100*(e[2]-e[0])/i}%`,t.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(r)};let vt=B1;class $W extends vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var Hs,Bl,RD,ID;class k1 extends vt{constructor(t,s=null){super(t,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});E(this,Hs);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:s}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let i=!1;return t.url?(s.addLinkAttributes(r,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(r,t.action,t.overlaidText),i=!0):t.attachment?(T(this,Hs,RD).call(this,r,t.attachment,t.overlaidText,t.attachmentDest),i=!0):t.setOCGState?(T(this,Hs,ID).call(this,r,t.setOCGState,t.overlaidText),i=!0):t.dest?(this._bindLink(r,t.dest,t.overlaidText),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),i=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(r,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&(this.contentElement=r,this.container.append(r)),this.container}_bindLink(t,s,r=""){t.href=this.linkService.getDestinationHash(s),t.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&T(this,Hs,Bl).call(this),r&&(t.title=r)}_bindNamedAction(t,s,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(s),!1),r&&(t.title=r),T(this,Hs,Bl).call(this)}_bindJSAction(t,s){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(s.actions)){const o=r.get(i);o&&(t[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:i}}),!1})}s.overlaidText&&(t.title=s.overlaidText),t.onclick||(t.onclick=()=>!1),T(this,Hs,Bl).call(this)}_bindResetFormAction(t,s){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),T(this,Hs,Bl).call(this),!this._fieldObjects){de('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var f;r==null||r();const{fields:i,refs:o,include:a}=s,l=[];if(i.length!==0||o.length!==0){const p=new Set(o);for(const m of i){const y=this._fieldObjects[m]||[];for(const{id:w}of y)p.add(w)}for(const m of Object.values(this._fieldObjects))for(const y of m)p.has(y.id)===a&&l.push(y)}else for(const p of Object.values(this._fieldObjects))l.push(...p);const c=this.annotationStorage,h=[];for(const p of l){const{id:m}=p;switch(h.push(m),p.type){case"text":{const w=p.defaultValue||"";c.setValue(m,{value:w});break}case"checkbox":case"radiobutton":{const w=p.defaultValue===p.exportValues;c.setValue(m,{value:w});break}case"combobox":case"listbox":{const w=p.defaultValue||"";c.setValue(m,{value:w});break}default:continue}const y=document.querySelector(`[data-element-id="${m}"]`);if(y){if(!Eu.has(y)){de(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}Hs=new WeakSet,Bl=function(){this.container.setAttribute("data-internal-link","")},RD=function(t,s,r="",i=null){t.href=this.linkService.getAnchorUrl(""),s.description?t.title=s.description:r&&(t.title=r),t.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(s.content,s.filename,i),!1},T(this,Hs,Bl).call(this)},ID=function(t,s,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(s),!1),r&&(t.title=r),T(this,Hs,Bl).call(this)};class VW extends vt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}}class Pu extends vt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Sn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,s,r,i){s.includes("mouse")?e.addEventListener(s,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(s,o=>{var a;if(s==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(s==="focus"){if(t.focused)return;t.focused=!0}i&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(o)}}))})}_setEventListeners(e,t,s,r){var i,o,a;for(const[l,c]of s)(c==="Action"||(i=this.data.actions)!=null&&i[c])&&((c==="Focus"||c==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,l,c,r),c==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):c==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":ne.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||BW,i=e.style;let o;const a=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a),h=Math.round(c/(pb*r))||1,f=c/h;o=Math.min(r,l(f/pb))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(r,l(c/pb))}i.fontSize=`calc(${o}px * var(--total-scale-factor))`,i.color=ne.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class HW extends Pu{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,s,r){const i=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=s),i.setValue(o.id,{[r]:s})}render(){var r,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let a=o.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&a.length>l&&(a=a.slice(0,l));let c=o.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const h={userValue:a,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=c??a,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",c??a),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),Eu.add(s),this.contentElement=s,s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:f,datetimeType:p,timeStep:m}=this.data,y=!!p&&this.enableScripting;f&&(s.title=f),this._setRequired(s,this.data.required),l&&(s.maxLength=l),s.addEventListener("input",b=>{e.setValue(t,{value:b.target.value}),this.setPropertyOnSiblings(s,"value",b.target.value,"value"),h.formattedValue=null}),s.addEventListener("resetform",b=>{const g=this.data.defaultFieldValue??"";s.value=h.userValue=g,h.formattedValue=null});let w=b=>{const{formattedValue:g}=h;g!=null&&(b.target.value=g),b.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",g=>{var x;if(h.focused)return;const{target:v}=g;if(y&&(v.type=p,m&&(v.step=m)),h.userValue){const S=h.userValue;if(y)if(p==="time"){const A=new Date(S),C=[A.getHours(),A.getMinutes(),A.getSeconds()];v.value=C.map(N=>N.toString().padStart(2,"0")).join(":")}else v.value=new Date(S-UW).toISOString().split(p==="date"?"T":".",1)[0];else v.value=S}h.lastCommittedValue=v.value,h.commitKey=1,(x=this.data.actions)!=null&&x.Focus||(h.focused=!0)}),s.addEventListener("updatefromsandbox",g=>{this.showElementAndHideCanvas(g.target);const v={value(x){h.userValue=x.detail.value??"",y||e.setValue(t,{value:h.userValue.toString()}),x.target.value=h.userValue},formattedValue(x){const{formattedValue:S}=x.detail;h.formattedValue=S,S!=null&&x.target!==document.activeElement&&(x.target.value=S);const A={formattedValue:S};y&&(A.value=S),e.setValue(t,A)},selRange(x){x.target.setSelectionRange(...x.detail.selRange)},charLimit:x=>{var N;const{charLimit:S}=x.detail,{target:A}=x;if(S===0){A.removeAttribute("maxLength");return}A.setAttribute("maxLength",S);let C=h.userValue;!C||C.length<=S||(C=C.slice(0,S),A.value=h.userValue=C,e.setValue(t,{value:C}),(N=this.linkService.eventBus)==null||N.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:C,willCommit:!0,commitKey:1,selStart:A.selectionStart,selEnd:A.selectionEnd}}))}};this._dispatchEventFromSandbox(v,g)}),s.addEventListener("keydown",g=>{var S;h.commitKey=1;let v=-1;if(g.key==="Escape"?v=0:g.key==="Enter"&&!this.data.multiLine?v=2:g.key==="Tab"&&(h.commitKey=3),v===-1)return;const{value:x}=g.target;h.lastCommittedValue!==x&&(h.lastCommittedValue=x,h.userValue=x,(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:x,willCommit:!0,commitKey:v,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}))});const b=w;w=null,s.addEventListener("blur",g=>{var S,A;if(!h.focused||!g.relatedTarget)return;(S=this.data.actions)!=null&&S.Blur||(h.focused=!1);const{target:v}=g;let{value:x}=v;if(y){if(x&&p==="time"){const C=x.split(":").map(N=>parseInt(N,10));x=new Date(2e3,0,1,C[0],C[1],C[2]||0).valueOf(),v.step=""}else x.includes("T")||(x=`${x}T00:00`),x=new Date(x).valueOf();v.type="text"}h.userValue=x,h.lastCommittedValue!==x&&((A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:x,willCommit:!0,commitKey:h.commitKey,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}})),b(g)}),(i=this.data.actions)!=null&&i.Keystroke&&s.addEventListener("beforeinput",g=>{var R;h.lastCommittedValue=null;const{data:v,target:x}=g,{value:S,selectionStart:A,selectionEnd:C}=x;let N=A,P=C;switch(g.inputType){case"deleteWordBackward":{const O=S.substring(0,A).match(/\w*[^\w]*$/);O&&(N-=O[0].length);break}case"deleteWordForward":{const O=S.substring(A).match(/^[^\w]*\w*/);O&&(P+=O[0].length);break}case"deleteContentBackward":A===C&&(N-=1);break;case"deleteContentForward":A===C&&(P+=1);break}g.preventDefault(),(R=this.linkService.eventBus)==null||R.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,change:v||"",willCommit:!1,selStart:N,selEnd:P}})}),this._setEventListeners(s,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],g=>g.target.value)}if(w&&s.addEventListener("blur",w),this.data.comb){const g=(this.data.rect[2]-this.data.rect[0])/l;s.classList.add("comb"),s.style.letterSpacing=`calc(${g}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class zW extends Pu{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class GW extends Pu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,s=t.id;let r=e.getValue(s,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(s,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return Eu.add(i),i.setAttribute("data-element-id",s),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=0,i.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,s)){const h=l&&c.exportValue===t.exportValue;c.domElement&&(c.domElement.checked=h),e.setValue(c.id,{value:h})}e.setValue(s,{value:l})}),i.addEventListener("resetform",o=>{const a=t.defaultFieldValue||"Off";o.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",o=>{const a={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(s,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class jD extends Pu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,s=t.id;let r=e.getValue(s,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(s,{value:r})),r)for(const o of this._getElementsByName(t.fieldName,s))e.setValue(o.id,{value:!1});const i=document.createElement("input");if(Eu.add(i),i.setAttribute("data-element-id",s),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.tabIndex=0,i.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,s))e.setValue(c.id,{value:!1});e.setValue(s,{value:l})}),i.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;i.addEventListener("updatefromsandbox",a=>{const l={value:c=>{const h=o===c.detail.value;for(const f of this._getElementsByName(c.target.name)){const p=h&&f.id===s;f.domElement&&(f.domElement.checked=p),e.setValue(f.id,{value:p})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class WW extends k1{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class YW extends Pu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,s=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");Eu.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",h=>{const f=this.data.defaultFieldValue;for(const p of r.options)p.selected=p.value===f});for(const h of this.data.options){const f=document.createElement("option");f.textContent=h.displayValue,f.value=h.exportValue,s.value.includes(h.exportValue)&&(f.setAttribute("selected",!0),i=!1),r.append(f)}let o=null;if(i){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),r.prepend(h),o=()=>{h.remove(),r.removeEventListener("input",o),o=null},r.addEventListener("input",o)}const a=h=>{const f=h?"value":"textContent",{options:p,multiple:m}=r;return m?Array.prototype.filter.call(p,y=>y.selected).map(y=>y[f]):p.selectedIndex===-1?null:p[p.selectedIndex][f]};let l=a(!1);const c=h=>{const f=h.target.options;return Array.prototype.map.call(f,p=>({displayValue:p.textContent,exportValue:p.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",h=>{const f={value(p){o==null||o();const m=p.detail.value,y=new Set(Array.isArray(m)?m:[m]);for(const w of r.options)w.selected=y.has(w.value);e.setValue(t,{value:a(!0)}),l=a(!1)},multipleSelection(p){r.multiple=!0},remove(p){const m=r.options,y=p.detail.remove;m[y].selected=!1,r.remove(y),m.length>0&&Array.prototype.findIndex.call(m,b=>b.selected)===-1&&(m[0].selected=!0),e.setValue(t,{value:a(!0),items:c(p)}),l=a(!1)},clear(p){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),l=a(!1)},insert(p){const{index:m,displayValue:y,exportValue:w}=p.detail.insert,b=r.children[m],g=document.createElement("option");g.textContent=y,g.value=w,b?b.before(g):r.append(g),e.setValue(t,{value:a(!0),items:c(p)}),l=a(!1)},items(p){const{items:m}=p.detail;for(;r.length!==0;)r.remove(0);for(const y of m){const{displayValue:w,exportValue:b}=y,g=document.createElement("option");g.textContent=w,g.value=b,r.append(g)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:a(!0),items:c(p)}),l=a(!1)},indices(p){const m=new Set(p.detail.indices);for(const y of p.target.options)y.selected=m.has(y.index);e.setValue(t,{value:a(!0)}),l=a(!1)},editable(p){p.target.disabled=!p.detail.editable}};this._dispatchEventFromSandbox(f,h)}),r.addEventListener("input",h=>{var m;const f=a(!0),p=a(!1);e.setValue(t,{value:f}),h.preventDefault(),(m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:p,changeEx:f,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):r.addEventListener("input",function(h){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}var bg,VS;class $S extends vt{constructor(t){const{data:s,elements:r,parent:i}=t,o=!!i._commentManager;super(t,{isRenderable:!o&&vt._hasPopupData(s)});E(this,bg);if(this.elements=r,o&&vt._hasPopupData(s)){const a=this.popup=T(this,bg,VS).call(this);for(const l of r)l.popup=a}else this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const s=this.popup=T(this,bg,VS).call(this),r=[];for(const i of this.elements)i.popup=s,i.container.ariaHasPopup="dialog",r.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(i=>`${hh}${i}`).join(",")),this.container}}bg=new WeakSet,VS=function(){return new KW({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var ks,Fa,ww,xw,Ad,Td,_t,_i,Ba,Hc,Cd,kd,Si,Ns,Eo,Ao,St,To,Ua,_g,Co,Nd,zc,$a,Zt,Va,ve,H0,HS,zS,GS,z0,WS,OD,LD,DD,MD,G0,W0,YS;class KW{constructor({container:e,color:t,elements:s,titleObj:r,modificationDate:i,contentsObj:o,richText:a,parent:l,rect:c,parentRect:h,open:f,commentManager:p=null}){E(this,ve);E(this,ks,null);E(this,Fa,T(this,ve,DD).bind(this));E(this,ww,T(this,ve,YS).bind(this));E(this,xw,T(this,ve,W0).bind(this));E(this,Ad,T(this,ve,G0).bind(this));E(this,Td,null);E(this,_t,null);E(this,_i,null);E(this,Ba,null);E(this,Hc,null);E(this,Cd,null);E(this,kd,null);E(this,Si,!1);E(this,Ns,null);E(this,Eo,null);E(this,Ao,null);E(this,St,null);E(this,To,null);E(this,Ua,null);E(this,_g,null);E(this,Co,null);E(this,Nd,null);E(this,zc,null);E(this,$a,!1);E(this,Zt,null);E(this,Va,null);_(this,_t,e),_(this,Nd,r),_(this,_i,o),_(this,Co,a),_(this,Cd,l),_(this,Td,t),_(this,_g,c),_(this,kd,h),_(this,Hc,s),_(this,ks,p),_(this,Zt,s[0]),_(this,Ba,Kv.toDateObject(i)),this.trigger=s.flatMap(m=>m.getElementsToTriggerPopup()),p||(T(this,ve,H0).call(this),u(this,_t).hidden=!0,f&&T(this,ve,G0).call(this))}renderCommentButton(){if(u(this,St)){u(this,St).parentNode||u(this,Zt).container.after(u(this,St));return}if(u(this,To)||T(this,ve,HS).call(this),!u(this,To))return;const{signal:e}=_(this,Eo,new AbortController),t=u(this,Zt).hasOwnCommentButton,s=()=>{u(this,ks).toggleCommentPopup(this,!0,void 0,!t)},r=()=>{u(this,ks).toggleCommentPopup(this,!1,!0,!t)},i=()=>{u(this,ks).toggleCommentPopup(this,!1,!1)};if(t){_(this,St,u(this,Zt).container);for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",u(this,Fa),{signal:e}),o.addEventListener("click",s,{signal:e}),o.addEventListener("pointerenter",r,{signal:e}),o.addEventListener("pointerleave",i,{signal:e}),o.classList.add("popupTriggerArea")}else{const o=_(this,St,document.createElement("button"));o.className="annotationCommentButton";const a=u(this,Zt).container;o.style.zIndex=a.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),T(this,ve,GS).call(this),T(this,ve,zS).call(this),o.addEventListener("keydown",u(this,Fa),{signal:e}),o.addEventListener("click",s,{signal:e}),o.addEventListener("pointerenter",r,{signal:e}),o.addEventListener("pointerleave",i,{signal:e}),a.after(o)}}get commentButtonColor(){const{color:e,opacity:t}=u(this,Zt).commentData;return e?u(this,Cd)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;(e=u(this,St))==null||e.focus()},0)}getData(){const{richText:e,color:t,opacity:s,creationDate:r,modificationDate:i}=u(this,Zt).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:s,creationDate:r,modificationDate:i}}get elementBeforePopup(){return u(this,St)}get comment(){return u(this,Va)||_(this,Va,u(this,Zt).commentText),u(this,Va)}set comment(e){e!==this.comment&&(u(this,Zt).commentText=_(this,Va,e))}focus(){var e;(e=u(this,Zt).container)==null||e.focus()}get parentBoundingClientRect(){return u(this,Zt).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){u(this,St)&&(u(this,St).classList.toggle("selected",e),u(this,St).ariaExpanded=t)}setSelectedCommentButton(e){u(this,St).classList.toggle("selected",e)}get commentPopupPosition(){if(u(this,Ua))return u(this,Ua);const{x:e,y:t,height:s}=u(this,St).getBoundingClientRect(),{x:r,y:i,width:o,height:a}=u(this,Zt).layer.getBoundingClientRect();return[(e-r)/o,(t+s-i)/a]}set commentPopupPosition(e){_(this,Ua,e)}hasDefaultPopupPosition(){return u(this,Ua)===null}get commentButtonPosition(){return u(this,To)}get commentButtonWidth(){return u(this,St).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,s]=u(this,Ua)||this.commentButtonPosition.map(c=>c/100),r=this.parentBoundingClientRect,{x:i,y:o,width:a,height:l}=r;u(this,ks).showDialog(null,this,i+t*a,o+s*l,{...e,parentDimensions:r})}render(){var s,r;if(u(this,Ns))return;const e=_(this,Ns,document.createElement("div"));if(e.className="popup",u(this,Td)){const i=e.style.outlineColor=ne.makeHexColor(...u(this,Td));e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const t=document.createElement("span");if(t.className="header",(s=u(this,Nd))!=null&&s.str){const i=document.createElement("span");i.className="title",t.append(i),{dir:i.dir,str:i.textContent}=u(this,Nd)}if(e.append(t),u(this,Ba)){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:u(this,Ba).valueOf()})),i.dateTime=u(this,Ba).toISOString(),t.append(i)}SL({html:u(this,ve,z0)||u(this,_i).str,dir:(r=u(this,_i))==null?void 0:r.dir,className:"popupContent"},e),u(this,_t).append(e)}updateEdited({rect:e,popup:t,deleted:s}){var r;if(u(this,ks)){s?(this.remove(),_(this,Va,null)):t&&(t.deleted?this.remove():(T(this,ve,GS).call(this),_(this,Va,t.text))),e&&(_(this,To,null),T(this,ve,HS).call(this),T(this,ve,zS).call(this));return}if(s||t!=null&&t.deleted){this.remove();return}T(this,ve,H0).call(this),u(this,zc)||_(this,zc,{contentsObj:u(this,_i),richText:u(this,Co)}),e&&_(this,Ao,null),t&&t.text&&(_(this,Co,T(this,ve,LD).call(this,t.text)),_(this,Ba,Kv.toDateObject(t.date)),_(this,_i,null)),(r=u(this,Ns))==null||r.remove(),_(this,Ns,null)}resetEdited(){var e;u(this,zc)&&({contentsObj:$t(this,_i)._,richText:$t(this,Co)._}=u(this,zc),_(this,zc,null),(e=u(this,Ns))==null||e.remove(),_(this,Ns,null),_(this,Ao,null))}remove(){var e,t,s;if((e=u(this,Eo))==null||e.abort(),_(this,Eo,null),(t=u(this,Ns))==null||t.remove(),_(this,Ns,null),_(this,$a,!1),_(this,Si,!1),(s=u(this,St))==null||s.remove(),_(this,St,null),this.trigger)for(const r of this.trigger)r.classList.remove("popupTriggerArea")}forceHide(){_(this,$a,this.isVisible),u(this,$a)&&(u(this,_t).hidden=!0)}maybeShow(){u(this,ks)||(T(this,ve,H0).call(this),u(this,$a)&&(u(this,Ns)||T(this,ve,W0).call(this),_(this,$a,!1),u(this,_t).hidden=!1))}get isVisible(){return u(this,ks)?!1:u(this,_t).hidden===!1}}ks=new WeakMap,Fa=new WeakMap,ww=new WeakMap,xw=new WeakMap,Ad=new WeakMap,Td=new WeakMap,_t=new WeakMap,_i=new WeakMap,Ba=new WeakMap,Hc=new WeakMap,Cd=new WeakMap,kd=new WeakMap,Si=new WeakMap,Ns=new WeakMap,Eo=new WeakMap,Ao=new WeakMap,St=new WeakMap,To=new WeakMap,Ua=new WeakMap,_g=new WeakMap,Co=new WeakMap,Nd=new WeakMap,zc=new WeakMap,$a=new WeakMap,Zt=new WeakMap,Va=new WeakMap,ve=new WeakSet,H0=function(){var t;if(u(this,Eo))return;_(this,Eo,new AbortController);const{signal:e}=u(this,Eo);for(const s of this.trigger)s.addEventListener("click",u(this,Ad),{signal:e}),s.addEventListener("pointerenter",u(this,xw),{signal:e}),s.addEventListener("pointerleave",u(this,ww),{signal:e}),s.classList.add("popupTriggerArea");for(const s of u(this,Hc))(t=s.container)==null||t.addEventListener("keydown",u(this,Fa),{signal:e})},HS=function(){const e=u(this,Hc).find(t=>t.hasCommentButton);e&&_(this,To,e._normalizePoint(e.commentButtonPosition))},zS=function(){if(u(this,Zt).extraPopupElement&&!u(this,Zt).editor)return;u(this,St)||this.renderCommentButton();const[e,t]=u(this,To),{style:s}=u(this,St);s.left=`calc(${e}%)`,s.top=`calc(${t}% - var(--comment-button-dim))`},GS=function(){u(this,Zt).extraPopupElement||(u(this,St)||this.renderCommentButton(),u(this,St).style.backgroundColor=this.commentButtonColor||"")},z0=function(){const e=u(this,Co),t=u(this,_i);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&u(this,Co).html||null},WS=function(){var e,t,s;return((s=(t=(e=u(this,ve,z0))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.fontSize)||0},OD=function(){var e,t,s;return((s=(t=(e=u(this,ve,z0))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.color)||null},LD=function(e){const t=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:u(this,ve,OD),fontSize:u(this,ve,WS)?`calc(${u(this,ve,WS)}px * var(--total-scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:r});return s},DD=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&u(this,Si))&&T(this,ve,G0).call(this)},MD=function(){if(u(this,Ao)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:s,pageX:r,pageY:i}}}=u(this,Cd);let o=!!u(this,kd),a=o?u(this,kd):u(this,_g);for(const y of u(this,Hc))if(!a||ne.intersect(y.data.rect,a)!==null){a=y.data.rect,o=!0;break}const l=ne.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),h=o?a[2]-a[0]+5:0,f=l[0]+h,p=l[1];_(this,Ao,[100*(f-r)/t,100*(p-i)/s]);const{style:m}=u(this,_t);m.left=`${u(this,Ao)[0]}%`,m.top=`${u(this,Ao)[1]}%`},G0=function(){if(u(this,ks)){u(this,ks).toggleCommentPopup(this,!1);return}_(this,Si,!u(this,Si)),u(this,Si)?(T(this,ve,W0).call(this),u(this,_t).addEventListener("click",u(this,Ad)),u(this,_t).addEventListener("keydown",u(this,Fa))):(T(this,ve,YS).call(this),u(this,_t).removeEventListener("click",u(this,Ad)),u(this,_t).removeEventListener("keydown",u(this,Fa)))},W0=function(){u(this,Ns)||this.render(),this.isVisible?u(this,Si)&&u(this,_t).classList.add("focused"):(T(this,ve,MD).call(this),u(this,_t).hidden=!1,u(this,_t).style.zIndex=parseInt(u(this,_t).style.zIndex)+1e3)},YS=function(){u(this,_t).classList.remove("focused"),!(u(this,Si)||!this.isVisible)&&(u(this,_t).hidden=!0,u(this,_t).style.zIndex=parseInt(u(this,_t).style.zIndex)-1e3)};class FD extends vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=pe.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=this.contentElement=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const s=document.createElement("span");s.textContent=t,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var Sg;class qW extends vt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,Sg,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:s,height:r}=this,i=this.svgFactory.create(s,r,!0),o=_(this,Sg,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return u(this,Sg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Sg=new WeakMap;var Eg;class XW extends vt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,Eg,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:s,height:r}=this,i=this.svgFactory.create(s,r,!0),o=t.borderStyle.width,a=_(this,Eg,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",s-o),a.setAttribute("height",r-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return u(this,Eg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Eg=new WeakMap;var Ag;class JW extends vt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,Ag,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:s,height:r}=this,i=this.svgFactory.create(s,r,!0),o=t.borderStyle.width,a=_(this,Ag,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",s/2),a.setAttribute("cy",r/2),a.setAttribute("rx",s/2-o/2),a.setAttribute("ry",r/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return u(this,Ag)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ag=new WeakMap;var Tg;class BD extends vt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,Tg,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:s,borderStyle:r,popupRef:i},width:o,height:a}=this;if(!s)return this.container;const l=this.svgFactory.create(o,a,!0);let c=[];for(let f=0,p=s.length;f<p;f+=2){const m=s[f]-t[0],y=t[3]-s[f+1];c.push(`${m},${y}`)}c=c.join(" ");const h=_(this,Tg,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",c),h.setAttribute("stroke-width",r.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),l.append(h),this.container.append(l),!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return u(this,Tg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Tg=new WeakMap;class QW extends BD{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class ZW extends vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var Cg,Gc,kg,KS;class N1 extends vt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,kg);E(this,Cg,null);E(this,Gc,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?pe.HIGHLIGHT:pe.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:s,inkLists:r,borderStyle:i,popupRef:o}}=this,{transform:a,width:l,height:c}=T(this,kg,KS).call(this,s,t),h=this.svgFactory.create(l,c,!0),f=_(this,Cg,this.svgFactory.createElement("svg:g"));h.append(f),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",a);for(let p=0,m=r.length;p<m;p++){const y=this.svgFactory.createElement(this.svgElementName);u(this,Gc).push(y),y.setAttribute("points",r[p].join(",")),f.append(y)}return!o&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:s,points:r,rect:i}=t,o=u(this,Cg);if(s>=0&&o.setAttribute("stroke-width",s||1),r)for(let a=0,l=u(this,Gc).length;a<l;a++)u(this,Gc)[a].setAttribute("points",r[a].join(","));if(i){const{transform:a,width:l,height:c}=T(this,kg,KS).call(this,this.data.rotation,i);o.parentElement.setAttribute("viewBox",`0 0 ${l} ${c}`),o.setAttribute("transform",a)}}getElementsToTriggerPopup(){return u(this,Gc)}addHighlightArea(){this.container.classList.add("highlightArea")}}Cg=new WeakMap,Gc=new WeakMap,kg=new WeakSet,KS=function(t,s){switch(t){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}};class UD extends vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=pe.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class e7 extends vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class t7 extends vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class n7 extends vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),e){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class $D extends vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=pe.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var Ng,Pg,qS;class s7 extends vt{constructor(t){var r;super(t,{isRenderable:!0});E(this,Pg);E(this,Ng,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:s}=this;let r;s.hasAppearance||s.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),r.addEventListener("dblclick",T(this,Pg,qS).bind(this)),_(this,Ng,r);const{isMac:i}=Sn.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(i?o.metaKey:o.ctrlKey)&&T(this,Pg,qS).call(this)}),!s.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return u(this,Ng)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ng=new WeakMap,Pg=new WeakSet,qS=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Wc,Yc,Pd,Ha,Rg,Kc,Ps,Ig,$o,Y0,JS;const U1=class U1{constructor({div:e,accessibilityManager:t,annotationCanvasMap:s,annotationEditorUIManager:r,page:i,viewport:o,structTreeLayer:a,commentManager:l,linkService:c,annotationStorage:h}){E(this,$o);E(this,Wc,null);E(this,Yc,null);E(this,Pd,null);E(this,Ha,new Map);E(this,Rg,null);E(this,Kc,null);E(this,Ps,[]);E(this,Ig,!1);this.div=e,_(this,Wc,t),_(this,Yc,s),_(this,Rg,a||null),_(this,Kc,c||null),_(this,Pd,h||new A1),this.page=i,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=l||null}hasEditableAnnotations(){return u(this,Ha).size>0}async render(e){var a;const{annotations:t}=e,s=this.div;_u(s,this.viewport);const r=new Map,i=[],o={data:null,layer:s,linkService:u(this,Kc),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new nw,annotationStorage:u(this,Pd),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const l of t){if(l.noHTML)continue;const c=l.annotationType===Dt.POPUP;if(c){const p=r.get(l.id);if(!p)continue;if(!this._commentManager){i.push(l);continue}o.elements=p}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;o.data=l;const h=_b.create(o);if(!h.isRenderable)continue;if(!c&&(u(this,Ps).push(h),l.popupRef)){const p=r.get(l.popupRef);p?p.push(h):r.set(l.popupRef,[h])}const f=h.render();l.hidden&&(f.style.visibility="hidden"),h._isEditable&&(u(this,Ha).set(h.data.id,h),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(h))}await T(this,$o,Y0).call(this);for(const l of i){const c=o.elements=r.get(l.id);o.data=l;const h=_b.create(o);if(!h.isRenderable)continue;const f=h.render();h.contentElement.id=`${hh}${l.id}`,l.hidden&&(f.style.visibility="hidden"),c.at(-1).container.after(f)}T(this,$o,JS).call(this)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:u(this,Kc),svgFactory:new nw,parent:this};for(const s of e){s.borderStyle||(s.borderStyle=U1._defaultBorderStyle),t.data=s;const r=_b.create(t);r.isRenderable&&(r.render(),r.contentElement.id=`${hh}${s.id}`,u(this,Ps).push(r))}await T(this,$o,Y0).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,_u(t,{rotation:e.rotation}),T(this,$o,JS).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(u(this,Ha).values())}getEditableAnnotation(e){return u(this,Ha).get(e)}addFakeAnnotation(e){const{div:t}=this,{id:s,rotation:r}=e,i=new $W({data:{id:s,rect:e.getPDFRect(),rotation:r},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:u(this,Kc),annotationStorage:u(this,Pd)});return i.render(),i.contentElement.id=`${hh}${s}`,i.createOrUpdatePopup(),u(this,Ps).push(i),i}removeAnnotation(e){var r;const t=u(this,Ps).findIndex(i=>i.data.id===e);if(t<0)return;const[s]=u(this,Ps).splice(t,1);(r=u(this,Wc))==null||r.removePointerInTextLayer(s.contentElement)}updateFakeAnnotations(e){if(e.length!==0){for(const t of e)t.updateFakeAnnotationElement(this);T(this,$o,Y0).call(this)}}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}static get _defaultBorderStyle(){return ge(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Uu.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};Wc=new WeakMap,Yc=new WeakMap,Pd=new WeakMap,Ha=new WeakMap,Rg=new WeakMap,Kc=new WeakMap,Ps=new WeakMap,Ig=new WeakMap,$o=new WeakSet,Y0=async function(){var s,r,i;if(u(this,Ps).length===0)return;this.div.replaceChildren();const e=[];if(!u(this,Ig)){_(this,Ig,!0);for(const{contentElement:o,data:{id:a}}of u(this,Ps)){const l=o.id=`${hh}${a}`;e.push((s=u(this,Rg))==null?void 0:s.getAriaAttributes(l).then(c=>{if(c)for(const[h,f]of c)o.setAttribute(h,f)}))}}u(this,Ps).sort(({data:{rect:[o,a,l,c]}},{data:{rect:[h,f,p,m]}})=>{if(o===l&&a===c)return 1;if(h===p&&f===m)return-1;const y=c,w=a,b=(a+c)/2,g=m,v=f,x=(f+m)/2;if(b>=g&&x<=w)return-1;if(x>=y&&b<=v)return 1;const S=(o+l)/2,A=(h+p)/2;return S-A});const t=document.createDocumentFragment();for(const o of u(this,Ps))t.append(o.container),this._commentManager?(i=((r=o.extraPopupElement)==null?void 0:r.popup)||o.popup)==null||i.renderCommentButton():o.extraPopupElement&&t.append(o.extraPopupElement.render());if(this.div.append(t),await Promise.all(e),u(this,Wc))for(const o of u(this,Ps))u(this,Wc).addPointerInTextLayer(o.contentElement,!1)},JS=function(){var t;if(!u(this,Yc))return;const e=this.div;for(const[s,r]of u(this,Yc)){const i=e.querySelector(`[data-annotation-id="${s}"]`);if(!i)continue;r.className="annotationContent";const{firstChild:o}=i;o?o.nodeName==="CANVAS"?o.replaceWith(r):o.classList.contains("annotationContent")?o.after(r):o.before(r):i.append(r);const a=u(this,Ha).get(s);a&&(a._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(s,i.id,r),a._hasNoCanvas=!1):a.canvas=r)}u(this,Yc).clear()};let XS=U1;const n0=/\r\n?|\n/g;var Rs,jg,qc,Is,Ut,VD,HD,zD,K0,Vo,q0,X0,GD,ZS,WD;const it=class it extends nt{constructor(t){super({...t,name:"freeTextEditor"});E(this,Ut);E(this,Rs,"");E(this,jg,`${this.id}-editor`);E(this,qc,null);E(this,Is);G(this,"_colorPicker",null);this.color=t.color||it._defaultColor||nt._defaultLineColor,_(this,Is,t.fontSize||it._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){const t=it.prototype,s=o=>o.isEmpty(),r=Su.TRANSLATE_SMALL,i=Su.TRANSLATE_BIG;return ge(this,"_keyboardManager",new py([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:s}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:s}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:s}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:s}]]))}static initialize(t,s){nt.initialize(t,s);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,s){switch(t){case _e.FREETEXT_SIZE:it._defaultFontSize=s;break;case _e.FREETEXT_COLOR:it._defaultColor=s;break}}updateParams(t,s){switch(t){case _e.FREETEXT_SIZE:T(this,Ut,VD).call(this,s);break;case _e.FREETEXT_COLOR:T(this,Ut,HD).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[_e.FREETEXT_SIZE,it._defaultFontSize],[_e.FREETEXT_COLOR,it._defaultColor||nt._defaultLineColor]]}get propertiesToUpdate(){return[[_e.FREETEXT_SIZE,u(this,Is)],[_e.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new tw(this)),[["colorPicker",this._colorPicker]]}get colorType(){return _e.FREETEXT_COLOR}onUpdatedColor(){var t;this.editorDiv.style.color=this.color,(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_translateEmpty(t,s){this._uiManager.translateSelectedEditors(t,s,!0)}getInitialTranslation(){const t=this.parentScale;return[-it._internalPadding*t,-(it._internalPadding+u(this,Is))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),_(this,qc,new AbortController);const t=this._uiManager.combinedSignal(u(this,qc));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",u(this,jg)),this._isDraggable=!0,(t=u(this,qc))==null||t.abort(),_(this,qc,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var s;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=u(this,Rs),s=_(this,Rs,T(this,Ut,zD).call(this).trimEnd());if(t===s)return;const r=i=>{if(_(this,Rs,i),!i){this.remove();return}T(this,Ut,X0).call(this),this._uiManager.rebuild(this),T(this,Ut,K0).call(this)};this.addCommands({cmd:()=>{r(s)},undo:()=>{r(t)},mustExec:!1}),T(this,Ut,K0).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){it._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,s;(this._isCopy||this.annotationElementId)&&(t=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",u(this,jg)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${u(this,Is)}px * var(--total-scale-factor))`,r.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[l,c]=this.getInitialTranslation();[l,c]=this.pageTranslationToScreen(l,c);const[h,f]=this.pageDimensions,[p,m]=this.pageTranslation;let y,w;switch(this.rotation){case 0:y=t+(a[0]-p)/h,w=s+this.height-(a[1]-m)/f;break;case 90:y=t+(a[0]-p)/h,w=s-(a[1]-m)/f,[l,c]=[c,-l];break;case 180:y=t-this.width+(a[0]-p)/h,w=s-(a[1]-m)/f,[l,c]=[-l,-c];break;case 270:y=t+(a[0]-p-this.height*f)/h,w=s+(a[1]-m-this.width*h)/f,[l,c]=[-c,l];break}this.setAt(y*i,w*o,l,c)}else this._moveAfterPaste(t,s);T(this,Ut,X0).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var y,w,b;const s=t.clipboardData||window.clipboardData,{types:r}=s;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const i=T(y=it,Vo,ZS).call(y,s.getData("text")||"").replaceAll(n0,`
`);if(!i)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!i.includes(`
`)){a.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:l,startOffset:c}=a,h=[],f=[];if(l.nodeType===Node.TEXT_NODE){const g=l.parentElement;if(f.push(l.nodeValue.slice(c).replaceAll(n0,"")),g!==this.editorDiv){let v=h;for(const x of this.editorDiv.childNodes){if(x===g){v=f;continue}v.push(T(w=it,Vo,q0).call(w,x))}}h.push(l.nodeValue.slice(0,c).replaceAll(n0,""))}else if(l===this.editorDiv){let g=h,v=0;for(const x of this.editorDiv.childNodes)v++===c&&(g=f),g.push(T(b=it,Vo,q0).call(b,x))}_(this,Rs,`${h.join(`
`)}${i}${f.join(`
`)}`),T(this,Ut,X0).call(this);const p=new Range;let m=Math.sumPrecise(h.map(g=>g.length));for(const{firstChild:g}of this.editorDiv.childNodes)if(g.nodeType===Node.TEXT_NODE){const v=g.nodeValue.length;if(m<=v){p.setStart(g,m),p.setEnd(g,m);break}m-=v}o.removeAllRanges(),o.addRange(p)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=it._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,s,r){var a;let i=null;if(t instanceof FD){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:h,rotation:f,id:p,popupRef:m,richText:y,contentsObj:w,creationDate:b,modificationDate:g},textContent:v,textPosition:x,parent:{page:{pageNumber:S}}}=t;if(!v||v.length===0)return null;i=t={annotationType:pe.FREETEXT,color:Array.from(c),fontSize:l,value:v.join(`
`),position:x,pageIndex:S-1,rect:h.slice(0),rotation:f,annotationElementId:p,id:p,deleted:!1,popupRef:m,comment:(w==null?void 0:w.str)||null,richText:y,creationDate:b,modificationDate:g}}const o=await super.deserialize(t,s,r);return _(o,Is,t.fontSize),o.color=ne.makeHexColor(...t.color),_(o,Rs,T(a=it,Vo,ZS).call(a,t.value)),o._initialData=i,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=nt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),r=Object.assign(super.serialize(t),{color:s,fontSize:u(this,Is),value:T(this,Ut,GD).call(this)});return this.addComment(r),t?(r.isCopy=!0,r):this.annotationElementId&&!T(this,Ut,WD).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){const s=super.renderAnnotationElement(t);if(!s)return null;const{style:r}=s;r.fontSize=`calc(${u(this,Is)}px * var(--total-scale-factor))`,r.color=this.color,s.replaceChildren();for(const i of u(this,Rs).split(`
`)){const o=document.createElement("div");o.append(i?document.createTextNode(i):document.createElement("br")),s.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:u(this,Rs)}}),s}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Rs=new WeakMap,jg=new WeakMap,qc=new WeakMap,Is=new WeakMap,Ut=new WeakSet,VD=function(t){const s=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-u(this,Is))*this.parentScale),_(this,Is,i),T(this,Ut,K0).call(this)},r=u(this,Is);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:_e.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},HD=function(t){const s=i=>{this.color=i,this.onUpdatedColor()},r=this.color;this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:_e.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},zD=function(){var r;const t=[];this.editorDiv.normalize();let s=null;for(const i of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(T(r=it,Vo,q0).call(r,i)),s=i);return t.join(`
`)},K0=function(){const[t,s]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:i,div:o}=this,a=o.style.display,l=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",i.div.append(this.div),r=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/s):(this.width=r.height/t,this.height=r.width/s),this.fixAndSetPosition()},Vo=new WeakSet,q0=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(n0,"")},X0=function(){if(this.editorDiv.replaceChildren(),!!u(this,Rs))for(const t of u(this,Rs).split(`
`)){const s=document.createElement("div");s.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(s)}},GD=function(){return u(this,Rs).replaceAll(""," ")},ZS=function(t){return t.replaceAll(" ","")},WD=function(t){const{value:s,fontSize:r,color:i,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==s||t.fontSize!==r||t.color.some((a,l)=>a!==i[l])||t.pageIndex!==o},E(it,Vo),G(it,"_freeTextDefaultContent",""),G(it,"_internalPadding",0),G(it,"_defaultColor",null),G(it,"_defaultFontSize",10),G(it,"_type","freetext"),G(it,"_editorType",pe.FREETEXT);let QS=it;class ee{toSVGPath(){Ye("Abstract method `toSVGPath` must be implemented.")}get box(){Ye("Abstract getter `box` must be implemented.")}serialize(e,t){Ye("Abstract method `serialize` must be implemented.")}static _rescale(e,t,s,r,i,o){o||(o=new Float32Array(e.length));for(let a=0,l=e.length;a<l;a+=2)o[a]=t+e[a]*r,o[a+1]=s+e[a+1]*i;return o}static _rescaleAndSwap(e,t,s,r,i,o){o||(o=new Float32Array(e.length));for(let a=0,l=e.length;a<l;a+=2)o[a]=t+e[a+1]*r,o[a+1]=s+e[a]*i;return o}static _translate(e,t,s,r){r||(r=new Float32Array(e.length));for(let i=0,o=e.length;i<o;i+=2)r[i]=t+e[i],r[i+1]=s+e[i+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,s,r,i){switch(i){case 90:return[1-t/s,e/r];case 180:return[1-e/s,1-t/r];case 270:return[t/s,1-e/r];default:return[e/s,t/r]}}static _normalizePagePoint(e,t,s){switch(s){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,s,r,i,o){return[(e+5*s)/6,(t+5*r)/6,(5*s+i)/6,(5*r+o)/6,(s+i)/2,(r+o)/2]}}G(ee,"PRECISION",1e-4);var js,Vr,Rd,Id,Ei,we,Xc,Jc,Og,Lg,jd,Od,za,Dg,bw,_w,Xt,cp,YD,KD,qD,XD,JD,QD;const Qi=class Qi{constructor({x:e,y:t},s,r,i,o,a=0){E(this,Xt);E(this,js);E(this,Vr,[]);E(this,Rd);E(this,Id);E(this,Ei,[]);E(this,we,new Float32Array(18));E(this,Xc);E(this,Jc);E(this,Og);E(this,Lg);E(this,jd);E(this,Od);E(this,za,[]);_(this,js,s),_(this,Od,i*r),_(this,Id,o),u(this,we).set([NaN,NaN,NaN,NaN,e,t],6),_(this,Rd,a),_(this,Lg,u(Qi,Dg)*r),_(this,Og,u(Qi,_w)*r),_(this,jd,r),u(this,za).push(e,t)}isEmpty(){return isNaN(u(this,we)[8])}add({x:e,y:t}){var R;_(this,Xc,e),_(this,Jc,t);const[s,r,i,o]=u(this,js);let[a,l,c,h]=u(this,we).subarray(8,12);const f=e-c,p=t-h,m=Math.hypot(f,p);if(m<u(this,Og))return!1;const y=m-u(this,Lg),w=y/m,b=w*f,g=w*p;let v=a,x=l;a=c,l=h,c+=b,h+=g,(R=u(this,za))==null||R.push(e,t);const S=-g/y,A=b/y,C=S*u(this,Od),N=A*u(this,Od);return u(this,we).set(u(this,we).subarray(2,8),0),u(this,we).set([c+C,h+N],4),u(this,we).set(u(this,we).subarray(14,18),12),u(this,we).set([c-C,h-N],16),isNaN(u(this,we)[6])?(u(this,Ei).length===0&&(u(this,we).set([a+C,l+N],2),u(this,Ei).push(NaN,NaN,NaN,NaN,(a+C-s)/i,(l+N-r)/o),u(this,we).set([a-C,l-N],14),u(this,Vr).push(NaN,NaN,NaN,NaN,(a-C-s)/i,(l-N-r)/o)),u(this,we).set([v,x,a,l,c,h],6),!this.isEmpty()):(u(this,we).set([v,x,a,l,c,h],6),Math.abs(Math.atan2(x-l,v-a)-Math.atan2(g,b))<Math.PI/2?([a,l,c,h]=u(this,we).subarray(2,6),u(this,Ei).push(NaN,NaN,NaN,NaN,((a+c)/2-s)/i,((l+h)/2-r)/o),[a,l,v,x]=u(this,we).subarray(14,18),u(this,Vr).push(NaN,NaN,NaN,NaN,((v+a)/2-s)/i,((x+l)/2-r)/o),!0):([v,x,a,l,c,h]=u(this,we).subarray(0,6),u(this,Ei).push(((v+5*a)/6-s)/i,((x+5*l)/6-r)/o,((5*a+c)/6-s)/i,((5*l+h)/6-r)/o,((a+c)/2-s)/i,((l+h)/2-r)/o),[c,h,a,l,v,x]=u(this,we).subarray(12,18),u(this,Vr).push(((v+5*a)/6-s)/i,((x+5*l)/6-r)/o,((5*a+c)/6-s)/i,((5*l+h)/6-r)/o,((a+c)/2-s)/i,((l+h)/2-r)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=u(this,Ei),t=u(this,Vr);if(isNaN(u(this,we)[6])&&!this.isEmpty())return T(this,Xt,YD).call(this);const s=[];s.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?s.push(`L${e[r+4]} ${e[r+5]}`):s.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);T(this,Xt,qD).call(this,s);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?s.push(`L${t[r+4]} ${t[r+5]}`):s.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return T(this,Xt,KD).call(this,s),s.join(" ")}newFreeDrawOutline(e,t,s,r,i,o){return new ZD(e,t,s,r,i,o)}getOutlines(){var f;const e=u(this,Ei),t=u(this,Vr),s=u(this,we),[r,i,o,a]=u(this,js),l=new Float32Array((((f=u(this,za))==null?void 0:f.length)??0)+2);for(let p=0,m=l.length-2;p<m;p+=2)l[p]=(u(this,za)[p]-r)/o,l[p+1]=(u(this,za)[p+1]-i)/a;if(l[l.length-2]=(u(this,Xc)-r)/o,l[l.length-1]=(u(this,Jc)-i)/a,isNaN(s[6])&&!this.isEmpty())return T(this,Xt,XD).call(this,l);const c=new Float32Array(u(this,Ei).length+24+u(this,Vr).length);let h=e.length;for(let p=0;p<h;p+=2){if(isNaN(e[p])){c[p]=c[p+1]=NaN;continue}c[p]=e[p],c[p+1]=e[p+1]}h=T(this,Xt,QD).call(this,c,h);for(let p=t.length-6;p>=6;p-=6)for(let m=0;m<6;m+=2){if(isNaN(t[p+m])){c[h]=c[h+1]=NaN,h+=2;continue}c[h]=t[p+m],c[h+1]=t[p+m+1],h+=2}return T(this,Xt,JD).call(this,c,h),this.newFreeDrawOutline(c,l,u(this,js),u(this,jd),u(this,Rd),u(this,Id))}};js=new WeakMap,Vr=new WeakMap,Rd=new WeakMap,Id=new WeakMap,Ei=new WeakMap,we=new WeakMap,Xc=new WeakMap,Jc=new WeakMap,Og=new WeakMap,Lg=new WeakMap,jd=new WeakMap,Od=new WeakMap,za=new WeakMap,Dg=new WeakMap,bw=new WeakMap,_w=new WeakMap,Xt=new WeakSet,cp=function(){const e=u(this,we).subarray(4,6),t=u(this,we).subarray(16,18),[s,r,i,o]=u(this,js);return[(u(this,Xc)+(e[0]-t[0])/2-s)/i,(u(this,Jc)+(e[1]-t[1])/2-r)/o,(u(this,Xc)+(t[0]-e[0])/2-s)/i,(u(this,Jc)+(t[1]-e[1])/2-r)/o]},YD=function(){const[e,t,s,r]=u(this,js),[i,o,a,l]=T(this,Xt,cp).call(this);return`M${(u(this,we)[2]-e)/s} ${(u(this,we)[3]-t)/r} L${(u(this,we)[4]-e)/s} ${(u(this,we)[5]-t)/r} L${i} ${o} L${a} ${l} L${(u(this,we)[16]-e)/s} ${(u(this,we)[17]-t)/r} L${(u(this,we)[14]-e)/s} ${(u(this,we)[15]-t)/r} Z`},KD=function(e){const t=u(this,Vr);e.push(`L${t[4]} ${t[5]} Z`)},qD=function(e){const[t,s,r,i]=u(this,js),o=u(this,we).subarray(4,6),a=u(this,we).subarray(16,18),[l,c,h,f]=T(this,Xt,cp).call(this);e.push(`L${(o[0]-t)/r} ${(o[1]-s)/i} L${l} ${c} L${h} ${f} L${(a[0]-t)/r} ${(a[1]-s)/i}`)},XD=function(e){const t=u(this,we),[s,r,i,o]=u(this,js),[a,l,c,h]=T(this,Xt,cp).call(this),f=new Float32Array(36);return f.set([NaN,NaN,NaN,NaN,(t[2]-s)/i,(t[3]-r)/o,NaN,NaN,NaN,NaN,(t[4]-s)/i,(t[5]-r)/o,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,c,h,NaN,NaN,NaN,NaN,(t[16]-s)/i,(t[17]-r)/o,NaN,NaN,NaN,NaN,(t[14]-s)/i,(t[15]-r)/o],0),this.newFreeDrawOutline(f,e,u(this,js),u(this,jd),u(this,Rd),u(this,Id))},JD=function(e,t){const s=u(this,Vr);return e.set([NaN,NaN,NaN,NaN,s[4],s[5]],t),t+=6},QD=function(e,t){const s=u(this,we).subarray(4,6),r=u(this,we).subarray(16,18),[i,o,a,l]=u(this,js),[c,h,f,p]=T(this,Xt,cp).call(this);return e.set([NaN,NaN,NaN,NaN,(s[0]-i)/a,(s[1]-o)/l,NaN,NaN,NaN,NaN,c,h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(r[0]-i)/a,(r[1]-o)/l],t),t+=24},E(Qi,Dg,8),E(Qi,bw,2),E(Qi,_w,u(Qi,Dg)+u(Qi,bw));let sw=Qi;var Ld,Qc,ko,Mg,Os,Fg,It,Sw,eM;class ZD extends ee{constructor(t,s,r,i,o,a){super();E(this,Sw);E(this,Ld);E(this,Qc,new Float32Array(4));E(this,ko);E(this,Mg);E(this,Os);E(this,Fg);E(this,It);_(this,It,t),_(this,Os,s),_(this,Ld,r),_(this,Fg,i),_(this,ko,o),_(this,Mg,a),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],T(this,Sw,eM).call(this,a);const[l,c,h,f]=u(this,Qc);for(let p=0,m=t.length;p<m;p+=2)t[p]=(t[p]-l)/h,t[p+1]=(t[p+1]-c)/f;for(let p=0,m=s.length;p<m;p+=2)s[p]=(s[p]-l)/h,s[p+1]=(s[p+1]-c)/f}toSVGPath(){const t=[`M${u(this,It)[4]} ${u(this,It)[5]}`];for(let s=6,r=u(this,It).length;s<r;s+=6){if(isNaN(u(this,It)[s])){t.push(`L${u(this,It)[s+4]} ${u(this,It)[s+5]}`);continue}t.push(`C${u(this,It)[s]} ${u(this,It)[s+1]} ${u(this,It)[s+2]} ${u(this,It)[s+3]} ${u(this,It)[s+4]} ${u(this,It)[s+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,s,r,i],o){const a=r-t,l=i-s;let c,h;switch(o){case 0:c=ee._rescale(u(this,It),t,i,a,-l),h=ee._rescale(u(this,Os),t,i,a,-l);break;case 90:c=ee._rescaleAndSwap(u(this,It),t,s,a,l),h=ee._rescaleAndSwap(u(this,Os),t,s,a,l);break;case 180:c=ee._rescale(u(this,It),r,s,-a,l),h=ee._rescale(u(this,Os),r,s,-a,l);break;case 270:c=ee._rescaleAndSwap(u(this,It),r,i,-a,-l),h=ee._rescaleAndSwap(u(this,Os),r,i,-a,-l);break}return{outline:Array.from(c),points:[Array.from(h)]}}get box(){return u(this,Qc)}newOutliner(t,s,r,i,o,a=0){return new sw(t,s,r,i,o,a)}getNewOutline(t,s){const[r,i,o,a]=u(this,Qc),[l,c,h,f]=u(this,Ld),p=o*h,m=a*f,y=r*h+l,w=i*f+c,b=this.newOutliner({x:u(this,Os)[0]*p+y,y:u(this,Os)[1]*m+w},u(this,Ld),u(this,Fg),t,u(this,Mg),s??u(this,ko));for(let g=2;g<u(this,Os).length;g+=2)b.add({x:u(this,Os)[g]*p+y,y:u(this,Os)[g+1]*m+w});return b.getOutlines()}}Ld=new WeakMap,Qc=new WeakMap,ko=new WeakMap,Mg=new WeakMap,Os=new WeakMap,Fg=new WeakMap,It=new WeakMap,Sw=new WeakSet,eM=function(t){const s=u(this,It);let r=s[4],i=s[5];const o=[r,i,r,i];let a=r,l=i,c=r,h=i;const f=t?Math.max:Math.min,p=new Float32Array(4);for(let y=6,w=s.length;y<w;y+=6){const b=s[y+4],g=s[y+5];isNaN(s[y])?(ne.pointBoundingBox(b,g,o),l>g?(a=b,l=g):l===g&&(a=f(a,b)),h<g?(c=b,h=g):h===g&&(c=f(c,b))):(p[0]=p[1]=1/0,p[2]=p[3]=-1/0,ne.bezierBoundingBox(r,i,...s.slice(y,y+6),p),ne.rectBoundingBox(p[0],p[1],p[2],p[3],o),l>p[1]?(a=p[0],l=p[1]):l===p[1]&&(a=f(a,p[0])),h<p[3]?(c=p[2],h=p[3]):h===p[3]&&(c=f(c,p[2]))),r=b,i=g}const m=u(this,Qc);m[0]=o[0]-u(this,ko),m[1]=o[1]-u(this,ko),m[2]=o[2]-o[0]+2*u(this,ko),m[3]=o[3]-o[1]+2*u(this,ko),this.firstPoint=[a,l],this.lastPoint=[c,h]};var Bg,Ug,$g,Ga,Hr,Qn,tM,J0,nM,sM,tE;class eE{constructor(e,t=0,s=0,r=!0){E(this,Qn);E(this,Bg);E(this,Ug);E(this,$g);E(this,Ga,[]);E(this,Hr,[]);const i=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:w,y:b,width:g,height:v}of e){const x=Math.floor((w-t)/o)*o,S=Math.ceil((w+g+t)/o)*o,A=Math.floor((b-t)/o)*o,C=Math.ceil((b+v+t)/o)*o,N=[x,A,C,!0],P=[S,A,C,!1];u(this,Ga).push(N,P),ne.rectBoundingBox(x,A,S,C,i)}const a=i[2]-i[0]+2*s,l=i[3]-i[1]+2*s,c=i[0]-s,h=i[1]-s;let f=r?-1/0:1/0,p=1/0;const m=u(this,Ga).at(r?-1:-2),y=[m[0],m[2]];for(const w of u(this,Ga)){const[b,g,v,x]=w;!x&&r?g<p?(p=g,f=b):g===p&&(f=Math.max(f,b)):x&&!r&&(g<p?(p=g,f=b):g===p&&(f=Math.min(f,b))),w[0]=(b-c)/a,w[1]=(g-h)/l,w[2]=(v-h)/l}_(this,Bg,new Float32Array([c,h,a,l])),_(this,Ug,[f,p]),_(this,$g,y)}getOutlines(){u(this,Ga).sort((t,s)=>t[0]-s[0]||t[1]-s[1]||t[2]-s[2]);const e=[];for(const t of u(this,Ga))t[3]?(e.push(...T(this,Qn,tE).call(this,t)),T(this,Qn,nM).call(this,t)):(T(this,Qn,sM).call(this,t),e.push(...T(this,Qn,tE).call(this,t)));return T(this,Qn,tM).call(this,e)}}Bg=new WeakMap,Ug=new WeakMap,$g=new WeakMap,Ga=new WeakMap,Hr=new WeakMap,Qn=new WeakSet,tM=function(e){const t=[],s=new Set;for(const o of e){const[a,l,c]=o;t.push([a,l,o],[a,c,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const l=t[o][2],c=t[o+1][2];l.push(c),c.push(l),s.add(l),s.add(c)}const r=[];let i;for(;s.size>0;){const o=s.values().next().value;let[a,l,c,h,f]=o;s.delete(o);let p=a,m=l;for(i=[a,c],r.push(i);;){let y;if(s.has(h))y=h;else if(s.has(f))y=f;else break;s.delete(y),[a,l,c,h,f]=y,p!==a&&(i.push(p,m,a,m===l?l:c),p=a),m=m===l?c:l}i.push(p,m)}return new r7(r,u(this,Bg),u(this,Ug),u(this,$g))},J0=function(e){const t=u(this,Hr);let s=0,r=t.length-1;for(;s<=r;){const i=s+r>>1,o=t[i][0];if(o===e)return i;o<e?s=i+1:r=i-1}return r+1},nM=function([,e,t]){const s=T(this,Qn,J0).call(this,e);u(this,Hr).splice(s,0,[e,t])},sM=function([,e,t]){const s=T(this,Qn,J0).call(this,e);for(let r=s;r<u(this,Hr).length;r++){const[i,o]=u(this,Hr)[r];if(i!==e)break;if(i===e&&o===t){u(this,Hr).splice(r,1);return}}for(let r=s-1;r>=0;r--){const[i,o]=u(this,Hr)[r];if(i!==e)break;if(i===e&&o===t){u(this,Hr).splice(r,1);return}}},tE=function(e){const[t,s,r]=e,i=[[t,s,r]],o=T(this,Qn,J0).call(this,r);for(let a=0;a<o;a++){const[l,c]=u(this,Hr)[a];for(let h=0,f=i.length;h<f;h++){const[,p,m]=i[h];if(!(c<=p||m<=l)){if(p>=l){if(m>c)i[h][1]=c;else{if(f===1)return[];i.splice(h,1),h--,f--}continue}i[h][2]=l,m>c&&i.push([t,c,m])}}}return i};var Vg,Dd;class r7 extends ee{constructor(t,s,r,i){super();E(this,Vg);E(this,Dd);_(this,Dd,t),_(this,Vg,s),this.firstPoint=r,this.lastPoint=i}toSVGPath(){const t=[];for(const s of u(this,Dd)){let[r,i]=s;t.push(`M${r} ${i}`);for(let o=2;o<s.length;o+=2){const a=s[o],l=s[o+1];a===r?(t.push(`V${l}`),i=l):l===i&&(t.push(`H${a}`),r=a)}t.push("Z")}return t.join(" ")}serialize([t,s,r,i],o){const a=[],l=r-t,c=i-s;for(const h of u(this,Dd)){const f=new Array(h.length);for(let p=0;p<h.length;p+=2)f[p]=t+h[p]*l,f[p+1]=i-h[p+1]*c;a.push(f)}return a}get box(){return u(this,Vg)}get classNamesForOutlining(){return["highlightOutline"]}}Vg=new WeakMap,Dd=new WeakMap;class nE extends sw{newFreeDrawOutline(e,t,s,r,i,o){return new i7(e,t,s,r,i,o)}}class i7 extends ZD{newOutliner(e,t,s,r,i,o=0){return new nE(e,t,s,r,i,o)}}var Md,Hg,No,Zc,zg,ls,Gg,Wg,eu,Ls,Ds,gn,Fd,Bd,Ln,Ud,pr,Yg,ye,sE,Q0,rM,iM,oM,rE,Ul,vr,Wu,aM,Z0,ev,lM,cM,uM,hM,dM;const Ne=class Ne extends nt{constructor(t){super({...t,name:"highlightEditor"});E(this,ye);E(this,Md,null);E(this,Hg,0);E(this,No);E(this,Zc,null);E(this,zg,null);E(this,ls,null);E(this,Gg,null);E(this,Wg,0);E(this,eu,null);E(this,Ls,null);E(this,Ds,null);E(this,gn,!1);E(this,Fd,null);E(this,Bd,null);E(this,Ln,null);E(this,Ud,"");E(this,pr);E(this,Yg,"");this.color=t.color||Ne._defaultColor,_(this,pr,t.thickness||Ne._defaultThickness),this.opacity=t.opacity||Ne._defaultOpacity,_(this,No,t.boxes||null),_(this,Yg,t.methodOfCreation||""),_(this,Ud,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(_(this,gn,!0),T(this,ye,Q0).call(this,t),T(this,ye,Ul).call(this)):u(this,No)&&(_(this,Md,t.anchorNode),_(this,Hg,t.anchorOffset),_(this,Gg,t.focusNode),_(this,Wg,t.focusOffset),T(this,ye,sE).call(this),T(this,ye,Ul).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=Ne.prototype;return ge(this,"_keyboardManager",new py([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:u(this,gn)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:u(this,pr),methodOfCreation:u(this,Yg)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,s){var r;nt.initialize(t,s),Ne._defaultColor||(Ne._defaultColor=((r=s.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,s){switch(t){case _e.HIGHLIGHT_COLOR:Ne._defaultColor=s;break;case _e.HIGHLIGHT_THICKNESS:Ne._defaultThickness=s;break}}translateInPage(t,s){}get toolbarPosition(){return u(this,Bd)}get commentButtonPosition(){return u(this,Fd)}updateParams(t,s){switch(t){case _e.HIGHLIGHT_COLOR:T(this,ye,rM).call(this,s);break;case _e.HIGHLIGHT_THICKNESS:T(this,ye,iM).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[_e.HIGHLIGHT_COLOR,Ne._defaultColor],[_e.HIGHLIGHT_THICKNESS,Ne._defaultThickness]]}get propertiesToUpdate(){return[[_e.HIGHLIGHT_COLOR,this.color||Ne._defaultColor],[_e.HIGHLIGHT_THICKNESS,u(this,pr)||Ne._defaultThickness],[_e.HIGHLIGHT_FREE,u(this,gn)]]}onUpdatedColor(){var t,s;(t=this.parent)==null||t.drawLayer.updateProperties(u(this,Ds),{root:{fill:this.color,"fill-opacity":this.opacity}}),(s=u(this,zg))==null||s.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",_(this,zg,new ew({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(T(this,ye,ev).call(this))}getBaseTranslation(){return[0,0]}getRect(t,s){return super.getRect(t,s,T(this,ye,ev).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){T(this,ye,rE).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(T(this,ye,Ul).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let s=!1;this.parent&&!t?T(this,ye,rE).call(this):t&&(T(this,ye,Ul).call(this,t),s=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),s&&this.select()}rotate(t){var i,o,a;const{drawLayer:s}=this.parent;let r;u(this,gn)?(t=(t-this.rotation+360)%360,r=T(i=Ne,vr,Wu).call(i,u(this,Ls).box,t)):r=T(o=Ne,vr,Wu).call(o,[this.x,this.y,this.width,this.height],t),s.updateProperties(u(this,Ds),{bbox:r,root:{"data-main-rotation":t}}),s.updateProperties(u(this,Ln),{bbox:T(a=Ne,vr,Wu).call(a,u(this,ls).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();u(this,Ud)&&(t.setAttribute("aria-label",u(this,Ud)),t.setAttribute("role","mark")),u(this,gn)?t.classList.add("free"):this.div.addEventListener("keydown",T(this,ye,aM).bind(this),{signal:this._uiManager._signal});const s=_(this,eu,document.createElement("div"));return t.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=u(this,Zc),this.setDims(),PL(this,u(this,eu),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(u(this,Ln),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(u(this,Ln),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:T(this,ye,Z0).call(this,!0);break;case 1:case 3:T(this,ye,Z0).call(this,!1);break}}select(){var t;super.select(),u(this,Ln)&&((t=this.parent)==null||t.drawLayer.updateProperties(u(this,Ln),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),u(this,Ln)&&((t=this.parent)==null||t.drawLayer.updateProperties(u(this,Ln),{rootClass:{selected:!1}}),u(this,gn)||T(this,ye,Z0).call(this,!1))}get _mustFixPosition(){return!u(this,gn)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(u(this,Ds),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(u(this,Ln),{rootClass:{hidden:!t}}))}static startHighlighting(t,s,{target:r,x:i,y:o}){const{x:a,y:l,width:c,height:h}=r.getBoundingClientRect(),f=new AbortController,p=t.combinedSignal(f),m=y=>{f.abort(),T(this,vr,hM).call(this,t,y)};window.addEventListener("blur",m,{signal:p}),window.addEventListener("pointerup",m,{signal:p}),window.addEventListener("pointerdown",kt,{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",Ar,{signal:p}),r.addEventListener("pointermove",T(this,vr,uM).bind(this,t),{signal:p}),this._freeHighlight=new nE({x:i,y:o},[a,l,c,h],t.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,s,r){var w,b,g,v;let i=null;if(t instanceof UD){const{data:{quadPoints:x,rect:S,rotation:A,id:C,color:N,opacity:P,popupRef:R,richText:O,contentsObj:M,creationDate:Y,modificationDate:J},parent:{page:{pageNumber:U}}}=t;i=t={annotationType:pe.HIGHLIGHT,color:Array.from(N),opacity:P,quadPoints:x,boxes:null,pageIndex:U-1,rect:S.slice(0),rotation:A,annotationElementId:C,id:C,deleted:!1,popupRef:R,richText:O,comment:(M==null?void 0:M.str)||null,creationDate:Y,modificationDate:J}}else if(t instanceof N1){const{data:{inkLists:x,rect:S,rotation:A,id:C,color:N,borderStyle:{rawWidth:P},popupRef:R,richText:O,contentsObj:M,creationDate:Y,modificationDate:J},parent:{page:{pageNumber:U}}}=t;i=t={annotationType:pe.HIGHLIGHT,color:Array.from(N),thickness:P,inkLists:x,boxes:null,pageIndex:U-1,rect:S.slice(0),rotation:A,annotationElementId:C,id:C,deleted:!1,popupRef:R,richText:O,comment:(M==null?void 0:M.str)||null,creationDate:Y,modificationDate:J}}const{color:o,quadPoints:a,inkLists:l,opacity:c}=t,h=await super.deserialize(t,s,r);h.color=ne.makeHexColor(...o),h.opacity=c||1,l&&_(h,pr,t.thickness),h._initialData=i,t.comment&&h.setCommentData(t);const[f,p]=h.pageDimensions,[m,y]=h.pageTranslation;if(a){const x=_(h,No,[]);for(let S=0;S<a.length;S+=8)x.push({x:(a[S]-m)/f,y:1-(a[S+1]-y)/p,width:(a[S+2]-a[S])/f,height:(a[S+1]-a[S+5])/p});T(w=h,ye,sE).call(w),T(b=h,ye,Ul).call(b),h.rotate(h.rotation)}else if(l){_(h,gn,!0);const x=l[0],S={x:x[0]-m,y:p-(x[1]-y)},A=new nE(S,[0,0,f,p],1,u(h,pr)/2,!0,.001);for(let P=0,R=x.length;P<R;P+=2)S.x=x[P]-m,S.y=p-(x[P+1]-y),A.add(S);const{id:C,clipPathId:N}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:A.toSVGPath()}},!0,!0);T(g=h,ye,Q0).call(g,{highlightOutlines:A.getOutlines(),highlightId:C,clipPathId:N}),T(v=h,ye,Ul).call(v),h.rotate(h.parentRotation)}return h}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const s=nt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),r=super.serialize(t);return Object.assign(r,{color:s,opacity:this.opacity,thickness:u(this,pr),quadPoints:T(this,ye,lM).call(this),outlines:T(this,ye,cM).call(this,r.rect)}),this.addComment(r),this.annotationElementId&&!T(this,ye,dM).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};Md=new WeakMap,Hg=new WeakMap,No=new WeakMap,Zc=new WeakMap,zg=new WeakMap,ls=new WeakMap,Gg=new WeakMap,Wg=new WeakMap,eu=new WeakMap,Ls=new WeakMap,Ds=new WeakMap,gn=new WeakMap,Fd=new WeakMap,Bd=new WeakMap,Ln=new WeakMap,Ud=new WeakMap,pr=new WeakMap,Yg=new WeakMap,ye=new WeakSet,sE=function(){const t=new eE(u(this,No),.001);_(this,Ls,t.getOutlines()),[this.x,this.y,this.width,this.height]=u(this,Ls).box;const s=new eE(u(this,No),.0025,.001,this._uiManager.direction==="ltr");_(this,ls,s.getOutlines());const{firstPoint:r}=u(this,Ls);_(this,Fd,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]);const{lastPoint:i}=u(this,ls);_(this,Bd,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},Q0=function({highlightOutlines:t,highlightId:s,clipPathId:r}){var p,m;if(_(this,Ls,t),_(this,ls,t.getNewOutline(u(this,pr)/2+1.5,.0025)),s>=0)_(this,Ds,s),_(this,Zc,r),this.parent.drawLayer.finalizeDraw(s,{bbox:t.box,path:{d:t.toSVGPath()}}),_(this,Ln,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:u(this,ls).box,path:{d:u(this,ls).toSVGPath()}},!0));else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(u(this,Ds),{bbox:T(p=Ne,vr,Wu).call(p,u(this,Ls).box,(y-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(u(this,Ln),{bbox:T(m=Ne,vr,Wu).call(m,u(this,ls).box,y),path:{d:u(this,ls).toSVGPath()}})}const[o,a,l,c]=t.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=l,this.height=c;break;case 90:{const[y,w]=this.parentDimensions;this.x=a,this.y=1-o,this.width=l*w/y,this.height=c*y/w;break}case 180:this.x=1-o,this.y=1-a,this.width=l,this.height=c;break;case 270:{const[y,w]=this.parentDimensions;this.x=1-a,this.y=o,this.width=l*w/y,this.height=c*y/w;break}}const{firstPoint:h}=t;_(this,Fd,[(h[0]-o)/l,(h[1]-a)/c]);const{lastPoint:f}=u(this,ls);_(this,Bd,[(f[0]-o)/l,(f[1]-a)/c])},rM=function(t){const s=(o,a)=>{this.color=o,this.opacity=a,this.onUpdatedColor()},r=this.color,i=this.opacity;this.addCommands({cmd:s.bind(this,t,Ne._defaultOpacity),undo:s.bind(this,r,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:_e.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},iM=function(t){const s=u(this,pr),r=i=>{_(this,pr,i),T(this,ye,oM).call(this,i)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:_e.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},oM=function(t){u(this,gn)&&(T(this,ye,Q0).call(this,{highlightOutlines:u(this,Ls).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())},rE=function(){u(this,Ds)===null||!this.parent||(this.parent.drawLayer.remove(u(this,Ds)),_(this,Ds,null),this.parent.drawLayer.remove(u(this,Ln)),_(this,Ln,null))},Ul=function(t=this.parent){u(this,Ds)===null&&({id:$t(this,Ds)._,clipPathId:$t(this,Zc)._}=t.drawLayer.draw({bbox:u(this,Ls).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:u(this,gn)},path:{d:u(this,Ls).toSVGPath()}},!1,!0),_(this,Ln,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:u(this,gn)},bbox:u(this,ls).box,path:{d:u(this,ls).toSVGPath()}},u(this,gn))),u(this,eu)&&(u(this,eu).style.clipPath=u(this,Zc)))},vr=new WeakSet,Wu=function([t,s,r,i],o){switch(o){case 90:return[1-s-i,t,i,r];case 180:return[1-t-r,1-s-i,r,i];case 270:return[s,1-t-r,i,r]}return[t,s,r,i]},aM=function(t){Ne._keyboardManager.exec(this,t)},Z0=function(t){if(!u(this,Md))return;const s=window.getSelection();t?s.setPosition(u(this,Md),u(this,Hg)):s.setPosition(u(this,Gg),u(this,Wg))},ev=function(){return u(this,gn)?this.rotation:0},lM=function(){if(u(this,gn))return null;const[t,s]=this.pageDimensions,[r,i]=this.pageTranslation,o=u(this,No),a=new Float32Array(o.length*8);let l=0;for(const{x:c,y:h,width:f,height:p}of o){const m=c*t+r,y=(1-h)*s+i;a[l]=a[l+4]=m,a[l+1]=a[l+3]=y,a[l+2]=a[l+6]=m+f*t,a[l+5]=a[l+7]=y-p*s,l+=8}return a},cM=function(t){return u(this,Ls).serialize(t,T(this,ye,ev).call(this))},uM=function(t,s){this._freeHighlight.add(s)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},hM=function(t,s){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},dM=function(t){const{color:s}=this._initialData;return this.hasEditedComment||t.color.some((r,i)=>r!==s[i])},E(Ne,vr),G(Ne,"_defaultColor",null),G(Ne,"_defaultOpacity",1),G(Ne,"_defaultThickness",12),G(Ne,"_type","highlight"),G(Ne,"_editorType",pe.HIGHLIGHT),G(Ne,"_freeHighlightId",-1),G(Ne,"_freeHighlight",null),G(Ne,"_freeHighlightClipId","");let rw=Ne;var tu;class fM{constructor(){E(this,tu,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,s]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,s)}updateSVGProperty(e,t){u(this,tu)[e]=t}toSVGProperties(){const e=u(this,tu);return _(this,tu,Object.create(null)),{root:e}}reset(){_(this,tu,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){Ye("Not implemented")}}tu=new WeakMap;var Ms,$d,en,nu,su,Ce,iE,oE,aE,up,pM,tv,hp,Yu;const be=class be extends nt{constructor(t){super(t);E(this,Ce);E(this,Ms,null);E(this,$d);G(this,"_colorPicker",null);G(this,"_drawId",null);_(this,$d,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){var t;(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(T(this,Ce,iE).call(this,t),T(this,Ce,up).call(this))}static _mergeSVGProperties(t,s){const r=new Set(Object.keys(t));for(const[i,o]of Object.entries(s))r.has(i)?Object.assign(t[i],o):t[i]=o;return t}static getDefaultDrawingOptions(t){Ye("Not implemented")}static get typesMap(){Ye("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,s){const r=this.typesMap.get(t);r&&this._defaultDrawingOptions.updateProperty(r,s),this._currentParent&&(u(be,en).updateProperty(r,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,s){const r=this.constructor.typesMap.get(t);r&&this._updateProperty(t,r,s)}static get defaultPropertiesToUpdate(){const t=[],s=this._defaultDrawingOptions;for(const[r,i]of this.typesMap)t.push([r,s[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:s}=this;for(const[r,i]of this.constructor.typesMap)t.push([r,s[i]]);return t}_updateProperty(t,s,r){const i=this._drawingOptions,o=i[s],a=l=>{var h;i.updateProperty(s,l);const c=u(this,Ms).updateProperty(s,l);c&&T(this,Ce,hp).call(this,c),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:a.bind(this,r),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,be._mergeSVGProperties(u(this,Ms).getPathResizingSVGProperties(T(this,Ce,tv).call(this)),{bbox:T(this,Ce,Yu).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,be._mergeSVGProperties(u(this,Ms).getPathResizedSVGProperties(T(this,Ce,tv).call(this)),{bbox:T(this,Ce,Yu).call(this)}))}_onTranslating(t,s){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:T(this,Ce,Yu).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,be._mergeSVGProperties(u(this,Ms).getPathTranslatedSVGProperties(T(this,Ce,tv).call(this),this.parentDimensions),{bbox:T(this,Ce,Yu).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,u(this,$d)&&(_(this,$d,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){T(this,Ce,aE).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(T(this,Ce,up).call(this),T(this,Ce,hp).call(this,u(this,Ms).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let s=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),T(this,Ce,aE).call(this)):t&&(this._uiManager.addShouldRescale(this),T(this,Ce,up).call(this,t),s=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),s&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,be._mergeSVGProperties({bbox:T(this,Ce,Yu).call(this)},u(this,Ms).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&T(this,Ce,hp).call(this,u(this,Ms).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,s;this._isCopy&&(t=this.x,s=this.y);const r=super.render();r.classList.add("draw");const i=document.createElement("div");return r.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,s),r}static createDrawerInstance(t,s,r,i,o){Ye("Not implemented")}static startDrawing(t,s,r,i){var b;const{target:o,offsetX:a,offsetY:l,pointerId:c,pointerType:h}=i;if(Pn.isInitializedAndDifferentPointerType(h))return;const{viewport:{rotation:f}}=t,{width:p,height:m}=o.getBoundingClientRect(),y=_(be,nu,new AbortController),w=t.combinedSignal(y);if(Pn.setPointer(h,c),window.addEventListener("pointerup",g=>{Pn.isSamePointerIdOrRemove(g.pointerId)&&this._endDraw(g)},{signal:w}),window.addEventListener("pointercancel",g=>{Pn.isSamePointerIdOrRemove(g.pointerId)&&this._currentParent.endDrawingSession()},{signal:w}),window.addEventListener("pointerdown",g=>{Pn.isSamePointerType(g.pointerType)&&(Pn.initializeAndAddPointerId(g.pointerId),u(be,en).isCancellable()&&(u(be,en).removeLastElement(),u(be,en).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",Ar,{signal:w}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),o.addEventListener("touchmove",g=>{Pn.isSameTimeStamp(g.timeStamp)&&kt(g)},{signal:w}),t.toggleDrawing(),(b=s._editorUndoBar)==null||b.hide(),u(be,en)){t.drawLayer.updateProperties(this._currentDrawId,u(be,en).startNew(a,l,p,m,f));return}s.updateUIForDefaultProperties(this),_(be,en,this.createDrawerInstance(a,l,p,m,f)),_(be,su,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(u(be,su).toSVGProperties(),u(be,en).defaultSVGProperties),!0,!1)}static _drawMove(t){if(Pn.isSameTimeStamp(t.timeStamp),!u(be,en))return;const{offsetX:s,offsetY:r,pointerId:i}=t;if(Pn.isSamePointerId(i)){if(Pn.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,u(be,en).add(s,r)),Pn.setTimeStamp(t.timeStamp),kt(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,_(be,en,null),_(be,su,null),Pn.clearPointerType(),Pn.clearTimeStamp()),u(be,nu)&&(u(be,nu).abort(),_(be,nu,null),Pn.clearPointerIds())}static _endDraw(t){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===s.div&&s.drawLayer.updateProperties(this._currentDrawId,u(be,en).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const r=u(be,en),i=this._currentDrawId,o=r.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(i,r.setLastElement(o))},undo:()=>{s.drawLayer.updateProperties(i,r.removeLastElement())},mustExec:!1,type:_e.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(_e.DRAW_STEP),!u(be,en).isEmpty()){const{pageDimensions:[r,i],scale:o}=s,a=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:u(be,en).getOutlines(r*o,i*o,o,this._INNER_MARGIN),drawingOptions:u(be,su),mustBeCommitted:!t});return this._cleanup(!0),a}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,s,r,i,o,a){Ye("Not implemented")}static async deserialize(t,s,r){var f,p;const{rawDims:{pageWidth:i,pageHeight:o,pageX:a,pageY:l}}=s.viewport,c=this.deserializeDraw(a,l,i,o,this._INNER_MARGIN,t),h=await super.deserialize(t,s,r);return h.createDrawingOptions(t),T(f=h,Ce,iE).call(f,{drawOutlines:c}),T(p=h,Ce,up).call(p),h.onScaleChanging(),h.rotate(),h}serializeDraw(t){const[s,r]=this.pageTranslation,[i,o]=this.pageDimensions;return u(this,Ms).serialize([s,r,i,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};Ms=new WeakMap,$d=new WeakMap,en=new WeakMap,nu=new WeakMap,su=new WeakMap,Ce=new WeakSet,iE=function({drawOutlines:t,drawId:s,drawingOptions:r}){_(this,Ms,t),this._drawingOptions||(this._drawingOptions=r),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,t.defaultProperties)):this._drawId=T(this,Ce,oE).call(this,t,this.parent),T(this,Ce,hp).call(this,t.box)},oE=function(t,s){const{id:r}=s.drawLayer.draw(be._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return r},aE=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},up=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=T(this,Ce,oE).call(this,u(this,Ms),t)}},pM=function([t,s,r,i]){const{parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[s,1-t,r*(a/o),i*(o/a)];case 180:return[1-t,1-s,r,i];case 270:return[1-s,t,r*(a/o),i*(o/a)];default:return[t,s,r,i]}},tv=function(){const{x:t,y:s,width:r,height:i,parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[1-s,t,r*(o/a),i*(a/o)];case 180:return[1-t,1-s,r,i];case 270:return[s,1-t,r*(o/a),i*(a/o)];default:return[t,s,r,i]}},hp=function(t){[this.x,this.y,this.width,this.height]=T(this,Ce,pM).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Yu=function(){const{x:t,y:s,width:r,height:i,rotation:o,parentRotation:a,parentDimensions:[l,c]}=this;switch((o*4+a)/90){case 1:return[1-s-i,t,i,r];case 2:return[1-t-r,1-s-i,r,i];case 3:return[s,1-t-r,i,r];case 4:return[t,s-r*(l/c),i*(c/l),r*(l/c)];case 5:return[1-s,t,r*(l/c),i*(c/l)];case 6:return[1-t-i*(c/l),1-s,i*(c/l),r*(l/c)];case 7:return[s-r*(l/c),1-t-i*(c/l),r*(l/c),i*(c/l)];case 8:return[t-r,s-i,r,i];case 9:return[1-s,t-r,i,r];case 10:return[1-t,1-s,r,i];case 11:return[s-i,1-t,i,r];case 12:return[t-i*(c/l),s,i*(c/l),r*(l/c)];case 13:return[1-s-r*(l/c),t-i*(c/l),r*(l/c),i*(c/l)];case 14:return[1-t,1-s-r*(l/c),i*(c/l),r*(l/c)];case 15:return[s,1-t,r*(l/c),i*(c/l)];default:return[t,s,r,i]}},G(be,"_currentDrawId",-1),G(be,"_currentParent",null),E(be,en,null),E(be,nu,null),E(be,su,null),G(be,"_INNER_MARGIN",3);let iw=be;var Ai,tn,nn,ru,Vd,Vn,yn,mr,iu,ou,au,Hd,nv;class o7{constructor(e,t,s,r,i,o){E(this,Hd);E(this,Ai,new Float64Array(6));E(this,tn);E(this,nn);E(this,ru);E(this,Vd);E(this,Vn);E(this,yn,"");E(this,mr,0);E(this,iu,new gy);E(this,ou);E(this,au);_(this,ou,s),_(this,au,r),_(this,ru,i),_(this,Vd,o),[e,t]=T(this,Hd,nv).call(this,e,t);const a=_(this,tn,[NaN,NaN,NaN,NaN,e,t]);_(this,Vn,[e,t]),_(this,nn,[{line:a,points:u(this,Vn)}]),u(this,Ai).set(a,0)}updateProperty(e,t){e==="stroke-width"&&_(this,Vd,t)}isEmpty(){return!u(this,nn)||u(this,nn).length===0}isCancellable(){return u(this,Vn).length<=10}add(e,t){[e,t]=T(this,Hd,nv).call(this,e,t);const[s,r,i,o]=u(this,Ai).subarray(2,6),a=e-i,l=t-o;return Math.hypot(u(this,ou)*a,u(this,au)*l)<=2?null:(u(this,Vn).push(e,t),isNaN(s)?(u(this,Ai).set([i,o,e,t],2),u(this,tn).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(u(this,Ai)[0])&&u(this,tn).splice(6,6),u(this,Ai).set([s,r,i,o,e,t],0),u(this,tn).push(...ee.createBezierPoints(s,r,i,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const s=this.add(e,t);return s||(u(this,Vn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,s,r,i){_(this,ou,s),_(this,au,r),_(this,ru,i),[e,t]=T(this,Hd,nv).call(this,e,t);const o=_(this,tn,[NaN,NaN,NaN,NaN,e,t]);_(this,Vn,[e,t]);const a=u(this,nn).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),u(this,nn).push({line:o,points:u(this,Vn)}),u(this,Ai).set(o,0),_(this,mr,0),this.toSVGPath(),null}getLastElement(){return u(this,nn).at(-1)}setLastElement(e){return u(this,nn)?(u(this,nn).push(e),_(this,tn,e.line),_(this,Vn,e.points),_(this,mr,0),{path:{d:this.toSVGPath()}}):u(this,iu).setLastElement(e)}removeLastElement(){if(!u(this,nn))return u(this,iu).removeLastElement();u(this,nn).pop(),_(this,yn,"");for(let e=0,t=u(this,nn).length;e<t;e++){const{line:s,points:r}=u(this,nn)[e];_(this,tn,s),_(this,Vn,r),_(this,mr,0),this.toSVGPath()}return{path:{d:u(this,yn)}}}toSVGPath(){const e=ee.svgRound(u(this,tn)[4]),t=ee.svgRound(u(this,tn)[5]);if(u(this,Vn).length===2)return _(this,yn,`${u(this,yn)} M ${e} ${t} Z`),u(this,yn);if(u(this,Vn).length<=6){const r=u(this,yn).lastIndexOf("M");_(this,yn,`${u(this,yn).slice(0,r)} M ${e} ${t}`),_(this,mr,6)}if(u(this,Vn).length===4){const r=ee.svgRound(u(this,tn)[10]),i=ee.svgRound(u(this,tn)[11]);return _(this,yn,`${u(this,yn)} L ${r} ${i}`),_(this,mr,12),u(this,yn)}const s=[];u(this,mr)===0&&(s.push(`M ${e} ${t}`),_(this,mr,6));for(let r=u(this,mr),i=u(this,tn).length;r<i;r+=6){const[o,a,l,c,h,f]=u(this,tn).slice(r,r+6).map(ee.svgRound);s.push(`C${o} ${a} ${l} ${c} ${h} ${f}`)}return _(this,yn,u(this,yn)+s.join(" ")),_(this,mr,u(this,tn).length),u(this,yn)}getOutlines(e,t,s,r){const i=u(this,nn).at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),u(this,iu).build(u(this,nn),e,t,s,u(this,ru),u(this,Vd),r),_(this,Ai,null),_(this,tn,null),_(this,nn,null),_(this,yn,null),u(this,iu)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Ai=new WeakMap,tn=new WeakMap,nn=new WeakMap,ru=new WeakMap,Vd=new WeakMap,Vn=new WeakMap,yn=new WeakMap,mr=new WeakMap,iu=new WeakMap,ou=new WeakMap,au=new WeakMap,Hd=new WeakSet,nv=function(e,t){return ee._normalizePoint(e,t,u(this,ou),u(this,au),u(this,ru))};var Hn,Kg,qg,Fs,Ti,Ci,zd,Gd,lu,xn,Ki,mM,gM,yM;class gy extends ee{constructor(){super(...arguments);E(this,xn);E(this,Hn);E(this,Kg,0);E(this,qg);E(this,Fs);E(this,Ti);E(this,Ci);E(this,zd);E(this,Gd);E(this,lu)}build(t,s,r,i,o,a,l){_(this,Ti,s),_(this,Ci,r),_(this,zd,i),_(this,Gd,o),_(this,lu,a),_(this,qg,l??0),_(this,Fs,t),T(this,xn,gM).call(this)}get thickness(){return u(this,lu)}setLastElement(t){return u(this,Fs).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return u(this,Fs).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:s}of u(this,Fs)){if(t.push(`M${ee.svgRound(s[4])} ${ee.svgRound(s[5])}`),s.length===6){t.push("Z");continue}if(s.length===12&&isNaN(s[6])){t.push(`L${ee.svgRound(s[10])} ${ee.svgRound(s[11])}`);continue}for(let r=6,i=s.length;r<i;r+=6){const[o,a,l,c,h,f]=s.subarray(r,r+6).map(ee.svgRound);t.push(`C${o} ${a} ${l} ${c} ${h} ${f}`)}}return t.join("")}serialize([t,s,r,i],o){const a=[],l=[],[c,h,f,p]=T(this,xn,mM).call(this);let m,y,w,b,g,v,x,S,A;switch(u(this,Gd)){case 0:A=ee._rescale,m=t,y=s+i,w=r,b=-i,g=t+c*r,v=s+(1-h-p)*i,x=t+(c+f)*r,S=s+(1-h)*i;break;case 90:A=ee._rescaleAndSwap,m=t,y=s,w=r,b=i,g=t+h*r,v=s+c*i,x=t+(h+p)*r,S=s+(c+f)*i;break;case 180:A=ee._rescale,m=t+r,y=s,w=-r,b=i,g=t+(1-c-f)*r,v=s+h*i,x=t+(1-c)*r,S=s+(h+p)*i;break;case 270:A=ee._rescaleAndSwap,m=t+r,y=s+i,w=-r,b=-i,g=t+(1-h-p)*r,v=s+(1-c-f)*i,x=t+(1-h)*r,S=s+(1-c)*i;break}for(const{line:C,points:N}of u(this,Fs))a.push(A(C,m,y,w,b,o?new Array(C.length):null)),l.push(A(N,m,y,w,b,o?new Array(N.length):null));return{lines:a,points:l,rect:[g,v,x,S]}}static deserialize(t,s,r,i,o,{paths:{lines:a,points:l},rotation:c,thickness:h}){const f=[];let p,m,y,w,b;switch(c){case 0:b=ee._rescale,p=-t/r,m=s/i+1,y=1/r,w=-1/i;break;case 90:b=ee._rescaleAndSwap,p=-s/i,m=-t/r,y=1/i,w=1/r;break;case 180:b=ee._rescale,p=t/r+1,m=-s/i,y=-1/r,w=1/i;break;case 270:b=ee._rescaleAndSwap,p=s/i+1,m=t/r+1,y=-1/i,w=-1/r;break}if(!a){a=[];for(const v of l){const x=v.length;if(x===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,v[0],v[1]]));continue}if(x===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,v[0],v[1],NaN,NaN,NaN,NaN,v[2],v[3]]));continue}const S=new Float32Array(3*(x-2));a.push(S);let[A,C,N,P]=v.subarray(0,4);S.set([NaN,NaN,NaN,NaN,A,C],0);for(let R=4;R<x;R+=2){const O=v[R],M=v[R+1];S.set(ee.createBezierPoints(A,C,N,P,O,M),(R-2)*3),[A,C,N,P]=[N,P,O,M]}}}for(let v=0,x=a.length;v<x;v++)f.push({line:b(a[v].map(S=>S??NaN),p,m,y,w),points:b(l[v].map(S=>S??NaN),p,m,y,w)});const g=new this.prototype.constructor;return g.build(f,r,i,1,c,h,o),g}get box(){return u(this,Hn)}updateProperty(t,s){return t==="stroke-width"?T(this,xn,yM).call(this,s):null}updateParentDimensions([t,s],r){const[i,o]=T(this,xn,Ki).call(this);_(this,Ti,t),_(this,Ci,s),_(this,zd,r);const[a,l]=T(this,xn,Ki).call(this),c=a-i,h=l-o,f=u(this,Hn);return f[0]-=c,f[1]-=h,f[2]+=2*c,f[3]+=2*h,f}updateRotation(t){return _(this,Kg,t),{path:{transform:this.rotationTransform}}}get viewBox(){return u(this,Hn).map(ee.svgRound).join(" ")}get defaultProperties(){const[t,s]=u(this,Hn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ee.svgRound(t)} ${ee.svgRound(s)}`}}}get rotationTransform(){const[,,t,s]=u(this,Hn);let r=0,i=0,o=0,a=0,l=0,c=0;switch(u(this,Kg)){case 90:i=s/t,o=-t/s,l=t;break;case 180:r=-1,a=-1,l=t,c=s;break;case 270:i=-s/t,o=t/s,c=s;break;default:return""}return`matrix(${r} ${i} ${o} ${a} ${ee.svgRound(l)} ${ee.svgRound(c)})`}getPathResizingSVGProperties([t,s,r,i]){const[o,a]=T(this,xn,Ki).call(this),[l,c,h,f]=u(this,Hn);if(Math.abs(h-o)<=ee.PRECISION||Math.abs(f-a)<=ee.PRECISION){const b=t+r/2-(l+h/2),g=s+i/2-(c+f/2);return{path:{"transform-origin":`${ee.svgRound(t)} ${ee.svgRound(s)}`,transform:`${this.rotationTransform} translate(${b} ${g})`}}}const p=(r-2*o)/(h-2*o),m=(i-2*a)/(f-2*a),y=h/r,w=f/i;return{path:{"transform-origin":`${ee.svgRound(l)} ${ee.svgRound(c)}`,transform:`${this.rotationTransform} scale(${y} ${w}) translate(${ee.svgRound(o)} ${ee.svgRound(a)}) scale(${p} ${m}) translate(${ee.svgRound(-o)} ${ee.svgRound(-a)})`}}}getPathResizedSVGProperties([t,s,r,i]){const[o,a]=T(this,xn,Ki).call(this),l=u(this,Hn),[c,h,f,p]=l;if(l[0]=t,l[1]=s,l[2]=r,l[3]=i,Math.abs(f-o)<=ee.PRECISION||Math.abs(p-a)<=ee.PRECISION){const g=t+r/2-(c+f/2),v=s+i/2-(h+p/2);for(const{line:x,points:S}of u(this,Fs))ee._translate(x,g,v,x),ee._translate(S,g,v,S);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ee.svgRound(t)} ${ee.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const m=(r-2*o)/(f-2*o),y=(i-2*a)/(p-2*a),w=-m*(c+o)+t+o,b=-y*(h+a)+s+a;if(m!==1||y!==1||w!==0||b!==0)for(const{line:g,points:v}of u(this,Fs))ee._rescale(g,w,b,m,y,g),ee._rescale(v,w,b,m,y,v);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ee.svgRound(t)} ${ee.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,s],r){const[i,o]=r,a=u(this,Hn),l=t-a[0],c=s-a[1];if(u(this,Ti)===i&&u(this,Ci)===o)for(const{line:h,points:f}of u(this,Fs))ee._translate(h,l,c,h),ee._translate(f,l,c,f);else{const h=u(this,Ti)/i,f=u(this,Ci)/o;_(this,Ti,i),_(this,Ci,o);for(const{line:p,points:m}of u(this,Fs))ee._rescale(p,l,c,h,f,p),ee._rescale(m,l,c,h,f,m);a[2]*=h,a[3]*=f}return a[0]=t,a[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ee.svgRound(t)} ${ee.svgRound(s)}`}}}get defaultSVGProperties(){const t=u(this,Hn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ee.svgRound(t[0])} ${ee.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}Hn=new WeakMap,Kg=new WeakMap,qg=new WeakMap,Fs=new WeakMap,Ti=new WeakMap,Ci=new WeakMap,zd=new WeakMap,Gd=new WeakMap,lu=new WeakMap,xn=new WeakSet,Ki=function(t=u(this,lu)){const s=u(this,qg)+t/2*u(this,zd);return u(this,Gd)%180===0?[s/u(this,Ti),s/u(this,Ci)]:[s/u(this,Ci),s/u(this,Ti)]},mM=function(){const[t,s,r,i]=u(this,Hn),[o,a]=T(this,xn,Ki).call(this,0);return[t+o,s+a,r-2*o,i-2*a]},gM=function(){const t=_(this,Hn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of u(this,Fs)){if(i.length<=12){for(let l=4,c=i.length;l<c;l+=6)ne.pointBoundingBox(i[l],i[l+1],t);continue}let o=i[4],a=i[5];for(let l=6,c=i.length;l<c;l+=6){const[h,f,p,m,y,w]=i.subarray(l,l+6);ne.bezierBoundingBox(o,a,h,f,p,m,y,w,t),o=y,a=w}}const[s,r]=T(this,xn,Ki).call(this);t[0]=Wn(t[0]-s,0,1),t[1]=Wn(t[1]-r,0,1),t[2]=Wn(t[2]+s,0,1),t[3]=Wn(t[3]+r,0,1),t[2]-=t[0],t[3]-=t[1]},yM=function(t){const[s,r]=T(this,xn,Ki).call(this);_(this,lu,t);const[i,o]=T(this,xn,Ki).call(this),[a,l]=[i-s,o-r],c=u(this,Hn);return c[0]-=a,c[1]-=l,c[2]+=2*a,c[3]+=2*l,c};class cx extends fM{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:nt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new cx(this._viewParameters);return e.updateAll(this),e}}var Ew,vM;const gh=class gh extends iw{constructor(t){super({...t,name:"inkEditor"});E(this,Ew);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,s){nt.initialize(t,s),this._defaultDrawingOptions=new cx(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return ge(this,"typesMap",new Map([[_e.INK_THICKNESS,"stroke-width"],[_e.INK_COLOR,"stroke"],[_e.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,s,r,i,o){return new o7(t,s,r,i,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,s,r,i,o,a){return gy.deserialize(t,s,r,i,o,a)}static async deserialize(t,s,r){let i=null;if(t instanceof N1){const{data:{inkLists:a,rect:l,rotation:c,id:h,color:f,opacity:p,borderStyle:{rawWidth:m},popupRef:y,richText:w,contentsObj:b,creationDate:g,modificationDate:v},parent:{page:{pageNumber:x}}}=t;i=t={annotationType:pe.INK,color:Array.from(f),thickness:m,opacity:p,paths:{points:a},boxes:null,pageIndex:x-1,rect:l.slice(0),rotation:c,annotationElementId:h,id:h,deleted:!1,popupRef:y,richText:w,comment:(b==null?void 0:b.str)||null,creationDate:g,modificationDate:v}}const o=await super.deserialize(t,s,r);return o._initialData=i,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new tw(this)),[["colorPicker",this._colorPicker]]}get colorType(){return _e.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:s,parent:r}=this;s.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(t,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:s,opacity:r}){this._drawingOptions=gh.getDefaultDrawingOptions({stroke:ne.makeHexColor(...t),"stroke-width":s,"stroke-opacity":r})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:r}=this.serializeDraw(t),{_drawingOptions:{stroke:i,"stroke-opacity":o,"stroke-width":a}}=this,l=Object.assign(super.serialize(t),{color:nt._colorManager.convert(i),opacity:o,thickness:a,paths:{lines:s,points:r}});return this.addComment(l),t?(l.isCopy=!0,l):this.annotationElementId&&!T(this,Ew,vM).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:s,rect:r}=this.serializeDraw(!1);return t.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:s,popup:this.comment}),null}};Ew=new WeakSet,vM=function(t){const{color:s,thickness:r,opacity:i,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((a,l)=>a!==s[l])||t.thickness!==r||t.opacity!==i||t.pageIndex!==o},G(gh,"_type","ink"),G(gh,"_editorType",pe.INK),G(gh,"_defaultDrawingOptions",null);let lE=gh;class cE extends gy{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const s0=8,Ff=3;var cu,Ie,uE,zr,wM,xM,hE,sv,bM,_M,SM,dE,fE,EM;class Lo{static extractContoursFromText(e,{fontFamily:t,fontStyle:s,fontWeight:r},i,o,a,l){let c=new OffscreenCanvas(1,1),h=c.getContext("2d",{alpha:!1});const f=200,p=h.font=`${s} ${r} ${f}px ${t}`,{actualBoundingBoxLeft:m,actualBoundingBoxRight:y,actualBoundingBoxAscent:w,actualBoundingBoxDescent:b,fontBoundingBoxAscent:g,fontBoundingBoxDescent:v,width:x}=h.measureText(e),S=1.5,A=Math.ceil(Math.max(Math.abs(m)+Math.abs(y)||0,x)*S),C=Math.ceil(Math.max(Math.abs(w)+Math.abs(b)||f,Math.abs(g)+Math.abs(v)||f)*S);c=new OffscreenCanvas(A,C),h=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),h.font=p,h.filter="grayscale(1)",h.fillStyle="white",h.fillRect(0,0,A,C),h.fillStyle="black",h.fillText(e,A*(S-1)/2,C*(3-S)/2);const N=T(this,Ie,dE).call(this,h.getImageData(0,0,A,C).data),P=T(this,Ie,SM).call(this,N),R=T(this,Ie,fE).call(this,P),O=T(this,Ie,hE).call(this,N,A,C,R);return this.processDrawnLines({lines:{curves:O,width:A,height:C},pageWidth:i,pageHeight:o,rotation:a,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(e,t,s,r,i){const[o,a,l]=T(this,Ie,EM).call(this,e),[c,h]=T(this,Ie,_M).call(this,o,a,l,Math.hypot(a,l)*u(this,cu).sigmaSFactor,u(this,cu).sigmaR,u(this,cu).kernelSize),f=T(this,Ie,fE).call(this,h),p=T(this,Ie,hE).call(this,c,a,l,f);return this.processDrawnLines({lines:{curves:p,width:a,height:l},pageWidth:t,pageHeight:s,rotation:r,innerMargin:i,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:s,rotation:r,innerMargin:i,mustSmooth:o,areContours:a}){r%180!==0&&([t,s]=[s,t]);const{curves:l,width:c,height:h}=e,f=e.thickness??0,p=[],m=Math.min(t/c,s/h),y=m/t,w=m/s,b=[];for(const{points:v}of l){const x=o?T(this,Ie,bM).call(this,v):v;if(!x)continue;b.push(x);const S=x.length,A=new Float32Array(S),C=new Float32Array(3*(S===2?2:S-2));if(p.push({line:C,points:A}),S===2){A[0]=x[0]*y,A[1]=x[1]*w,C.set([NaN,NaN,NaN,NaN,A[0],A[1]],0);continue}let[N,P,R,O]=x;N*=y,P*=w,R*=y,O*=w,A.set([N,P,R,O],0),C.set([NaN,NaN,NaN,NaN,N,P],0);for(let M=4;M<S;M+=2){const Y=A[M]=x[M]*y,J=A[M+1]=x[M+1]*w;C.set(ee.createBezierPoints(N,P,R,O,Y,J),(M-2)*3),[N,P,R,O]=[R,O,Y,J]}}if(p.length===0)return null;const g=a?new cE:new gy;return g.build(p,t,s,1,r,a?0:f,i),{outline:g,newCurves:b,areContours:a,thickness:f,width:c,height:h}}static async compressSignature({outlines:e,areContours:t,thickness:s,width:r,height:i}){let o=1/0,a=-1/0,l=0;for(const x of e){l+=x.length;for(let S=2,A=x.length;S<A;S++){const C=x[S]-x[S-2];o=Math.min(o,C),a=Math.max(a,C)}}let c;o>=-128&&a<=127?c=Int8Array:o>=-32768&&a<=32767?c=Int16Array:c=Int32Array;const h=e.length,f=s0+Ff*h,p=new Uint32Array(f);let m=0;p[m++]=f*Uint32Array.BYTES_PER_ELEMENT+(l-2*h)*c.BYTES_PER_ELEMENT,p[m++]=0,p[m++]=r,p[m++]=i,p[m++]=t?0:1,p[m++]=Math.max(0,Math.floor(s??0)),p[m++]=h,p[m++]=c.BYTES_PER_ELEMENT;for(const x of e)p[m++]=x.length-2,p[m++]=x[0],p[m++]=x[1];const y=new CompressionStream("deflate-raw"),w=y.writable.getWriter();await w.ready,w.write(p);const b=c.prototype.constructor;for(const x of e){const S=new b(x.length-2);for(let A=2,C=x.length;A<C;A++)S[A-2]=x[A]-x[A-2];w.write(S)}w.close();const g=await new Response(y.readable).arrayBuffer(),v=new Uint8Array(g);return bL(v)}static async decompressSignature(e){try{const t=SG(e),{readable:s,writable:r}=new DecompressionStream("deflate-raw"),i=r.getWriter();await i.ready,i.write(t).then(async()=>{await i.ready,await i.close()}).catch(()=>{});let o=null,a=0;for await(const x of s)o||(o=new Uint8Array(new Uint32Array(x.buffer,0,4)[0])),o.set(x,a),a+=x.length;const l=new Uint32Array(o.buffer,0,o.length>>2),c=l[1];if(c!==0)throw new Error(`Invalid version: ${c}`);const h=l[2],f=l[3],p=l[4]===0,m=l[5],y=l[6],w=l[7],b=[],g=(s0+Ff*y)*Uint32Array.BYTES_PER_ELEMENT;let v;switch(w){case Int8Array.BYTES_PER_ELEMENT:v=new Int8Array(o.buffer,g);break;case Int16Array.BYTES_PER_ELEMENT:v=new Int16Array(o.buffer,g);break;case Int32Array.BYTES_PER_ELEMENT:v=new Int32Array(o.buffer,g);break}a=0;for(let x=0;x<y;x++){const S=l[Ff*x+s0],A=new Float32Array(S+2);b.push(A);for(let C=0;C<Ff-1;C++)A[C]=l[Ff*x+s0+C+1];for(let C=0;C<S;C++)A[C+2]=A[C]+v[a++]}return{areContours:p,thickness:m,outlines:b,width:h,height:f}}catch(t){return de(`decompressSignature: ${t}`),null}}}cu=new WeakMap,Ie=new WeakSet,uE=function(e,t,s,r){return s-=e,r-=t,s===0?r>0?0:4:s===1?r+6:2-r},zr=new WeakMap,wM=function(e,t,s,r,i,o,a){const l=T(this,Ie,uE).call(this,s,r,i,o);for(let c=0;c<8;c++){const h=(-c+l-a+16)%8,f=u(this,zr)[2*h],p=u(this,zr)[2*h+1];if(e[(s+f)*t+(r+p)]!==0)return h}return-1},xM=function(e,t,s,r,i,o,a){const l=T(this,Ie,uE).call(this,s,r,i,o);for(let c=0;c<8;c++){const h=(c+l+a+16)%8,f=u(this,zr)[2*h],p=u(this,zr)[2*h+1];if(e[(s+f)*t+(r+p)]!==0)return h}return-1},hE=function(e,t,s,r){const i=e.length,o=new Int32Array(i);for(let h=0;h<i;h++)o[h]=e[h]<=r?1:0;for(let h=1;h<s-1;h++)o[h*t]=o[h*t+t-1]=0;for(let h=0;h<t;h++)o[h]=o[t*s-1-h]=0;let a=1,l;const c=[];for(let h=1;h<s-1;h++){l=1;for(let f=1;f<t-1;f++){const p=h*t+f,m=o[p];if(m===0)continue;let y=h,w=f;if(m===1&&o[p-1]===0)a+=1,w-=1;else if(m>=1&&o[p+1]===0)a+=1,w+=1,m>1&&(l=m);else{m!==1&&(l=Math.abs(m));continue}const b=[f,h],g=w===f+1,v={isHole:g,points:b,id:a,parent:0};c.push(v);let x;for(const M of c)if(M.id===l){x=M;break}x?x.isHole?v.parent=g?x.parent:l:v.parent=g?l:x.parent:v.parent=g?l:0;const S=T(this,Ie,wM).call(this,o,t,h,f,y,w,0);if(S===-1){o[p]=-a,o[p]!==1&&(l=Math.abs(o[p]));continue}let A=u(this,zr)[2*S],C=u(this,zr)[2*S+1];const N=h+A,P=f+C;y=N,w=P;let R=h,O=f;for(;;){const M=T(this,Ie,xM).call(this,o,t,R,O,y,w,1);A=u(this,zr)[2*M],C=u(this,zr)[2*M+1];const Y=R+A,J=O+C;b.push(J,Y);const U=R*t+O;if(o[U+1]===0?o[U]=-a:o[U]===1&&(o[U]=a),Y===h&&J===f&&R===N&&O===P){o[p]!==1&&(l=Math.abs(o[p]));break}else y=R,w=O,R=Y,O=J}}}return c},sv=function(e,t,s,r){if(s-t<=4){for(let N=t;N<s-2;N+=2)r.push(e[N],e[N+1]);return}const i=e[t],o=e[t+1],a=e[s-4]-i,l=e[s-3]-o,c=Math.hypot(a,l),h=a/c,f=l/c,p=h*o-f*i,m=l/a,y=1/c,w=Math.atan(m),b=Math.cos(w),g=Math.sin(w),v=y*(Math.abs(b)+Math.abs(g)),x=y*(1-v+v**2),S=Math.max(Math.atan(Math.abs(g+b)*x),Math.atan(Math.abs(g-b)*x));let A=0,C=t;for(let N=t+2;N<s-2;N+=2){const P=Math.abs(p-h*e[N+1]+f*e[N]);P>A&&(C=N,A=P)}A>(c*S)**2?(T(this,Ie,sv).call(this,e,t,C+2,r),T(this,Ie,sv).call(this,e,C,s,r)):r.push(i,o)},bM=function(e){const t=[],s=e.length;return T(this,Ie,sv).call(this,e,0,s,t),t.push(e[s-2],e[s-1]),t.length<=4?null:t},_M=function(e,t,s,r,i,o){const a=new Float32Array(o**2),l=-2*r**2,c=o>>1;for(let w=0;w<o;w++){const b=(w-c)**2;for(let g=0;g<o;g++)a[w*o+g]=Math.exp((b+(g-c)**2)/l)}const h=new Float32Array(256),f=-2*i**2;for(let w=0;w<256;w++)h[w]=Math.exp(w**2/f);const p=e.length,m=new Uint8Array(p),y=new Uint32Array(256);for(let w=0;w<s;w++)for(let b=0;b<t;b++){const g=w*t+b,v=e[g];let x=0,S=0;for(let C=0;C<o;C++){const N=w+C-c;if(!(N<0||N>=s))for(let P=0;P<o;P++){const R=b+P-c;if(R<0||R>=t)continue;const O=e[N*t+R],M=a[C*o+P]*h[Math.abs(O-v)];x+=O*M,S+=M}}const A=m[g]=Math.round(x/S);y[A]++}return[m,y]},SM=function(e){const t=new Uint32Array(256);for(const s of e)t[s]++;return t},dE=function(e){const t=e.length,s=new Uint8ClampedArray(t>>2);let r=-1/0,i=1/0;for(let a=0,l=s.length;a<l;a++){const c=s[a]=e[a<<2];r=Math.max(r,c),i=Math.min(i,c)}const o=255/(r-i);for(let a=0,l=s.length;a<l;a++)s[a]=(s[a]-i)*o;return s},fE=function(e){let t,s=-1/0,r=-1/0;const i=e.findIndex(l=>l!==0);let o=i,a=i;for(t=i;t<256;t++){const l=e[t];l>s&&(t-o>r&&(r=t-o,a=t-1),s=l,o=t)}for(t=a-1;t>=0&&!(e[t]>e[t+1]);t--);return t},EM=function(e){const t=e,{width:s,height:r}=e,{maxDim:i}=u(this,cu);let o=s,a=r;if(s>i||r>i){let p=s,m=r,y=Math.log2(Math.max(s,r)/i);const w=Math.floor(y);y=y===w?w-1:w;for(let g=0;g<y;g++){o=Math.ceil(p/2),a=Math.ceil(m/2);const v=new OffscreenCanvas(o,a);v.getContext("2d").drawImage(e,0,0,p,m,0,0,o,a),p=o,m=a,e!==t&&e.close(),e=v.transferToImageBitmap()}const b=Math.min(i/o,i/a);o=Math.round(o*b),a=Math.round(a*b)}const c=new OffscreenCanvas(o,a).getContext("2d",{willReadFrequently:!0});c.fillStyle="white",c.fillRect(0,0,o,a),c.filter="grayscale(1)",c.drawImage(e,0,0,e.width,e.height,0,0,o,a);const h=c.getImageData(0,0,o,a).data;return[T(this,Ie,dE).call(this,h),o,a]},E(Lo,Ie),E(Lo,cu,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),E(Lo,zr,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class P1 extends fM{constructor(){super(),super.updateProperties({fill:nt._defaultLineColor,"stroke-width":0})}clone(){const e=new P1;return e.updateAll(this),e}}class R1 extends cx{constructor(e){super(e),super.updateProperties({stroke:nt._defaultLineColor,"stroke-width":1})}clone(){const e=new R1(this._viewParameters);return e.updateAll(this),e}}var Wa,ki,Ya,uu;const bs=class bs extends iw{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});E(this,Wa,!1);E(this,ki,null);E(this,Ya,null);E(this,uu,null);this._willKeepAspectRatio=!0,_(this,Ya,t.signatureData||null),_(this,ki,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,s){nt.initialize(t,s),this._defaultDrawingOptions=new P1,this._defaultDrawnSignatureOptions=new R1(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!1}static get typesMap(){return ge(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!u(this,ki)}}static computeTelemetryFinalData(t){const s=t.get("hasDescription");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,s;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,t=this.x,s=this.y),super.render(),this._drawId===null)if(u(this,Ya)){const{lines:i,mustSmooth:o,areContours:a,description:l,uuid:c,heightInPage:h}=u(this,Ya),{rawDims:{pageWidth:f,pageHeight:p},rotation:m}=this.parent.viewport,y=Lo.processDrawnLines({lines:i,pageWidth:f,pageHeight:p,rotation:m,innerMargin:bs._INNER_MARGIN,mustSmooth:o,areContours:a});this.addSignature(y,h,l,c)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:u(this,ki)||""}));return r&&(this._isCopy=!0,this._moveAfterPaste(t,s)),this.div}setUuid(t){_(this,uu,t),this.addEditToolbar()}getUuid(){return u(this,uu)}get description(){return u(this,ki)}set description(t){_(this,ki,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(s=>{s==null||s.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:s,thickness:r,width:i,height:o}=u(this,Ya),a=Math.max(i,o),l=Lo.processDrawnLines({lines:{curves:t.map(c=>({points:c})),thickness:r,width:i,height:o},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:s});return{areContours:s,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,s,r,i){const{x:o,y:a}=this,{outline:l}=_(this,Ya,t);_(this,Wa,l instanceof cE),this.description=r;let c;u(this,Wa)?c=bs.getDefaultDrawingOptions():(c=bs._defaultDrawnSignatureOptions.clone(),c.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:c});const[,h]=this.pageDimensions;let f=s/h;f=f>=1?.5:f,this.width*=f/this.height,this.width>=1&&(f*=.9/this.width,this.width=.9),this.height=f,this.setDims(),this.x=o,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:s,pageHeight:r},rotation:i}=this.parent.viewport;return Lo.process(t,s,r,i,bs._INNER_MARGIN)}getFromText(t,s){const{rawDims:{pageWidth:r,pageHeight:i},rotation:o}=this.parent.viewport;return Lo.extractContoursFromText(t,s,r,i,o,bs._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:s,pageHeight:r},rotation:i}=this.parent.viewport;return Lo.processDrawnLines({lines:t,pageWidth:s,pageHeight:r,rotation:i,innerMargin:bs._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:s}){t?this._drawingOptions=bs.getDefaultDrawingOptions():(this._drawingOptions=bs._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":s}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:s,points:r}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":i}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:u(this,Wa),color:[0,0,0],thickness:u(this,Wa)?0:i});return this.addComment(o),t?(o.paths={lines:s,points:r},o.uuid=u(this,uu),o.isCopy=!0):o.lines=s,u(this,ki)&&(o.accessibilityData={type:"Figure",alt:u(this,ki)}),o}static deserializeDraw(t,s,r,i,o,a){return a.areContours?cE.deserialize(t,s,r,i,o,a):gy.deserialize(t,s,r,i,o,a)}static async deserialize(t,s,r){var o;const i=await super.deserialize(t,s,r);return _(i,Wa,t.areContours),i.description=((o=t.accessibilityData)==null?void 0:o.alt)||"",_(i,uu,t.uuid),i}};Wa=new WeakMap,ki=new WeakMap,Ya=new WeakMap,uu=new WeakMap,G(bs,"_type","signature"),G(bs,"_editorType",pe.SIGNATURE),G(bs,"_defaultDrawingOptions",null);let pE=bs;var ct,sn,Ka,Po,qa,Wd,Ro,hu,Ni,Bs,Yd,ke,dp,fp,rv,iv,ov,gE,av,AM;class mE extends nt{constructor(t){super({...t,name:"stampEditor"});E(this,ke);E(this,ct,null);E(this,sn,null);E(this,Ka,null);E(this,Po,null);E(this,qa,null);E(this,Wd,"");E(this,Ro,null);E(this,hu,!1);E(this,Ni,null);E(this,Bs,!1);E(this,Yd,!1);_(this,Po,t.bitmapUrl),_(this,qa,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,s){nt.initialize(t,s)}static isHandlingMimeForPasting(t){return eS.includes(t)}static paste(t,s){s.pasteEditor({mode:pe.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const s=t.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(t=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:o,height:a}=t||this.copyCanvas(null,null,!0).imageData,l=await r.guess({name:"altText",request:{data:i,width:o,height:a,channels:i.length/(o*a)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const c=l.output;return await this.setGuessedAltText(c),s&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}remove(){var t;u(this,sn)&&(_(this,ct,null),this._uiManager.imageManager.deleteId(u(this,sn)),(t=u(this,Ro))==null||t.remove(),_(this,Ro,null),u(this,Ni)&&(clearTimeout(u(this,Ni)),_(this,Ni,null))),super.remove()}rebuild(){if(!this.parent){u(this,sn)&&T(this,ke,rv).call(this);return}super.rebuild(),this.div!==null&&(u(this,sn)&&u(this,Ro)===null&&T(this,ke,rv).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(u(this,Ka)||u(this,ct)||u(this,Po)||u(this,qa)||u(this,sn)||u(this,hu))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,s;return this._isCopy&&(t=this.x,s=this.y),super.render(),this.div.hidden=!0,this.createAltText(),u(this,hu)||(u(this,ct)?T(this,ke,iv).call(this):T(this,ke,rv).call(this)),this._isCopy&&this._moveAfterPaste(t,s),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,s){const{id:r,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,s);s.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(_(this,sn,r),i&&_(this,ct,i),_(this,hu,!1),T(this,ke,iv).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;u(this,Ni)!==null&&clearTimeout(u(this,Ni)),_(this,Ni,setTimeout(()=>{_(this,Ni,null),T(this,ke,gE).call(this)},200))}copyCanvas(t,s,r=!1){t||(t=224);const{width:i,height:o}=u(this,ct),a=new $i;let l=u(this,ct),c=i,h=o,f=null;if(s){if(i>s||o>s){const N=Math.min(s/i,s/o);c=Math.floor(i*N),h=Math.floor(o*N)}f=document.createElement("canvas");const m=f.width=Math.ceil(c*a.sx),y=f.height=Math.ceil(h*a.sy);u(this,Bs)||(l=T(this,ke,ov).call(this,m,y));const w=f.getContext("2d");w.filter=this._uiManager.hcmFilter;let b="white",g="#cfcfd8";this._uiManager.hcmFilter!=="none"?g="black":NG.isDarkMode&&(b="#8f8f9d",g="#42414d");const v=15,x=v*a.sx,S=v*a.sy,A=new OffscreenCanvas(x*2,S*2),C=A.getContext("2d");C.fillStyle=b,C.fillRect(0,0,x*2,S*2),C.fillStyle=g,C.fillRect(0,0,x,S),C.fillRect(x,S,x,S),w.fillStyle=w.createPattern(A,"repeat"),w.fillRect(0,0,m,y),w.drawImage(l,0,0,l.width,l.height,0,0,m,y)}let p=null;if(r){let m,y;if(a.symmetric&&l.width<t&&l.height<t)m=l.width,y=l.height;else if(l=u(this,ct),i>t||o>t){const g=Math.min(t/i,t/o);m=Math.floor(i*g),y=Math.floor(o*g),u(this,Bs)||(l=T(this,ke,ov).call(this,m,y))}const b=new OffscreenCanvas(m,y).getContext("2d",{willReadFrequently:!0});b.drawImage(l,0,0,l.width,l.height,0,0,m,y),p={width:m,height:y,data:b.getImageData(0,0,m,y).data}}return{canvas:f,width:c,height:h,imageData:p}}static async deserialize(t,s,r){var b;let i=null,o=!1;if(t instanceof $D){const{data:{rect:g,rotation:v,id:x,structParent:S,popupRef:A,richText:C,contentsObj:N,creationDate:P,modificationDate:R},container:O,parent:{page:{pageNumber:M}},canvas:Y}=t;let J,U;Y?(delete t.canvas,{id:J,bitmap:U}=r.imageManager.getFromCanvas(O.id,Y),Y.remove()):(o=!0,t._hasNoCanvas=!0);const z=((b=await s._structTree.getAriaAttributes(`${hh}${x}`))==null?void 0:b.get("aria-label"))||"";i=t={annotationType:pe.STAMP,bitmapId:J,bitmap:U,pageIndex:M-1,rect:g.slice(0),rotation:v,annotationElementId:x,id:x,deleted:!1,accessibilityData:{decorative:!1,altText:z},isSvg:!1,structParent:S,popupRef:A,richText:C,comment:(N==null?void 0:N.str)||null,creationDate:P,modificationDate:R}}const a=await super.deserialize(t,s,r),{rect:l,bitmap:c,bitmapUrl:h,bitmapId:f,isSvg:p,accessibilityData:m}=t;o?(r.addMissingCanvas(t.id,a),_(a,hu,!0)):f&&r.imageManager.isValidId(f)?(_(a,sn,f),c&&_(a,ct,c)):_(a,Po,h),_(a,Bs,p);const[y,w]=a.pageDimensions;return a.width=(l[2]-l[0])/y,a.height=(l[3]-l[1])/w,m&&(a.altTextData=m),a._initialData=i,t.comment&&a.setCommentData(t),_(a,Yd,!!i),a}serialize(t=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=Object.assign(super.serialize(t),{bitmapId:u(this,sn),isSvg:u(this,Bs)});if(this.addComment(r),t)return r.bitmapUrl=T(this,ke,av).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:i,altText:o}=this.serializeAltText(!1);if(!i&&o&&(r.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const l=T(this,ke,AM).call(this,r);return l.isSame?null:(l.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1,r.id=this.annotationElementId,delete r.bitmapId,r)}if(s===null)return r;s.stamps||(s.stamps=new Map);const a=u(this,Bs)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!s.stamps.has(u(this,sn)))s.stamps.set(u(this,sn),{area:a,serialized:r}),r.bitmap=T(this,ke,av).call(this,!1);else if(u(this,Bs)){const l=s.stamps.get(u(this,sn));a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=T(this,ke,av).call(this,!1))}return r}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}ct=new WeakMap,sn=new WeakMap,Ka=new WeakMap,Po=new WeakMap,qa=new WeakMap,Wd=new WeakMap,Ro=new WeakMap,hu=new WeakMap,Ni=new WeakMap,Bs=new WeakMap,Yd=new WeakMap,ke=new WeakSet,dp=function(t,s=!1){if(!t){this.remove();return}_(this,ct,t.bitmap),s||(_(this,sn,t.id),_(this,Bs,t.isSvg)),t.file&&_(this,Wd,t.file.name),T(this,ke,iv).call(this)},fp=function(){if(_(this,Ka,null),this._uiManager.enableWaiting(!1),!!u(this,Ro)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,ct)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,ct)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},rv=function(){if(u(this,sn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(u(this,sn)).then(r=>T(this,ke,dp).call(this,r,!0)).finally(()=>T(this,ke,fp).call(this));return}if(u(this,Po)){const r=u(this,Po);_(this,Po,null),this._uiManager.enableWaiting(!0),_(this,Ka,this._uiManager.imageManager.getFromUrl(r).then(i=>T(this,ke,dp).call(this,i)).finally(()=>T(this,ke,fp).call(this)));return}if(u(this,qa)){const r=u(this,qa);_(this,qa,null),this._uiManager.enableWaiting(!0),_(this,Ka,this._uiManager.imageManager.getFromFile(r).then(i=>T(this,ke,dp).call(this,i)).finally(()=>T(this,ke,fp).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=eS.join(",");const s=this._uiManager._signal;_(this,Ka,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),T(this,ke,dp).call(this,i)}r()},{signal:s}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:s})}).finally(()=>T(this,ke,fp).call(this))),t.click()},iv=function(){var c;const{div:t}=this;let{width:s,height:r}=u(this,ct);const[i,o]=this.pageDimensions,a=.75;if(this.width)s=this.width*i,r=this.height*o;else if(s>a*i||r>a*o){const h=Math.min(a*i/s,a*o/r);s*=h,r*=h}this._uiManager.enableWaiting(!1);const l=_(this,Ro,document.createElement("canvas"));l.setAttribute("role","img"),this.addContainer(l),this.width=s/i,this.height=r/o,this.setDims(),(c=this._initialOptions)!=null&&c.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),T(this,ke,gE).call(this),u(this,Yd)||(this.parent.addUndoableEditor(this),_(this,Yd,!0)),this._reportTelemetry({action:"inserted_image"}),u(this,Wd)&&this.div.setAttribute("aria-description",u(this,Wd)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},ov=function(t,s){const{width:r,height:i}=u(this,ct);let o=r,a=i,l=u(this,ct);for(;o>2*t||a>2*s;){const c=o,h=a;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*s&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const f=new OffscreenCanvas(o,a);f.getContext("2d").drawImage(l,0,0,c,h,0,0,o,a),l=f.transferToImageBitmap()}return l},gE=function(){const[t,s]=this.parentDimensions,{width:r,height:i}=this,o=new $i,a=Math.ceil(r*t*o.sx),l=Math.ceil(i*s*o.sy),c=u(this,Ro);if(!c||c.width===a&&c.height===l)return;c.width=a,c.height=l;const h=u(this,Bs)?u(this,ct):T(this,ke,ov).call(this,a,l),f=c.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(h,0,0,h.width,h.height,0,0,a,l)},av=function(t){if(t){if(u(this,Bs)){const i=this._uiManager.imageManager.getSvgUrl(u(this,sn));if(i)return i}const s=document.createElement("canvas");return{width:s.width,height:s.height}=u(this,ct),s.getContext("2d").drawImage(u(this,ct),0,0),s.toDataURL()}if(u(this,Bs)){const[s,r]=this.pageDimensions,i=Math.round(this.width*s*yl.PDF_TO_CSS_UNITS),o=Math.round(this.height*r*yl.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(i,o);return a.getContext("2d").drawImage(u(this,ct),0,0,u(this,ct).width,u(this,ct).height,0,0,i,o),a.transferToImageBitmap()}return structuredClone(u(this,ct))},AM=function(t){var a;const{pageIndex:s,accessibilityData:{altText:r}}=this._initialData,i=t.pageIndex===s,o=(((a=t.accessibilityData)==null?void 0:a.alt)||"")===r;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&o,isSameAltText:o}},G(mE,"_type","stamp"),G(mE,"_editorType",pe.STAMP);var du,Kd,Xa,Ja,Io,cs,Qa,qd,Xd,Gr,jo,rn,Oo,Za,Jd,ie,el,We,vE,TM,oi,wE,xE,lv;const Ir=class Ir{constructor({uiManager:e,pageIndex:t,div:s,structTreeLayer:r,accessibilityManager:i,annotationLayer:o,drawLayer:a,textLayer:l,viewport:c,l10n:h}){E(this,We);E(this,du);E(this,Kd,!1);E(this,Xa,null);E(this,Ja,null);E(this,Io,null);E(this,cs,new Map);E(this,Qa,!1);E(this,qd,!1);E(this,Xd,!1);E(this,Gr,null);E(this,jo,null);E(this,rn,null);E(this,Oo,null);E(this,Za,null);E(this,Jd,-1);E(this,ie);const f=[...u(Ir,el).values()];if(!Ir._initialized){Ir._initialized=!0;for(const p of f)p.initialize(h,e)}e.registerEditorTypes(f),_(this,ie,e),this.pageIndex=t,this.div=s,_(this,du,i),_(this,Xa,o),this.viewport=c,_(this,rn,l),this.drawLayer=a,this._structTree=r,u(this,ie).addLayer(this)}get isEmpty(){return u(this,cs).size===0}get isInvisible(){return this.isEmpty&&u(this,ie).getMode()===pe.NONE}updateToolbar(e){u(this,ie).updateToolbar(e)}updateMode(e=u(this,ie).getMode()){switch(T(this,We,lv).call(this),e){case pe.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case pe.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case pe.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===pe.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const s of u(Ir,el).values())t.toggle(`${s._type}Editing`,e===s._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=u(this,rn))==null?void 0:t.div)}setEditingState(e){u(this,ie).setEditingState(e)}addCommands(e){u(this,ie).addCommands(e)}cleanUndoStack(e){u(this,ie).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=u(this,Xa))==null||t.togglePointerEvents(e)}async enable(){var s;_(this,Xd,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(s=u(this,Za))==null||s.abort(),_(this,Za,null);const e=new Set;for(const r of u(this,We,vE))r.enableEditing(),r.show(!0),r.annotationElementId&&(u(this,ie).removeChangedExistingAnnotation(r),e.add(r.annotationElementId));const t=u(this,Xa);if(t)for(const r of t.getEditableAnnotations()){if(r.hide(),u(this,ie).isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const i=await this.deserialize(r);i&&(this.addOrRebuild(i),i.enableEditing())}_(this,Xd,!1),u(this,ie)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var r;if(_(this,qd,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),u(this,rn)&&!u(this,Za)){_(this,Za,new AbortController);const i=u(this,ie).combinedSignal(u(this,Za));u(this,rn).div.addEventListener("pointerdown",o=>{const{clientX:l,clientY:c,timeStamp:h}=o,f=u(this,Jd);if(h-f>500){_(this,Jd,h);return}_(this,Jd,-1);const{classList:p}=this.div;p.toggle("getElements",!0);const m=document.elementsFromPoint(l,c);if(p.toggle("getElements",!1),!this.div.contains(m[0]))return;let y;const w=new RegExp(`^${sm}[0-9]+$`);for(const g of m)if(w.test(g.id)){y=g.id;break}if(!y)return;const b=u(this,cs).get(y);(b==null?void 0:b.annotationElementId)===null&&(o.stopPropagation(),o.preventDefault(),b.dblclick(o))},{signal:i,capture:!0})}const e=u(this,Xa),t=[];if(e){const i=new Map,o=new Map;for(const l of u(this,We,vE)){if(l.disableEditing(),!l.annotationElementId){t.push(l);continue}if(l.serialize()!==null){i.set(l.annotationElementId,l);continue}else o.set(l.annotationElementId,l);(r=this.getEditableAnnotation(l.annotationElementId))==null||r.show(),l.remove()}const a=e.getEditableAnnotations();for(const l of a){const{id:c}=l.data;if(u(this,ie).isDeletedAnnotationElement(c)){l.updateEdited({deleted:!0});continue}let h=o.get(c);if(h){h.resetAnnotationElement(l),h.show(!1),l.show();continue}h=i.get(c),h&&(u(this,ie).addChangedExistingAnnotation(h),h.renderAnnotationElement(l)&&h.show(!1)),l.show()}}T(this,We,lv).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const i of u(Ir,el).values())s.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),e==null||e.updateFakeAnnotations(t),_(this,qd,!1)}getEditableAnnotation(e){var t;return((t=u(this,Xa))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){u(this,ie).getActive()!==e&&u(this,ie).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=u(this,rn))!=null&&e.div&&!u(this,Oo)){_(this,Oo,new AbortController);const t=u(this,ie).combinedSignal(u(this,Oo));u(this,rn).div.addEventListener("pointerdown",T(this,We,TM).bind(this),{signal:t}),u(this,rn).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=u(this,rn))!=null&&e.div&&u(this,Oo)&&(u(this,Oo).abort(),_(this,Oo,null),u(this,rn).div.classList.remove("highlighting"))}enableClick(){if(u(this,Ja))return;_(this,Ja,new AbortController);const e=u(this,ie).combinedSignal(u(this,Ja));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=u(this,Ja))==null||e.abort(),_(this,Ja,null)}attach(e){u(this,cs).set(e.id,e);const{annotationElementId:t}=e;t&&u(this,ie).isDeletedAnnotationElement(t)&&u(this,ie).removeDeletedAnnotationElement(e)}detach(e){var t;u(this,cs).delete(e.id),(t=u(this,du))==null||t.removePointerInTextLayer(e.contentDiv),!u(this,qd)&&e.annotationElementId&&u(this,ie).addDeletedAnnotationElement(e)}remove(e){this.detach(e),u(this,ie).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(u(this,ie).addDeletedAnnotationElement(e.annotationElementId),nt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),u(this,ie).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!u(this,Xd)),u(this,ie).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var s;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!u(this,Io)&&(e._focusEventsAllowed=!1,_(this,Io,setTimeout(()=>{_(this,Io,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:u(this,ie)._signal}),t.focus())},0))),e._structTreeParentId=(s=u(this,du))==null?void 0:s.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:t,undo:s,mustExec:!1})}getEditorByUID(e){for(const t of u(this,cs).values())if(t.uid===e)return t;return null}getNextId(){return u(this,ie).getId()}combinedSignal(e){return u(this,ie).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=u(this,We,oi))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await u(this,ie).updateMode(e.mode);const{offsetX:s,offsetY:r}=T(this,We,xE).call(this),i=this.getNextId(),o=T(this,We,wE).call(this,{parent:this,id:i,x:s,y:r,uiManager:u(this,ie),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=u(Ir,el).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,u(this,ie)))||null}createAndAddNewEditor(e,t,s={}){const r=this.getNextId(),i=T(this,We,wE).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:u(this,ie),isCentered:t,...s});return i&&this.add(i),i}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(T(this,We,xE).call(this),!0,e)}setSelected(e){u(this,ie).setSelected(e)}toggleSelected(e){u(this,ie).toggleSelected(e)}unselect(e){u(this,ie).unselect(e)}pointerup(e){var r;const{isMac:t}=Sn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!u(this,Qa)||(_(this,Qa,!1),(r=u(this,We,oi))!=null&&r.isDrawer&&u(this,We,oi).supportMultipleDrawings))return;if(!u(this,Kd)){_(this,Kd,!0);return}const s=u(this,ie).getMode();if(s===pe.STAMP||s===pe.SIGNATURE){u(this,ie).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var r;if(u(this,ie).getMode()===pe.HIGHLIGHT&&this.enableTextSelection(),u(this,Qa)){_(this,Qa,!1);return}const{isMac:t}=Sn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(_(this,Qa,!0),(r=u(this,We,oi))!=null&&r.isDrawer){this.startDrawingSession(e);return}const s=u(this,ie).getActive();_(this,Kd,!s||s.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),u(this,Gr)){u(this,We,oi).startDrawing(this,u(this,ie),!1,e);return}u(this,ie).setCurrentDrawingSession(this),_(this,Gr,new AbortController);const t=u(this,ie).combinedSignal(u(this,Gr));this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(_(this,jo,null),this.commitOrRemove())},{signal:t}),u(this,We,oi).startDrawing(this,u(this,ie),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&_(this,jo,t);return}u(this,jo)&&setTimeout(()=>{var t;(t=u(this,jo))==null||t.focus(),_(this,jo,null)},0)}endDrawingSession(e=!1){return u(this,Gr)?(u(this,ie).setCurrentDrawingSession(null),u(this,Gr).abort(),_(this,Gr,null),_(this,jo,null),u(this,We,oi).endDrawing(e)):null}findNewParent(e,t,s){const r=u(this,ie).findParent(t,s);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return u(this,Gr)?(this.endDrawingSession(),!0):!1}onScaleChanging(){u(this,Gr)&&u(this,We,oi).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=u(this,ie).getActive())==null?void 0:e.parent)===this&&(u(this,ie).commitOrRemove(),u(this,ie).setActiveEditor(null)),u(this,Io)&&(clearTimeout(u(this,Io)),_(this,Io,null));for(const s of u(this,cs).values())(t=u(this,du))==null||t.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,u(this,cs).clear(),u(this,ie).removeLayer(this)}render({viewport:e}){this.viewport=e,_u(this.div,e);for(const t of u(this,ie).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){u(this,ie).commitOrRemove(),T(this,We,lv).call(this);const t=this.viewport.rotation,s=e.rotation;if(this.viewport=e,_u(this.div,{rotation:s}),t!==s)for(const r of u(this,cs).values())r.rotate(s)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return u(this,ie).viewParameters.realScale}};du=new WeakMap,Kd=new WeakMap,Xa=new WeakMap,Ja=new WeakMap,Io=new WeakMap,cs=new WeakMap,Qa=new WeakMap,qd=new WeakMap,Xd=new WeakMap,Gr=new WeakMap,jo=new WeakMap,rn=new WeakMap,Oo=new WeakMap,Za=new WeakMap,Jd=new WeakMap,ie=new WeakMap,el=new WeakMap,We=new WeakSet,vE=function(){return u(this,cs).size!==0?u(this,cs).values():u(this,ie).getEditors(this.pageIndex)},TM=function(e){u(this,ie).unselectAll();const{target:t}=e;if(t===u(this,rn).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&u(this,rn).div.contains(t)){const{isMac:s}=Sn.platform;if(e.button!==0||e.ctrlKey&&s)return;u(this,ie).showAllEditors("highlight",!0,!0),u(this,rn).div.classList.add("free"),this.toggleDrawing(),rw.startHighlighting(this,u(this,ie).direction==="ltr",{target:u(this,rn).div,x:e.x,y:e.y}),u(this,rn).div.addEventListener("pointerup",()=>{u(this,rn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:u(this,ie)._signal}),e.preventDefault()}},oi=function(){return u(Ir,el).get(u(this,ie).getMode())},wE=function(e){const t=u(this,We,oi);return t?new t.prototype.constructor(e):null},xE=function(){const{x:e,y:t,width:s,height:r}=this.boundingClientRect,i=Math.max(0,e),o=Math.max(0,t),a=Math.min(window.innerWidth,e+s),l=Math.min(window.innerHeight,t+r),c=(i+a)/2-e,h=(o+l)/2-t,[f,p]=this.viewport.rotation%180===0?[c,h]:[h,c];return{offsetX:f,offsetY:p}},lv=function(){for(const e of u(this,cs).values())e.isEmpty()&&e.remove()},G(Ir,"_initialized",!1),E(Ir,el,new Map([QS,lE,mE,rw,pE].map(e=>[e._editorType,e])));let yE=Ir;var Wr,zn,fu,Xg,Aw,CM,Vi,_E,kM,SE;const zt=class zt{constructor({pageIndex:e}){E(this,Vi);E(this,Wr,null);E(this,zn,new Map);E(this,fu,new Map);this.pageIndex=e}setParent(e){if(!u(this,Wr)){_(this,Wr,e);return}if(u(this,Wr)!==e){if(u(this,zn).size>0)for(const t of u(this,zn).values())t.remove(),e.append(t);_(this,Wr,e)}}static get _svgFactory(){return ge(this,"_svgFactory",new nw)}draw(e,t=!1,s=!1){const r=$t(zt,Xg)._++,i=T(this,Vi,_E).call(this),o=zt._svgFactory.createElement("defs");i.append(o);const a=zt._svgFactory.createElement("path");o.append(a);const l=`path_p${this.pageIndex}_${r}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke"),t&&u(this,fu).set(r,a);const c=s?T(this,Vi,kM).call(this,o,l):null,h=zt._svgFactory.createElement("use");return i.append(h),h.setAttribute("href",`#${l}`),this.updateProperties(i,e),u(this,zn).set(r,i),{id:r,clipPathId:`url(#${c})`}}drawOutline(e,t){const s=$t(zt,Xg)._++,r=T(this,Vi,_E).call(this),i=zt._svgFactory.createElement("defs");r.append(i);const o=zt._svgFactory.createElement("path");i.append(o);const a=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke");let l;if(t){const f=zt._svgFactory.createElement("mask");i.append(f),l=`mask_p${this.pageIndex}_${s}`,f.setAttribute("id",l),f.setAttribute("maskUnits","objectBoundingBox");const p=zt._svgFactory.createElement("rect");f.append(p),p.setAttribute("width","1"),p.setAttribute("height","1"),p.setAttribute("fill","white");const m=zt._svgFactory.createElement("use");f.append(m),m.setAttribute("href",`#${a}`),m.setAttribute("stroke","none"),m.setAttribute("fill","black"),m.setAttribute("fill-rule","nonzero"),m.classList.add("mask")}const c=zt._svgFactory.createElement("use");r.append(c),c.setAttribute("href",`#${a}`),l&&c.setAttribute("mask",`url(#${l})`);const h=c.cloneNode();return r.append(h),c.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(r,e),u(this,zn).set(s,r),s}finalizeDraw(e,t){u(this,fu).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var l;if(!t)return;const{root:s,bbox:r,rootClass:i,path:o}=t,a=typeof e=="number"?u(this,zn).get(e):e;if(a){if(s&&T(this,Vi,SE).call(this,a,s),r&&T(l=zt,Aw,CM).call(l,a,r),i){const{classList:c}=a;for(const[h,f]of Object.entries(i))c.toggle(h,f)}if(o){const h=a.firstChild.firstChild;T(this,Vi,SE).call(this,h,o)}}}updateParent(e,t){if(t===this)return;const s=u(this,zn).get(e);s&&(u(t,Wr).append(s),u(this,zn).delete(e),u(t,zn).set(e,s))}remove(e){u(this,fu).delete(e),u(this,Wr)!==null&&(u(this,zn).get(e).remove(),u(this,zn).delete(e))}destroy(){_(this,Wr,null);for(const e of u(this,zn).values())e.remove();u(this,zn).clear(),u(this,fu).clear()}};Wr=new WeakMap,zn=new WeakMap,fu=new WeakMap,Xg=new WeakMap,Aw=new WeakSet,CM=function(e,[t,s,r,i]){const{style:o}=e;o.top=`${100*s}%`,o.left=`${100*t}%`,o.width=`${100*r}%`,o.height=`${100*i}%`},Vi=new WeakSet,_E=function(){const e=zt._svgFactory.create(1,1,!0);return u(this,Wr).append(e),e.setAttribute("aria-hidden",!0),e},kM=function(e,t){const s=zt._svgFactory.createElement("clipPath");e.append(s);const r=`clip_${t}`;s.setAttribute("id",r),s.setAttribute("clipPathUnits","objectBoundingBox");const i=zt._svgFactory.createElement("use");return s.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),r},SE=function(e,t){for(const[s,r]of Object.entries(t))r===null?e.removeAttribute(s):e.setAttribute(s,r)},E(zt,Aw),E(zt,Xg,0);let bE=zt;globalThis._pdfjsTestingUtils={HighlightOutliner:eE};globalThis.pdfjsLib={AbortException:gl,AnnotationEditorLayer:yE,AnnotationEditorParamsType:_e,AnnotationEditorType:pe,AnnotationEditorUIManager:Su,AnnotationLayer:XS,AnnotationMode:ca,AnnotationType:Dt,applyOpacity:RG,build:MW,ColorPicker:ew,createValidAbsoluteUrl:yL,CSSConstants:PG,DOMSVGFactory:nw,DrawLayer:bE,FeatureTest:Sn,fetchData:hy,findContrastColor:IG,getDocument:AD,getFilenameFromUrl:EG,getPdfFilenameFromUrl:AG,getRGB:fy,getUuid:xL,getXfaPageViewport:CG,GlobalWorkerOptions:Ri,ImageKind:N0,InvalidPDFException:Q_,isDataScheme:ax,isPdfFile:E1,isValidExplicitDest:VG,MathClamp:Wn,noContextMenu:Ar,normalizeUnicode:bG,OPS:rm,OutputScale:$i,PasswordResponses:dG,PDFDataRangeTransport:TD,PDFDateString:Kv,PDFWorker:am,PermissionFlag:hG,PixelsPerInch:yl,RenderingCancelledException:S1,renderRichText:SL,ResponseException:Yv,setLayerDimensions:_u,shadow:ge,SignatureExtractor:Lo,stopEvent:kt,SupportedImageMimeTypes:eS,TextLayer:om,TouchManager:Xv,updateUrlHash:vL,Util:ne,VerbosityLevel:rx,version:ND,XfaLayer:_L};var a7={exports:{}};(function(n){var e=function(t){var s=Object.prototype,r=s.hasOwnProperty,i=Object.defineProperty||function(j,L,D){j[L]=D.value},o,a=typeof Symbol=="function"?Symbol:{},l=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",h=a.toStringTag||"@@toStringTag";function f(j,L,D){return Object.defineProperty(j,L,{value:D,enumerable:!0,configurable:!0,writable:!0}),j[L]}try{f({},"")}catch{f=function(L,D,V){return L[D]=V}}function p(j,L,D,V){var F=L&&L.prototype instanceof x?L:x,H=Object.create(F.prototype),se=new $(V||[]);return i(H,"_invoke",{value:Y(j,D,se)}),H}t.wrap=p;function m(j,L,D){try{return{type:"normal",arg:j.call(L,D)}}catch(V){return{type:"throw",arg:V}}}var y="suspendedStart",w="suspendedYield",b="executing",g="completed",v={};function x(){}function S(){}function A(){}var C={};f(C,l,function(){return this});var N=Object.getPrototypeOf,P=N&&N(N(B([])));P&&P!==s&&r.call(P,l)&&(C=P);var R=A.prototype=x.prototype=Object.create(C);S.prototype=A,i(R,"constructor",{value:A,configurable:!0}),i(A,"constructor",{value:S,configurable:!0}),S.displayName=f(A,h,"GeneratorFunction");function O(j){["next","throw","return"].forEach(function(L){f(j,L,function(D){return this._invoke(L,D)})})}t.isGeneratorFunction=function(j){var L=typeof j=="function"&&j.constructor;return L?L===S||(L.displayName||L.name)==="GeneratorFunction":!1},t.mark=function(j){return Object.setPrototypeOf?Object.setPrototypeOf(j,A):(j.__proto__=A,f(j,h,"GeneratorFunction")),j.prototype=Object.create(R),j},t.awrap=function(j){return{__await:j}};function M(j,L){function D(H,se,ae,re){var K=m(j[H],j,se);if(K.type==="throw")re(K.arg);else{var Q=K.arg,De=Q.value;return De&&typeof De=="object"&&r.call(De,"__await")?L.resolve(De.__await).then(function(qe){D("next",qe,ae,re)},function(qe){D("throw",qe,ae,re)}):L.resolve(De).then(function(qe){Q.value=qe,ae(Q)},function(qe){return D("throw",qe,ae,re)})}}var V;function F(H,se){function ae(){return new L(function(re,K){D(H,se,re,K)})}return V=V?V.then(ae,ae):ae()}i(this,"_invoke",{value:F})}O(M.prototype),f(M.prototype,c,function(){return this}),t.AsyncIterator=M,t.async=function(j,L,D,V,F){F===void 0&&(F=Promise);var H=new M(p(j,L,D,V),F);return t.isGeneratorFunction(L)?H:H.next().then(function(se){return se.done?se.value:H.next()})};function Y(j,L,D){var V=y;return function(H,se){if(V===b)throw new Error("Generator is already running");if(V===g){if(H==="throw")throw se;return I()}for(D.method=H,D.arg=se;;){var ae=D.delegate;if(ae){var re=J(ae,D);if(re){if(re===v)continue;return re}}if(D.method==="next")D.sent=D._sent=D.arg;else if(D.method==="throw"){if(V===y)throw V=g,D.arg;D.dispatchException(D.arg)}else D.method==="return"&&D.abrupt("return",D.arg);V=b;var K=m(j,L,D);if(K.type==="normal"){if(V=D.done?g:w,K.arg===v)continue;return{value:K.arg,done:D.done}}else K.type==="throw"&&(V=g,D.method="throw",D.arg=K.arg)}}}function J(j,L){var D=L.method,V=j.iterator[D];if(V===o)return L.delegate=null,D==="throw"&&j.iterator.return&&(L.method="return",L.arg=o,J(j,L),L.method==="throw")||D!=="return"&&(L.method="throw",L.arg=new TypeError("The iterator does not provide a '"+D+"' method")),v;var F=m(V,j.iterator,L.arg);if(F.type==="throw")return L.method="throw",L.arg=F.arg,L.delegate=null,v;var H=F.arg;if(!H)return L.method="throw",L.arg=new TypeError("iterator result is not an object"),L.delegate=null,v;if(H.done)L[j.resultName]=H.value,L.next=j.nextLoc,L.method!=="return"&&(L.method="next",L.arg=o);else return H;return L.delegate=null,v}O(R),f(R,h,"Generator"),f(R,l,function(){return this}),f(R,"toString",function(){return"[object Generator]"});function U(j){var L={tryLoc:j[0]};1 in j&&(L.catchLoc=j[1]),2 in j&&(L.finallyLoc=j[2],L.afterLoc=j[3]),this.tryEntries.push(L)}function z(j){var L=j.completion||{};L.type="normal",delete L.arg,j.completion=L}function $(j){this.tryEntries=[{tryLoc:"root"}],j.forEach(U,this),this.reset(!0)}t.keys=function(j){var L=Object(j),D=[];for(var V in L)D.push(V);return D.reverse(),function F(){for(;D.length;){var H=D.pop();if(H in L)return F.value=H,F.done=!1,F}return F.done=!0,F}};function B(j){if(j){var L=j[l];if(L)return L.call(j);if(typeof j.next=="function")return j;if(!isNaN(j.length)){var D=-1,V=function F(){for(;++D<j.length;)if(r.call(j,D))return F.value=j[D],F.done=!1,F;return F.value=o,F.done=!0,F};return V.next=V}}return{next:I}}t.values=B;function I(){return{value:o,done:!0}}return $.prototype={constructor:$,reset:function(j){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(z),!j)for(var L in this)L.charAt(0)==="t"&&r.call(this,L)&&!isNaN(+L.slice(1))&&(this[L]=o)},stop:function(){this.done=!0;var j=this.tryEntries[0],L=j.completion;if(L.type==="throw")throw L.arg;return this.rval},dispatchException:function(j){if(this.done)throw j;var L=this;function D(re,K){return H.type="throw",H.arg=j,L.next=re,K&&(L.method="next",L.arg=o),!!K}for(var V=this.tryEntries.length-1;V>=0;--V){var F=this.tryEntries[V],H=F.completion;if(F.tryLoc==="root")return D("end");if(F.tryLoc<=this.prev){var se=r.call(F,"catchLoc"),ae=r.call(F,"finallyLoc");if(se&&ae){if(this.prev<F.catchLoc)return D(F.catchLoc,!0);if(this.prev<F.finallyLoc)return D(F.finallyLoc)}else if(se){if(this.prev<F.catchLoc)return D(F.catchLoc,!0)}else if(ae){if(this.prev<F.finallyLoc)return D(F.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(j,L){for(var D=this.tryEntries.length-1;D>=0;--D){var V=this.tryEntries[D];if(V.tryLoc<=this.prev&&r.call(V,"finallyLoc")&&this.prev<V.finallyLoc){var F=V;break}}F&&(j==="break"||j==="continue")&&F.tryLoc<=L&&L<=F.finallyLoc&&(F=null);var H=F?F.completion:{};return H.type=j,H.arg=L,F?(this.method="next",this.next=F.finallyLoc,v):this.complete(H)},complete:function(j,L){if(j.type==="throw")throw j.arg;return j.type==="break"||j.type==="continue"?this.next=j.arg:j.type==="return"?(this.rval=this.arg=j.arg,this.method="return",this.next="end"):j.type==="normal"&&L&&(this.next=L),v},finish:function(j){for(var L=this.tryEntries.length-1;L>=0;--L){var D=this.tryEntries[L];if(D.finallyLoc===j)return this.complete(D.completion,D.afterLoc),z(D),v}},catch:function(j){for(var L=this.tryEntries.length-1;L>=0;--L){var D=this.tryEntries[L];if(D.tryLoc===j){var V=D.completion;if(V.type==="throw"){var F=V.arg;z(D)}return F}}throw new Error("illegal catch attempt")},delegateYield:function(j,L,D){return this.delegate={iterator:B(j),resultName:L,nextLoc:D},this.method==="next"&&(this.arg=o),v}},t}(n.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(a7);var I1=(n,e)=>`${n}-${e}-${Math.random().toString(16).slice(3,8)}`;const l7=I1;let NP=0;var NM=({id:n,action:e,payload:t={}})=>{let s=n;return typeof s>"u"&&(s=l7("Job",NP),NP+=1),{id:s,action:e,payload:t}},xf={};let j1=!1;xf.logging=j1;xf.setLogging=n=>{j1=n};xf.log=(...n)=>j1?console.log.apply(void 0,n):null;const c7=NM,{log:r0}=xf,u7=I1;let PP=0;var h7=()=>{const n=u7("Scheduler",PP),e={},t={};let s=[];PP+=1;const r=()=>s.length,i=()=>Object.keys(e).length,o=()=>{if(s.length!==0){const f=Object.keys(e);for(let p=0;p<f.length;p+=1)if(typeof t[f[p]]>"u"){s[0](e[f[p]]);break}}},a=(f,p)=>new Promise((m,y)=>{const w=c7({action:f,payload:p});s.push(async b=>{s.shift(),t[b.id]=w;try{m(await b[f].apply(void 0,[...p,w.id]))}catch(g){y(g)}finally{delete t[b.id],o()}}),r0(`[${n}]: Add ${w.id} to JobQueue`),r0(`[${n}]: JobQueue length=${s.length}`),o()});return{addWorker:f=>(e[f.id]=f,r0(`[${n}]: Add ${f.id}`),r0(`[${n}]: Number of workers=${i()}`),o(),f.id),addJob:async(f,...p)=>{if(i()===0)throw Error(`[${n}]: You need to have at least one worker before adding jobs`);return a(f,p)},terminate:async()=>{Object.keys(e).forEach(async f=>{await e[f].terminate()}),s=[]},getQueueLen:r,getNumWorkers:i}};function d7(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function f7(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var p7=f7;const m7=p7;var g7=n=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":m7()?e.type="electron":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof d7=="function"&&(e.type="node"),typeof n>"u"?e:e[n]};const y7=g7("type")==="browser",v7=y7?n=>new URL(n,window.location.href).href:n=>n;var w7=n=>{const e={...n};return["corePath","workerPath","langPath"].forEach(t=>{n[t]&&(e[t]=v7(e[t]))}),e},x7=n=>{const e=[],t=[],s=[],r=[],i=[];return n.blocks&&n.blocks.forEach(o=>{o.paragraphs.forEach(a=>{a.lines.forEach(l=>{l.words.forEach(c=>{c.symbols.forEach(h=>{i.push({...h,page:n,block:o,paragraph:a,line:l,word:c})}),r.push({...c,page:n,block:o,paragraph:a,line:l})}),s.push({...l,page:n,block:o,paragraph:a})}),t.push({...a,page:n,block:o})}),e.push({...o,page:n})}),{...n,blocks:e,paragraphs:t,lines:s,words:r,symbols:i}},PM={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const b7="5.1.1",_7={version:b7};var S7={workerBlobURL:!0,logger:()=>{}};const E7=_7.version,A7=S7;var T7={...A7,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${E7}/dist/worker.min.js`},C7=({workerPath:n,workerBlobURL:e})=>{let t;if(Blob&&URL&&e){const s=new Blob([`importScripts("${n}");`],{type:"application/javascript"});t=new Worker(URL.createObjectURL(s))}else t=new Worker(n);return t},k7=n=>{n.terminate()},N7=(n,e)=>{n.onmessage=({data:t})=>{e(t)}},P7=async(n,e)=>{n.postMessage(e)};const Sb=n=>new Promise((e,t)=>{const s=new FileReader;s.onload=()=>{e(s.result)},s.onerror=({target:{error:{code:r}}})=>{t(Error(`File could not be read! Code=${r}`))},s.readAsArrayBuffer(n)}),EE=async n=>{let e=n;if(typeof n>"u")return"undefined";if(typeof n=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(n)?e=atob(n.split(",")[1]).split("").map(t=>t.charCodeAt(0)):e=await(await fetch(n)).arrayBuffer();else if(typeof HTMLElement<"u"&&n instanceof HTMLElement)n.tagName==="IMG"&&(e=await EE(n.src)),n.tagName==="VIDEO"&&(e=await EE(n.poster)),n.tagName==="CANVAS"&&await new Promise(t=>{n.toBlob(async s=>{e=await Sb(s),t()})});else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas){const t=await n.convertToBlob();e=await Sb(t)}else(n instanceof File||n instanceof Blob)&&(e=await Sb(n));return new Uint8Array(e)};var R7=EE;const I7=T7,j7=C7,O7=k7,L7=N7,D7=P7,M7=R7;var F7={defaultOptions:I7,spawnWorker:j7,terminateWorker:O7,onMessage:L7,send:D7,loadImage:M7};const B7=w7,U7=x7,Cr=NM,{log:RP}=xf,$7=I1,Il=PM,{defaultOptions:V7,spawnWorker:H7,terminateWorker:z7,onMessage:G7,loadImage:IP,send:W7}=F7;let jP=0;var RM=async(n="eng",e=Il.LSTM_ONLY,t={},s={})=>{const r=$7("Worker",jP),{logger:i,errorHandler:o,...a}=B7({...V7,...t}),l={},c={},h=typeof n=="string"?n.split("+"):n;let f=e,p=s;const m=[Il.DEFAULT,Il.LSTM_ONLY].includes(e)&&!a.legacyCore;let y,w;const b=new Promise((F,H)=>{w=F,y=H}),g=F=>{y(F.message)};let v=H7(a);v.onerror=g,jP+=1;const x=(F,H)=>{l[F]=H},S=(F,H)=>{c[F]=H},A=({id:F,action:H,payload:se})=>new Promise((ae,re)=>{RP(`[${r}]: Start ${F}, action=${H}`);const K=`${H}-${F}`;x(K,ae),S(K,re),W7(v,{workerId:r,jobId:F,action:H,payload:se})}),C=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),N=F=>A(Cr({id:F,action:"load",payload:{options:{lstmOnly:m,corePath:a.corePath,logging:a.logging}}})),P=(F,H,se)=>A(Cr({id:se,action:"FS",payload:{method:"writeFile",args:[F,H]}})),R=(F,H)=>A(Cr({id:H,action:"FS",payload:{method:"readFile",args:[F,{encoding:"utf8"}]}})),O=(F,H)=>A(Cr({id:H,action:"FS",payload:{method:"unlink",args:[F]}})),M=(F,H,se)=>A(Cr({id:se,action:"FS",payload:{method:F,args:H}})),Y=()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),J=(F,H)=>A(Cr({id:H,action:"loadLanguage",payload:{langs:F,options:{langPath:a.langPath,dataPath:a.dataPath,cachePath:a.cachePath,cacheMethod:a.cacheMethod,gzip:a.gzip,lstmOnly:[Il.DEFAULT,Il.LSTM_ONLY].includes(f)&&!a.legacyLang}}})),U=()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),z=(F,H,se,ae)=>A(Cr({id:ae,action:"initialize",payload:{langs:F,oem:H,config:se}})),$=(F="eng",H,se,ae)=>{if(m&&[Il.TESSERACT_ONLY,Il.TESSERACT_LSTM_COMBINED].includes(H))throw Error("Legacy model requested but code missing.");const re=H||f;f=re;const K=se||p;p=K;const De=(typeof F=="string"?F.split("+"):F).filter(qe=>!h.includes(qe));return h.push(...De),De.length>0?J(De,ae).then(()=>z(F,re,K,ae)):z(F,re,K,ae)},B=(F={},H)=>A(Cr({id:H,action:"setParameters",payload:{params:F}})),I=async(F,H={},se={blocks:!0,text:!0,hocr:!0,tsv:!0},ae)=>A(Cr({id:ae,action:"recognize",payload:{image:await IP(F),options:H,output:se}})),j=(F="Tesseract OCR Result",H=!1,se)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),A(Cr({id:se,action:"getPDF",payload:{title:F,textonly:H}}))),L=async(F,H)=>{if(m)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return A(Cr({id:H,action:"detect",payload:{image:await IP(F)}}))},D=async()=>(v!==null&&(z7(v),v=null),Promise.resolve());G7(v,({workerId:F,jobId:H,status:se,action:ae,data:re})=>{const K=`${ae}-${H}`;if(se==="resolve"){RP(`[${F}]: Complete ${H}`);let Q=re;ae==="recognize"?Q=U7(re):ae==="getPDF"&&(Q=Array.from({...re,length:Object.keys(re).length})),l[K]({jobId:H,data:Q})}else if(se==="reject")if(c[K](re),ae==="load"&&y(re),o)o(re);else throw Error(re);else se==="progress"&&i({...re,userJobId:H})});const V={id:r,worker:v,setResolve:x,setReject:S,load:C,writeText:P,readText:R,removeFile:O,FS:M,loadLanguage:Y,initialize:U,reinitialize:$,setParameters:B,recognize:I,getPDF:j,detect:L,terminate:D};return N().then(()=>J(n)).then(()=>z(n,e,s)).then(()=>w(V)).catch(()=>{}),b};const IM=RM,Y7=async(n,e,t)=>{const s=await IM(e,1,t);return s.recognize(n).finally(async()=>{await s.terminate()})},K7=async(n,e)=>{const t=await IM("osd",0,e);return t.detect(n).finally(async()=>{await t.terminate()})};var q7={recognize:Y7,detect:K7},X7={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},J7={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const Q7=h7,Z7=RM,eY=q7,tY=X7,nY=PM,sY=J7,{setLogging:rY}=xf;var iY={languages:tY,OEM:nY,PSM:sY,createScheduler:Q7,createWorker:Z7,setLogging:rY,...eY};const oY=ND;Ri.workerSrc=`https://cdn.jsdelivr.net/npm/pdfjs-dist@${oY}/build/pdf.worker.min.mjs`;function aY(n){return"str"in n&&typeof n.str=="string"}async function lY(n){const t=(await n.getTextContent()).items.filter(aY).map(g=>({...g,x:g.transform[4],y:g.transform[5]}));if(t.length===0)return"";const s={};let r=0,i=0,o=0;t.forEach(g=>{s[g.fontName]||(s[g.fontName]={heights:[],count:0}),s[g.fontName].heights.push(g.height),s[g.fontName].count++,r+=g.height,g.str.length>0&&(i+=g.width,o+=g.str.length)});let a={height:10,count:0};for(const g in s)if(s[g].count>a.count){const v=s[g].heights.sort((S,A)=>S-A),x=v.length>0?v[Math.floor(v.length/2)]:10;a={name:g,height:x,count:s[g].count}}const l=t.length>0?r/t.length:12,c=o>0?i/o:8,h=l*.4;t.sort((g,v)=>v.y-g.y);const f=[];for(const g of t){const v=f.find(x=>Math.abs(g.y-x.y)<h);v?v.items.push(g):f.push({y:g.y,items:[g]})}f.sort((g,v)=>v.y-g.y);const p=[];if(f.length>1)for(let g=0;g<f.length-1;g++){const v=f[g].items.reduce((A,C)=>A+C.y,0)/f[g].items.length,x=f[g+1].items.reduce((A,C)=>A+C.y,0)/f[g+1].items.length,S=v-x;S>0&&S<l*3&&p.push(S)}let m=l*1.2;p.length>0&&(p.sort((g,v)=>g-v),m=p[Math.floor(p.length/2)]);const y=c*5,w=m*1.5,b=[];return f.forEach((g,v)=>{if(g.items.length===0)return;g.items.sort((N,P)=>N.x-P.x);const S=g.items.reduce((N,P)=>N+P.height,0)/g.items.length>a.height*1.15&&g.items.length<6;let A="";g.items.forEach((N,P)=>{const R=/bold|demi|heavy|black|book|medium|semibold|extrabold|ultrabold|extra-bold|semi-bold/i.test(N.fontName);let O=N.str;if(P>0){const M=g.items[P-1],Y=N.x-(M.x+M.width);Y>y?A+="	":Y>c*.5&&(A+=" ")}R&&O.trim().length>0&&(O=`**${O.trim()}**`,/^\s/.test(N.str)&&(O=" "+O),/\s$/.test(N.str)&&(O=O+" ")),A+=O});let C=A.trim();if(C.length>0&&(S?b.push(`## ${C}`):b.push(C)),v<f.length-1){const N=f[v+1],P=g.items.reduce((M,Y)=>M+Y.y,0)/g.items.length,R=N.items.reduce((M,Y)=>M+Y.y,0)/N.items.length;P-R>w&&b.push("")}}),b.join(`
`).replace(/\n{3,}/g,`

`)}async function cY(n){const e=await iY.createWorker("eng");let t="";console.log("Starting OCR on scanned PDF...");try{for(let s=1;s<=n.numPages;s++){const r=await n.getPage(s),i=r.getViewport({scale:2}),o=document.createElement("canvas"),a=o.getContext("2d");if(!a)continue;o.height=i.height,o.width=i.width,await r.render({canvasContext:a,viewport:i}).promise;const{data:{text:l}}=await e.recognize(o);t+=l+`

`,console.log(`OCR Processed page ${s}/${n.numPages}`)}}catch(s){console.error("OCR Error:",s),t+=`
[Error during OCR processing. Text may be incomplete.]
`}finally{await e.terminate()}return t}const ux=n=>new Promise((e,t)=>{if(n.type==="application/pdf"){const s=new FileReader;s.onload=async r=>{var i;try{if(!((i=r.target)!=null&&i.result))throw new Error("File could not be read or is empty.");const o=await AD({data:r.target.result}).promise;let a="",l=0;for(let h=1;h<=o.numPages;h++){const f=await o.getPage(h),p=await lY(f);a+=p+`

`,l+=p.length}const c=l/o.numPages;if(c<50){console.warn("Low text density detected ("+c.toFixed(0)+" chars/page). Attempting OCR...");const h=await cY(o);(h.length>a.length||a.length<100&&h.length>10)&&(a=h)}if(a.trim().length<20)throw new Error("Could not extract sufficient text from the PDF. It might be an image without OCR data.");e(a.trim())}catch(o){console.error("Error parsing PDF:",o);const a=((o==null?void 0:o.message)||"").toLowerCase();a.includes("password protected")?t(new Error("Password Protected PDF: The PDF file is password-protected. Please upload an unprotected PDF.")):a.includes("invalid pdf")||a.includes("malformed")||a.includes("truncated")?t(new Error("Corrupted PDF: The PDF file appears to be corrupted. Please try another file.")):t(new Error(o.message||"PDF Error: Could not read the PDF file."))}},s.onerror=()=>t(new Error("File Read Error: Failed to read the file.")),s.readAsArrayBuffer(n)}else{const s=new FileReader;s.onload=r=>{var i;(i=r.target)!=null&&i.result?e(r.target.result):t(new Error("File could not be read or is empty."))},s.onerror=()=>t(new Error("File Read Error: Failed to read the file.")),s.readAsText(n)}});function pp(n){return n&&typeof n=="object"&&"recipientName"in n&&"salutation"in n}function sa(n){return n&&typeof n=="object"&&("experience"in n||"education"in n)}const En=(...n)=>n.filter(Boolean).join(" ");X.OBJECT,X.STRING,X.STRING,X.STRING,X.STRING,X.STRING,X.STRING,X.STRING,X.STRING,X.STRING,X.STRING,X.STRING,X.STRING,X.STRING,X.STRING,X.STRING,X.ARRAY,X.OBJECT,X.STRING,X.STRING,X.STRING,X.STRING,X.STRING,X.STRING,X.STRING,X.STRING,X.ARRAY,X.OBJECT,X.STRING,X.STRING,X.STRING,X.STRING,X.STRING,X.ARRAY,X.STRING,X.ARRAY,X.OBJECT,X.STRING,X.STRING,X.STRING,X.STRING,X.STRING,X.STRING,X.ARRAY,X.STRING,X.ARRAY,X.STRING,X.ARRAY,X.STRING,X.ARRAY,X.STRING,X.ARRAY,X.STRING,X.ARRAY,X.OBJECT,X.STRING,X.STRING;const jM=n=>{const e=r=>r?r.map(i=>({id:crypto.randomUUID(),name:i})):[],t=r=>r?r.map(i=>({...i,id:crypto.randomUUID(),achievements:(i.achievements||[]).map(o=>({id:crypto.randomUUID(),text:o}))})):[],s=r=>r?r.map(i=>({...i,id:crypto.randomUUID(),startDate:i.startDate||"",endDate:i.endDate||""})):[];return{...n,experience:t(n.experience),education:s(n.education),projects:s(n.projects),languages:s(n.languages),technicalSkills:e(n.technicalSkills),softSkills:e(n.softSkills),tools:e(n.tools),certifications:e(n.certifications),interests:e(n.interests)}};X.OBJECT,X.STRING,X.STRING,X.STRING,X.STRING,X.STRING,X.STRING,X.STRING,X.STRING,X.STRING,X.STRING,X.STRING,X.STRING;const uY=async n=>{const e=await ux(n);if(!e||e.trim().length<20)throw new Error("The provided file is empty or too short to be a valid resume. If this is a scanned PDF, please try again, as OCR will be attempted.");const t=`
      **Resume Text to Parse:**
      ---
      ${e}
      ---
    `,s=await Zs("/api/parse/resume",{text:t});return jM(s)},hY=async n=>{if(!n||n.trim().length<20)throw new Error("The provided resume content is too short to parse.");const e=`
      **Resume Markdown to Parse:**
      ---
      ${n}
      ---
    `,t=await Zs("/api/parse/resume",{text:e});return jM(t)},dY=async n=>{if(!n||n.trim().length<20)throw new Error("The generated cover letter content is too short to parse.");return{senderName:"",senderAddress:"",senderContact:"",date:"",recipientName:"",recipientTitle:"",companyName:"",companyAddress:"",salutation:"",body:n,closing:"",signature:""}},AE={resume:[{id:"classic",name:"Classic",imageUrl:"https://dummyimage.com/200x280/f3f4f6/6b7280&text=Classic"},{id:"tech",name:"Tech",imageUrl:"https://dummyimage.com/200x280/4F46E5/ffffff&text=Tech+Resume"}],coverLetter:[{id:"professional",name:"Professional",imageUrl:"https://dummyimage.com/200x280/f3f4f6/6b7280&text=Professional"},{id:"finance",name:"Finance",imageUrl:"https://dummyimage.com/200x280/4F46E5/ffffff&text=Finance+Cover+Letter"}]},fY=()=>{const n=k.useContext(Ke),[e,t]=k.useState(null);if(!n)return null;const{profile:s,setProfile:r,saveProfile:i}=n,o=(c,h)=>{const p={...s,[c==="resume"?"selectedResumeTemplate":"selectedCoverLetterTemplate"]:h};r(p),i()},a=c=>{t(c.replace("200x280","800x1120"))},l=c=>{const h=c==="resume"?s.selectedResumeTemplate:s.selectedCoverLetterTemplate;return AE[c].map(f=>d.jsxs("div",{className:"relative group",children:[d.jsxs("button",{onClick:()=>o(c,f.id),onDoubleClick:()=>a(f.imageUrl),className:`w-full block rounded-lg overflow-hidden border-4 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-primary ${h===f.id?"border-neutral shadow-lg":"border-gray-300 hover:border-blue-400"}`,"aria-label":`Select ${f.name} ${c} template`,children:[d.jsx("img",{src:f.imageUrl,alt:f.name,className:"w-full h-auto object-cover"}),d.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs p-1 text-center",children:f.name})]}),d.jsx("button",{onClick:p=>{p.stopPropagation(),a(f.imageUrl)},className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-10 h-10 rounded-full flex items-center justify-center bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity duration-200","aria-label":`Preview ${f.name} ${c} template`,title:"Click to preview template",children:d.jsx(XU,{})})]},f.id))};return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Resume Templates"}),d.jsx("div",{className:"grid grid-cols-5 gap-2",children:l("resume")})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Cover Letter Templates"}),d.jsx("div",{className:"grid grid-cols-5 gap-2",children:l("coverLetter")})]})]}),e&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 animate-fade-in",onClick:()=>t(null),children:d.jsxs("div",{className:"relative p-4",onClick:c=>c.stopPropagation(),children:[d.jsx("img",{src:e,alt:"Expanded template preview",className:"max-w-[90vw] max-h-[90vh] rounded-lg shadow-2xl"}),d.jsx("button",{onClick:()=>t(null),className:"absolute -top-2 -right-2 bg-white rounded-full p-1 text-gray-700 hover:text-black","aria-label":"Close preview",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})]})},Ql=({title:n,children:e,initiallyOpen:t=!1})=>{const[s,r]=k.useState(t);return d.jsxs("div",{className:"border-t border-slate-200 last:border-b-0",children:[d.jsxs("button",{className:"flex items-center justify-between w-full py-5 font-medium text-left text-slate-700 hover:text-slate-900 focus:outline-none",onClick:()=>r(!s),children:[d.jsx("span",{className:"text-lg font-semibold",children:n}),d.jsx(TA,{collapsed:!s})]}),d.jsx(Kw,{initial:!1,children:s&&d.jsx(Gi.div,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.4,ease:[.04,.62,.23,.98]},className:"overflow-hidden",children:d.jsx("div",{className:"pb-5",children:e})},"content")})]})},ws=({label:n,checked:e,onChange:t,subItem:s})=>d.jsxs("div",{className:`relative flex items-start py-1 ${s?"pl-6":""}`,children:[d.jsx("div",{className:"flex h-6 items-center",children:d.jsx("input",{type:"checkbox",checked:e,onChange:r=>t(r.target.checked),className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary cursor-pointer"})}),d.jsx("div",{className:"ml-3 text-sm leading-6",children:d.jsx("label",{className:"font-medium text-gray-800 cursor-pointer select-none",children:n})})]}),kr=({title:n,children:e,hasContent:t})=>t?d.jsxs("div",{className:"pt-4 border-t border-gray-200 first-of-type:border-t-0 first-of-type:pt-0",children:[d.jsx("h4",{className:"text-sm font-semibold text-gray-600 mb-1",children:n}),d.jsx("div",{className:"space-y-0",children:e})]}):null,pY=({profile:n,selections:e,onSelectionChange:t})=>{const[s,r]=k.useState(!1),i=(c,h)=>{t(f=>{const p=new Set(f[c]);return p.has(h)?p.delete(h):p.add(h),{...f,[c]:p}})},o=c=>{t(h=>({...h,[c]:!h[c]}))},a=c=>{t(h=>{const f=new Set(h.customSectionIds),p={...h.customSectionItemIds},m=n.customSections.find(w=>w.id===c);return m?(f.has(c)?(f.delete(c),p[c]=new Set):(f.add(c),p[c]=new Set(m.items.map(w=>w.id))),{...h,customSectionIds:f,customSectionItemIds:p}):h})},l=(c,h)=>{t(f=>{const p=new Set(f.customSectionIds),m={...f.customSectionItemIds},y=new Set(m[c]||[]);y.has(h)?y.delete(h):y.add(h),m[c]=y;const w=n.customSections.find(b=>b.id===c);return w&&y.size===w.items.length?p.add(c):p.delete(c),{...f,customSectionIds:p,customSectionItemIds:m}})};return d.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg",children:[d.jsxs("div",{className:"flex justify-between items-center cursor-pointer",onClick:()=>r(!s),children:[d.jsx("h2",{className:"text-xl font-bold text-neutral border-b pb-4 mb-0 flex-grow",children:"Include in Generation"}),d.jsx("button",{className:"p-2 rounded-full hover:bg-gray-100 flex-shrink-0 ml-4","aria-label":s?"Expand content selector":"Collapse content selector",children:d.jsx(TA,{collapsed:s})})]}),d.jsxs("div",{className:`transition-all duration-500 ease-in-out overflow-auto ${s?"max-h-0 opacity-0":"max-h-[500px] opacity-100 mt-4"}`,children:[d.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Uncheck any items you wish to exclude from this generation."}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs(kr,{title:"General",hasContent:!!n.summary||!!n.additionalInformation,children:[!!n.summary&&d.jsx(ws,{label:"Professional Summary",checked:e.summary,onChange:()=>o("summary")}),!!n.additionalInformation&&d.jsx(ws,{label:"Additional Information",checked:e.additionalInformation,onChange:()=>o("additionalInformation")})]}),d.jsx(kr,{title:"Experience",hasContent:n.experience.length>0,children:n.experience.map(c=>d.jsx(ws,{label:d.jsxs(d.Fragment,{children:[c.title," ",d.jsxs("span",{className:"text-gray-500",children:["at ",c.company]})]}),checked:e.experienceIds.has(c.id),onChange:()=>i("experienceIds",c.id)},c.id))}),d.jsx(kr,{title:"Education",hasContent:n.education.length>0,children:n.education.map(c=>d.jsx(ws,{label:d.jsxs(d.Fragment,{children:[c.degree," ",d.jsxs("span",{className:"text-gray-500",children:["at ",c.institution]})]}),checked:e.educationIds.has(c.id),onChange:()=>i("educationIds",c.id)},c.id))}),d.jsx(kr,{title:"Projects",hasContent:n.projects.length>0,children:n.projects.map(c=>d.jsx(ws,{label:c.name,checked:e.projectIds.has(c.id),onChange:()=>i("projectIds",c.id)},c.id))}),d.jsx(kr,{title:"Technical Skills",hasContent:n.technicalSkills.length>0,children:n.technicalSkills.map(c=>d.jsx(ws,{label:c.name,checked:e.technicalSkillIds.has(c.id),onChange:()=>i("technicalSkillIds",c.id)},c.id))}),d.jsx(kr,{title:"Soft Skills",hasContent:n.softSkills.length>0,children:n.softSkills.map(c=>d.jsx(ws,{label:c.name,checked:e.softSkillIds.has(c.id),onChange:()=>i("softSkillIds",c.id)},c.id))}),d.jsx(kr,{title:"Tools & Technologies",hasContent:n.tools.length>0,children:n.tools.map(c=>d.jsx(ws,{label:c.name,checked:e.toolIds.has(c.id),onChange:()=>i("toolIds",c.id)},c.id))}),d.jsx(kr,{title:"Languages",hasContent:n.languages.length>0,children:n.languages.map(c=>d.jsx(ws,{label:`${c.name} (${c.proficiency})`,checked:e.languageIds.has(c.id),onChange:()=>i("languageIds",c.id)},c.id))}),d.jsx(kr,{title:"Certifications",hasContent:n.certifications.length>0,children:n.certifications.map(c=>d.jsx(ws,{label:c.name,checked:e.certificationIds.has(c.id),onChange:()=>i("certificationIds",c.id)},c.id))}),d.jsx(kr,{title:"Interests",hasContent:n.interests.length>0,children:n.interests.map(c=>d.jsx(ws,{label:c.name,checked:e.interestIds.has(c.id),onChange:()=>i("interestIds",c.id)},c.id))}),d.jsx(kr,{title:"Custom Sections",hasContent:n.customSections.length>0,children:n.customSections.map(c=>d.jsxs("div",{className:"py-1",children:[d.jsx(ws,{label:c.title||"Untitled Section",checked:e.customSectionIds.has(c.id),onChange:()=>a(c.id)}),c.items.map(h=>{var p;const f=h.text.length>50?`${h.text.substring(0,50)}...`:h.text;return d.jsx(ws,{label:d.jsx("span",{className:"text-gray-600 italic",children:f}),checked:((p=e.customSectionItemIds[c.id])==null?void 0:p.has(h.id))??!1,onChange:()=>l(c.id,h.id),subItem:!0},h.id)})]},c.id))})]})]})]})},mY=()=>d.jsxs("div",{className:"mt-1 block w-full rounded-md border border-gray-200 bg-white p-3 space-y-3 animate-pulse",style:{minHeight:"340px"},children:[d.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"}),d.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"}),d.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),d.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"}),d.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]}),gY=()=>{const n=k.useContext(Ke),e=Bn(),{profile:t,tokens:s,setTokens:r,isFetchingUrl:i,setIsFetchingUrl:o,addDocumentToHistory:a,backgroundTasks:l,startBackgroundTask:c,updateBackgroundTask:h}=n,{jobDescription:f}=e.state||{},[p,m]=k.useState({generateResume:!0,generateCoverLetter:!0,resumeLength:"1 page max",coverLetterLength:"medium",includeSummary:!0,tone:"persuasive",technicality:50,thinkingMode:!1,uploadedResume:null,uploadedCoverLetter:null}),[y,w]=k.useState(null),[b,g]=k.useState(null),[v,x]=k.useState(""),[S,A]=k.useState(f||""),[C,N]=k.useState(null),[P,R]=k.useState(null),[O,M]=k.useState({summary:!0,additionalInformation:!0,educationIds:new Set,experienceIds:new Set,projectIds:new Set,technicalSkillIds:new Set,softSkillIds:new Set,toolIds:new Set,languageIds:new Set,certificationIds:new Set,interestIds:new Set,customSectionIds:new Set,customSectionItemIds:{}}),Y=k.useRef(null),J=k.useRef(null),U=l.some(K=>K.type==="document-generation"&&K.status==="running");k.useEffect(()=>{if(!t)return;const K={summary:!!t.summary,additionalInformation:!!t.additionalInformation,educationIds:new Set(t.education.map(Q=>Q.id)),experienceIds:new Set(t.experience.map(Q=>Q.id)),projectIds:new Set(t.projects.map(Q=>Q.id)),technicalSkillIds:new Set(t.technicalSkills.map(Q=>Q.id)),softSkillIds:new Set(t.softSkills.map(Q=>Q.id)),toolIds:new Set(t.tools.map(Q=>Q.id)),languageIds:new Set(t.languages.map(Q=>Q.id)),certificationIds:new Set(t.certifications.map(Q=>Q.id)),interestIds:new Set(t.interests.map(Q=>Q.id)),customSectionIds:new Set(t.customSections.map(Q=>Q.id)),customSectionItemIds:t.customSections.reduce((Q,De)=>(Q[De.id]=new Set(De.items.map(qe=>qe.id)),Q),{})};M(K)},[t]),k.useEffect(()=>{if(C){const K=setTimeout(()=>N(null),2e4);return()=>clearTimeout(K)}},[C]),k.useEffect(()=>{if(P){const K=setTimeout(()=>R(null),1e4);return()=>clearTimeout(K)}},[P]);const z=k.useCallback(async()=>{if(v){o(!0),N(null);try{const K=await uG(v);A(K)}catch(K){N(K.message||"An unknown error occurred while fetching the URL. Please paste the description manually.")}finally{o(!1)}}},[v,o]),$=k.useCallback(()=>{if(!(n!=null&&n.profile)||!S){N("Please provide a job description.");return}const K=(p.generateResume?1:0)+(p.generateCoverLetter?1:0),Q=p.thinkingMode&&K>0?10:0,De=S.trim()&&(p.generateResume||p.uploadedResume)?2:0,qe=K+Q+De;if(s<qe){N("You do not have enough tokens to generate these documents.");return}N(null),r(st=>st-qe);const Tl=c({type:"document-generation",description:`Documents for ${t.targetJobTitle||"Untitled Role"}`});(async()=>{try{const{profile:st}=n,ni={...st,summary:O.summary?st.summary:"",additionalInformation:O.additionalInformation?st.additionalInformation:"",education:st.education.filter(He=>O.educationIds.has(He.id)),experience:st.experience.filter(He=>O.experienceIds.has(He.id)),projects:st.projects.filter(He=>O.projectIds.has(He.id)),technicalSkills:st.technicalSkills.filter(He=>O.technicalSkillIds.has(He.id)),softSkills:st.softSkills.filter(He=>O.softSkillIds.has(He.id)),tools:st.tools.filter(He=>O.toolIds.has(He.id)),languages:st.languages.filter(He=>O.languageIds.has(He.id)),certifications:st.certifications.filter(He=>O.certificationIds.has(He.id)),interests:st.interests.filter(He=>O.interestIds.has(He.id)),customSections:st.customSections.map(He=>({...He,items:He.items.filter(KM=>{var $1;return($1=O.customSectionItemIds[He.id])==null?void 0:$1.has(KM.id)})})).filter(He=>He.items.length>0)},bf={...p,jobDescription:S},ys=await cG(ni,bf);if(!ys.documents.resume&&!ys.documents.coverLetter)throw new Error("The AI was unable to generate documents based on the provided information. This can sometimes happen with very complex job descriptions or if the input is too short. Please try again with a more detailed job description.");let fx=null,px=null;if(ys.documents.resume)try{fx=await hY(ys.documents.resume)}catch(He){console.warn("Failed to parse generated resume into form. Falling back to raw text.",He)}if(ys.documents.coverLetter)try{px=await dY(ys.documents.coverLetter)}catch(He){console.warn("Failed to parse generated cover letter into form. Falling back to raw text.",He)}(ys.documents.resume||ys.documents.coverLetter)&&a({jobTitle:st.targetJobTitle||"Untitled Role",companyName:st.companyName||"",resumeContent:ys.documents.resume,coverLetterContent:ys.documents.coverLetter,analysisResult:ys.analysis,parsedResume:fx,parsedCoverLetter:px});const YM={generatedContent:ys.documents,analysisResult:ys.analysis,parsedResume:fx,parsedCoverLetter:px};h(Tl,{status:"completed",result:YM})}catch(st){r(ni=>ni+qe),h(Tl,{status:"error",result:{message:st.message||"An unexpected generation error occurred."}})}})()},[n,S,p,O,s,r,a,c,h]),B=K=>{K==="resume"?(w(null),m(Q=>({...Q,uploadedResume:null}))):(g(null),m(Q=>({...Q,uploadedCoverLetter:null})))},I=async(K,Q)=>{var st;const De=(st=K.target.files)==null?void 0:st[0];if(!De){R(null);return}R(null),K.target.value="";const qe=2;if(De.size>qe*1024*1024){R(`File is too large. Please upload a file smaller than ${qe}MB.`),B(Q);return}if(!["application/pdf","text/plain","text/markdown"].includes(De.type)){R(`Unsupported file type: .${De.name.split(".").pop()}. Please use .pdf, .txt, or .md.`),B(Q);return}try{const ni=await ux(De);Q==="resume"?(w(De),m(bf=>({...bf,uploadedResume:ni}))):(g(De),m(bf=>({...bf,uploadedCoverLetter:ni})))}catch(ni){R(ni.message||"An unexpected error occurred while reading the file. Please try again."),B(Q)}};AE.resume.find(K=>K.id===t.selectedResumeTemplate),AE.coverLetter.find(K=>K.id===t.selectedCoverLetterTemplate);const j=i?d.jsxs(d.Fragment,{children:[d.jsx(fl,{className:"-ml-1 mr-3 h-5 w-5"}),d.jsx("span",{children:"Fetching..."})]}):d.jsx("span",{children:"Fetch"}),L=(p.generateResume?1:0)+(p.generateCoverLetter?1:0),D=p.thinkingMode&&L>0?10:0,V=S.trim()&&(p.generateResume||p.uploadedResume)?2:0,F=L+D+V,H=s>=F,se=S&&H&&L>0&&!U;let ae;U?ae=d.jsxs("div",{className:"flex items-center justify-center",children:[d.jsx(fl,{className:"h-6 w-6 mr-3"}),d.jsx("span",{className:"text-lg font-bold",children:"Generating..."})]}):L===0?ae=d.jsxs("div",{className:"text-center",children:[d.jsx("span",{className:"block text-base font-bold",children:"Select a Document"}),d.jsx("span",{className:"block text-xs font-medium text-blue-200 mt-1",children:"Check a box to generate."})]}):H?ae=d.jsxs("div",{className:"text-center",children:[d.jsxs("span",{className:"block text-lg font-bold",children:["Generate Document",L>1?"s":""]}),d.jsxs("span",{className:"block text-sm font-medium text-blue-200 mt-1",children:[F," Token",F>1?"s":""," Cost",V>0&&" (incl. Fit Analysis)"]})]}):ae=d.jsxs("div",{className:"text-center",children:[d.jsx("span",{className:"block text-base font-bold",children:"Insufficient Tokens"}),d.jsx(tt,{to:"/subscription",className:"block text-xs font-medium text-white underline mt-1",children:"Purchase More"})]});const re=d.jsx("button",{onClick:$,disabled:!se,className:"w-full inline-flex justify-center items-center rounded-lg border border-transparent bg-primary py-4 px-6 text-white shadow-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 disabled:bg-gray-400 disabled:cursor-not-allowed disabled:shadow-none transition-all transform hover:-translate-y-1 disabled:hover:translate-y-0",children:ae});return d.jsx(d.Fragment,{children:d.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-8 animate-fade-in",children:[C&&d.jsxs("div",{className:"mb-6 bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md relative flex justify-between items-center shadow-md",role:"alert",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-bold",children:"An error occurred"}),d.jsx("p",{children:C})]}),d.jsx("button",{onClick:()=>N(null),className:"p-1 rounded-full hover:bg-red-200 transition-colors","aria-label":"Close",children:d.jsx(fs,{className:"h-6 w-6"})})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start",children:[d.jsxs("main",{className:"lg:col-span-2 space-y-8",children:[d.jsxs(Pt,{children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-neutral",children:"Tailor Your Application"}),d.jsx("p",{className:"text-gray-500 mt-2",children:"Start by providing the job details. The AI will use this information to customize your documents."})]}),d.jsxs("div",{className:"mt-6",children:[d.jsx("label",{htmlFor:"job-url",className:"block text-sm font-medium text-gray-700",children:"Job Posting URL (Optional)"}),d.jsxs("div",{className:"mt-1 flex rounded-md shadow-sm",children:[d.jsx("input",{type:"url",id:"job-url",className:"block w-full flex-1 rounded-none rounded-l-md border-gray-300 focus:border-primary focus:ring-1 focus:ring-primary sm:text-sm disabled:bg-gray-100",placeholder:"https://...",value:v,onChange:K=>x(K.target.value),disabled:i}),d.jsx("button",{type:"button",onClick:z,disabled:i||!v,className:"relative -ml-px inline-flex items-center space-x-2 rounded-r-md border border-gray-300 bg-gray-50 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary disabled:opacity-50 disabled:cursor-not-allowed",children:j})]})]}),d.jsxs("div",{className:"mt-4",children:[d.jsx("label",{htmlFor:"job-description",className:"block text-sm font-medium text-gray-700",children:"Job Description"}),i?d.jsx(mY,{}):d.jsx("textarea",{id:"job-description",rows:15,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-50 shadow-sm focus:border-primary focus:ring-1 focus:ring-primary sm:text-sm",placeholder:"Paste the full job description here...",value:S,onChange:K=>A(K.target.value)})]})]}),d.jsxs(Pt,{children:[d.jsxs(Ql,{title:"Inspiration Documents (Optional)",initiallyOpen:!0,children:[d.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Provide your previous documents to help the AI match your unique style, tone, and formatting. This is highly recommended for best results."}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"inspiration-resume",className:"sr-only",children:"Upload inspiration resume"}),d.jsx("input",{id:"inspiration-resume",type:"file",accept:".txt,.md,.pdf",ref:Y,onChange:K=>I(K,"resume"),className:"hidden"}),y?d.jsxs("div",{className:"flex items-center justify-between rounded-md border border-gray-300 bg-gray-50 pl-3 pr-2 py-2 text-sm",children:[d.jsx("span",{className:"font-medium text-gray-700 truncate",children:y.name}),d.jsx("button",{onClick:()=>B("resume"),className:"ml-2 text-gray-400 hover:text-gray-600",children:d.jsx(fs,{})})]}):d.jsx("div",{onClick:()=>{var K;return(K=Y.current)==null?void 0:K.click()},className:"flex h-full items-center justify-center rounded-lg border-2 border-dashed border-gray-300 px-6 py-4 text-center cursor-pointer hover:border-primary",children:d.jsxs("div",{children:[d.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-300",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:d.jsx("path",{fillRule:"evenodd",d:"M1.5 6a2.25 2.25 0 012.25-2.25h16.5A2.25 2.25 0 0122.5 6v12A2.25 2.25 0 0120.25 20.25H3.75A2.25 2.25 0 011.5 18V6zM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0021 18v-1.94l-2.69-2.689a1.5 1.5 0 00-2.12 0l-.88.879.97.97a.75.75 0 11-1.06 1.06l-5.16-5.159a1.5 1.5 0 00-2.12 0L3 16.061zm10.125-7.81a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0z",clipRule:"evenodd"})}),d.jsx("div",{className:"mt-4 flex justify-center text-sm leading-6 text-gray-600",children:d.jsx("span",{className:"font-semibold text-primary",children:"Upload a resume"})}),d.jsx("p",{className:"text-xs leading-5 text-gray-600",children:".txt, .md, .pdf up to 2MB"})]})})]}),d.jsxs("div",{children:[d.jsx("input",{type:"file",accept:".txt,.md,.pdf",ref:J,onChange:K=>I(K,"coverLetter"),className:"hidden"}),b?d.jsxs("div",{className:"flex items-center justify-between rounded-md border border-gray-300 bg-gray-50 pl-3 pr-2 py-2 text-sm",children:[d.jsx("span",{className:"font-medium text-gray-700 truncate",children:b.name}),d.jsx("button",{onClick:()=>B("coverLetter"),className:"ml-2 text-gray-400 hover:text-gray-600",children:d.jsx(fs,{})})]}):d.jsx("div",{onClick:()=>{var K;return(K=J.current)==null?void 0:K.click()},className:"flex h-full items-center justify-center rounded-lg border-2 border-dashed border-gray-300 px-6 py-4 text-center cursor-pointer hover:border-primary",children:d.jsxs("div",{children:[d.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-300",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:d.jsx("path",{fillRule:"evenodd",d:"M1.5 6a2.25 2.25 0 012.25-2.25h16.5A2.25 2.25 0 0122.5 6v12A2.25 2.25 0 0120.25 20.25H3.75A2.25 2.25 0 011.5 18V6zM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0021 18v-1.94l-2.69-2.689a1.5 1.5 0 00-2.12 0l-.88.879.97.97a.75.75 0 11-1.06 1.06l-5.16-5.159a1.5 1.5 0 00-2.12 0L3 16.061zm10.125-7.81a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0z",clipRule:"evenodd"})}),d.jsx("div",{className:"mt-4 flex justify-center text-sm leading-6 text-gray-600",children:d.jsx("span",{className:"font-semibold text-primary",children:"Upload a cover letter"})}),d.jsx("p",{className:"text-xs leading-5 text-gray-600",children:".txt, .md, .pdf up to 2MB"})]})})]})]}),P&&d.jsxs("div",{className:"mt-4 bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md relative flex justify-between items-center shadow-md",role:"alert",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-bold",children:"File Error"}),d.jsx("p",{children:P})]}),d.jsx("button",{onClick:()=>R(null),className:"p-1 rounded-full hover:bg-red-200 transition-colors","aria-label":"Close file error",children:d.jsx(fs,{className:"h-6 w-6"})})]})]}),d.jsxs(Ql,{title:"Templates",initiallyOpen:!1,children:[d.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Select the templates you'd like to use for your generated documents. Double-click any template to see a larger preview."}),d.jsx(fY,{})]}),d.jsx(Ql,{title:"Style & Tone",initiallyOpen:!1,children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"tone-selector",className:"block text-sm font-medium text-gray-700",children:d.jsx(Re,{text:"Select the overall tone for your documents. 'Formal' is traditional and corporate. 'Friendly' is approachable and modern. 'Persuasive' is confident and action-oriented.",children:"Application Tone"})}),d.jsxs("select",{id:"tone-selector",value:p.tone,onChange:K=>m(Q=>({...Q,tone:K.target.value})),className:"mt-2 block w-full rounded-md border-gray-300 bg-gray-50 shadow-sm focus:border-primary focus:ring-1 focus:ring-primary sm:text-sm",children:[d.jsx("option",{value:"formal",children:"Formal"}),d.jsx("option",{value:"friendly",children:"Friendly"}),d.jsx("option",{value:"persuasive",children:"Persuasive"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"technicality-slider",className:"block text-sm font-medium text-gray-700",children:d.jsx(Re,{text:"Controls the technicality of the language, ranging from jargon-filled to general. Use 'General' for non-technical roles and 'Technical' for expert audiences.",children:"Language Style"})}),d.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[d.jsx("span",{className:"text-xs text-gray-500",children:"General"}),d.jsx("input",{id:"technicality-slider",type:"range",min:"0",max:"100",value:p.technicality,onChange:K=>m(Q=>({...Q,technicality:Number(K.target.value)})),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-primary"}),d.jsx("span",{className:"text-xs text-gray-500",children:"Technical"})]})]})]})}),d.jsx(Ql,{title:"Advanced Generation Settings",initiallyOpen:!1,children:d.jsxs("div",{className:"flex items-center justify-between bg-purple-50 p-3 rounded-lg border border-purple-200",children:[d.jsxs("div",{className:"pr-4",children:[d.jsx("label",{htmlFor:"thinking-mode",className:"block text-sm font-medium text-gray-700",children:d.jsx(Re,{text:"Activates enhanced reasoning (Thinking Budget). Ideal for complex tasks, enabling the model to think extensively before generating. Produces higher-quality, more nuanced documents, but takes noticeably longer.",children:d.jsxs("div",{className:"flex items-center text-gray-800 font-medium",children:[d.jsx(KU,{}),"Thinking Mode"]})})}),d.jsx("p",{id:"thinking-mode-description",className:"text-xs text-gray-600",children:"Ideal for senior roles or competitive applications where quality is paramount."})]}),d.jsxs("div",{className:"flex-shrink-0 flex items-center space-x-3",children:[d.jsx("span",{className:"text-sm font-bold text-purple-700 bg-purple-200 px-2.5 py-1 rounded-full",children:"+10 Tokens"}),d.jsxs("label",{htmlFor:"thinking-mode",className:"inline-flex relative items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",id:"thinking-mode",className:"sr-only peer",checked:p.thinkingMode,onChange:K=>m(Q=>({...Q,thinkingMode:K.target.checked})),"aria-describedby":"thinking-mode-description"}),d.jsx("div",{className:"w-11 h-6 bg-gray-300 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-offset-2 peer-focus:ring-offset-purple-50 peer-focus:ring-purple-500 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]})]})})]}),d.jsx("div",{className:"mt-6 lg:hidden",children:re})]}),d.jsxs("aside",{className:"lg:col-span-1 sticky top-24 space-y-8",children:[d.jsx("div",{className:"w-full hidden lg:block",children:re}),d.jsxs(Pt,{children:[d.jsx("div",{className:"flex justify-between items-center border-b border-slate-200 pb-4",children:d.jsx("h2",{className:"text-xl font-bold text-neutral",children:"Generation Options"})}),d.jsxs("div",{className:"py-4 space-y-6",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{id:"resume",type:"checkbox",checked:p.generateResume,onChange:K=>m(Q=>({...Q,generateResume:K.target.checked})),className:"h-5 w-5 rounded border-gray-300 text-primary focus:ring-primary"}),d.jsx("label",{htmlFor:"resume",className:"ml-3 block text-base font-semibold text-gray-900",children:"Create Resume"})]}),d.jsxs("div",{className:`pl-8 mt-4 space-y-4 transition-opacity ${p.generateResume?"opacity-100":"opacity-50"}`,children:[d.jsxs("div",{className:"relative flex items-start",children:[d.jsx("div",{className:"flex h-6 items-center",children:d.jsx("input",{id:"summary",type:"checkbox",checked:p.includeSummary,onChange:K=>m(Q=>({...Q,includeSummary:K.target.checked})),className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary disabled:cursor-not-allowed",disabled:!p.generateResume})}),d.jsxs("div",{className:"ml-3 text-sm leading-6",children:[d.jsx("label",{htmlFor:"summary",className:`font-medium text-gray-900 ${p.generateResume?"":"cursor-not-allowed"}`,children:"Include Professional Summary"}),d.jsx("p",{className:"text-gray-500",children:"Add a brief, impactful summary at the top of your resume."})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"resume-length",className:`block text-sm font-medium text-gray-700 mb-2 ${p.generateResume?"":"cursor-not-allowed"}`,children:"Maximum Resume Length"}),d.jsxs("select",{id:"resume-length",value:p.resumeLength,onChange:K=>m(Q=>({...Q,resumeLength:K.target.value})),className:"block w-full max-w-xs rounded-md border-gray-300 bg-gray-50 shadow-sm focus:border-primary focus:ring-1 focus:ring-primary sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:!p.generateResume,children:[d.jsx("option",{value:"1 page max",children:"1 Page Max"}),d.jsx("option",{value:"2 pages max",children:"2 Pages Max"})]})]})]})]}),d.jsxs("div",{className:"pt-6 border-t border-gray-200",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{id:"coverLetter",type:"checkbox",checked:p.generateCoverLetter,onChange:K=>m(Q=>({...Q,generateCoverLetter:K.target.checked})),className:"h-5 w-5 rounded border-gray-300 text-primary focus:ring-primary"}),d.jsx("label",{htmlFor:"coverLetter",className:"ml-3 block text-base font-semibold text-gray-900",children:"Create Cover Letter"})]}),d.jsx("div",{className:`pl-8 mt-4 space-y-4 transition-opacity ${p.generateCoverLetter?"opacity-100":"opacity-50"}`,children:d.jsxs("div",{children:[d.jsx("label",{htmlFor:"cover-letter-length",className:`block text-sm font-medium text-gray-700 mb-2 ${p.generateCoverLetter?"":"cursor-not-allowed"}`,children:"Cover Letter Length"}),d.jsxs("select",{id:"cover-letter-length",value:p.coverLetterLength,onChange:K=>m(Q=>({...Q,coverLetterLength:K.target.value})),className:"block w-full max-w-xs rounded-md border-gray-300 bg-gray-50 shadow-sm focus:border-primary focus:ring-1 focus:ring-primary sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:!p.generateCoverLetter,children:[d.jsx("option",{value:"short",children:"Short (~3 paragraphs)"}),d.jsx("option",{value:"medium",children:"Medium (4-5 paragraphs)"}),d.jsx("option",{value:"long",children:"Long (5+ paragraphs)"})]})]})})]})]})]}),d.jsx(pY,{profile:t,selections:O,onSelectionChange:M})]})]})]})})},OP=n=>{if(!n)return"";let e="";return n.senderName&&(e+=`${n.senderName}
`),n.senderAddress&&(e+=`${n.senderAddress}
`),n.senderContact&&(e+=`${n.senderContact}

`),n.date&&(e+=`${n.date}

`),n.recipientName&&(e+=`${n.recipientName}
`),n.recipientTitle&&(e+=`${n.recipientTitle}
`),n.companyName&&(e+=`${n.companyName}
`),n.companyAddress&&(e+=`${n.companyAddress}

`),n.salutation&&(e+=`${n.salutation}

`),n.body&&(e+=`${n.body}

`),n.closing&&(e+=`${n.closing}
`),n.signature&&(e+=`${n.signature}
`),e.trim()},TE=(n,e)=>{if(!n)return"";let t="";n.fullName&&(t+=`# ${n.fullName}
`);const s=[n.phone,n.email,n.website,n.location].filter(Boolean);s.length>0&&(t+=`${s.join(" | ")}

`);const r=i=>{let o="";switch(i){case"summary":n.summary&&(o+=`## Summary
${n.summary}

`);break;case"experience":n.experience&&n.experience.length>0&&(o+=`## Experience
`,n.experience.forEach(l=>{o+=`**${l.title}** | ${l.company} | ${l.location||""}
`,(l.startDate||l.endDate)&&(o+=`*${l.startDate} - ${l.endDate}*

`),(l.achievements||[]).forEach(c=>{o+=`- ${c.text}
`}),o+=`
`}));break;case"education":n.education&&n.education.length>0&&(o+=`## Education
`,n.education.forEach(l=>{o+=`**${l.degree||""}, ${l.fieldOfStudy||""}** | ${l.institution||""}
`,(l.startDate||l.endDate)&&(o+=`*${l.startDate} - ${l.endDate}*

`)}));break;case"skills":const a=[...n.technicalSkills||[],...n.softSkills||[],...n.tools||[]];a.length>0&&(o+=`## Skills
`,o+=a.map(l=>l.name).join(", ")+`

`);break;case"projects":n.projects&&n.projects.length>0&&(o+=`## Projects
`,n.projects.forEach(l=>{o+=`**${l.name}**
`,l.description&&(o+=`${l.description}
`),l.technologiesUsed&&(o+=`*Technologies: ${l.technologiesUsed}*
`),o+=`
`}));break;case"certifications":n.certifications&&n.certifications.length>0&&(o+=`## Certifications
`,n.certifications.forEach(l=>{o+=`- ${l.name}
`}),o+=`
`);break;case"languages":n.languages&&n.languages.length>0&&(o+=`## Languages
`,n.languages.forEach(l=>{o+=`- ${l.name} (${l.proficiency})
`}),o+=`
`);break}return o};return e.forEach(i=>{t+=r(i)}),t.trim()},yY=n=>n.split(`

`).map(e=>`<p class="mb-4">${e.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\n/g,"<br/>")}</p>`).join(""),Ze=({value:n="",onChange:e,isEditing:t,className:s="",placeholder:r=""})=>t?d.jsx("input",{value:n,onChange:i=>e(i.target.value),className:`p-1 border rounded bg-blue-50 border-blue-200 shadow-inner focus:ring-1 focus:ring-primary transition-colors duration-200 ${s}`,placeholder:r}):d.jsx("span",{className:s,children:n}),Ah=({value:n="",onChange:e,isEditing:t,className:s="",placeholder:r="",rows:i=4})=>t?d.jsx("textarea",{value:n,onChange:o=>e(o.target.value),rows:i,className:`p-2 border rounded bg-blue-50 border-blue-200 shadow-inner focus:ring-1 focus:ring-primary transition-colors duration-200 ${s}`,placeholder:r}):d.jsx("p",{className:`whitespace-pre-wrap ${s}`,children:n}),yy=({title:n,isEditing:e,onRemove:t,children:s})=>d.jsxs("div",{className:"mt-6",children:[d.jsxs("div",{className:"flex items-center justify-between border-b-2 border-gray-200 pb-1 mb-3",children:[d.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:n}),e&&d.jsx("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-opacity p-1","aria-label":`Remove ${n} section`,children:d.jsx(zi,{})})]}),d.jsx("div",{className:"space-y-4",children:s})]}),vY=k.memo(({summary:n,isEditing:e,onSummaryChange:t,onRemove:s})=>n?d.jsx(yy,{title:"Summary",isEditing:e,onRemove:s,children:d.jsx(Ah,{value:n,onChange:t,isEditing:e,className:"w-full"})}):null),wY=k.memo(({experience:n,isEditing:e,onFieldChange:t,onAchievementChange:s,onRemoveSection:r,onRemoveExperience:i,onRemoveAchievement:o})=>!n||n.length===0?null:d.jsx(yy,{title:"Experience",isEditing:e,onRemove:r,children:n.map((a,l)=>{var c;return d.jsxs("div",{className:"relative group/item",children:[e&&d.jsx("button",{onClick:()=>i(a.id),className:"absolute top-2 -right-8 text-gray-400 hover:text-red-500 opacity-0 group-hover/item:opacity-100 transition-opacity p-1","aria-label":`Remove experience at ${a.company}`,children:d.jsx(zi,{})}),d.jsxs("header",{className:"flex justify-between items-start gap-4",children:[d.jsxs("div",{className:"flex-grow",children:[d.jsx(Ze,{value:a.title,onChange:h=>t(l,"title",h),isEditing:e,className:"font-bold text-lg w-full",placeholder:"Job Title"}),d.jsx(Ze,{value:a.company,onChange:h=>t(l,"company",h),isEditing:e,className:"text-md w-full",placeholder:"Company Name"})]}),d.jsxs("div",{className:"text-right flex-shrink-0",children:[d.jsxs("div",{className:"text-sm text-gray-600 italic",children:[d.jsx(Ze,{value:a.startDate,onChange:h=>t(l,"startDate",h),isEditing:e,className:"w-24 inline-block text-right",placeholder:"Start Date"}),d.jsx("span",{className:"mx-1",children:" - "}),d.jsx(Ze,{value:a.endDate,onChange:h=>t(l,"endDate",h),isEditing:e,className:"w-24 inline-block text-right",placeholder:"End Date"})]}),d.jsx(Ze,{value:a.location,onChange:h=>t(l,"location",h),isEditing:e,className:"text-sm text-gray-500 text-right",placeholder:"Location"})]})]}),d.jsx("ul",{className:"list-disc pl-5 mt-2 space-y-1",children:(c=a.achievements)==null?void 0:c.map((h,f)=>d.jsx("li",{children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Ah,{value:h.text,onChange:p=>s(l,f,p),isEditing:e,rows:2,className:"w-full"}),e&&d.jsx("button",{onClick:()=>o(a.id,h.id),className:"text-gray-400 hover:text-red-500 p-1 flex-shrink-0","aria-label":"Remove achievement",children:d.jsx(fs,{})})]})},h.id))})]},a.id)})})),xY=k.memo(({education:n,isEditing:e,onFieldChange:t,onRemoveSection:s,onRemoveItem:r})=>!n||n.length===0?null:d.jsx(yy,{title:"Education",isEditing:e,onRemove:s,children:n.map((i,o)=>d.jsxs("div",{className:"relative group/item",children:[e&&d.jsx("button",{onClick:()=>r(i.id),className:"absolute top-2 -right-8 text-gray-400 hover:text-red-500 opacity-0 group-hover/item:opacity-100 transition-opacity p-1","aria-label":`Remove education at ${i.institution}`,children:d.jsx(zi,{})}),d.jsxs("header",{className:"flex justify-between items-start gap-4",children:[d.jsxs("div",{className:"flex-grow",children:[d.jsxs("div",{className:"font-bold text-lg flex flex-wrap items-baseline gap-x-1",children:[d.jsx(Ze,{value:i.degree,onChange:a=>t(o,"degree",a),isEditing:e,className:"font-bold text-lg",placeholder:"Degree"}),(e||i.degree&&i.fieldOfStudy)&&d.jsx("span",{className:"text-gray-800 font-normal",children:","}),d.jsx(Ze,{value:i.fieldOfStudy,onChange:a=>t(o,"fieldOfStudy",a),isEditing:e,className:"font-bold text-lg",placeholder:"Field of Study"})]}),d.jsx(Ze,{value:i.institution,onChange:a=>t(o,"institution",a),isEditing:e,className:"text-md w-full",placeholder:"Institution"})]}),d.jsx("div",{className:"text-right flex-shrink-0",children:d.jsxs("div",{className:"text-sm text-gray-600 italic",children:[d.jsx(Ze,{value:i.startDate,onChange:a=>t(o,"startDate",a),isEditing:e,className:"w-24 inline-block text-right",placeholder:"Start Date"}),d.jsx("span",{className:"mx-1",children:" - "}),d.jsx(Ze,{value:i.endDate,onChange:a=>t(o,"endDate",a),isEditing:e,className:"w-24 inline-block text-right",placeholder:"End Date"})]})})]})]},i.id))})),bY=k.memo(({projects:n,isEditing:e,onFieldChange:t,onRemoveSection:s,onRemoveItem:r})=>!n||n.length===0?null:d.jsx(yy,{title:"Projects",isEditing:e,onRemove:s,children:n.map((i,o)=>d.jsxs("div",{className:"relative group/item",children:[e&&d.jsx("button",{onClick:()=>r(i.id),className:"absolute top-2 -right-8 text-gray-400 hover:text-red-500 opacity-0 group-hover/item:opacity-100 transition-opacity p-1","aria-label":`Remove project ${i.name}`,children:d.jsx(zi,{})}),d.jsx(Ze,{value:i.name,onChange:a=>t(o,"name",a),isEditing:e,className:"font-bold text-gray-900 w-full"}),d.jsx(Ah,{value:i.description,onChange:a=>t(o,"description",a),isEditing:e,rows:2,className:"w-full"}),d.jsx(Ze,{value:i.technologiesUsed,onChange:a=>t(o,"technologiesUsed",a),isEditing:e,className:"text-sm italic text-gray-600 w-full"})]},i.id))})),_Y=k.memo(({skills:n,isEditing:e,onRemove:t})=>n.length===0?null:d.jsx(yy,{title:"Skills",isEditing:e,onRemove:t,children:d.jsx("p",{children:n.map(s=>s.name).join(", ")})})),LP=({formData:n,sectionOrder:e,isEditing:t,setFormData:s,setSectionOrder:r,recordUndoState:i})=>{const o=Jt.useRef(null),a=Jt.useRef(null),l=(v,x,S,A)=>{i(),s(C=>{if(!C)return null;const N=C[v];if(!Array.isArray(N))return C;const P=N.map((R,O)=>O!==x?R:typeof R=="object"&&R!==null?{...R,[S]:A}:R);return{...C,[v]:P}})},c=(v,x,S)=>{i(),s(A=>{if(!A||!A.experience)return null;const C=A.experience.map((N,P)=>{if(P!==v)return N;const R=(N.achievements||[]).map((O,M)=>M!==x?O:{...O,text:S});return{...N,achievements:R}});return{...A,experience:C}})},h=v=>{i(),r(x=>x.filter(S=>S!==v))},f=(v,x)=>{i(),s(S=>{if(!S)return null;const A=S[v];if(!Array.isArray(A))return S;const C=A.filter(N=>N.id!==x);return{...S,[v]:C}})},p=(v,x)=>{i(),s(S=>{if(!S||!S.experience)return null;const A=S.experience.map(C=>{if(C.id!==v)return C;const N=(C.achievements||[]).filter(P=>P.id!==x);return{...C,achievements:N}});return{...S,experience:A}})},m=(v,x)=>{o.current=x,v.currentTarget.classList.add("dragging")},y=(v,x)=>{a.current=x,v.currentTarget.classList.add("drag-indicator")},w=v=>{if(o.current===null||a.current===null)return;i();const x=[...e],S=x.splice(o.current,1)[0];x.splice(a.current,0,S),r(x),o.current=null,a.current=null,v.currentTarget.classList.remove("drag-indicator")},b=[...(n.technicalSkills||[]).map(v=>({id:v.id,name:v.name,type:"technical"})),...(n.softSkills||[]).map(v=>({id:v.id,name:v.name,type:"soft"})),...(n.tools||[]).map(v=>({id:v.id,name:v.name,type:"tool"}))],g={summary:d.jsx(vY,{summary:n.summary,isEditing:t,onSummaryChange:v=>{i(),s(x=>x?{...x,summary:v}:null)},onRemove:()=>h("summary")}),experience:d.jsx(wY,{experience:n.experience||[],isEditing:t,onFieldChange:(v,x,S)=>l("experience",v,x,S),onAchievementChange:c,onRemoveSection:()=>h("experience"),onRemoveExperience:v=>f("experience",v),onRemoveAchievement:p}),education:d.jsx(xY,{education:n.education||[],isEditing:t,onFieldChange:(v,x,S)=>l("education",v,x,S),onRemoveSection:()=>h("education"),onRemoveItem:v=>f("education",v)}),projects:d.jsx(bY,{projects:n.projects||[],isEditing:t,onFieldChange:(v,x,S)=>l("projects",v,x,S),onRemoveSection:()=>h("projects"),onRemoveItem:v=>f("projects",v)}),skills:d.jsx(_Y,{skills:b,isEditing:t,onRemove:()=>h("skills")})};return d.jsxs("div",{className:"prose max-w-none",children:[d.jsx("style",{children:".drag-indicator { border-top: 2px dashed #3b82f6; } .dragging { opacity: 0.5; }"}),d.jsxs("div",{className:"text-center",children:[d.jsx(Ze,{value:n.fullName,onChange:v=>{i(),s(x=>x?{...x,fullName:v}:null)},isEditing:t,className:"text-3xl font-bold w-full",placeholder:"Full Name"}),d.jsxs("div",{className:"flex justify-center flex-wrap gap-x-4 gap-y-1 text-sm text-gray-600 mt-2",children:[d.jsx(Ze,{value:n.phone,onChange:v=>{i(),s(x=>x?{...x,phone:v}:null)},isEditing:t,placeholder:"Phone"}),d.jsx(Ze,{value:n.email,onChange:v=>{i(),s(x=>x?{...x,email:v}:null)},isEditing:t,placeholder:"Email"}),d.jsx(Ze,{value:n.website,onChange:v=>{i(),s(x=>x?{...x,website:v}:null)},isEditing:t,placeholder:"Website"}),d.jsx(Ze,{value:n.location,onChange:v=>{i(),s(x=>x?{...x,location:v}:null)},isEditing:t,placeholder:"Location"})]})]}),e.map((v,x)=>d.jsxs("div",{className:`relative ${t?"pl-8 py-2":""}`,draggable:t,onDragStart:S=>m(S,x),onDragEnter:S=>y(S,x),onDragLeave:S=>S.currentTarget.classList.remove("drag-indicator"),onDragOver:S=>S.preventDefault(),onDrop:S=>w(S),onDragEnd:S=>S.currentTarget.classList.remove("dragging"),children:[t&&d.jsx("div",{className:"absolute top-1/2 left-0 -translate-y-1/2 cursor-move text-gray-400 hover:text-gray-700 p-1",title:"Drag to reorder",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})}),g[v]]},v))]})},DP=({formData:n,isEditing:e,setFormData:t,recordUndoState:s})=>{const r=(i,o)=>{s(),t(a=>a&&{...a,[i]:o})};return d.jsxs("div",{className:"prose max-w-none text-gray-800",children:[d.jsxs("div",{className:"mb-6 text-right",children:[d.jsx(Ze,{isEditing:e,value:n.senderName,onChange:i=>r("senderName",i),className:"font-bold text-lg w-full",placeholder:"Your Name"}),d.jsx(Ah,{isEditing:e,value:n.senderAddress,onChange:i=>r("senderAddress",i),rows:2,className:"text-sm w-full",placeholder:"Your Address"}),d.jsx(Ze,{isEditing:e,value:n.senderContact,onChange:i=>r("senderContact",i),className:"text-sm w-full",placeholder:"Email | Phone"})]}),d.jsx("div",{className:"mb-6",children:d.jsx(Ze,{isEditing:e,value:n.date,onChange:i=>r("date",i),placeholder:"Date",className:"w-full"})}),d.jsxs("div",{className:"mb-6",children:[d.jsx(Ze,{isEditing:e,value:n.recipientName,onChange:i=>r("recipientName",i),className:"font-bold w-full",placeholder:"Recipient Name"}),d.jsx(Ze,{isEditing:e,value:n.recipientTitle,onChange:i=>r("recipientTitle",i),placeholder:"Recipient Title",className:"w-full"}),d.jsx(Ze,{isEditing:e,value:n.companyName,onChange:i=>r("companyName",i),placeholder:"Company Name",className:"w-full"}),d.jsx(Ah,{isEditing:e,value:n.companyAddress,onChange:i=>r("companyAddress",i),rows:2,className:"text-sm w-full",placeholder:"Company Address"})]}),d.jsx("div",{className:"mb-4",children:d.jsx(Ze,{isEditing:e,value:n.salutation,onChange:i=>r("salutation",i),className:"font-bold w-full",placeholder:"Dear Hiring Manager,"})}),d.jsx(Ah,{isEditing:e,value:n.body,onChange:i=>r("body",i),rows:12,placeholder:"Cover letter body...",className:"w-full"}),d.jsxs("div",{className:"mt-6",children:[d.jsx(Ze,{isEditing:e,value:n.closing,onChange:i=>r("closing",i),placeholder:"Sincerely,",className:"w-full"}),d.jsx(Ze,{isEditing:e,value:n.signature,onChange:i=>r("signature",i),className:"mt-4 font-bold w-full",placeholder:"Your Name"})]})]})},MP=({documentType:n,initialContent:e,onSave:t,structuredContent:s,tokens:r,setTokens:i})=>{const[o,a]=k.useState(e),[l,c]=k.useState(s),[h,f]=k.useState([]),[p,m]=k.useState([]),[y,w]=k.useState(!1),[b,g]=k.useState([]),[v,x]=k.useState(!1),[S,A]=k.useState(!1),C=k.useCallback(()=>{g(U=>[...U,{formData:l,sectionOrder:h}])},[l,h]),N=()=>{if(b.length===0)return;const U=b[b.length-1];c(U.formData),f(U.sectionOrder),g(z=>z.slice(0,-1))};k.useEffect(()=>{if(a(e),c(s),sa(s)){const U=["summary","experience","education","projects","skills"],$=(s.sectionOrder||U).filter(B=>{var j,L,D;if(B==="skills")return(((j=s.technicalSkills)==null?void 0:j.length)??!1)||(((L=s.softSkills)==null?void 0:L.length)??!1)||(((D=s.tools)==null?void 0:D.length)??!1);const I=s[B];return Array.isArray(I)?I.length>0:!!I});f($),m($)}},[e,s]),k.useEffect(()=>{y&&g([])},[y]);const P=()=>{let U=o,z=l;if(pp(l))U=OP(l);else if(sa(l)){const $={...l,sectionOrder:h};U=TE($,h),z=$}t(U,z),w(!1),x(!0),setTimeout(()=>x(!1),3e3)},R=()=>{if(r<1){console.warn("Attempted to download PDF with insufficient tokens.");return}i(B=>B-1);const U=document.getElementById(`document-content-display-${n}`);if(!U){console.error("Printable content not found.");return}const z=document.createElement("div");z.id="print-container",z.innerHTML=U.innerHTML,document.body.appendChild(z);const $=document.createElement("style");$.innerHTML=`
      @media print {
        body > *:not(#print-container) { display: none !important; }
        #print-container { display: block !important; margin: 2rem; }
      }
    `,document.head.appendChild($),window.print(),document.body.removeChild(z),document.head.removeChild($)},O=()=>{let U="";pp(l)?U=OP(l):sa(l)?U=TE(l,h):U=o;const z=U.replace(/^# (.*$)/gm,"$1").replace(/^## (.*$)/gm,"$1").replace(/\*\*(.*?)\*\*/g,"$1").replace(/^- /gm," ").replace(/ \| /g,"	").replace(/\n{3,}/g,`

`);navigator.clipboard.writeText(z).then(()=>{A(!0),window.open("https://docs.google.com/document/create","_blank","noopener,noreferrer"),setTimeout(()=>A(!1),3e3)}).catch($=>{console.error("Failed to copy text: ",$)})},M=()=>{a(e),c(s),sa(s)&&f(p),w(!1)},Y=s&&l?JSON.stringify(l)!==JSON.stringify(s)||sa(l)&&JSON.stringify(h)!==JSON.stringify(p):o!==e,J=r>=1;return d.jsxs("div",{className:"bg-white p-8 sm:p-12 rounded-2xl shadow-xl border border-gray-200 animate-slide-in-up",children:[d.jsx("div",{id:`document-content-display-${n}`,children:y?pp(l)?d.jsx(DP,{formData:l,isEditing:y,setFormData:c,recordUndoState:C}):sa(l)?d.jsx(LP,{formData:l,sectionOrder:h,isEditing:y,setFormData:c,setSectionOrder:f,recordUndoState:C}):d.jsx("textarea",{className:"w-full h-96 p-4 border border-gray-300 rounded-md focus:ring-primary focus:border-primary font-mono text-sm resize-y",value:o,onChange:U=>{C(),a(U.target.value)},"aria-label":"Edit document content"}):pp(l)?d.jsx(DP,{formData:l,isEditing:y,setFormData:c,recordUndoState:C}):sa(l)?d.jsx(LP,{formData:l,sectionOrder:h,isEditing:y,setFormData:c,setSectionOrder:f,recordUndoState:C}):d.jsx("div",{className:"prose max-w-none prose-p:mb-4",dangerouslySetInnerHTML:{__html:yY(e)}})}),d.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:d.jsxs("div",{className:"flex flex-col sm:flex-row justify-end items-center gap-4",children:[v&&d.jsxs("div",{className:"flex items-center text-green-600 text-sm font-medium transition-opacity duration-300 animate-fade-in",role:"status",children:[d.jsx(JU,{})," ",d.jsx("span",{className:"ml-2",children:"Saved successfully!"})]}),d.jsx("div",{className:"flex flex-wrap justify-end items-center gap-3",children:y?d.jsxs(d.Fragment,{children:[d.jsxs("button",{onClick:N,disabled:b.length===0,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 15l-3-3m0 0l3-3m-3 3h8M3 12a9 9 0 1118 0 9 9 0 01-18 0z"})}),"Undo"]}),d.jsx("button",{onClick:M,className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:"Cancel"}),d.jsxs("button",{onClick:P,disabled:!Y,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-primary hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:bg-gray-400",children:[d.jsx(e4,{className:"h-5 w-5 mr-2"}),"Save"]})]}):d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:R,disabled:!J,className:"inline-flex items-center justify-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:bg-gray-100 disabled:cursor-not-allowed",children:J?d.jsxs(d.Fragment,{children:[d.jsx(xI,{className:"h-5 w-5 mr-2"}),d.jsx("span",{children:"Download PDF (1 Token)"})]}):d.jsxs("div",{className:"text-center text-xs px-1",children:[d.jsx("span",{className:"font-bold text-red-600 block",children:"Insufficient Tokens"}),d.jsx(tt,{to:"/subscription",className:"text-primary underline hover:text-blue-700",children:"Get More"})]})}),d.jsxs("button",{onClick:O,className:`inline-flex items-center justify-center px-4 py-2 border rounded-lg text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors duration-200 ${S?"bg-green-50 border-green-300 text-green-800":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[S?d.jsx(S0,{className:"h-5 w-5 text-green-600"}):d.jsx(t4,{className:"h-5 w-5"}),d.jsx("span",{className:"ml-2",children:S?"Copied! Now Paste.":"Open in Google Docs"})]}),d.jsxs("button",{onClick:()=>w(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-secondary hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-secondary",children:[d.jsx(ZU,{className:"h-5 w-5 mr-2"}),"Edit"]})]})})]})})]})},SY=({text:n})=>{const e=t=>t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/^## (.*$)/gm,'<h3 class="text-xl font-bold text-slate-800 mt-4 mb-2">$1</h3>').replace(/^- (.*$)/gm,'<li class="list-disc ml-5">$1</li>').replace(/(<li.*<\/li>)/gs,"<ul>$1</ul>").replace(/\n/g,"<br />");return d.jsx("div",{className:"prose prose-slate max-w-none",dangerouslySetInnerHTML:{__html:e(n)}})},Bi=Jt.memo(SY),EY=({analysis:n})=>d.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-slate-200/80 space-y-4",children:[d.jsx("h2",{className:"text-xl font-bold text-neutral border-b border-gray-200 pb-3",children:"Application Fit Analysis"}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider text-center",children:"Fit Score"}),d.jsxs("div",{className:"text-center my-2",children:[d.jsxs("p",{className:"text-6xl font-extrabold text-primary",children:[n.fitScore,"%"]}),d.jsx("p",{className:"text-md text-slate-600 font-semibold",children:"Match"})]})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx(Ql,{title:"Gap Analysis",initiallyOpen:!0,children:d.jsx(Bi,{text:n.gapAnalysis})}),d.jsx(Ql,{title:"Keyword Optimization",initiallyOpen:!0,children:d.jsx(Bi,{text:n.keywordOptimization})}),d.jsx(Ql,{title:"Impact Enhancer",initiallyOpen:!0,children:d.jsx(Bi,{text:n.impactEnhancer})})]})]}),Tn=({title:n,subtitle:e,className:t=""})=>d.jsxs("div",{className:`text-center mb-12 ${t}`,children:[d.jsx("h1",{className:"text-4xl font-extrabold tracking-tight text-slate-900 sm:text-5xl",children:n}),e&&d.jsx("p",{className:"mt-4 max-w-3xl mx-auto text-lg text-slate-600",children:e})]});function hx({items:n,className:e,activeTab:t,onTabChange:s,layoutId:r}){return d.jsx("div",{className:En("relative flex justify-center my-8",e),children:d.jsx("div",{className:"flex items-center gap-2 bg-white/90 border border-slate-200 backdrop-blur-lg p-1 rounded-full shadow-md",children:n.map(i=>{const o=i.icon,a=t===i.name;return d.jsxs("button",{onClick:()=>s(i.name),className:En("relative cursor-pointer text-sm font-semibold px-4 py-2 rounded-full transition-colors","text-slate-600 hover:text-primary",a&&"text-primary"),"aria-pressed":a,children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(o,{size:16,strokeWidth:2.5}),d.jsx("span",{className:"hidden md:inline",children:i.displayName})]}),a&&d.jsx(Gi.div,{layoutId:r,className:"absolute inset-0 w-full bg-primary/10 rounded-full -z-10",initial:!1,transition:{type:"spring",stiffness:300,damping:30},children:d.jsx("div",{className:"absolute -top-1.5 left-1/2 -translate-x-1/2 w-8 h-1 bg-primary rounded-t-full"})})]},i.name)})})})}/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var AY={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TY=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),El=(n,e)=>{const t=k.forwardRef(({color:s="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,...c},h)=>k.createElement("svg",{ref:h,...AY,width:r,height:r,stroke:s,strokeWidth:o?Number(i)*24/Number(r):i,className:["lucide",`lucide-${TY(n)}`,a].join(" "),...c},[...e.map(([f,p])=>k.createElement(f,p)),...Array.isArray(l)?l:[l]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FP=El("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=El("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CY=El("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kY=El("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NY=El("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PY=El("MessageSquareText",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M13 8H7",key:"14i4kc"}],["path",{d:"M17 12H7",key:"16if0g"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=El("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RY=El("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),IY=()=>{var P;const n=Bn(),e=Hw(),t=k.useContext(Ke);if(!((P=n.state)!=null&&P.generatedContent))return d.jsx(un,{className:"text-center",children:d.jsxs(Pt,{className:"max-w-lg mx-auto",children:[d.jsx("h1",{className:"text-2xl font-bold text-neutral",children:"Oops! Something went wrong."}),d.jsx("p",{className:"mt-4 text-gray-600",children:"The generation data was not found. This can happen if you refresh the page or navigate here directly. Please start a new generation from the builder page."}),d.jsx(Nt,{onClick:()=>e("/generate"),variant:"primary",size:"lg",className:"mt-6",children:"Start New Generation"})]})});const{generatedContent:s,parsedResume:r,parsedCoverLetter:i,analysisResult:o}=n.state,{tokens:a,setTokens:l}=t,[c,h]=k.useState(s),[f,p]=k.useState(r),[m,y]=k.useState(i),[w,b]=k.useState(null),[g,v]=k.useState(null);k.useEffect(()=>{s.resume?v("resume"):s.coverLetter&&v("coverLetter")},[s]),k.useEffect(()=>{const R=[];s.resume&&!r&&R.push("We couldn't structure the generated resume for rich editing, but you can still edit the raw text and download it."),s.coverLetter&&!i&&R.push("We couldn't structure the generated cover letter for rich editing, but you can still edit the raw text and download it."),R.length>0&&b(R.join(" "))},[s,r,i]);const x=k.useCallback((R,O)=>{h(M=>({...M,resume:R})),O&&sa(O)&&p(O)},[]),S=k.useCallback((R,O)=>{h(M=>({...M,coverLetter:R})),O&&pp(O)&&y(O)},[]),A=!!c.resume,C=!!c.coverLetter,N=[{name:"resume",displayName:"Resume",icon:CY},{name:"coverLetter",displayName:"Cover Letter",icon:NY}];return d.jsxs(un,{children:[w&&d.jsxs("div",{className:"mb-6 bg-yellow-100 border-l-4 border-yellow-500 text-yellow-800 p-4 rounded-md relative flex justify-between items-center shadow-md",role:"alert",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-bold",children:"Display Note"}),d.jsx("p",{children:w})]}),d.jsx("button",{onClick:()=>b(null),className:"p-1 rounded-full hover:bg-yellow-200 transition-colors","aria-label":"Close error",children:d.jsx(fs,{className:"h-6 w-6"})})]}),d.jsxs("div",{children:[d.jsx(Tn,{title:"Your Generation Results",subtitle:"Review your application's fit, then edit and download your tailored documents.",className:"animate-slide-in-up"}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start",children:[d.jsxs("main",{className:"lg:col-span-2 space-y-8",children:[A&&C&&d.jsx(hx,{items:N,activeTab:g,onTabChange:R=>v(R),layoutId:"generation-result-nav"}),d.jsxs("div",{className:"w-full",children:[g==="resume"&&A&&d.jsx("div",{className:"space-y-4",children:d.jsx(MP,{documentType:"resume",initialContent:c.resume,onSave:x,structuredContent:f,tokens:a,setTokens:l})}),g==="coverLetter"&&C&&d.jsx("div",{className:"space-y-4",children:d.jsx(MP,{documentType:"cover-letter",initialContent:c.coverLetter,onSave:S,structuredContent:m,tokens:a,setTokens:l})})]})]}),d.jsx("aside",{className:"lg:col-span-1 sticky top-24",children:o&&d.jsx(EY,{analysis:o})})]})]})]})},jY=()=>d.jsx("div",{className:"bg-white py-16 sm:py-24 animate-fade-in",children:d.jsxs(un,{className:"max-w-4xl py-0",children:[d.jsx(Tn,{title:"Privacy Policy",subtitle:"Last updated: October 26, 2025"}),d.jsx("div",{className:"max-w-3xl mx-auto",children:d.jsxs("div",{className:"prose prose-lg max-w-none prose-h2:text-slate-900 prose-a:text-brand-blue hover:prose-a:text-blue-700",children:[d.jsx("p",{children:"Keju Inc. (we or us) respects your privacy and collects minimal information. This privacy policy applies to our AI-powered application, Keju, designed to help users with career navigation. By using our app, you agree to our collection, use, and sharing of your information as described in this policy."}),d.jsx("h2",{children:"Information We Collect"}),d.jsx("p",{children:"We do not directly collect personal information. However, our third-party provider, Firebase, may collect data through services like Firebase Crashlytics, Performance Monitoring, and Remote Config to improve the app. The data collected is subject to Firebases privacy policy."}),d.jsx("p",{children:"Additionally, all data entered into the app is sent to platforms like Google Gemini or OpenAI for processing to generate your career guidance and documents. This data is used solely to provide and enhance the app's AI capabilities."}),d.jsx("h2",{children:"How We Use Your Information"}),d.jsx("p",{children:"The information you provide is processed by the AI to help generate and refine your career path and application documents. The data shared with Firebase is used solely to improve app performance, identify bugs, and enhance the overall user experience. Data sent to Google Gemini or OpenAI is used exclusively to process your requests and optimize the AI features of the app."}),d.jsx("h2",{children:"Sharing Your Information"}),d.jsx("p",{children:"We may share your information with Firebase, Google Gemini, or OpenAI to help us provide and enhance the app. These third-party service providers are required to protect the confidentiality and security of your data and cannot use it for any other purpose."}),d.jsx("p",{children:"Although we collect minimal information, we may still need to comply with legal obligations and disclose data if required by law or court order."}),d.jsx("h2",{children:"Security"}),d.jsx("p",{children:"We take reasonable measures to safeguard your data, but no system is completely secure, and we cannot guarantee the full protection of your information."}),d.jsx("h2",{children:"Changes to this Policy"}),d.jsx("p",{children:"We may update this privacy policy periodically to reflect changes in our practices or due to legal or regulatory requirements."}),d.jsx("h2",{children:"Contact Us"}),d.jsxs("p",{children:["If you have any questions or concerns about this privacy policy, please contact us at"," ",d.jsx("a",{href:"mailto:privacy@keju.io",children:"privacy@keju.io"}),"."]})]})})]})}),OY=()=>d.jsx("div",{className:"bg-white py-16 sm:py-24 animate-fade-in",children:d.jsxs(un,{className:"max-w-4xl py-0",children:[d.jsx(Tn,{title:"Terms of Service"}),d.jsx("div",{className:"max-w-3xl mx-auto",children:d.jsxs("div",{className:"prose prose-lg max-w-none prose-h2:text-slate-900 prose-a:text-brand-blue hover:prose-a:text-blue-700",children:[d.jsx("p",{children:"Please read these terms of use carefully before using the Keju app. By using the app, you agree to comply with these terms throughout your usage. If you do not agree to these terms, please stop using the app immediately."}),d.jsx("h2",{children:"Usage of the App"}),d.jsx("p",{children:"The Keju app (the app) is developed by Keju Inc. (we, us or the company) to assist users in navigating their careers using AI-powered tools."}),d.jsx("h2",{children:"Limitation of Liability"}),d.jsx("p",{children:"We do not take responsibility for the accuracy, completeness, or timeliness of the data provided by the app. Keju serves as a tool to assist users in their career journey, but it is the users responsibility to verify the accuracy of the content and ensure compliance with any applicable job application standards or personal requirements."}),d.jsx("h2",{children:"Privacy and Security"}),d.jsxs("p",{children:["We prioritize user privacy and take steps to protect any personal data collected through the app. Please review our"," ",d.jsx("a",{href:"#/privacy",children:"Privacy Policy"})," to understand how we collect, use, and safeguard your information."]}),d.jsx("h2",{children:"Changes and Updates"}),d.jsx("p",{children:"We reserve the right to modify or update these terms of use at any time. Any updates will be posted on this page, and it is your responsibility to review the terms regularly. Continued use of the app after such changes signifies acceptance of the revised terms."}),d.jsx("h2",{children:"Termination of Use"}),d.jsx("p",{children:"You can terminate your use of the app at any time by uninstalling it from your device. We also reserve the right to restrict or terminate your access to the app if you violate these terms or applicable laws."}),d.jsx("h2",{children:"Intellectual Property Rights"}),d.jsx("p",{children:"All content within the app, including but not limited to text, images, graphics, logos, and icons, is owned by the company or its licensors and is protected by intellectual property laws."}),d.jsxs("p",{children:["By using the Keju app, you confirm that you have read, understood, and accepted these terms of use. If you have any questions, please contact us at"," ",d.jsx("a",{href:"mailto:support@keju.io",children:"support@keju.io"}),"."]})]})})]})}),LY=()=>d.jsx("div",{className:"bg-white py-16 sm:py-24 animate-fade-in",children:d.jsxs(un,{className:"max-w-4xl py-0",children:[d.jsx(Tn,{title:"GDPR Disclaimer"}),d.jsx("div",{className:"max-w-3xl mx-auto",children:d.jsxs("div",{className:"prose prose-lg max-w-none prose-a:text-brand-blue hover:prose-a:text-blue-700",children:[d.jsx("p",{children:"At Keju Inc., we respect your privacy. By using the Keju app, you consent to the collection, processing, and storage of your personal data in accordance with our Privacy Policy. We collect minimal personal data and use it only to enhance your experience with the app. Your data may be processed by third-party services like Firebase, Google Gemini, and OpenAI, who adhere to strict data protection standards."}),d.jsxs("p",{children:["For more details on how your data is handled, including your rights under the GDPR, please review our full"," ",d.jsx(tt,{to:"/privacy",children:"Privacy Policy"}),"."]})]})})]})}),Eb=({name:n,price:e,billingInfo:t,description:s,features:r,isCurrent:i,isPopular:o})=>{const a=o?"border-2 border-brand-blue ring-4 ring-blue-100 bg-white":"border border-slate-200 bg-white",l=i?"w-full text-center px-4 py-3 border border-slate-300 text-sm font-bold rounded-lg text-slate-500 bg-slate-100 cursor-default":o?"w-full text-center px-4 py-3 border border-transparent text-base font-bold rounded-lg text-white bg-brand-blue hover:bg-blue-700 transition-transform transform hover:scale-105 shadow-lg hover:shadow-brand-blue/50":"w-full text-center px-4 py-3 border border-transparent text-base font-bold rounded-lg text-white bg-slate-900 hover:bg-slate-800 transition-transform transform hover:scale-105";return d.jsxs("div",{className:`rounded-2xl p-8 flex flex-col relative transition-all duration-300 hover:shadow-2xl hover:-translate-y-2 ${a}`,children:[o&&d.jsx("span",{className:"absolute top-0 -translate-y-1/2 bg-brand-blue text-white text-xs font-semibold px-4 py-1.5 rounded-full shadow-md",children:"Most Popular"}),d.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:n}),d.jsxs("div",{className:"mt-4 text-slate-500 flex items-baseline gap-x-2",children:[d.jsx("span",{className:"text-5xl font-extrabold tracking-tight text-slate-900",children:e}),e!=="Free"&&d.jsx("span",{children:"/ month"})]}),t&&d.jsx("p",{className:"text-sm text-slate-500 mt-1",children:t}),d.jsx("p",{className:"mt-6 text-slate-700 min-h-12",children:s}),d.jsx("ul",{className:"mt-8 space-y-4 text-slate-700",children:r.map((c,h)=>{const f=c.match(/^(Credit rollovers)\s*\((.*)\)/);if(f){const m=f[1],y=f[2];return d.jsxs("li",{className:"flex items-start",children:[d.jsx(S0,{}),d.jsx("span",{className:"ml-3",children:d.jsx(Re,{text:y,children:m})})]},h)}const p=c.toLowerCase().includes("starting tokens");return c.toLowerCase().includes("token")&&!p?d.jsxs("li",{className:"flex items-start",children:[d.jsx(S0,{}),d.jsx("span",{className:"ml-3",children:d.jsx(Re,{text:"Each resume or cover letter generation costs 1 token.",children:c})})]},h):d.jsxs("li",{className:"flex items-start",children:[d.jsx(S0,{}),d.jsx("span",{className:"ml-3",children:c})]},h)})}),d.jsx("div",{className:"mt-auto pt-8",children:d.jsx("button",{disabled:i,className:l,children:i?"Your Current Plan":"Get Started"})})]})},DY=()=>{const[n,e]=k.useState("monthly"),t={associate:{monthly:15,annually:15*12*(1-.1)},senior:{monthly:30,annually:30*12*(1-.1)}};return d.jsx("div",{className:"bg-base-200 py-16 sm:py-24 animate-fade-in",children:d.jsx(un,{className:"py-0",children:d.jsxs("div",{className:"max-w-7xl mx-auto",children:[d.jsx(Tn,{title:"Find the Perfect Plan",subtitle:"Start for free, and unlock powerful features when you're ready."}),d.jsxs("div",{className:"flex justify-center items-center space-x-4 mb-12",children:[d.jsx("span",{className:`font-medium transition-colors ${n==="monthly"?"text-brand-blue":"text-slate-500"}`,children:"Monthly"}),d.jsxs("label",{htmlFor:"billing-toggle",className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",id:"billing-toggle",className:"sr-only peer",checked:n==="annually",onChange:()=>e(s=>s==="monthly"?"annually":"monthly")}),d.jsx("div",{className:"w-14 h-8 bg-slate-200 rounded-full peer peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-offset-2 peer-focus:ring-offset-base-200 peer-focus:ring-brand-blue peer-checked:bg-brand-blue transition-colors"}),d.jsx("div",{className:"absolute top-1 left-1 bg-white border-slate-300 border rounded-full h-6 w-6 peer-checked:translate-x-full transition-transform"})]}),d.jsxs("span",{className:`font-medium transition-colors ${n==="annually"?"text-brand-blue":"text-slate-500"}`,children:["Annually ",d.jsx("span",{className:"hidden sm:inline-block text-sm text-green-600 font-semibold",children:"(Save 10%)"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 items-stretch",children:[d.jsx(Eb,{name:"Intern plan",price:"Free",description:"Perfect for trying out the core features of the AI.",features:["Access basic templates","5 starting tokens to create the first batch and try the product."],isCurrent:!0}),d.jsx(Eb,{name:"Associate plan",price:`${n==="monthly"?t.associate.monthly:(t.associate.annually/12).toFixed(2)}`,billingInfo:n==="annually"?`Billed ${t.associate.annually.toFixed(2)} annually`:void 0,description:"Ideal for active job seekers who need more power and flexibility.",features:["40 tokens per month","Access to all templates","Credit rollovers (Credits roll over for 1 month on monthly plans, or until the end of your annual plan.)","Extended history & storage (1 month)"],isPopular:!0}),d.jsx(Eb,{name:"Senior plan",price:`${n==="monthly"?t.senior.monthly:(t.senior.annually/12).toFixed(2)}`,billingInfo:n==="annually"?`Billed ${t.senior.annually.toFixed(2)} annually`:void 0,description:"The ultimate toolkit for professionals who want to stand out.",features:["100 tokens per month","Access to all templates","Credit rollovers (Credits roll over for 1 month on monthly plans, or until the end of your annual plan.)","Extended history & storage (6 months)"]})]}),d.jsxs(Pt,{className:"mt-20 text-center",children:[d.jsx("h3",{className:"text-3xl font-bold text-slate-900",children:"Need a Quick Boost?"}),d.jsx("p",{className:"mt-3 text-slate-700 max-w-2xl mx-auto",children:"Purchase a one-time pack of tokens for extra document generations. They never expire and there's no subscription required."}),d.jsxs("div",{className:"mt-10 grid grid-cols-1 sm:grid-cols-2 gap-8 max-w-2xl mx-auto",children:[d.jsxs("div",{className:"border border-slate-200 rounded-2xl p-6 flex flex-col items-center text-center transition-all duration-300 hover:shadow-lg hover:border-brand-blue/50",children:[d.jsx("h4",{className:"text-xl font-bold text-slate-900",children:"Boost Pack"}),d.jsx("span",{className:"text-4xl font-extrabold text-slate-900 mt-2",children:"20 Tokens"}),d.jsx("p",{className:"text-3xl font-bold text-brand-blue my-4",children:"10"}),d.jsx(Nt,{variant:"primary",fullWidth:!0,className:"transition-transform transform hover:scale-105 shadow-md hover:shadow-brand-blue/40",children:"Purchase Pack"})]}),d.jsxs("div",{className:"border border-slate-200 rounded-2xl p-6 flex flex-col items-center text-center transition-all duration-300 hover:shadow-lg hover:border-brand-blue/50",children:[d.jsx("h4",{className:"text-xl font-bold text-slate-900",children:"Power Pack"}),d.jsx("span",{className:"text-4xl font-extrabold text-slate-900 mt-2",children:"50 Tokens"}),d.jsx("p",{className:"text-3xl font-bold text-brand-blue my-4",children:"20"}),d.jsx(Nt,{variant:"primary",fullWidth:!0,className:"transition-transform transform hover:scale-105 shadow-md hover:shadow-brand-blue/40",children:"Purchase Pack"})]})]})]})]})})})},i0=({title:n,children:e})=>d.jsxs(Pt,{children:[d.jsx("h2",{className:"text-xl font-bold text-slate-900 border-b border-slate-200 pb-4 mb-6",children:n}),e]}),MY=()=>{var o;const n=k.useContext(Ke),[e,t]=k.useState(!1),s=((o=n==null?void 0:n.profile)==null?void 0:o.email)||"user@example.com",r=`https://keju.io/join?ref=${s.split("@")[0]}`,i=()=>{navigator.clipboard.writeText(r).then(()=>{t(!0),setTimeout(()=>t(!1),2500)})};return d.jsx("div",{className:"bg-base-200 py-16 sm:py-24 animate-fade-in",children:d.jsxs(un,{className:"max-w-4xl py-0",children:[d.jsx(Tn,{title:"Account Settings",subtitle:"Manage your subscription, billing, and account details."}),d.jsxs("div",{className:"space-y-8",children:[d.jsx(i0,{title:"Current Plan",children:d.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-lg font-semibold text-slate-800",children:"Basic Plan (Free)"}),d.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"You currently have the free Basic plan."})]}),d.jsxs("div",{className:"flex space-x-2 mt-4 sm:mt-0",children:[d.jsx(Nt,{as:"link",to:"/subscription",variant:"primary",children:"Upgrade Plan"}),d.jsx(Nt,{variant:"danger",children:"Cancel Subscription"})]})]})}),d.jsx(i0,{title:"Billing Information",children:d.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[d.jsxs("div",{children:[d.jsxs("p",{className:"text-slate-800",children:[d.jsx("span",{className:"font-semibold",children:"Payment Method:"})," Visa ending in 1234"]}),d.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Next invoice will be billed on November 24, 2025."})]}),d.jsxs("div",{className:"flex space-x-2 mt-4 sm:mt-0",children:[d.jsx(Nt,{variant:"outline",children:"Update Payment"}),d.jsx(Nt,{variant:"outline",children:"View History"})]})]})}),d.jsx(i0,{title:"Account Details",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Email Address"}),d.jsx("input",{type:"email",disabled:!0,value:s,className:"mt-1 block w-full rounded-md border-slate-300 bg-slate-100 shadow-sm sm:text-sm"})]}),d.jsx("div",{className:"flex justify-end",children:d.jsx(Nt,{variant:"danger",children:"Delete Account"})})]})}),d.jsxs(i0,{title:"Refer a Friend & Earn Tokens",children:[d.jsx("p",{className:"text-slate-700 mb-4",children:"Share your unique referral link with friends. For every friend that signs up, you both get 20 bonus tokens!"}),d.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch gap-2",children:[d.jsx("input",{type:"text",readOnly:!0,value:r,className:"flex-grow block w-full rounded-md border-slate-300 bg-slate-100 shadow-sm sm:text-sm focus:ring-0 focus:border-slate-300"}),d.jsx(Nt,{onClick:i,variant:"secondary",leftIcon:d.jsx(wI,{}),children:e?"Copied!":"Copy Link"})]})]})]})]})})},FY=()=>d.jsx("div",{className:"bg-white py-16 sm:py-24 animate-fade-in",children:d.jsx(un,{className:"max-w-4xl py-0",children:d.jsxs("div",{className:"max-w-md mx-auto text-center",children:[d.jsx(Tn,{title:"Login or Register",subtitle:"Access your profile and build your next application."}),d.jsx("div",{className:"bg-gray-100 p-8 rounded-2xl border border-gray-200",children:d.jsx("p",{className:"text-gray-500",children:"Google Sign-in will be configured here in the future."})})]})})}),BY=()=>{const[n,e]=k.useState(!1),t=k.useRef(null);k.useContext(Ke);const s=Bn();return["/","/login"].includes(s.pathname),k.useEffect(()=>{const r=i=>{t.current&&!t.current.contains(i.target)&&e(!1)};return document.addEventListener("mousedown",r),()=>{document.removeEventListener("mousedown",r)}},[]),d.jsx("header",{className:"bg-white/80 backdrop-blur-md border-b border-slate-200 sticky top-0 z-40",children:d.jsxs("div",{className:"mx-auto px-6 py-3 flex justify-between items-center",children:[d.jsxs("div",{className:"flex items-center gap-x-4",children:[d.jsxs(tt,{to:"/",className:"flex items-center gap-2 text-slate-900",children:[d.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-auto",children:[d.jsx("path",{d:"M24 14L32.66 19V29L24 34L15.34 29V19L24 14Z",stroke:"#0F172A",strokeWidth:"3",strokeLinejoin:"round"}),d.jsx("path",{d:"M32.66 19C37 16 43 19 43 26",stroke:"#2563EB",strokeWidth:"3",strokeLinecap:"round"}),d.jsx("path",{d:"M32.66 29C37 32 43 29 43 22",stroke:"#0F172A",strokeWidth:"3",strokeLinecap:"round"}),d.jsx("path",{d:"M15.34 29C11 32 5 29 5 22",stroke:"#2563EB",strokeWidth:"3",strokeLinecap:"round"}),d.jsx("path",{d:"M15.34 19C11 16 5 19 5 26",stroke:"#0F172A",strokeWidth:"3",strokeLinecap:"round"})]}),d.jsx("span",{className:"text-xl font-bold",children:"Keju"})]}),d.jsxs("div",{className:"hidden md:flex items-center space-x-6",children:[d.jsx(tt,{to:"/how-it-works",className:"text-sm font-medium text-slate-700 hover:text-brand-blue transition-colors duration-200",children:"How it works"}),d.jsx(tt,{to:"/subscription",className:"text-sm font-medium text-slate-700 hover:text-brand-blue transition-colors duration-200",children:"Pricing"})]})]}),d.jsx("nav",{className:"flex items-center space-x-4",children:d.jsxs("div",{className:"relative",ref:t,children:[d.jsx("button",{onClick:()=>e(!n),className:"p-1 rounded-full text-slate-500 hover:bg-slate-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-blue","aria-label":"User menu","aria-haspopup":"true",children:d.jsx(kA,{})}),n&&d.jsx("div",{className:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none transition ease-out duration-100",role:"menu","aria-orientation":"vertical","aria-labelledby":"user-menu-button",children:d.jsx("div",{className:"py-1",role:"none",children:d.jsx(tt,{to:"/login",onClick:()=>e(!1),className:"text-slate-700 block px-4 py-2 text-sm hover:bg-slate-100",role:"menuitem",children:"Login/Register"})})})]})})]})})},UY=Jt.memo(BY),$Y=()=>d.jsx("footer",{className:"bg-base-100 border-t border-base-300 text-slate-500",children:d.jsx("div",{className:"mx-auto px-6 py-8",children:d.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center text-center md:text-left space-y-4 md:space-y-0",children:[d.jsxs("div",{className:"text-sm",children:[d.jsx("p",{children:" 2025 Keju. All rights reserved."}),d.jsxs("p",{className:"mt-1",children:["For any inquiry, contact us at"," ",d.jsx("a",{href:"mailto:support@keju.io",className:"text-brand-blue hover:underline",children:"support@keju.io"})]})]}),d.jsxs("div",{className:"flex space-x-6 text-sm",children:[d.jsx(tt,{to:"/",className:"hover:text-brand-blue hover:underline",children:"Home"}),d.jsx(tt,{to:"/subscription",className:"hover:text-brand-blue hover:underline",children:"Pricing"}),d.jsx(tt,{to:"/privacy",className:"hover:text-brand-blue hover:underline",children:"Privacy Policy"}),d.jsx(tt,{to:"/terms",className:"hover:text-brand-blue hover:underline",children:"Terms of Service"}),d.jsx(tt,{to:"/gdpr",className:"hover:text-brand-blue hover:underline",children:"GDPR"})]})]})})}),VY=Jt.memo($Y);function BP(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function HY(...n){return e=>{let t=!1;const s=n.map(r=>{const i=BP(r,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let r=0;r<s.length;r++){const i=s[r];typeof i=="function"?i():BP(n[r],null)}}}}var zY=Symbol.for("react.lazy"),ow=pF[" use ".trim().toString()];function GY(n){return typeof n=="object"&&n!==null&&"then"in n}function DM(n){return n!=null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===zY&&"_payload"in n&&GY(n._payload)}function WY(n){const e=KY(n),t=k.forwardRef((s,r)=>{let{children:i,...o}=s;DM(i)&&typeof ow=="function"&&(i=ow(i._payload));const a=k.Children.toArray(i),l=a.find(XY);if(l){const c=l.props.children,h=a.map(f=>f===l?k.Children.count(c)>1?k.Children.only(null):k.isValidElement(c)?c.props.children:null:f);return d.jsx(e,{...o,ref:r,children:k.isValidElement(c)?k.cloneElement(c,void 0,h):null})}return d.jsx(e,{...o,ref:r,children:i})});return t.displayName=`${n}.Slot`,t}var YY=WY("Slot");function KY(n){const e=k.forwardRef((t,s)=>{let{children:r,...i}=t;if(DM(r)&&typeof ow=="function"&&(r=ow(r._payload)),k.isValidElement(r)){const o=QY(r),a=JY(i,r.props);return r.type!==k.Fragment&&(a.ref=s?HY(s,o):o),k.cloneElement(r,a)}return k.Children.count(r)>1?k.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var qY=Symbol("radix.slottable");function XY(n){return k.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===qY}function JY(n,e){const t={...e};for(const s in e){const r=n[s],i=e[s];/^on[A-Z]/.test(s)?r&&i?t[s]=(...a)=>{const l=i(...a);return r(...a),l}:r&&(t[s]=r):s==="style"?t[s]={...r,...i}:s==="className"&&(t[s]=[r,i].filter(Boolean).join(" "))}return{...n,...t}}function QY(n){var s,r;let e=(s=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function MM(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(e=0;e<r;e++)n[e]&&(t=MM(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function ZY(){for(var n,e,t=0,s="",r=arguments.length;t<r;t++)(n=arguments[t])&&(e=MM(n))&&(s&&(s+=" "),s+=e);return s}const UP=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,$P=ZY,O1=(n,e)=>t=>{var s;if((e==null?void 0:e.variants)==null)return $P(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:r,defaultVariants:i}=e,o=Object.keys(r).map(c=>{const h=t==null?void 0:t[c],f=i==null?void 0:i[c];if(h===null)return null;const p=UP(h)||UP(f);return r[c][p]}),a=t&&Object.entries(t).reduce((c,h)=>{let[f,p]=h;return p===void 0||(c[f]=p),c},{}),l=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((c,h)=>{let{class:f,className:p,...m}=h;return Object.entries(m).every(y=>{let[w,b]=y;return Array.isArray(b)?b.includes({...i,...a}[w]):{...i,...a}[w]===b})?[...c,f,p]:c},[]);return $P(n,o,l,t==null?void 0:t.class,t==null?void 0:t.className)},eK=O1("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-white hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-white hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Th=k.forwardRef(({className:n,variant:e,size:t,asChild:s=!1,...r},i)=>{const o=s?YY:"button";return d.jsx(o,{className:En(eK({variant:e,size:t,className:n})),ref:i,...r})});Th.displayName="Button";const tK=O1("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}}),FM=({className:n,variant:e,...t})=>d.jsx("div",{className:En(tK({variant:e,className:n})),...t});FM.displayName="Badge";const nK=O1("absolute w-full",{variants:{variant:{top:"top-0",above:"-top-[128px]",bottom:"bottom-0",below:"-bottom-[128px]",center:"top-[50%]"}},defaultVariants:{variant:"top"}}),BM=Jt.forwardRef(({className:n,variant:e,...t},s)=>d.jsxs("div",{ref:s,className:En(nK({variant:e}),n),...t,children:[d.jsx("div",{className:En("absolute left-1/2 h-[256px] w-[60%] -translate-x-1/2 scale-[2.5] rounded-[50%] bg-[radial-gradient(ellipse_at_center,_hsla(var(--brand-foreground)/.5)_10%,_hsla(var(--brand-foreground)/0)_60%)] sm:h-[512px]",e==="center"&&"-translate-y-1/2")}),d.jsx("div",{className:En("absolute left-1/2 h-[128px] w-[40%] -translate-x-1/2 scale-[2] rounded-[50%] bg-[radial-gradient(ellipse_at_center,_hsla(var(--brand)/.3)_10%,_hsla(var(--brand-foreground)/0)_60%)] sm:h-[256px]",e==="center"&&"-translate-y-1/2")})]}));BM.displayName="Glow";function sK({badge:n,title:e,description:t,actions:s}){return d.jsx("section",{className:En("bg-background text-foreground","py-12 sm:py-24 md:py-32 px-4","fade-bottom overflow-hidden pb-0"),children:d.jsx("div",{className:"mx-auto flex max-w-7xl flex-col gap-12 pt-16 sm:gap-24",children:d.jsxs("div",{className:"flex flex-col items-center gap-6 text-center sm:gap-12",children:[n&&d.jsxs(FM,{variant:"outline",className:"animate-appear gap-2 pr-1",children:[d.jsx("span",{className:"text-muted-foreground",children:n.text}),n.action.href.startsWith("/")?d.jsxs(tt,{to:n.action.href,className:"flex items-center gap-1 rounded-full bg-slate-900 px-3 py-1 text-xs font-medium text-white hover:bg-slate-800 transition-colors shadow-sm",children:[n.action.text,d.jsx(FP,{className:"h-3 w-3"})]}):d.jsxs("a",{href:n.action.href,className:"flex items-center gap-1 rounded-full bg-slate-900 px-3 py-1 text-xs font-medium text-white hover:bg-slate-800 transition-colors shadow-sm",children:[n.action.text,d.jsx(FP,{className:"h-3 w-3"})]})]}),d.jsxs("div",{className:"relative",children:[d.jsx(BM,{variant:"center"}),d.jsx("h1",{className:"relative z-10 inline-block animate-appear bg-gradient-to-r from-foreground to-muted-foreground bg-clip-text text-4xl font-semibold leading-tight text-transparent drop-shadow-2xl sm:text-6xl sm:leading-tight md:text-8xl md:leading-tight",children:e})]}),d.jsx("p",{className:"text-md relative z-10 max-w-[550px] animate-appear font-medium text-muted-foreground opacity-0 delay-100 sm:text-xl",children:t}),d.jsx("div",{className:"relative z-10 flex animate-appear justify-center gap-4 opacity-0 delay-300",children:s.map((r,i)=>r.href.startsWith("/")?d.jsx(Th,{variant:r.variant,size:"lg",asChild:!0,children:d.jsxs(tt,{to:r.href,className:"flex items-center gap-2",children:[r.icon,r.text]})},i):d.jsx(Th,{variant:r.variant,size:"lg",asChild:!0,children:d.jsxs("a",{href:r.href,className:"flex items-center gap-2",children:[r.icon,r.text]})},i))})]})})})}/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var rK={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al=(n,e,t,s)=>{const r=k.forwardRef(({color:i="currentColor",size:o=24,stroke:a=2,title:l,className:c,children:h,...f},p)=>k.createElement("svg",{ref:p,...rK[n],width:o,height:o,className:["tabler-icon",`tabler-icon-${e}`,c].join(" "),strokeWidth:a,stroke:i,...f},[l&&k.createElement("title",{key:"svg-title"},l),...s.map(([m,y])=>k.createElement(m,y)),...Array.isArray(h)?h:[h]]));return r.displayName=`${t}`,r};/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const iK=[["path",{d:"M20 11a8.1 8.1 0 0 0 -6.986 -6.918a8.095 8.095 0 0 0 -8.019 3.918",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15 3",key:"svg-1"}],["path",{d:"M19 16m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}],["path",{d:"M5 8m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-3"}],["path",{d:"M12 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-4"}]],oK=Al("outline","analyze","Analyze",iK);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const aK=[["path",{d:"M3 14c.83 .642 2.077 1.017 3.5 1c1.423 .017 2.67 -.358 3.5 -1c.83 -.642 2.077 -1.017 3.5 -1c1.423 -.017 2.67 .358 3.5 1",key:"svg-0"}],["path",{d:"M8 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2",key:"svg-1"}],["path",{d:"M12 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2",key:"svg-2"}],["path",{d:"M3 10h14v5a6 6 0 0 1 -6 6h-2a6 6 0 0 1 -6 -6v-5z",key:"svg-3"}],["path",{d:"M16.746 16.726a3 3 0 1 0 .252 -5.555",key:"svg-4"}]],lK=Al("outline","coffee","Coffee",aK);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const cK=[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]],uK=Al("outline","edit","Edit",cK);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const hK=[["path",{d:"M12 18.5l-3 -1.5l-6 3v-13l6 -3l6 3l6 -3v7.5",key:"svg-0"}],["path",{d:"M9 4v13",key:"svg-1"}],["path",{d:"M15 7v5.5",key:"svg-2"}],["path",{d:"M21.121 20.121a3 3 0 1 0 -4.242 0c.418 .419 1.125 1.045 2.121 1.879c1.051 -.89 1.759 -1.516 2.121 -1.879z",key:"svg-3"}],["path",{d:"M19 18v.01",key:"svg-4"}]],UM=Al("outline","map-2","Map2",hK);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const dK=[["path",{d:"M21 14l-3 -3h-7a1 1 0 0 1 -1 -1v-6a1 1 0 0 1 1 -1h9a1 1 0 0 1 1 1v10",key:"svg-0"}],["path",{d:"M14 15v2a1 1 0 0 1 -1 1h-7l-3 3v-10a1 1 0 0 1 1 -1h2",key:"svg-1"}]],$M=Al("outline","messages","Messages",dK);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const fK=[["path",{d:"M15 12.9a5 5 0 1 0 -3.902 -3.9",key:"svg-0"}],["path",{d:"M15 12.9l-3.902 -3.899l-7.513 8.584a2 2 0 1 0 2.827 2.83l8.588 -7.515z",key:"svg-1"}]],pK=Al("outline","microphone-2","Microphone2",fK);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const mK=[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 7a5 5 0 1 0 5 5",key:"svg-1"}],["path",{d:"M13 3.055a9 9 0 1 0 7.941 7.945",key:"svg-2"}],["path",{d:"M15 6v3h3l3 -3h-3v-3z",key:"svg-3"}],["path",{d:"M15 9l-3 3",key:"svg-4"}]],VM=Al("outline","target-arrow","TargetArrow",mK);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const gK=[["path",{d:"M10 9a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-0"}],["path",{d:"M4 8v-2a2 2 0 0 1 2 -2h2",key:"svg-1"}],["path",{d:"M4 16v2a2 2 0 0 0 2 2h2",key:"svg-2"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v2",key:"svg-3"}],["path",{d:"M16 20h2a2 2 0 0 0 2 -2v-2",key:"svg-4"}],["path",{d:"M8 16a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2",key:"svg-5"}]],HM=Al("outline","user-scan","UserScan",gK);function yK(){const n=[{title:"Build Your Profile",description:"Import your resume in seconds or build a dynamic professional profile. This becomes the single source of truth for all AI-powered guidance.",icon:d.jsx(HM,{})},{title:"Career Coach",description:"Chat with your personal career advisor. Get instant answers, improve your profile, and discover your next steps in a natural conversation.",icon:d.jsx($M,{})},{title:"Tailor Applications",description:"Generate perfectly tailored resumes and cover letters for any job. Our AI highlights your most relevant skills to make you stand out.",icon:d.jsx(VM,{})},{title:"Plan Your Path",description:"Don't just look for a jobbuild a career. Generate a step-by-step roadmap from your current role to your dream job.",icon:d.jsx(UM,{})},{title:"Ace Interviews",description:"Walk into any interview with confidence. Use AI to shape your stories, generate practice questions, and build rapport with your interviewer.",icon:d.jsx(pK,{})},{title:"Network Smarter",description:"Prepare for any coffee chat or networking event. Get AI-generated talking points and perfectly crafted outreach messages.",icon:d.jsx(lK,{})},{title:"Analyze Your Fit",description:"Get an instant 'Fit Score' and detailed analysis of your resume against the job description to identify gaps and opportunities.",icon:d.jsx(oK,{})},{title:"Rich Document Editor",description:"Fine-tune every detail in our rich editor, reorder sections with drag-and-drop, and export to PDF when you're ready.",icon:d.jsx(uK,{})}];return d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4  relative z-10 py-10 max-w-7xl mx-auto",children:n.map((e,t)=>d.jsx(vK,{...e,index:t},e.title))})}const vK=({title:n,description:e,icon:t,index:s})=>d.jsxs("div",{className:En("flex flex-col lg:border-r  py-10 relative group/feature dark:border-neutral-800",(s===0||s===4)&&"lg:border-l dark:border-neutral-800",s<4&&"lg:border-b dark:border-neutral-800"),children:[s<4&&d.jsx("div",{className:"opacity-0 group-hover/feature:opacity-100 transition duration-200 absolute inset-0 h-full w-full bg-gradient-to-t from-slate-100 to-transparent pointer-events-none"}),s>=4&&d.jsx("div",{className:"opacity-0 group-hover/feature:opacity-100 transition duration-200 absolute inset-0 h-full w-full bg-gradient-to-b from-slate-100 to-transparent pointer-events-none"}),d.jsx("div",{className:"mb-4 relative z-10 px-10 text-neutral-600 dark:text-neutral-400",children:t}),d.jsxs("div",{className:"text-lg font-bold mb-2 relative z-10 px-10",children:[d.jsx("div",{className:"absolute left-0 inset-y-0 h-6 group-hover/feature:h-8 w-1 rounded-tr-full rounded-br-full bg-neutral-300 dark:bg-neutral-700 group-hover/feature:bg-blue-500 transition-all duration-200 origin-center"}),d.jsx("span",{className:"group-hover/feature:translate-x-2 transition duration-200 inline-block text-neutral-800 dark:text-neutral-100",children:n})]}),d.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300 max-w-xs relative z-10 px-10",children:e})]}),wK=()=>d.jsxs("div",{children:[d.jsx(sK,{badge:{text:"Smart Career Navigation",action:{text:"How it works",href:"/how-it-works"}},title:"Your Career, Expertly Navigated",description:"Stop guessing. Keju provides a personalized, data-driven roadmap to your dream job. Build tailored resumes, plan your career path, and ace interviews with your expert co-pilot.",actions:[{text:"Start for Free",href:"/career-coach",variant:"default"},{text:"Learn More",href:"/how-it-works",variant:"outline"}]}),d.jsx("div",{className:"py-20 bg-base-200",children:d.jsxs("div",{className:"mx-auto px-6",children:[d.jsxs("div",{className:"text-center mb-16",children:[d.jsx("h2",{className:"text-3xl font-bold text-slate-900",children:"How Keju Guides Your Journey"}),d.jsx("p",{className:"mt-3 text-lg text-slate-500 max-w-2xl mx-auto",children:"An integrated platform to help you plan your future and get hired."})]}),d.jsx(yK,{})]})})]}),xK=({icon:n,title:e,description:t,step:s,isLast:r})=>d.jsxs("div",{className:`relative pl-16 ${r?"":"pb-12"}`,children:[d.jsx("div",{className:"absolute left-0 top-0 flex h-12 w-12 items-center justify-center rounded-lg bg-primary text-white ring-8 ring-white",children:d.jsx("span",{className:"text-xl font-bold",children:s})}),!r&&d.jsx("div",{className:"absolute left-6 top-14 h-full border-l-2 border-dashed border-slate-300"}),d.jsx("h3",{className:"text-xl font-semibold text-slate-900",children:e}),d.jsx("p",{className:"mt-2 text-slate-600",children:t})]}),bK=()=>{const n=[{icon:d.jsx(HM,{className:"h-8 w-8"}),title:"Build Your Core Profile",description:"Start by creating a comprehensive professional profile. You can either fill it out from scratch or import your existing resume in seconds. This profile becomes the single source of truth for all of Keju's AI-powered guidance, ensuring every piece of advice is tailored to you."},{icon:d.jsx($M,{className:"h-8 w-8"}),title:"Chat with Your Career Coach",description:"Interact with your personal career advisor for any need. Get instant feedback on your profile, brainstorm career moves, or ask for help preparing for an interview. It's like having an industry expert on call, 24/7."},{icon:d.jsx(VM,{className:"h-8 w-8"}),title:"Generate Tailored Applications",description:"Stop sending generic resumes. Provide a job description, and Keju will generate a perfectly tailored resume and cover letter that highlight your most relevant skills and experiences, helping you stand out from the crowd."},{icon:d.jsx(UM,{className:"h-8 w-8"}),title:"Plan Your Long-Term Career Path",description:"Look beyond the next job and build a fulfilling career. Keju can generate a step-by-step roadmap from your current role to your dream job, complete with milestones, action items, and curated learning resources."}];return d.jsx("div",{className:"bg-white py-16 sm:py-24 animate-fade-in",children:d.jsxs(un,{className:"py-0",children:[d.jsx(Tn,{title:"How Keju Works",subtitle:"Your personalized journey to a fulfilling career, powered by AI."}),d.jsx("div",{className:"max-w-3xl mx-auto",children:d.jsx("div",{className:"space-y-0",children:n.map((e,t)=>d.jsx(xK,{step:t+1,icon:e.icon,title:e.title,description:e.description,isLast:t===n.length-1},t))})})]})})},zM=k.createContext(void 0),dx=()=>{const n=k.useContext(zM);if(!n)throw new Error("useSidebar must be used within a SidebarProvider");return n},_K=({children:n,open:e,setOpen:t,animate:s=!0})=>{const[r,i]=k.useState(!0),o=e!==void 0?e:r,a=t!==void 0?t:i;return d.jsx(zM.Provider,{value:{open:o,setOpen:a,animate:s},children:n})},SK=({children:n,open:e,setOpen:t,animate:s})=>d.jsx(_K,{open:e,setOpen:t,animate:s,children:n}),EK=n=>d.jsxs(d.Fragment,{children:[d.jsx(AK,{...n}),d.jsx(TK,{...n})]}),AK=({className:n,children:e,...t})=>{const{open:s,setOpen:r,animate:i}=dx();return d.jsx(Gi.div,{className:En("h-full px-4 py-4 hidden md:flex md:flex-col bg-white border-r border-slate-200 w-[200px] flex-shrink-0",n),animate:{width:i?s?"200px":"80px":"200px"},onClick:()=>{s||r(!0)},...t,children:e})},TK=({className:n,children:e,...t})=>{const{open:s,setOpen:r}=dx();return d.jsx(d.Fragment,{children:d.jsxs("div",{className:En("h-14 px-4 py-4 flex flex-row md:hidden items-center justify-between bg-white w-full sticky top-0 z-20 border-b border-slate-200"),...t,children:[d.jsx("div",{className:"flex justify-end z-20 w-full",children:d.jsx(n4,{className:"text-slate-800 cursor-pointer",onClick:()=>r(!s)})}),d.jsx(Kw,{children:s&&d.jsxs(Gi.div,{initial:{x:"-100%",opacity:0},animate:{x:0,opacity:1},exit:{x:"-100%",opacity:0},transition:{duration:.3,ease:"easeInOut"},className:En("fixed h-full w-full inset-0 bg-white p-4 z-[100] flex flex-col justify-between",n),children:[d.jsx("div",{className:"absolute right-4 top-4 z-50 text-slate-800 cursor-pointer",onClick:()=>r(!s),children:d.jsx(fs,{className:"h-8 w-8"})}),e]})})]})})},CK=({link:n,className:e,...t})=>{const{open:s,animate:r,setOpen:i}=dx();return d.jsxs(yI,{to:n.to,onClick:o=>{window.innerWidth<768&&i(!1),o.stopPropagation()},className:({isActive:o})=>En("flex items-center justify-start gap-4 group/sidebar py-2.5 rounded-lg px-3 transition-colors duration-200",o?"bg-primary text-white shadow-md":"text-slate-600 hover:bg-slate-100",!s&&"justify-center",e),...t,children:[d.jsx("div",{className:"flex-shrink-0",children:n.icon}),d.jsx(Gi.span,{animate:{display:r?s?"inline-block":"none":"inline-block",opacity:r?s?1:0:1},className:"text-sm font-medium whitespace-pre",children:n.label})]})},kK=({isCollapsed:n})=>{const e=k.useContext(Ke),[t,s]=k.useState(!1),r=k.useRef(null);if(k.useEffect(()=>{const a=l=>{r.current&&!r.current.contains(l.target)&&s(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]),k.useEffect(()=>{n&&s(!1)},[n]),!e)return null;const{profile:i,tokens:o}=e;return d.jsxs("div",{className:"relative w-full",ref:r,children:[d.jsxs("button",{onClick:()=>s(!t),className:`w-full flex items-center p-2 rounded-lg transition-colors duration-200 ${t?"bg-slate-100":"hover:bg-slate-100"}`,"aria-haspopup":"true","aria-expanded":t,"aria-label":"Toggle profile menu",children:[d.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-slate-200 flex items-center justify-center",children:d.jsx(kA,{className:"h-6 w-6 text-slate-600"})}),!n&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"text-left ml-3 min-w-0 flex-grow",children:[d.jsx("p",{className:"text-sm font-semibold text-slate-800 truncate",children:(i==null?void 0:i.fullName)||(i==null?void 0:i.name)||"Profile"}),d.jsx("p",{className:"text-xs text-slate-500 truncate",children:"Intern Plan"})]}),d.jsx(a4,{className:`h-5 w-5 text-slate-500 transition-transform flex-shrink-0 ${t?"rotate-180":""}`})]})]}),d.jsx(Kw,{children:t&&d.jsxs(Gi.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.2},className:"absolute bottom-full left-0 right-0 mb-2 w-full rounded-lg shadow-2xl bg-white ring-1 ring-black ring-opacity-5 z-20",children:[d.jsx("div",{className:"p-2",children:d.jsxs(tt,{to:"/subscription",onClick:()=>s(!1),className:"flex items-center justify-between w-full px-3 py-2 text-sm rounded-md text-slate-700 hover:bg-slate-100",children:[d.jsx("span",{children:"My Tokens"}),d.jsxs("div",{className:"flex items-center space-x-2 font-semibold text-brand-blue bg-blue-100 px-2 py-0.5 rounded-full",children:[d.jsx(QU,{}),d.jsx("span",{children:o})]})]})}),d.jsxs("div",{className:"border-t border-slate-200 p-2",children:[d.jsx(tt,{to:"/builder",onClick:()=>s(!1),className:"block w-full text-left px-3 py-2 text-sm rounded-md text-slate-700 hover:bg-slate-100",children:"My Profile"}),d.jsx(tt,{to:"/account",onClick:()=>s(!1),className:"block w-full text-left px-3 py-2 text-sm rounded-md text-slate-700 hover:bg-slate-100",children:"Account & Subscription"})]})]})})]})},NK=()=>{const{open:n}=dx();return d.jsxs(tt,{to:"/career-coach",className:"font-normal flex space-x-2 items-center text-sm text-black py-1 relative z-20",children:[d.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-auto flex-shrink-0",children:[d.jsx("path",{d:"M24 14L32.66 19V29L24 34L15.34 29V19L24 14Z",stroke:"#0F172A",strokeWidth:"3",strokeLinejoin:"round"}),d.jsx("path",{d:"M32.66 19C37 16 43 19 43 26",stroke:"#2563EB",strokeWidth:"3",strokeLinecap:"round"}),d.jsx("path",{d:"M32.66 29C37 32 43 29 43 22",stroke:"#0F172A",strokeWidth:"3",strokeLinecap:"round"}),d.jsx("path",{d:"M15.34 29C11 32 5 29 5 22",stroke:"#2563EB",strokeWidth:"3",strokeLinecap:"round"}),d.jsx("path",{d:"M15.34 19C11 16 5 19 5 26",stroke:"#0F172A",strokeWidth:"3",strokeLinecap:"round"})]}),d.jsx(Gi.span,{initial:{opacity:0},animate:{opacity:n?1:0},className:"font-bold text-xl text-slate-900 whitespace-pre",children:"Keju"})]})},PK=()=>d.jsx(tt,{to:"/career-coach",className:"font-normal flex space-x-2 items-center text-sm text-black py-1 relative z-20",children:d.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-auto flex-shrink-0",children:[d.jsx("path",{d:"M24 14L32.66 19V29L24 34L15.34 29V19L24 14Z",stroke:"#0F172A",strokeWidth:"3",strokeLinejoin:"round"}),d.jsx("path",{d:"M32.66 19C37 16 43 19 43 26",stroke:"#2563EB",strokeWidth:"3",strokeLinecap:"round"}),d.jsx("path",{d:"M32.66 29C37 32 43 29 43 22",stroke:"#0F172A",strokeWidth:"3",strokeLinecap:"round"}),d.jsx("path",{d:"M15.34 29C11 32 5 29 5 22",stroke:"#2563EB",strokeWidth:"3",strokeLinecap:"round"}),d.jsx("path",{d:"M15.34 19C11 16 5 19 5 26",stroke:"#0F172A",strokeWidth:"3",strokeLinecap:"round"})]})}),RK=()=>{const{careerChatHistory:n,backgroundTasks:e,markTaskAsViewed:t}=k.useContext(Ke),[s,r]=k.useState(!0),i=l=>e.some(c=>c.type===l&&(c.status==="completed"||c.status==="error")&&!c.viewed),o=l=>{e.forEach(c=>{c.type===l&&!c.viewed&&t(c.id)})},a=[{label:"Career Coach",to:"/career-coach",icon:d.jsx(bI,{})},{label:"Create Documents",to:"/generate",icon:d.jsx(_I,{})},{label:"Documents",to:"/generated-documents",icon:d.jsx(wI,{}),notification:i("document-generation"),onClick:()=>o("document-generation")},{label:"Career Path",to:"/career-path",icon:d.jsx(s4,{}),notification:i("career-path"),onClick:()=>o("career-path")},{label:"Interview Prep",to:"/interview-prep",icon:d.jsx(r4,{}),notification:i("interview-prep"),onClick:()=>o("interview-prep")},{label:"Coffee Chats",to:"/coffee-chats",icon:d.jsx(i4,{}),notification:i("coffee-chat"),onClick:()=>o("coffee-chat")}];return d.jsx(SK,{open:s,setOpen:r,animate:!0,children:d.jsxs(EK,{children:[d.jsxs("div",{className:"flex flex-col flex-1 overflow-y-auto overflow-x-hidden",children:[d.jsxs("div",{className:"px-2 flex items-center justify-between",children:[s?d.jsx(NK,{}):d.jsx(PK,{}),s&&d.jsx("button",{onClick:l=>{l.stopPropagation(),r(!1)},className:"text-slate-400 hover:text-slate-600 p-1 rounded-md hover:bg-slate-100 transition-colors","aria-label":"Collapse sidebar",children:d.jsx(u4,{collapsed:!1,className:"w-5 h-5"})})]}),d.jsx("div",{className:"mt-8 flex flex-col gap-2",children:a.map((l,c)=>d.jsxs("div",{className:"relative",onClick:l.onClick,children:[d.jsx(CK,{link:l}),l.notification&&d.jsx("span",{className:"absolute top-1 right-1 block h-2.5 w-2.5 rounded-full bg-red-500 ring-2 ring-white"})]},c))}),d.jsxs("div",{className:`mt-8 pt-4 transition-all duration-300 ${s?"opacity-100 visible":"opacity-0 h-0 invisible"}`,children:[d.jsx("h3",{className:"px-2 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Career Chat History"}),n.length>0?d.jsx("ul",{className:"mt-2 space-y-1",children:n.slice(0,5).map(l=>{const c=new Date(l.timestamp).toLocaleDateString(void 0,{month:"short",day:"numeric"});return d.jsx("li",{children:d.jsxs(tt,{to:"/career-coach",className:"group flex items-center justify-between text-sm px-2 py-2 rounded-lg text-slate-700 hover:bg-slate-100",children:[d.jsx("span",{className:"truncate",children:l.title}),d.jsx("span",{className:"text-xs text-slate-500 flex-shrink-0 ml-2",children:c})]})},l.id)})}):d.jsx("p",{className:"mt-2 px-2 text-sm text-slate-500",children:"No chat history yet."})]})]}),d.jsx("div",{children:d.jsx(kK,{isCollapsed:!s})})]})})},GM=async(n,e)=>(await Zs("/api/llm/networking/brief",{profile:n,counterpartInfo:e})).text,IK=async(n,e)=>(await Zs("/api/llm/networking/reach-out",{profile:n,counterpartInfo:e})).text,jK=()=>{const n=k.useContext(Ke),e=Bn(),{initialMode:t,initialCounterpartInfo:s}=e.state||{},[r,i]=k.useState(t||"prep"),[o,a]=k.useState(s||""),[l,c]=k.useState(null);if(!n)return d.jsx("div",{children:"Loading..."});const{profile:h,tokens:f,setTokens:p,backgroundTasks:m,startBackgroundTask:y,updateBackgroundTask:w}=n,b=m.some(A=>A.type==="coffee-chat"&&A.status==="running"),g=()=>{if(!o.trim()){c("Please provide some information about the person you're meeting.");return}if(f<1){c("You don't have enough tokens for this. Please purchase more.");return}c(null),p(C=>C-1);const A=y({type:"coffee-chat",description:r==="prep"?"Coffee chat brief":"Reach out message"});(async()=>{try{const N={content:r==="prep"?await GM(h,o):await IK(h,o),generationMode:r,counterpartInfo:o};w(A,{status:"completed",result:N})}catch(C){p(N=>N+1),w(A,{status:"error",result:{message:C.message||"An unexpected error occurred."}})}})()},v=r==="prep"?"e.g., Sarah Chen - Product Manager at Innovate Inc. Previously at Acme Corp. Studied Computer Science at State University. Passionate about user-centric design and mentoring...":"e.g., John Doe - Senior Engineer at Google. Alumnus of my university. Found his profile on LinkedIn, interested in his work on AI projects.",x=r==="prep"?"Generate Brief":"Generate Message",S=[{name:"prep",displayName:"Coffee Chat Prep",icon:OM},{name:"reach_out",displayName:"Reach Out Message",icon:LM}];return d.jsx("div",{className:"bg-base-200 py-16 sm:py-24 animate-fade-in flex-grow",children:d.jsxs(un,{className:"max-w-4xl py-0",children:[d.jsxs("div",{className:"text-center mb-0",children:[d.jsx("div",{className:"flex justify-center mb-6",children:d.jsx("div",{className:"flex items-center justify-center h-20 w-20 rounded-full bg-primary/10 mx-auto",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a2 2 0 01-2-2V7a2 2 0 012-2h4M5 8h1.586a1 1 0 01.707.293l2.414 2.414a1 1 0 00.707.293h3.172a1 1 0 00.707-.293l2.414-2.414a1 1 0 01.707-.293H21"})})})}),d.jsx(Tn,{title:"Coffee Chats",subtitle:"Ace your professional networking. Provide details about a person you want to connect withlike their bio, notes, or a LinkedIn profileand our AI coach will generate a tailored outreach message or a personalized brief to ensure you make a great impression."})]}),d.jsx(hx,{items:S,activeTab:r,onTabChange:A=>i(A),layoutId:"coffee-chat-nav"}),d.jsxs(Pt,{children:[d.jsx("label",{htmlFor:"counterpart-info",className:"block text-lg font-semibold text-gray-800",children:"Who are you connecting with?"}),d.jsx("p",{className:"text-gray-500 mt-1 mb-4 text-sm",children:"Paste any information you have: their bio, LinkedIn profile text, your notes, etc. The more detail, the better!"}),d.jsx("textarea",{id:"counterpart-info",rows:12,className:"w-full p-4 border border-gray-300 rounded-lg shadow-sm focus:ring-1 focus:ring-primary focus:border-primary transition bg-gray-50",placeholder:v,value:o,onChange:A=>a(A.target.value),disabled:b}),d.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row justify-end items-center gap-4",children:[d.jsxs("p",{className:"text-sm text-gray-600",children:["This will cost ",d.jsx("span",{className:"font-bold",children:"1 Token"}),"."]}),d.jsx(Nt,{onClick:g,disabled:!o.trim(),isLoading:b,variant:"primary",size:"lg",children:b?"Generating...":x})]})]}),l&&d.jsxs("div",{className:"mt-8 bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md relative flex justify-between items-center shadow-md",role:"alert",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-bold",children:"An error occurred"}),d.jsx("p",{children:l}),l.includes("tokens")&&d.jsx(tt,{to:"/subscription",className:"underline font-semibold",children:"Purchase More Tokens"})]}),d.jsx("button",{onClick:()=>c(null),className:"p-1 rounded-full hover:bg-red-200 transition-colors","aria-label":"Close",children:d.jsx(fs,{className:"h-6 w-6"})})]})]})})},OK=({content:n})=>{const e=t=>{let s=t.replace(/<strong>(.*?)<\/strong>/g,"**$1**");return s=s.replace(/^#### (.*$)/gm,"<h5>$1</h5>").replace(/^### (.*$)/gm,"<h4>$1</h4>").replace(/^## (.*$)/gm,"<h3>$1</h3>").replace(/^-{3,}/gm,'<hr class="my-6" />'),s=s.replace(/^\*\s+(.*)$/gm,'<li class="flex items-start mb-2"><svg class="flex-shrink-0 h-5 w-5 text-primary mt-1 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>$1</span></li>'),s=s.replace(/(?:<li.*?<\/li>\s*)+/gs,i=>`<ul class="list-none p-0">${i}</ul>`),s.split(/\n\s*\n/).map(i=>{const o=i.trim();return o?o.startsWith("<h")||o.startsWith("<ul")||o.startsWith("<hr")?o:`<p>${o.replace(/\n/g,"<br />")}</p>`:""}).join("").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>")};return d.jsx("div",{className:"prose prose-lg max-w-none text-left",dangerouslySetInnerHTML:{__html:e(n)}})},LK=({content:n})=>d.jsx("div",{className:"text-gray-800 whitespace-pre-wrap font-sans leading-relaxed text-base",style:{fontSize:"1.1rem",lineHeight:"1.7"},children:n}),DK=()=>{const n=Bn(),e=Hw(),{content:t,generationMode:s,counterpartInfo:r}=n.state||{};if(!t)return d.jsx(un,{className:"text-center",children:d.jsxs(Pt,{className:"max-w-lg mx-auto",children:[d.jsx("h1",{className:"text-2xl font-bold text-neutral",children:"Oops! Something went wrong."}),d.jsx("p",{className:"mt-4 text-gray-600",children:"The generated content was not found. This can happen if you refresh the page or navigate here directly. Please start a new generation from the prepper page."}),d.jsx(Nt,{onClick:()=>e("/coffee-chats"),variant:"primary",size:"lg",className:"mt-6",children:"Prepare Another"})]})});const i=p=>{p!==s&&e("/coffee-chats",{state:{initialMode:p,initialCounterpartInfo:r}})},o=()=>{e("/coffee-chats",{state:{initialMode:s,initialCounterpartInfo:r}})},a=s==="prep",l=a?"Your Generated Brief":"Your Generated Message",c=a?"Here is the personalized brief to help you prepare for your conversation. Good luck!":"Here is the personalized message to help you land your next coffee chat. Copy and paste it into LinkedIn or an email.",h=a?"Prepare Another Brief":"Create Another Message",f=[{name:"prep",displayName:"Coffee Chat Prep",icon:OM},{name:"reach_out",displayName:"Reach Out Message",icon:LM}];return d.jsx("div",{className:"bg-base-200 py-16 sm:py-24 animate-fade-in flex-grow",children:d.jsxs(un,{className:"max-w-4xl py-0",children:[d.jsx(Tn,{title:l,subtitle:c}),d.jsx(hx,{items:f,activeTab:s,onTabChange:p=>i(p),layoutId:"coffee-chat-result-nav",className:"max-w-md mx-auto"}),d.jsx(Pt,{className:"p-8 sm:p-10 animate-fade-in",children:a?d.jsx(OK,{content:t}):d.jsx(LK,{content:t})}),d.jsx("div",{className:"mt-12 text-center",children:d.jsx(Nt,{onClick:o,variant:"secondary",size:"lg",children:h})})]})})},MK=(n,e)=>({chat:async(t,s,r)=>{try{r==null||r("Thinking...");const i=await Zs("/api/llm/career-chat",{message:t,profile:s.profile,documentHistory:e});return r==null||r(""),i.text}catch(i){throw r==null||r(""),console.error("Career chat failed",i),new Error((i==null?void 0:i.message)||"Unable to reach the career coach right now.")}}}),FK=async(n,e,t)=>Zs("/api/llm/career-path",{profile:n,currentRole:e,targetRole:t}),BK=async(n,e)=>{try{return await Zs("/api/llm/career/videos",{targetRole:n,milestone:e})||[]}catch(t){return console.error("Video recommendations failed; returning none.",t),[]}};function UK(n,e=""){const[t,s]=k.useState(0),[r,i]=k.useState(0),[o,a]=k.useState(n);return o!==n&&(a(n),i(n.startsWith(o)?t:0)),k.useEffect(()=>{const l=n.split(e),c=e===""?2:e===" "?1:.5,h=T6(r,l.length,{duration:c,ease:"easeOut",onUpdate(f){s(Math.floor(f))}});return()=>h.stop()},[r,n,e]),n.split(e).slice(0,t).join(e)}function $K({children:n,variant:e,size:t,className:s,highlight:r,...i}){const o=r!==void 0&&r.trim()!=="",a=typeof n=="string"?n:"";if(!o)return d.jsx(Th,{variant:e||"outline",size:t||"lg",className:En("rounded-full",s),...i,children:n});if(!a)return d.jsx(Th,{variant:e||"ghost",size:t||"sm",className:En("w-full cursor-pointer justify-start rounded-xl py-2","hover:bg-accent",s),...i,children:n});const l=r.trim(),c=a.toLowerCase(),h=l.toLowerCase(),f=c.includes(h);return d.jsx(Th,{variant:e||"ghost",size:t||"sm",className:En("w-full cursor-pointer justify-start gap-0 rounded-xl py-2","hover:bg-accent",s),...i,children:f?(()=>{const p=c.indexOf(h);if(p===-1)return d.jsx("span",{className:"text-muted-foreground whitespace-pre-wrap",children:a});const m=a.substring(p,p+h.length),y=a.substring(0,p),w=a.substring(p+m.length);return d.jsxs(d.Fragment,{children:[y&&d.jsx("span",{className:"text-muted-foreground whitespace-pre-wrap",children:y}),d.jsx("span",{className:"text-primary font-medium whitespace-pre-wrap",children:m}),w&&d.jsx("span",{className:"text-muted-foreground whitespace-pre-wrap",children:w})]})})():d.jsx("span",{className:"text-muted-foreground whitespace-pre-wrap",children:a})})}function VK({children:n,as:e="p",className:t,duration:s=2,spread:r=2}){const i=Gi(e),o=k.useMemo(()=>n.length*r,[n,r]);return d.jsx(i,{className:En("relative inline-block bg-[length:250%_100%,auto] bg-clip-text","text-transparent [--base-color:#a1a1aa] [--base-gradient-color:#000]","[--bg:linear-gradient(90deg,#0000_calc(50%-var(--spread)),var(--base-gradient-color),#0000_calc(50%+var(--spread)))] [background-repeat:no-repeat,padding-box]","dark:[--base-color:#71717a] dark:[--base-gradient-color:#ffffff] dark:[--bg:linear-gradient(90deg,#0000_calc(50%-var(--spread)),var(--base-gradient-color),#0000_calc(50%+var(--spread)))]",t),initial:{backgroundPosition:"100% center"},animate:{backgroundPosition:"0% center"},transition:{repeat:1/0,duration:s,ease:"linear"},style:{"--spread":`${o}px`,backgroundImage:"var(--bg), linear-gradient(var(--base-color), var(--base-color))"},children:n})}const HK=({content:n})=>{const e=UK(n,"");return d.jsx(Bi,{text:e})},Ab=()=>d.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0 ring-4 ring-white",children:d.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-auto text-primary",children:[d.jsx("path",{d:"M6 40 C 18 25, 12 45, 24 24 C 36 3, 30 23, 42 8",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),d.jsx("path",{d:"M10 32 C 16 20, 20 32, 24 24",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]})}),zK=()=>{const n=k.useContext(Ke),e=Hw(),[t,s]=k.useState([]),[r,i]=k.useState(""),[o,a]=k.useState(!1),[l,c]=k.useState(""),h=k.useRef(null),[f,p]=k.useState(null);if(!n)return d.jsx("div",{children:"Loading..."});const{profile:m,setProfile:y,documentHistory:w,addCareerChatSummary:b,backgroundTasks:g,startBackgroundTask:v,updateBackgroundTask:x}=n,S=k.useMemo(()=>MK({},w),[e,y,w]),A=g.some(I=>I.type==="career-path"&&I.status==="running");k.useEffect(()=>{if(m&&t.length===0)if(!m.summary.trim()&&m.experience.length===0&&m.education.length===0&&!m.jobTitle.trim()){const j=`Hi! I'm your Keju Career Coach. To give you the best, most personalized advice, I need to know a bit about you.

Please start by filling out your professional profile. Once that's done, I can help you with anything from crafting the perfect resume to planning your long-term career goals.`,L=d.jsx("button",{onClick:()=>e("/builder"),className:"mt-4 inline-flex items-center justify-center px-4 py-2 bg-white text-brand-blue font-semibold rounded-lg shadow-sm border border-brand-blue/30 hover:bg-brand-blue/10 transition-colors",children:"Go to My Profile"});s([{role:"model",content:j,id:crypto.randomUUID(),action:L,disableAnimation:!0}])}else s([{role:"model",content:`Hi! I'm your Keju Career Coach. I've reviewed your profile and I'm ready to help you navigate your career.

You can ask me anything, such as:
* "How can I improve my resume for a Project Manager role?"
* "Help me prepare for a coffee chat with a senior engineer at Google."
* "What are the steps I should take to become an an investment banker?"

What's on your mind today?`,id:crypto.randomUUID(),disableAnimation:!0}])},[m,e,t.length]),k.useEffect(()=>{var I;(I=h.current)==null||I.scrollIntoView({behavior:"smooth"})},[t,f,o,l]);const C=async I=>{const j=I.trim();if(!j||o||!m)return;const L={role:"user",content:j,id:crypto.randomUUID()};s(D=>[...D,L]),i(""),a(!0),c(""),p(null);try{const D=await S.chat(j,{profile:m},V=>c(V));s(V=>[...V,{role:"model",content:D,id:crypto.randomUUID()}]),b({id:crypto.randomUUID(),title:j.substring(0,50)+(j.length>50?"...":""),timestamp:new Date().toISOString()})}catch(D){console.error("Error chatting with agent:",D);const V={role:"system",content:D.message||"Sorry, I encountered an error. Please try again.",id:crypto.randomUUID()};s(F=>[...F,V])}finally{a(!1),c("")}},N=I=>{I.preventDefault(),C(r)},P=I=>{C(I)},R=()=>{if(!f||!m)return;const{currentRole:I,targetRole:j}=f;p(null),s(D=>[...D,{role:"system",content:`Great! I've started creating your personalized career path to become a ${j}. This will run in the background and I'll notify you when it's ready. Feel free to ask other questions while you wait!`,id:crypto.randomUUID()}]);const L=v({type:"career-path",description:`Career Path to ${j}`});(async()=>{try{const D=await FK(m,I,j),V=[];for(const H of D.path){try{const se=await BK(D.targetRole,H);V.push({...H,recommendedVideos:se})}catch(se){console.error(`Failed to fetch videos for milestone: ${H.milestoneTitle}`,se),V.push({...H,recommendedVideos:[]})}await new Promise(se=>setTimeout(se,500))}const F={...D,path:V};y(H=>H?{...H,careerPath:F}:null),x(L,{status:"completed",result:{success:!0}})}catch(D){console.error("Failed to generate career path:",D),x(L,{status:"error",result:{message:D.message}});const V=`I'm sorry, I ran into an issue while creating your career path: ${D.message}. Please try again.`;s(F=>[...F,{role:"system",content:V,id:crypto.randomUUID()}])}})()},O=async()=>{m&&(p(null),C("I'd rather not create a career path right now. Thanks though!"))},M=()=>{if(!(f!=null&&f.show))return null;const I=f.isReplacing?`I see you have an existing career plan. I can generate a new one to help you become a ${f.targetRole}. This will replace your current path.`:`I can generate a step-by-step career path to help you become a ${f.targetRole}. Would you like me to create one for you?`;return d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx(Ab,{}),d.jsxs("div",{className:"max-w-xl w-full p-4 rounded-xl shadow-sm bg-indigo-50 text-slate-800 border border-indigo-200",children:[d.jsx("p",{className:"font-medium",children:I}),d.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[d.jsx("button",{onClick:R,disabled:A,className:"inline-flex items-center justify-center px-4 py-2 bg-indigo-600 text-white font-semibold rounded-lg shadow-sm hover:bg-indigo-700 disabled:bg-indigo-300 disabled:cursor-not-allowed transition-colors",children:A?d.jsxs(d.Fragment,{children:[d.jsx(fl,{className:"h-5 w-5 mr-2"}),"Creating..."]}):"Create Career Path"}),d.jsx("button",{onClick:O,disabled:A,className:"px-4 py-2 bg-transparent text-slate-600 font-medium rounded-lg hover:bg-indigo-100 disabled:opacity-50 transition-colors",children:"No, thank you"})]})]})]})},Y=t.map(I=>I.role).lastIndexOf("model"),J=!(m!=null&&m.summary.trim())&&((m==null?void 0:m.experience.length)??0)===0&&((m==null?void 0:m.education.length)??0)===0&&!(m!=null&&m.jobTitle.trim()),U=!o&&!f,z=["Help me build my professional profile.","Where should I start?","What can you do for me?"],$=[`Help me create a career path to become a ${(m==null?void 0:m.targetJobTitle)||"Product Manager"}`,`Show me the steps to transition from ${(m==null?void 0:m.jobTitle)||"my current role"} to ${(m==null?void 0:m.targetJobTitle)||"a Senior Role"}`,"What are the key skills for this role?","What is the typical salary range?","Tell me about current market trends."],B=J?z:$;return d.jsxs("div",{className:"flex flex-col h-full bg-base-200",children:[d.jsx(Tn,{title:"Career Coach",subtitle:"Your personal guide for career development.",className:"pt-8 !mb-8"}),d.jsx("div",{className:"flex-grow overflow-y-auto",children:d.jsx("div",{className:"pb-4",children:d.jsxs("div",{className:"space-y-6 max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[t.map((I,j)=>d.jsxs("div",{className:`flex items-start gap-4 ${I.role==="user"?"justify-end":""}`,children:[I.role==="model"&&d.jsx(Ab,{}),I.role==="user"&&d.jsx("div",{className:"order-2 w-10 h-10 rounded-full bg-slate-200 flex items-center justify-center flex-shrink-0 ring-4 ring-white",children:d.jsx(kA,{})}),I.role==="system"?d.jsx("div",{className:"w-full flex justify-center",children:d.jsx("span",{className:"bg-slate-100 text-slate-600 text-xs px-3 py-1 rounded-full",children:I.content})}):d.jsxs("div",{className:`max-w-xl p-4 rounded-xl shadow-sm ${I.role==="user"?"bg-primary text-white rounded-br-none":I.role==="model"?"bg-white text-slate-800 rounded-bl-none":"bg-yellow-100 text-yellow-800 w-full text-center"}`,children:[I.role==="model"&&j===Y&&!o&&!I.disableAnimation?d.jsx(HK,{content:I.content}):d.jsx(Bi,{text:I.content}),I.action&&d.jsx("div",{className:"mt-2",children:I.action})]})]},I.id)),M(),o&&d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx(Ab,{}),d.jsx("div",{className:"max-w-xl p-4 rounded-xl bg-white text-slate-800 border border-slate-100",children:d.jsx(VK,{className:"text-sm font-medium [--base-color:theme(colors.slate.500)] [--base-gradient-color:theme(colors.slate.900)]",duration:1.5,children:l||"Keju is thinking..."})})]}),d.jsx("div",{ref:h})]})})}),d.jsx("div",{className:"bg-white/80 backdrop-blur-md border-t border-slate-200 mt-auto sticky bottom-0",children:d.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[U&&d.jsxs("div",{className:"w-full mb-4 animate-fade-in",children:[d.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider text-center mb-3",children:"Suggested Actions"}),d.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:B.map((I,j)=>d.jsx($K,{size:"sm",onClick:()=>P(I),children:I},j))})]}),A&&d.jsxs("div",{className:"text-sm text-slate-600 flex items-center justify-center mb-2 animate-fade-in",children:[d.jsx(fl,{className:"h-4 w-4 mr-2"}),d.jsx("span",{children:"Generating your career path in the background..."})]}),d.jsxs("form",{onSubmit:N,className:"flex items-start gap-4",children:[d.jsx("textarea",{value:r,onChange:I=>i(I.target.value),onKeyDown:I=>{I.key==="Enter"&&!I.shiftKey&&(I.preventDefault(),N(I))},placeholder:"Ask me anything about your career...",className:"flex-grow p-3 border border-slate-300 rounded-lg resize-y max-h-40 focus:ring-2 focus:ring-primary focus:outline-none transition",rows:1,disabled:o}),d.jsx("button",{type:"submit",disabled:o||!r.trim(),className:"px-6 py-3 bg-primary text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 disabled:bg-slate-400 disabled:cursor-not-allowed transition-colors self-end",children:"Send"})]})]})})]})},GK=({videos:n})=>{const e=k.useRef(null);if(!n||n.length===0)return d.jsx("div",{className:"text-center py-8 text-sm text-slate-500 bg-slate-50 rounded-lg",children:"No relevant learning videos found for this milestone."});const t=s=>{if(e.current){const r=e.current.clientWidth*.9;e.current.scrollBy({left:s==="left"?-r:r,behavior:"smooth"})}};return d.jsxs("div",{className:"relative group",children:[d.jsx("style",{children:".scrollbar-hide::-webkit-scrollbar { display: none; } .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }"}),d.jsx("div",{ref:e,className:"flex overflow-x-auto space-x-4 py-2 scroll-smooth scrollbar-hide snap-x snap-mandatory -mx-2 px-2",children:n.map((s,r)=>d.jsx("div",{className:"snap-start flex-shrink-0 w-64",children:d.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden h-full flex flex-col transition-transform duration-300 hover:-translate-y-1",children:[d.jsxs("a",{href:`https://www.youtube.com/watch?v=${s.videoId}`,target:"_blank",rel:"noopener noreferrer",className:"block relative",children:[d.jsx("img",{src:`https://img.youtube.com/vi/${s.videoId}/hqdefault.jpg`,alt:s.title,className:"w-full h-36 object-cover"}),d.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity",children:d.jsx("svg",{className:"w-12 h-12 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:d.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})})]}),d.jsxs("div",{className:"p-3 flex flex-col flex-grow",children:[d.jsx("h4",{className:"font-bold text-sm text-neutral h-10",title:s.title,children:s.title}),d.jsx("p",{className:"text-xs text-slate-500 mt-1",children:s.channel}),d.jsx("p",{className:"text-xs text-slate-600 mt-2 flex-grow",children:s.description})]})]})},r))}),n.length>2&&d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:()=>t("left"),className:"absolute top-1/2 -left-3 -translate-y-1/2 bg-white rounded-full p-1.5 shadow-md border border-slate-200 text-slate-600 hover:bg-slate-100 opacity-0 group-hover:opacity-100 disabled:opacity-0 transition-opacity z-10","aria-label":"Scroll left",children:d.jsx(l4,{className:"h-5 w-5"})}),d.jsx("button",{onClick:()=>t("right"),className:"absolute top-1/2 -right-3 -translate-y-1/2 bg-white rounded-full p-1.5 shadow-md border border-slate-200 text-slate-600 hover:bg-slate-100 opacity-0 group-hover:opacity-100 disabled:opacity-0 transition-opacity z-10","aria-label":"Scroll right",children:d.jsx(c4,{className:"h-5 w-5"})})]})]})},WK=({category:n})=>{const e={Academics:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[d.jsx("path",{d:"M12 14l9-5-9-5-9 5 9 5z"}),d.jsx("path",{d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-5.998 12.078 12.078 0 01.665-6.479L12 14z"}),d.jsx("path",{strokeLinecap:"round",strokeWidth:2,d:"M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-5.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222 4 2.222V20"})]}),Internships:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),Projects:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeWidth:2,d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})}),Skills:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M12 6a2 2 0 100-4 2 2 0 000 4zm0 7a2 2 0 100-4 2 2 0 000 4zm0 7a2 2 0 100-4 2 2 0 000 4z"})}),Networking:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),Career:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),Extracurriculars:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21v-2a6 6 0 00-12 0v2"})}),Certifications:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeWidth:2,d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})})};return d.jsx("div",{className:"p-1.5 bg-primary/10 text-primary rounded-full",children:e[n]||e.Career})},YK=({data:n,header:e})=>{const t=k.useRef(null),s=k.useRef(null),[r,i]=k.useState(0);k.useEffect(()=>{if(t.current){const c=t.current.getBoundingClientRect();i(c.height)}},[t,n]);const{scrollYProgress:o}=e6({target:s,offset:["start 10%","end 50%"]}),a=Ek(o,[0,1],[0,r]),l=Ek(o,[0,.1],[0,1]);return d.jsxs("div",{className:"w-full bg-white font-sans",ref:s,children:[e,d.jsxs("div",{ref:t,className:"relative max-w-7xl mx-auto pb-20 px-4 sm:px-6 lg:px-8",children:[n.map((c,h)=>d.jsxs("div",{id:`milestone-${h}`,className:"flex justify-start pt-10 md:pt-40 md:gap-10 scroll-mt-24",children:[d.jsxs("div",{className:"sticky flex flex-col md:flex-row z-40 items-center top-40 self-start max-w-xs lg:max-w-sm md:w-full",children:[d.jsx("div",{className:"h-10 absolute left-3 md:left-3 w-10 rounded-full bg-white flex items-center justify-center",children:d.jsx("div",{className:"h-4 w-4 rounded-full bg-slate-200 border border-slate-300 p-2"})}),d.jsx("h3",{className:"hidden md:block text-xl md:pl-20 md:text-5xl font-bold text-slate-500 ",children:c.title})]}),d.jsxs("div",{className:"relative pl-20 pr-4 md:pl-4 w-full",children:[d.jsx("h3",{className:"md:hidden block text-2xl mb-4 text-left font-bold text-slate-500",children:c.title}),c.content," "]})]},h)),d.jsx("div",{style:{height:r+"px"},className:"absolute md:left-8 left-8 top-0 overflow-hidden w-[2px] bg-[linear-gradient(to_bottom,var(--tw-gradient-stops))] from-transparent from-[0%] via-slate-200 to-transparent to-[99%] [mask-image:linear-gradient(to_bottom,transparent_0%,black_10%,black_90%,transparent_100%)] ",children:d.jsx(Gi.div,{style:{height:a,opacity:l},className:"absolute inset-x-0 top-0  w-[2px] bg-gradient-to-t from-blue-500 via-blue-500 to-transparent from-[0%] via-[10%] rounded-full"})})]})]})},KK=({milestones:n})=>{const e=t=>{const s=document.getElementById(`milestone-${t}`);s&&s.scrollIntoView({behavior:"smooth",block:"start"})};return d.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8 pb-12",children:[d.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-8 text-center",children:"Career Path Overview"}),d.jsx("div",{className:"flex items-start",children:n.map((t,s)=>d.jsxs(Jt.Fragment,{children:[d.jsxs("div",{className:"flex flex-col items-center text-center cursor-pointer group w-28 flex-shrink-0",onClick:()=>e(s),children:[d.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-slate-200 border-4 border-slate-50 group-hover:bg-primary group-hover:border-white group-hover:shadow-lg transition-all duration-300",children:d.jsx("span",{className:"text-slate-700 group-hover:text-white font-bold transition-colors duration-300",children:s+1})}),d.jsx("p",{className:"mt-2 text-xs font-semibold text-slate-600 group-hover:text-primary transition-colors duration-300",children:t.title})]}),s<n.length-1&&d.jsx("div",{className:"flex-auto border-t-2 border-dashed border-slate-300 mt-5"})]},s))})]})},qK=()=>{var i;const n=k.useContext(Ke),e=(i=n==null?void 0:n.profile)==null?void 0:i.careerPath,t=()=>d.jsxs(un,{children:[d.jsx(Tn,{title:"Your Career Path"}),d.jsxs("div",{className:"text-center py-20 max-w-2xl mx-auto",children:[d.jsx("div",{className:"flex items-center justify-center h-20 w-20 rounded-full bg-secondary/10 mx-auto mb-6",children:d.jsx(bI,{})}),d.jsx("h2",{className:"text-2xl font-bold text-neutral mt-6",children:"Plan Your Professional Journey"}),d.jsxs("p",{className:"text-gray-600 mt-4",children:["No career path has been generated for this profile yet. Head over to the ",d.jsx(tt,{to:"/career-coach",className:"text-primary font-semibold hover:underline",children:"Career Coach"})," and ask for a plan!"]}),d.jsx("p",{className:"text-gray-500 mt-2 text-sm",children:'Try asking: "How do I become a Senior Product Manager?" or "What are the steps to get a job in finance?"'})]})]});if(!e)return d.jsx("div",{className:"bg-base-200 pt-8 sm:pt-16 animate-fade-in flex-grow",children:t()});const s=e.path.map(o=>({title:o.milestoneTitle,content:d.jsxs("div",{className:"w-full",children:[d.jsx("p",{className:"text-sm font-semibold text-primary uppercase tracking-wider mb-2",children:o.timeframe}),d.jsx("p",{className:"mt-2 text-slate-700",children:o.milestoneDescription}),d.jsx("div",{className:"mt-6 space-y-4",children:o.actionItems.map((a,l)=>d.jsxs("div",{className:"flex items-start gap-4 p-4 bg-slate-50 rounded-lg border border-slate-200",children:[d.jsx(WK,{category:a.category}),d.jsxs("div",{children:[d.jsx("p",{className:"font-semibold text-slate-800",children:a.title}),d.jsx("p",{className:"text-slate-600 text-sm",children:a.description})]})]},l))}),o.recommendedVideos&&o.recommendedVideos.length>0&&d.jsxs("div",{className:"mt-8",children:[d.jsx("h4",{className:"text-lg font-bold text-neutral mb-4",children:"Recommended Learning"}),d.jsx(GK,{videos:o.recommendedVideos})]})]})})),r=d.jsxs("div",{className:"bg-slate-50 border-b border-slate-200",children:[d.jsx("div",{className:"max-w-7xl mx-auto pt-10 md:pt-20 px-4 md:px-8 lg:px-10",children:d.jsx(Tn,{title:"Your Career Path",subtitle:d.jsxs(d.Fragment,{children:["A personalized roadmap from ",d.jsx("span",{className:"font-semibold text-secondary",children:e.currentRole})," to becoming a ",d.jsx("span",{className:"font-semibold text-secondary",children:e.targetRole}),"."]}),className:"!mb-0"})}),d.jsx(KK,{milestones:e.path.map(o=>({title:o.milestoneTitle}))})]});return d.jsx("div",{className:"animate-fade-in flex-grow bg-white",children:d.jsx(YK,{data:s,header:r})})},XK=async n=>(await Zs("/api/llm/interview/story",{brainDump:n})).text,JK=async n=>Zs("/api/llm/interview/questions",{jobDescription:n}),QK=()=>{const n=k.useContext(Ke),{profile:e,tokens:t,setTokens:s,backgroundTasks:r,startBackgroundTask:i,updateBackgroundTask:o}=n,l=Bn().state,[c,h]=k.useState("story"),[f,p]=k.useState({story:"",rapport:"",questions:""}),[m,y]=k.useState({story:"",rapport:"",questions:[]}),[w,b]=k.useState(null),g=r.some(N=>N.type==="interview-prep"&&N.status==="running");k.useEffect(()=>{if(l!=null&&l.result){const{content:N,tool:P}=l.result;h(P),y(R=>({...R,[P]:N}))}},[l]);const v=()=>{if(!f[c].trim()){b(`Please provide input for the ${c} tool.`);return}if(t<1){b("You don't have enough tokens for this.");return}b(null),y(P=>({...P,[c]:c==="questions"?[]:""})),s(P=>P-1);const N=i({type:"interview-prep",description:`Interview Prep: ${x[c].title}`});(async()=>{try{let P;switch(c){case"story":P=await XK(f.story);break;case"rapport":P=await GM(e,f.rapport);break;case"questions":P=await JK(f.questions);break}y(R=>({...R,[c]:P})),o(N,{status:"completed",result:{content:P,tool:c}})}catch(P){s(O=>O+1);const R=P.message||"An unexpected error occurred.";b(R),o(N,{status:"error",result:{message:R}})}})()},x={story:{title:"Shape Interview Story",placeholder:"Brain-dump a story about a project or challenge...",button:"Shape My Story",cost:1},rapport:{title:"Build Rapport with Interviewer",placeholder:"Paste your interviewer's LinkedIn bio or any info you have...",button:"Generate Rapport Builders",cost:1},questions:{title:"Generate Practice Questions",placeholder:"Paste the job description here...",button:"Generate Questions",cost:1}},S=[{name:"story",displayName:"Story Shaper",icon:PY},{name:"rapport",displayName:"Rapport Builder",icon:RY},{name:"questions",displayName:"Practice Questions",icon:kY}],A=()=>{const N=x[c];return d.jsxs("div",{className:"space-y-4",children:[d.jsx("textarea",{rows:12,className:"w-full p-4 border border-gray-300 rounded-lg shadow-sm focus:ring-1 focus:ring-primary focus:border-primary transition bg-gray-50",placeholder:N.placeholder,value:f[c],onChange:P=>p(R=>({...R,[c]:P.target.value})),disabled:g}),d.jsxs("div",{className:"pt-2 flex flex-col sm:flex-row justify-end items-center gap-4",children:[d.jsxs("p",{className:"text-sm text-gray-600",children:["This will cost ",d.jsxs("span",{className:"font-bold",children:[N.cost," Token"]}),"."]}),d.jsx(Nt,{onClick:v,disabled:!f[c].trim(),isLoading:g,variant:"primary",size:"lg",children:g?"Generating...":N.button})]})]})},C=()=>g?d.jsxs("div",{className:"text-center p-8",children:[d.jsx(fl,{className:"h-12 w-12 text-primary mx-auto"}),d.jsx("h3",{className:"text-xl font-bold text-slate-800 mt-4",children:"Generating..."})]}):c==="story"&&m.story?d.jsx(Bi,{text:m.story}):c==="rapport"&&m.rapport?d.jsx(Bi,{text:m.rapport}):c==="questions"&&m.questions.length>0?d.jsx("ul",{className:"space-y-3 list-decimal list-inside",children:m.questions.map((N,P)=>d.jsx("li",{children:N},P))}):d.jsx("p",{className:"text-slate-500 text-center py-8",children:"Your results will appear here."});return d.jsx("div",{className:"bg-base-200 py-16 sm:py-24 animate-fade-in flex-grow",children:d.jsxs(un,{className:"py-0",children:[d.jsx(Tn,{title:"Interview Prep Center",subtitle:"Walk into any interview with confidence. Use our AI tools to structure your stories, prepare questions, and build rapport."}),d.jsx(hx,{items:S,activeTab:c,onTabChange:N=>h(N),layoutId:"interview-prep-nav"}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-start",children:[d.jsx(Pt,{children:A()}),d.jsxs(Pt,{className:"min-h-[30rem]",children:[w&&!g&&d.jsxs("div",{className:"mb-4 bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md relative flex justify-between items-center shadow-sm",role:"alert",children:[d.jsx("p",{children:w}),d.jsx("button",{onClick:()=>b(null),className:"p-1","aria-label":"Close",children:d.jsx(fs,{})})]}),C()]})]})]})})},ZK=()=>{const n=k.useContext(Ke);if(!n)return d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:"Loading..."});const{documentHistory:e}=n,t=r=>r.companyName&&r.jobTitle?`Application for ${r.companyName}, ${r.jobTitle}`:`Application for ${r.jobTitle||r.companyName||"Untitled Role"}`,s=()=>{if(!e.length)return;const r=["Date","Company","Job Title","Fit Score","Resume Generated","Cover Letter Generated"],i=e.map(c=>{var h;return[new Date(c.generatedAt).toLocaleDateString(),c.companyName||"N/A",c.jobTitle||"N/A",(h=c.analysisResult)!=null&&h.fitScore?`${c.analysisResult.fitScore}%`:"",c.resumeContent?"Yes":"No",c.coverLetterContent?"Yes":"No"]}),o=[r.join(","),...i.map(c=>c.map(h=>`"${String(h).replace(/"/g,'""')}"`).join(","))].join(`
`),a=new Blob([o],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a");if(l.download!==void 0){const c=URL.createObjectURL(a);l.setAttribute("href",c),l.setAttribute("download",`keju_history_${new Date().toISOString().split("T")[0]}.csv`),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)}};return d.jsxs(un,{children:[d.jsx(Tn,{title:"Generated Documents",subtitle:"Here you can find all the resumes and cover letters you've generated."}),e.length>0?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"flex justify-end mb-4 animate-fade-in",children:d.jsx(Nt,{onClick:s,variant:"outline",size:"sm",leftIcon:d.jsx(xI,{}),children:"Export History to CSV"})}),d.jsx(Pt,{children:d.jsx("ul",{role:"list",className:"divide-y divide-gray-200",children:e.map(r=>d.jsxs("li",{className:"flex flex-wrap items-center justify-between gap-x-6 gap-y-4 py-5 sm:flex-nowrap",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-semibold leading-6 text-gray-900",children:d.jsx(tt,{to:"/generate/results",state:{generatedContent:{resume:r.resumeContent,coverLetter:r.coverLetterContent},analysisResult:r.analysisResult,parsedResume:r.parsedResume,parsedCoverLetter:r.parsedCoverLetter},className:"hover:underline",children:t(r)})}),d.jsx("div",{className:"mt-1 flex items-center gap-x-2 text-xs leading-5 text-gray-500",children:d.jsx("p",{children:d.jsxs("time",{dateTime:r.generatedAt,children:["Generated on ",new Date(r.generatedAt).toLocaleString()]})})})]}),d.jsx("dl",{className:"flex w-full flex-none justify-between gap-x-8 sm:w-auto",children:d.jsxs("div",{className:"flex space-x-2",children:[r.resumeContent&&d.jsx("dd",{children:d.jsx("span",{className:"capitalize inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset bg-blue-50 text-blue-700 ring-blue-600/20",children:"Resume"})}),r.coverLetterContent&&d.jsx("dd",{children:d.jsx("span",{className:"capitalize inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset bg-green-50 text-green-700 ring-green-600/20",children:"Cover Letter"})})]})})]},r.id))})})]}):d.jsxs(Pt,{className:"text-center py-16",children:[d.jsx("div",{className:"flex items-center justify-center h-16 w-16 rounded-full bg-slate-100 mx-auto",children:d.jsx(_I,{})}),d.jsx("h3",{className:"mt-4 text-lg font-semibold text-gray-900",children:"No Documents Yet"}),d.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Your generated resumes and cover letters will appear here."}),d.jsx("div",{className:"mt-6",children:d.jsx(Nt,{as:"link",to:"/generate",variant:"primary",children:"Tailor Your First Application"})})]})]})},e9=({toast:n,onDismiss:e})=>n?d.jsx("div",{className:"fixed top-24 right-6 bg-slate-900 text-white py-3 px-5 rounded-lg shadow-2xl z-[60] animate-slide-in-up",role:"status",children:n.message}):null,t9=async(n,e)=>Zs("/api/llm/analysis/application-fit",{resumeText:n,jobDescription:e}),n9=async(n,e)=>Zs("/api/llm/analysis/mentor-match",{topic:n,facultyList:e}),o0=({title:n,children:e})=>d.jsxs(Pt,{children:[d.jsx("h3",{className:"text-xl font-bold text-slate-800 border-b border-slate-200 pb-3 mb-4",children:n}),d.jsx("div",{className:"prose prose-slate max-w-none",children:e})]}),s9=()=>{var A;const n=k.useContext(Ke),{profile:e,tokens:t,setTokens:s,backgroundTasks:r,startBackgroundTask:i,updateBackgroundTask:o}=n,l=(A=Bn().state)==null?void 0:A.result,[c,h]=k.useState(""),[f,p]=k.useState(""),[m,y]=k.useState(null),[w,b]=k.useState(l||null),g=r.some(C=>C.type==="application-analysis"&&C.status==="running");k.useEffect(()=>{l&&b(l)},[l]);const v=async C=>{var P;const N=(P=C.target.files)==null?void 0:P[0];if(N){try{const R=await ux(N);h(R)}catch(R){y(R.message)}C.target.value=""}},x=k.useCallback(()=>{if(e){const C=["summary","experience","education","projects","skills","certifications","languages"],N=TE(e,e.sectionOrder||C);h(N)}},[e]),S=k.useCallback(()=>{if(!c.trim()||!f.trim()){y("Please provide both your resume and the job description.");return}if(t<2){y("You need at least 2 tokens for this analysis.");return}y(null),b(null),s(N=>N-2);const C=i({type:"application-analysis",description:"Application Fit Analysis"});(async()=>{try{const N=await t9(c,f);b(N),o(C,{status:"completed",result:N})}catch(N){s(P=>P+2),o(C,{status:"error",result:{message:N.message||"An unexpected error occurred during analysis."}}),y(N.message||"An unexpected error occurred during analysis.")}})()},[c,f,t,s,i,o]);return d.jsx("div",{className:"bg-base-200 py-16 sm:py-24 animate-fade-in",children:d.jsxs(un,{className:"py-0",children:[d.jsx(Tn,{title:"Application Strength Analysis",subtitle:"Compare your resume against a job description to see your fit percentage, identify skill gaps, and get tips to improve your application."}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[d.jsxs(Pt,{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-lg font-semibold text-gray-800",children:"Your Resume"}),d.jsx("p",{className:"text-gray-500 mt-1 mb-4 text-sm",children:"Autofill from your active profile, paste resume text, or upload a file."}),d.jsxs("div",{className:"flex space-x-2 mb-2",children:[d.jsx(Nt,{onClick:x,leftIcon:d.jsx(o4,{}),children:"Autofill from Profile"}),d.jsx(Nt,{onClick:()=>{var C;return(C=document.getElementById("resume-upload"))==null?void 0:C.click()},leftIcon:d.jsx(CA,{}),type:"button",children:"Upload File"})]}),d.jsx("label",{htmlFor:"resume-upload",className:"sr-only",children:"Upload resume file"}),d.jsx("input",{type:"file",id:"resume-upload",className:"hidden",onChange:v,accept:".pdf,.txt,.md"}),d.jsx("textarea",{rows:15,className:"w-full p-4 border border-gray-300 rounded-lg shadow-sm focus:ring-1 focus:ring-primary focus:border-primary transition bg-gray-50",placeholder:"Paste your full resume text here...",value:c,onChange:C=>h(C.target.value),disabled:g})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-lg font-semibold text-gray-800",children:"Job Description"}),d.jsx("p",{className:"text-gray-500 mt-1 mb-4 text-sm",children:"Paste the full job description you are targeting."}),d.jsx("textarea",{rows:15,className:"w-full p-4 border border-gray-300 rounded-lg shadow-sm focus:ring-1 focus:ring-primary focus:border-primary transition bg-gray-50",placeholder:"Paste the job description here...",value:f,onChange:C=>p(C.target.value),disabled:g})]}),d.jsxs("div",{className:"pt-4 flex flex-col sm:flex-row justify-end items-center gap-4",children:[d.jsxs("p",{className:"text-sm text-gray-600",children:["This analysis costs ",d.jsx("span",{className:"font-bold",children:"2 Tokens"}),"."]}),d.jsx(Nt,{onClick:S,disabled:!c.trim()||!f.trim(),isLoading:g,variant:"primary",size:"lg",children:g?"Analyzing...":"Analyze My Fit"})]})]}),d.jsxs("div",{className:"space-y-8",children:[m&&!g&&d.jsxs("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md relative flex justify-between items-center shadow-md",role:"alert",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-bold",children:"An error occurred"}),d.jsx("p",{children:m})]}),d.jsx("button",{onClick:()=>y(null),className:"p-1 rounded-full hover:bg-red-200 transition-colors","aria-label":"Close",children:d.jsx(fs,{className:"h-6 w-6"})})]}),g&&d.jsxs(Pt,{className:"text-center",children:[d.jsx(fl,{className:"h-12 w-12 text-primary mx-auto"}),d.jsx("h3",{className:"text-xl font-bold text-slate-800 mt-4",children:"Analyzing your documents..."}),d.jsx("p",{className:"text-slate-600 mt-2",children:"This may take a moment."})]}),w&&!g&&d.jsxs("div",{className:"space-y-8 animate-fade-in",children:[d.jsx(o0,{title:"Fit Score",children:d.jsxs("div",{className:"text-center",children:[d.jsxs("p",{className:"text-7xl font-extrabold text-primary",children:[w.fitScore,"%"]}),d.jsx("p",{className:"text-lg text-slate-600 font-semibold mt-2",children:"Match"})]})}),d.jsx(o0,{title:"Gap Analysis",children:d.jsx(Bi,{text:w.gapAnalysis})}),d.jsx(o0,{title:"Keyword Optimization",children:d.jsx(Bi,{text:w.keywordOptimization})}),d.jsx(o0,{title:"Impact Enhancer",children:d.jsx(Bi,{text:w.impactEnhancer})})]})]})]})]})})},r9=()=>{var x;const n=k.useContext(Ke),{tokens:e,setTokens:t,backgroundTasks:s,startBackgroundTask:r,updateBackgroundTask:i}=n,a=(x=Bn().state)==null?void 0:x.result,[l,c]=k.useState(""),[h,f]=k.useState(""),[p,m]=k.useState(null),[y,w]=k.useState(a||null),b=s.some(S=>S.type==="mentor-match"&&S.status==="running");k.useEffect(()=>{a&&w(a)},[a]);const g=async S=>{var C;const A=(C=S.target.files)==null?void 0:C[0];if(A){try{const N=await ux(A);f(N)}catch(N){m(N.message)}S.target.value=""}},v=k.useCallback(()=>{if(!l.trim()||!h.trim()){m("Please provide both your thesis topic and the list of faculty.");return}if(e<2){m("You need at least 2 tokens for this analysis.");return}m(null),w(null),t(A=>A-2);const S=r({type:"mentor-match",description:"Mentor Matcher Analysis"});(async()=>{try{const A=await n9(l,h);w(A),i(S,{status:"completed",result:A})}catch(A){t(N=>N+2);const C=A.message||"An unexpected error occurred during analysis.";m(C),i(S,{status:"error",result:{message:C}})}})()},[l,h,e,t,r,i]);return d.jsx("div",{className:"bg-base-200 py-16 sm:py-24 animate-fade-in",children:d.jsxs(un,{className:"py-0",children:[d.jsx(Tn,{title:"Mentor Matcher",subtitle:"Find the perfect first reader for your thesis. Provide your research topic and a list of faculty, and our AI will find the best fit."}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-start",children:[d.jsxs(Pt,{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-lg font-semibold text-gray-800",children:"Your Thesis Topic"}),d.jsx("p",{className:"text-gray-500 mt-1 mb-4 text-sm",children:"Provide your thesis title, abstract, or a brief description of your research."}),d.jsx("textarea",{rows:8,className:"w-full p-4 border border-gray-300 rounded-lg shadow-sm focus:ring-1 focus:ring-primary focus:border-primary transition bg-gray-50",placeholder:"e.g., The Impact of Cognitive Biases on Financial Decision-Making in Volatile Markets...",value:l,onChange:S=>c(S.target.value),disabled:b})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-lg font-semibold text-gray-800",children:"Potential Mentors"}),d.jsx("p",{className:"text-gray-500 mt-1 mb-4 text-sm",children:"Paste the list of faculty members and their bios, or upload a file."}),d.jsx(Nt,{onClick:()=>{var S;return(S=document.getElementById("faculty-upload"))==null?void 0:S.click()},leftIcon:d.jsx(CA,{}),type:"button",children:"Upload File"}),d.jsx("label",{htmlFor:"faculty-upload",className:"sr-only",children:"Upload faculty list"}),d.jsx("input",{type:"file",id:"faculty-upload",className:"hidden",onChange:g,accept:".pdf,.txt,.md"}),d.jsx("textarea",{rows:15,className:"w-full p-4 border border-gray-300 rounded-lg shadow-sm focus:ring-1 focus:ring-primary focus:border-primary transition bg-gray-50 mt-2",placeholder:"e.g., Dr. Ada Lovelace - Professor of Cognitive Science, research focuses on computational models of memory...",value:h,onChange:S=>f(S.target.value),disabled:b})]}),d.jsxs("div",{className:"pt-4 flex flex-col sm:flex-row justify-end items-center gap-4",children:[d.jsxs("p",{className:"text-sm text-gray-600",children:["This analysis costs ",d.jsx("span",{className:"font-bold",children:"2 Tokens"}),"."]}),d.jsx(Nt,{onClick:v,disabled:!l.trim()||!h.trim(),isLoading:b,variant:"primary",size:"lg",children:b?"Finding Matches...":"Find Best Matches"})]})]}),d.jsxs("div",{className:"sticky top-24",children:[p&&!b&&d.jsxs("div",{className:"mb-4 bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md relative flex justify-between items-center shadow-md",role:"alert",children:[d.jsx("p",{children:p}),d.jsx("button",{onClick:()=>m(null),className:"p-1","aria-label":"Close",children:d.jsx(fs,{})})]}),b?d.jsxs(Pt,{className:"text-center",children:[d.jsx(fl,{className:"h-12 w-12 text-primary mx-auto"}),d.jsx("h3",{className:"text-xl font-bold text-slate-800 mt-4",children:"Analyzing your inputs..."})]}):y?d.jsxs(Pt,{className:"space-y-6 animate-fade-in",children:[d.jsx("h2",{className:"text-2xl font-bold text-slate-900 border-b border-slate-200 pb-4",children:"Top Mentor Matches"}),y.map((S,A)=>d.jsxs("div",{className:"pt-4 border-t border-slate-100 first:border-t-0 first:pt-0",children:[d.jsxs("div",{className:"flex justify-between items-baseline",children:[d.jsxs("h3",{className:"text-xl font-semibold text-primary",children:[A+1,". ",S.name]}),d.jsxs("span",{className:"text-lg font-bold text-slate-700 bg-slate-100 px-3 py-1 rounded-full",children:[S.score,"% Match"]})]}),d.jsx("p",{className:"mt-2 text-slate-600",children:S.reasoning})]},A))]}):d.jsx(Pt,{className:"text-center",children:d.jsx("p",{className:"text-slate-500",children:"Your ranked matches will appear here."})})]})]})]})})},i9="http://localhost:8000",o9=async()=>{const n=await(async()=>{var s;const t={"Content-Type":"application/json"};if(Yt){const{data:r}=await Yt.auth.getSession(),i=(s=r.session)==null?void 0:s.access_token;i&&(t.Authorization=`Bearer ${i}`)}return t})(),e=await fetch(`${i9}/api/workspace`,{headers:n});if(!e.ok)throw new Error(await e.text());return e.json()},a0=async n=>{await Zs("/api/workspace",n)},l0=n=>({id:crypto.randomUUID(),name:n,fullName:"",jobTitle:"",email:"",phone:"",website:"",location:"",linkedin:"",github:"",summary:"",education:[],experience:[],projects:[],technicalSkills:[],softSkills:[],tools:[],languages:[],certifications:[],interests:[],customSections:[],additionalInformation:"",industry:"",experienceLevel:"entry",vibe:"",selectedResumeTemplate:"classic",selectedCoverLetterTemplate:"professional",targetJobTitle:"",companyName:"",companyKeywords:"",keySkillsToHighlight:"",careerPath:null}),Ke=k.createContext(null),a9=120*1e3,l9=({children:n,onToast:e})=>{const[t,s]=k.useState(null),[r,i]=k.useState(null);k.useEffect(()=>{(async()=>{try{const z=await(Yt==null?void 0:Yt.auth.getSession());if(!!(z!=null&&z.data.session))try{const I=await o9();if(I.profile)s(I.profile),i(I.profile);else{const j=l0("My First Profile");s(j),i(j)}f(Array.isArray(I.documentHistory)?I.documentHistory:[]),m(Array.isArray(I.careerChatHistory)?I.careerChatHistory:[]),a(typeof I.tokens=="number"?I.tokens:65);return}catch(I){console.warn("Workspace fetch failed, falling back to localStorage.",I)}const B=localStorage.getItem("userProfile");if(B){const I=JSON.parse(B);s(I),i(I)}else{const I=l0("My First Profile");s(I),i(I)}}catch(z){console.error("Failed to load profile, starting fresh.",z);const $=l0("My First Profile");s($)}})()},[]);const[o,a]=k.useState(65),[l,c]=k.useState(!1),[h,f]=k.useState(()=>{try{const U=localStorage.getItem("documentHistory");if(!U)return[];const z=JSON.parse(U);return Array.isArray(z)&&z.length>0&&z[0].hasOwnProperty("type")?(localStorage.removeItem("documentHistory"),[]):Array.isArray(z)?z:[]}catch(U){return console.error("Failed to parse document history from localStorage",U),localStorage.removeItem("documentHistory"),[]}}),[p,m]=k.useState(()=>{try{const U=localStorage.getItem("careerChatHistory");return U?JSON.parse(U):[]}catch(U){return console.error("Failed to parse career chat history from localStorage",U),localStorage.removeItem("careerChatHistory"),[]}}),[y,w]=k.useState(!1),[b,g]=k.useState(null),v=k.useCallback(U=>{a(z=>{const $=typeof U=="function"?U(z):U;return localStorage.setItem("tokens",JSON.stringify($)),(async()=>{try{const B=await(Yt==null?void 0:Yt.auth.getSession());B!=null&&B.data.session&&await a0({profile:t??null,documentHistory:h,careerChatHistory:p,tokens:$})}catch(B){console.warn("Failed to sync tokens",B)}})(),$})},[t,h,p]),[x,S]=k.useState(()=>{try{const U=localStorage.getItem("backgroundTasks");return(U?JSON.parse(U):[]).filter($=>$.status!=="running")}catch{return[]}});k.useEffect(()=>{localStorage.setItem("backgroundTasks",JSON.stringify(x))},[x]);const A=k.useCallback(()=>{if(!t)return!1;try{return localStorage.setItem("userProfile",JSON.stringify(t)),i(t),(async()=>{try{const U=await(Yt==null?void 0:Yt.auth.getSession());U!=null&&U.data.session&&await a0({profile:t,documentHistory:h,careerChatHistory:p,tokens:o})}catch(U){console.warn("Failed to sync workspace",U)}})(),console.log("Profile saved to localStorage."),!0}catch(U){return console.error("Failed to save profile",U),!1}},[t,h,p,o]),C=k.useCallback(U=>{f(z=>{const B=[{...U,id:crypto.randomUUID(),generatedAt:new Date().toISOString()},...z].slice(0,20);try{localStorage.setItem("documentHistory",JSON.stringify(B)),(async()=>{try{const I=await(Yt==null?void 0:Yt.auth.getSession());I!=null&&I.data.session&&await a0({profile:t??null,documentHistory:B,careerChatHistory:p,tokens:o})}catch(I){console.warn("Failed to sync document history",I)}})()}catch(I){console.error("Failed to save document history to localStorage",I)}return B})},[t,p,o]),N=k.useCallback(U=>{m(z=>{const $=[U,...z].slice(0,20);try{localStorage.setItem("careerChatHistory",JSON.stringify($)),(async()=>{try{const B=await(Yt==null?void 0:Yt.auth.getSession());B!=null&&B.data.session&&await a0({profile:t??null,documentHistory:h,careerChatHistory:$,tokens:o})}catch(B){console.warn("Failed to sync chat history",B)}})()}catch(B){console.error("Failed to save career chat history to localStorage",B)}return $})},[t,h,o]),P=k.useCallback(U=>{var j;if(!U||!t)return;w(!0),g(null);const z=2,$=["application/pdf","text/plain","text/markdown"],B=[".pdf",".txt",".md"];if(U.size>z*1024*1024){g(`File too large: Please upload a file smaller than ${z}MB.`),w(!1);return}const I=`.${(j=U.name.split(".").pop())==null?void 0:j.toLowerCase()}`;if(!$.includes(U.type)&&!B.includes(I)){g(`Unsupported file type: '${I}'. Please upload a PDF, TXT, or MD file.`),w(!1);return}(async()=>{try{const L=await uY(U);s(D=>{if(!D)return null;const V={...L,name:D.name,id:D.id,selectedResumeTemplate:D.selectedResumeTemplate,selectedCoverLetterTemplate:D.selectedCoverLetterTemplate};return{...l0(D.name),...V,id:D.id}})}catch(L){g(L.message||"An unexpected error occurred during parsing.")}finally{w(!1)}})()},[t]),R=k.useCallback(U=>{const z=crypto.randomUUID(),$={...U,id:z,status:"running",result:null,viewed:!1,createdAt:new Date().toISOString()};return S(B=>[$,...B]),e(`${U.description} is now generating...`),z},[e]),O=k.useCallback((U,z)=>{S($=>$.map(B=>B.id===U?{...B,...z}:B))},[]),M=k.useCallback(U=>{S(z=>z.map($=>$.id===U?{...$,viewed:!0}:$))},[]),Y=k.useCallback(()=>{S(U=>U.map(z=>({...z,viewed:!0})).filter(z=>z.status==="running"))},[]);k.useEffect(()=>{const U=setTimeout(()=>{t&&JSON.stringify(t)!==JSON.stringify(r)&&A()},a9);return()=>{clearTimeout(U)}},[t,r,A]);const J=k.useMemo(()=>({profile:t,setProfile:s,saveProfile:A,lastSavedProfile:r,tokens:o,setTokens:v,isFetchingUrl:l,setIsFetchingUrl:c,documentHistory:h,addDocumentToHistory:C,careerChatHistory:p,addCareerChatSummary:N,isParsing:y,parsingError:b,parseResumeInBackground:P,clearParsingError:()=>g(null),backgroundTasks:x,startBackgroundTask:R,updateBackgroundTask:O,markTaskAsViewed:M,clearAllNotifications:Y}),[t,s,A,r,o,v,l,c,h,C,p,N,y,b,P,x,R,O,M,Y]);return t?d.jsx(Ke.Provider,{value:J,children:n}):d.jsx("div",{className:"flex items-center justify-center min-h-screen bg-base-200",children:"Loading Profile..."})},c9=()=>{const n=Bn(),t=["/","/login","/how-it-works","/subscription","/privacy","/terms","/gdpr"].includes(n.pathname),s=d.jsxs(gU,{children:[d.jsx(Lt,{path:"/",element:d.jsx(wK,{})}),d.jsx(Lt,{path:"/how-it-works",element:d.jsx(bK,{})}),d.jsx(Lt,{path:"/builder",element:d.jsx(B6,{})}),d.jsx(Lt,{path:"/generate",element:d.jsx(gY,{})}),d.jsx(Lt,{path:"/generated-documents",element:d.jsx(ZK,{})}),d.jsx(Lt,{path:"/generate/results",element:d.jsx(IY,{})}),d.jsx(Lt,{path:"/subscription",element:d.jsx(DY,{})}),d.jsx(Lt,{path:"/account",element:d.jsx(MY,{})}),d.jsx(Lt,{path:"/login",element:d.jsx(FY,{})}),d.jsx(Lt,{path:"/privacy",element:d.jsx(jY,{})}),d.jsx(Lt,{path:"/terms",element:d.jsx(OY,{})}),d.jsx(Lt,{path:"/gdpr",element:d.jsx(LY,{})}),d.jsx(Lt,{path:"/coffee-chats",element:d.jsx(jK,{})}),d.jsx(Lt,{path:"/coffee-chats/result",element:d.jsx(DK,{})}),d.jsx(Lt,{path:"/career-coach",element:d.jsx(zK,{})}),d.jsx(Lt,{path:"/career-path",element:d.jsx(qK,{})}),d.jsx(Lt,{path:"/interview-prep",element:d.jsx(QK,{})}),d.jsx(Lt,{path:"/application-analysis",element:d.jsx(s9,{})}),d.jsx(Lt,{path:"/mentor-matcher",element:d.jsx(r9,{})})]});return t?d.jsxs("div",{className:"flex flex-col bg-base-200 min-h-screen",children:[d.jsx(UY,{}),d.jsx("main",{className:"flex-grow flex flex-col min-h-[calc(100vh-65px)]",children:s}),d.jsx(VY,{})]}):d.jsxs("div",{className:"flex flex-col md:flex-row bg-base-200 h-screen w-full",children:[d.jsx(RK,{}),d.jsx("div",{className:"flex flex-col flex-1 overflow-y-auto",children:d.jsx("main",{className:"flex-grow flex flex-col w-full",children:s})})]})},u9=()=>{const[n,e]=k.useState(null),t=s=>{e({message:s,id:crypto.randomUUID()}),setTimeout(()=>e(null),5e3)};return d.jsx(l9,{onToast:t,children:d.jsxs(BU,{children:[d.jsx(e9,{toast:n,onDismiss:()=>e(null)}),d.jsx(c9,{})]})})},WM=document.getElementById("root");if(!WM)throw new Error("Could not find root element to mount to");const h9=Tb.createRoot(WM);h9.render(d.jsx(Jt.StrictMode,{children:d.jsx(u9,{})}));
